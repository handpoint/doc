<!doctype html>
<html class="docs-version-Android SDK 6.4.1" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<link rel="alternate" type="application/rss+xml" href="/doc/blog/rss.xml" title="Handpoint RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/doc/blog/atom.xml" title="Handpoint Atom Feed"><title data-react-helmet="true">Integration Guide | Handpoint</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://www.handpoint.com/doc/android/Android SDK 6.4.1/androidintegrationguide"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="Android SDK 6.4.1"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-android-Android SDK 6.4.1"><meta data-react-helmet="true" property="og:title" content="Integration Guide | Handpoint"><meta data-react-helmet="true" name="description" content="We support the following connection methods"><meta data-react-helmet="true" property="og:description" content="We support the following connection methods"><link data-react-helmet="true" rel="icon" href="/doc/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://www.handpoint.com/doc/android/Android SDK 6.4.1/androidintegrationguide"><link data-react-helmet="true" rel="alternate" href="https://www.handpoint.com/doc/android/Android SDK 6.4.1/androidintegrationguide" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://www.handpoint.com/doc/android/Android SDK 6.4.1/androidintegrationguide" hreflang="x-default"><link rel="stylesheet" href="/doc/assets/css/styles.fc1f46f8.css">
<link rel="preload" href="/doc/assets/js/runtime~main.7507c79a.js" as="script">
<link rel="preload" href="/doc/assets/js/main.4245f262.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/doc/"><div class="navbar__logo"><img src="/doc/img/handpoint-logo-hvitt.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ" width="90"><img src="/doc/img/handpoint-logo-hvitt.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m" width="90"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/doc/android/Android SDK 6.4.1/androidintroduction">Android SDK 6.4.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/doc/android/androidintegrationguide">Android SDK 6.5.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/doc/android/Android SDK 6.4.1/androidintegrationguide">Android SDK 6.4.1</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/doc/ios/iosintroduction">iOS SDK 4.0.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/doc/ios/iosintroduction">iOS SDK 4.0.1</a></li><li><a class="dropdown__link" href="/doc/ios/iOS SDK 4.0.0/iosintroduction">iOS SDK 4.0.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/doc/windows/windowsintroduction">Windows SDK 3.1.7</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/doc/windows/windowsintroduction">Windows SDK 3.1.7</a></li><li><a class="dropdown__link" href="/doc/windows/Windows SDK 3.1.4/windowsintroduction">Windows SDK 3.1.4</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/doc/javascript/javascriptintroduction">JavaScript SDK 6.0.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/doc/javascript/javascriptintroduction">JavaScript SDK 6.0.1</a></li><li><a class="dropdown__link" href="/doc/javascript/JavaScript SDK 6.0.0/javascriptintroduction">JavaScript SDK 6.0.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/doc/restapi/restintroduction">REST API 2.4.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/doc/restapi/restintroduction">REST API 2.4.0</a></li><li><a class="dropdown__link" href="/doc/restapi/REST API 2.3.0/restintroduction">REST API 2.3.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/doc/express/expressintroduction">Express SDK 1.3</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/doc/express/expressintroduction">Express SDK 1.3</a></li><li><a class="dropdown__link" href="/doc/express/Express SDK 1.2/expressintroduction">Express SDK 1.2</a></li></ul></div><a href="https://www.npmjs.com/package/cordova-plugin-handpoint" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Cordova Plugin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/thescruba/xamarin-handpoint-bindings" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Xamarin SDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.handpoint.com/docs/txnfeedapi/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>TXN Feed API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://handpoint.atlassian.net/wiki/spaces/PD/overview?homepageId=5898250" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>FAQ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://status.handpoint.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-statuspage-icon" aria-label="Status Page"></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/android/Android SDK 6.4.1/androidintroduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/android/Android SDK 6.4.1/androidreleasenotes">Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/android/Android SDK 6.4.1/androidmigrationguide">Migration from 5.X</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/android/Android SDK 6.4.1/androidapioverview">API overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/doc/android/Android SDK 6.4.1/androidintegrationguide">Integration Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/android/Android SDK 6.4.1/androidtransactions">Transactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/android/Android SDK 6.4.1/androiddevicemanagement">Device management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/android/Android SDK 6.4.1/androideventsubscribers">Events subscribers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/android/Android SDK 6.4.1/androideventlisteners">Events listeners</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/android/Android SDK 6.4.1/androidobjects">Objects</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Handpoint<!-- --> <b>Android SDK 6.4.1</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/doc/android/androidintegrationguide">latest version</a></b> (<!-- -->Android SDK 6.5.0<!-- -->).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->Android SDK 6.4.1</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Integration Guide</h1></header><p><strong>We support the following connection methods</strong> </p><ol><li><strong><a href="#8">Android Payment Terminal</a></strong></li><li><strong><a href="#9">Bluetooth</a></strong></li><li><strong><a href="#10">Cloud</a></strong></li></ol><h2 class="anchor anchorWithStickyNavbar_31ik" id="8">Android Terminal Native Integration<a aria-hidden="true" class="hash-link" href="#8" title="Direct link to heading">â€‹</a></h2><p> <strong>Introduction</strong></p><p>This tutorial is guiding you through all the required steps to create a basic payment application for Android Payment devices such as PAX and Telpo.</p><p>The new generation of Handpoint SDK&#x27;s is designed to make your life easier. Simple and created for humans, it does not require any specific knowledge of the payment industry to be able to start accepting credit/debit card transactions.</p><p>At Handpoint we take care of securing every transaction so you donÂ´t have to worry about it while creating your application. We encrypt data from the payment terminal to the bank with our point-to-point encryption solution. Our platform is always up to the latest PCI-DSS security requirements.</p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>Please, start an operation (sale,refund etc.) ONLY if you have received the <strong>InitialisationComplete</strong> message from the <strong>currentTransactionStatus</strong> method</p></div></div><p><strong>Let&#x27;s start programming!</strong></p><p><strong>1. Modify the AndroidManifest.xml</strong></p><p>We <strong>strongly</strong> recommend you add the following to your main <strong><code>&lt;activity&gt;</code></strong>:</p><div class="codeBlockContainer_K1bP language-groovy"><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">android:launchMode=&quot;singleTask&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>2. In the gradle.build</strong></p><div class="codeBlockContainer_K1bP language-groovy"><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">android {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    defaultConfig {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        minSdkVersion 22 //Required to support all PAX &amp; Telpo models</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        targetSdkVersion 29</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        multiDexEnabled true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    packagingOptions {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        pickFirst &#x27;**/*.so&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        exclude &#x27;META-INF/*&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        exclude &#x27;**/anim/*.xml&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        exclude &#x27;**/layout/*.xml&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        exclude &#x27;resources.arsc&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        exclude &#x27;AndroidManifest.xml&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>3. Create a Java class</strong></p><p>Create a new java class called HandpointDelegate.java and include com.handpoint.api.* as a dependency:</p><div class="codeBlockContainer_K1bP language-java"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package com.yourpackage.name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.HandpointCredentials;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.Hapi;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.HapiFactory;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.ConnectionMethod;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.ConnectionStatus;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.Currency;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.Device;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.Events;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.SignatureRequest;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.StatusInfo;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.TipConfiguration;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.TransactionResult;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.agreements.Acquirer;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.agreements.Credential;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.agreements.MerchantAuth;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.options.SaleOptions;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.math.BigInteger;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Arrays;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//Check all the events available in the Events interface.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//If you want to subscribe to more events, just add to the list of implemented interfaces.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class HandpointDelegate implements Events.Required, Events.ConnectionStatusChanged, Events.CurrentTransactionStatus {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private Hapi api;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public HandpointDelegate(Context context) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        initApi(context);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void initApi(Context context) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String sharedSecret = &quot;0102030405060708091011121314151617181920212223242526272829303132&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        HandpointCredentials handpointCredentials = new HandpointCredentials(sharedSecret);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.api = HapiFactory.getAsyncInterface(this, context, handpointCredentials);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // The api is now initialized. Yay! we&#x27;ve even set default credentials.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // The shared secret is a unique string shared between the payment terminal and your application, it is unique per merchant.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // You should replace this default shared secret with the one sent by the Handpoint support team.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Since we&#x27;re running inside the terminal, we can create a device ourselves and connect to it</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Device device = new Device(&quot;some name&quot;, &quot;address&quot;, &quot;&quot;, ConnectionMethod.ANDROID_PAYMENT);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.api.connect(device);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void connectionStatusChanged(ConnectionStatus status, Device device) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (status == ConnectionStatus.Connected) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //Connection Status connected</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void deviceDiscoveryFinished(List&lt;Device&gt; devices) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // This event can be safely ignored for a PAX/Telpo integration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public boolean pay() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return this.api.sale(new BigInteger(&quot;1000&quot;), Currency.GBP);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // LetÂ´s start our first payment of 10 pounds</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Use the currency of the country in which you will be deploying terminals</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public boolean payWithOptions() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        SaleOptions options = new SaleOptions();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Adding tipping</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        TipConfiguration config = new TipConfiguration();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        config.setHeaderName(&quot;HEADER&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        config.setFooter(&quot;FOOTER&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        config.setEnterAmountEnabled(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        config.setSkipEnabled(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        config.setTipPercentages(Arrays.asList(5, 10, 15, 20));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        options.setTipConfiguration(config);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Adding Multi MID / Custom merchant Authentication</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        MerchantAuth auth = new MerchantAuth();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Credential credential = new Credential();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        credential.setAcquirer(Acquirer.SANDBOX);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        credential.setMid(&quot;mid&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        credential.setTid(&quot;tid&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Add as many credentials as Acquirers your merchant have agreements with</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        auth.add(credential);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        options.setMerchantAuth(auth);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Add a customer reference</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        options.setCustomerReference(&quot;Your customer reference&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Enable pin bypass</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        options.setPinBypass(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Enable signature bypass</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        options.setSignatureBypass(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Define a budget number</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        options.setBudgetNumber(&quot;YOUR_BUDGET_NUMBER&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return this.api.sale(new BigInteger(&quot;1000&quot;),Currency.GBP, options);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void currentTransactionStatus(StatusInfo statusInfo, Device device) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (statusInfo.getStatus() == StatusInfo.Status.InitialisationComplete) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // The StatusInfo object holds the different transaction statuses like reading card, pin entry, etc.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // Let&#x27;s launch a payment</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            pay();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void signatureRequired(SignatureRequest signatureRequest, Device device) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // This event can be safely ignored for a PAX/Telpo integration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // The complete signature capture process is already handled in the sdk, a dialog will prompt the user for a signature if required.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // If a signature was entered, it should be printed on the receipts.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void endOfTransaction(TransactionResult transactionResult, Device device) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // The TransactionResult object holds details about the transaction as well as the receipts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Useful information can be accessed through this object like the transaction ID, the amount, etc.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void transactionResultReady(TransactionResult transactionResult, Device device) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Pending TransactionResult objects will be received through this event if the EndOfTransaction</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // event was not delivered during the transaction, for example because of a network issue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // For this sample app we are not going to implement this event</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void disconnect(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.api.disconnect();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //This disconnects the connection</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>We&#x27;re done!</strong></p><p>Sort of. With the above tutorial you&#x27;ve done a basic integration that can perform sale transactions.</p><p>Explore the rest of the documentation to see more transaction types supported and possibilities.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="9">Bluetooth Integration<a aria-hidden="true" class="hash-link" href="#9" title="Direct link to heading">â€‹</a></h2><p> <strong>Introduction</strong></p><p>This tutorial is guiding you through all the required steps to create a basic payment application for Android devices integrated with a HiLite or Hi5 payment terminal.</p><p>The new generation of Handpoint SDK&#x27;s is designed to make your life easier. Simple and created for humans, it does not require any specific knowledge of the payment industry to be able to start accepting credit/debit card transactions.</p><p>At Handpoint we take care of securing every transaction so you donÂ´t have to worry about it while creating your application. We encrypt data from the payment terminal to the bank with our point-to-point encryption solution. Our platform is always up to the latest PCI-DSS security requirements.</p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>Please, start an operation (sale,refund etc.) ONLY if you have received the <strong>InitialisationComplete</strong> message from the <strong>currentTransactionStatus</strong> method</p></div></div><p><strong>Let&#x27;s start programming!</strong></p><p><strong>1. Modify the AndroidManifest.xml</strong></p><p>We <strong>strongly</strong> recommend you add the following to your main <strong><code>&lt;activity&gt;</code></strong>:</p><div class="codeBlockContainer_K1bP language-groovy"><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">android:launchMode=&quot;singleTask&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>2. In the gradle.build</strong></p><div class="codeBlockContainer_K1bP language-groovy"><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">android {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    defaultConfig {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        minSdkVersion 22 //change the SDK version to the one corresponding to the device you are using</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        targetSdkVersion 29</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        multiDexEnabled true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    packagingOptions {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        pickFirst &#x27;**/*.so&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        exclude &#x27;META-INF/*&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        exclude &#x27;**/anim/*.xml&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        exclude &#x27;**/layout/*.xml&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        exclude &#x27;resources.arsc&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        exclude &#x27;AndroidManifest.xml&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>3. Create a Java class</strong></p><p>Create a new java class called HandpointDelegate.java and include com.handpoint.api.* as a dependency:</p><div class="codeBlockContainer_K1bP language-java"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package com.yourpackage.name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import android.content.Context;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.HandpointCredentials;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.Hapi;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.HapiFactory;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.ConnectionMethod;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.ConnectionStatus;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.Currency;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.Device;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.Events;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.SignatureRequest;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.StatusInfo;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.TransactionResult;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.math.BigInteger;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//Check all the events available in the Events interface.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//If you want to subscribe to more events, just add to the list of implemented interfaces.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class HandpointDelegate implements Events.Required, Events.ConnectionStatusChanged, Events.CurrentTransactionStatus {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private Hapi api;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public HandpointDelegate(Context context) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        initApi(context);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void initApi(Context context) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String sharedSecret = &quot;0102030405060708091011121314151617181920212223242526272829303132&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        HandpointCredentials handpointCredentials = new HandpointCredentials(sharedSecret);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.api = HapiFactory.getAsyncInterface(this, context, handpointCredentials);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // The api is now initialized. Yay! we&#x27;ve even set a shared secret!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // The shared secret is a unique string shared between the card reader and your mobile application</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // It prevents other people to connect to your card reader</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // You have to replace this default shared secret by the one sent by our support team</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // The shared secret is unique per merchant (not per terminal)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Now we need to find our device and connect to it</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        discoverDevices();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Now  we need to connect to a device to start taking payments.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Let&#x27;s search for them:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void discoverDevices() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.api.searchDevices(ConnectionMethod.BLUETOOTH);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // This triggers the asynchronous search for all the devices around that haven&#x27;t been paired.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // You could, alternatively, search for the already paired devices</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // List&lt;Device&gt; devices = this.api.getPairedDevices(ConnectionMethod.BLUETOOTH);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Now:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // selectDeviceAndConnect(devices);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // You&#x27;ll receive the devices found through deviceDiscoveryFinished method.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // See: https://handpoint.com/docs/device/Android/#elem_eventsDeviceDiscoveryFinished</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void deviceDiscoveryFinished(List&lt;Device&gt; devices) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        selectDeviceAndConnect(devices);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private void selectDeviceAndConnect(List&lt;Device&gt; devices) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (Device device : devices) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (device.getName() != null) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                // All the devices here are datecs devices</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if (/* Fill your logic here */) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    this.api.connect(device);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    // Now take a look at connectionStatusChanged method</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    //Potentially, if you know the MAC address of the device you want to connect to, you can skip the search and do it this way</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void connect() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Device device = new Device(&quot;PP0513901435&quot;, &quot;68:AA:D2:00:D5:27&quot;, &quot;&quot;, ConnectionMethod.BLUETOOTH);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //The Address always has to be written in UPPER CASE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //new Device(&quot;name&quot;, &quot;address&quot;, &quot;port&quot;, ConnectionMethod.BLUETOOTH);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.api.connect(device);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void connectionStatusChanged(ConnectionStatus status, Device device) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (status == ConnectionStatus.Connected) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // Connected to device</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public boolean pay() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return this.api.sale(new BigInteger(&quot;1000&quot;), Currency.GBP);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // LetÂ´s start our first payment of 10 pounds</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void currentTransactionStatus(StatusInfo statusInfo, Device device) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (statusInfo.getStatus() == StatusInfo.Status.InitialisationComplete) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // The StatusInfo object holds the different transaction statuses like reading card, pin entry, etc.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // Let&#x27;s launch a payment</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            pay();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void signatureRequired(SignatureRequest signatureRequest, Device device) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // You&#x27;ll be notified here if a sale process needs a signature verification</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // A signature verification is needed if the cardholder uses an MSR or a chip &amp; signature card</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // This method will not be invoked if a transaction is made with a Chip &amp; PIN card</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // At this step, you are supposed to display the merchant receipt to the cardholder on the android device</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // The cardholder must have the possibility to accept or decline the transaction</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // If the cardholder clicks on decline, the transaction is VOID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // If the cardholder clicks on accept he is then asked to sign electronically the receipt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.api.signatureResult(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // This line means that the cardholder ALWAYS accepts to sign the receipt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // For this sample app we are not going to implement the whole signature process</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void endOfTransaction(TransactionResult transactionResult, Device device) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // The object TransactionResult stores the different receipts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Other information can be accessed through this object like the transaction ID, the amount...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void transactionResultReady(TransactionResult transactionResult, Device device) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Pending TransactionResult objects will be received through this event if the EndOfTransaction</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // event was not delivered during the transaction, for example because of a network issue.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // For this sample app we are not going to implement this event.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void disconnect() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.api.disconnect();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //This disconnects the connection</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p><strong>Note about reconnections:</strong> By default, the SDK will automatically reconnect to the last known device when the connection is lost.If you want to change this behaviour set the property Settings.AutomaticReconnection in HapiManager to <strong>false</strong>.</p></div></div><p><strong>We&#x27;re done!</strong></p><p>Sort of. With the above tutorial you&#x27;ve done a basic integration that can perform sale transactions.</p><p>Explore the rest of the documentation to see more transaction types supported and possibilities.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="10">Cloud Integration<a aria-hidden="true" class="hash-link" href="#10" title="Direct link to heading">â€‹</a></h2><p> <strong>Introduction</strong></p><p>This tutorial is guiding you through all the required steps to integrate with a Handpoint (PAX, Telpo or Datecs) payment terminal, from your Android application, through the internet. CLOUD will be the ConnectionMethod of choice for this guide. With this connection method you become the client in a client - server connection.</p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>There needs to be another app with one of our SDKs that is active and keeping the connection open.</p></div></div><p>The new generation of Handpoint SDK&#x27;s is designed to make your life easier. Simple and created for humans, it does not require any specific knowledge of the payment industry to be able to start accepting credit/debit card transactions.</p><p>At Handpoint we take care of securing every transaction so you donÂ´t have to worry about it while creating your application. We encrypt data from the payment terminal to the bank with our point-to-point encryption solution. The platform is always up to the latest PCI-DSS security requirements.</p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>Please, start an operation (sale,refund etc.) ONLY if you have received the <strong>InitialisationComplete</strong> message from the <strong>currentTransactionStatus</strong> method</p></div></div><p> <strong>Let&#x27;s start programming!</strong></p><p><strong>1. In the gradle.build</strong></p><div class="codeBlockContainer_K1bP language-groovy"><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">android {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    defaultConfig {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        minSdkVersion 22 //Required to support all PAX &amp; Telpo models</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        targetSdkVersion 29</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        multiDexEnabled true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  packagingOptions {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pickFirst &#x27;**/*.so&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    exclude &#x27;META-INF/*&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    exclude &#x27;**/anim/*.xml&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    exclude &#x27;**/layout/*.xml&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    exclude &#x27;resources.arsc&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    exclude &#x27;AndroidManifest.xml&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>2. Create a Java class</strong></p><p>Create a new java class called HandpointDelegate.java and include com.handpoint.api.* as a dependency:</p><div class="codeBlockContainer_K1bP language-java"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package com.yourpackage.name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import android.content.Context;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.HandpointCredentials;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.Hapi;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.HapiFactory;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.ConnectionMethod;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.ConnectionStatus;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.Currency;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.Device;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.Events;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.SignatureRequest;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.StatusInfo;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.TipConfiguration;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.TransactionResult;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.agreements.Acquirer;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.agreements.Credential;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.agreements.MerchantAuth;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.handpoint.api.shared.options.SaleOptions;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.math.BigInteger;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Arrays;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//Check all the events available in the Events interface.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//If you want to subscribe to more events, just add to the list of implemented interfaces.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class HandpointDelegate implements Events.Required, Events.ConnectionStatusChanged, Events.CurrentTransactionStatus {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private Hapi api;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public HandpointDelegate(Context context) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        initApi(context);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void initApi(Context context) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String sharedSecret = &quot;0102030405060708091011121314151617181920212223242526272829303132&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String merchantApiKey = &quot;This-is-my-api-key-provided-by-Handpoint&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        HandpointCredentials handpointCredentials = new HandpointCredentials(sharedSecret, merchantApiKey);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.api = HapiFactory.getAsyncInterface(this, context, handpointCredentials);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // The api is now initialized. Yay! we&#x27;ve even set default credentials.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // The shared secret is a unique string shared between the payment terminal and your application, it is a free field.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // The Api key is a unique key per merchant used to authenticate the terminal against the Cloud.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // You should replace the API key with the one sent by the Handpoint support team.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Now we need to find our device and connect to it.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        discoverDevices();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Now  we need to connect to a device to start taking payments.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Let&#x27;s search for them:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void discoverDevices(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.api.searchDevices(ConnectionMethod.CLOUD);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // This triggers the asynchronous search for all the devices around that haven&#x27;t been paired.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // You could, alternatively, search for the already paired devices</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // List&lt;Device&gt; devices = this.api.getPairedDevices(ConnectionMethod.CLOUD);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Now:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // selectDeviceAndConnect(devices);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // You&#x27;ll receive the devices found through the deviceDiscoveryFinished method.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // See: https://handpoint.com/docs/device/Android/#elem_eventsDeviceDiscoveryFinished</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void deviceDiscoveryFinished(List&lt;Device&gt; devices) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        selectDeviceAndConnect(devices);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private void selectDeviceAndConnect(List&lt;Device&gt; devices) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (Device device : devices) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (device.getName() != null){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                // All the devices here are all of the merchant&#x27;s devices</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if (/* Fill your logic here */) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    this.api.connect(device);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    // Now take a look at connectionStatusChanged method</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    //Potentially, if you know the Serial number and model of the device you want to connect to, you can skip the search and do it this way</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void connect(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Device device = new Device(&quot;CloudDevice&quot;, &quot;9822032398-PAXA920&quot;, &quot;&quot;, ConnectionMethod.CLOUD);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //new Device(&quot;name&quot;, &quot;address&quot;, &quot;port&quot;, ConnectionMethod.CLOUD);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.api.connect(device);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void connectionStatusChanged(ConnectionStatus status, Device device) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (status == ConnectionStatus.Connected) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // Let&#x27;s launch a payment</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            pay();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public boolean pay() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return this.api.sale(new BigInteger(&quot;1000&quot;), Currency.GBP);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // LetÂ´s start our first payment of 10 pounds</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public boolean payWithOptions() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        SaleOptions options = new SaleOptions();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Adding tipping</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        TipConfiguration config = new TipConfiguration();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        config.setHeaderName(&quot;HEADER&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        config.setFooter(&quot;FOOTER&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        config.setEnterAmountEnabled(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        config.setSkipEnabled(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        config.setTipPercentages(Arrays.asList(5, 10, 15, 20));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        options.setTipConfiguration(config);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Adding Multi MID / Custom merchant Authentication</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        MerchantAuth auth = new MerchantAuth();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Credential credential = new Credential();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        credential.setAcquirer(Acquirer.SANDBOX);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        credential.setMid(&quot;mid&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Optionally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        credential.setTid(&quot;tid&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Add as many credentials as Acquirers your merchant have agreements with</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        auth.add(credential);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        options.setMerchantAuth(auth);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Add a customer reference</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        options.setCustomerReference(&quot;Your customer reference&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Enable pin bypass</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        options.setPinBypass(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Enable signature bypass</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        options.setSignatureBypass(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Define a budget number</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        options.setBudgetNumber(&quot;YOUR_BUDGET_NUMBER&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return this.api.sale(new BigInteger(&quot;1000&quot;),Currency.GBP, options);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void currentTransactionStatus(StatusInfo statusInfo, Device device) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (statusInfo.getStatus() == StatusInfo.Status.InitialisationComplete) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // The StatusInfo object holds the different transaction statuses like reading card, pin entry, etc.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void signatureRequired(SignatureRequest signatureRequest, Device device) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // This event can be safely ignored for a PAX/Telpo integration. The complete signature capture process</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // is already handled in the sdk, a dialog will prompt the user for a signature if required.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // If a signature was entered, it should be printed on the receipts.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //For Datecs integrations:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // You&#x27;ll be notified here if a sale process needs a signature verification</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // A signature verification is needed if the cardholder uses an MSR or a chip &amp; signature card</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // This method will not be invoked if a transaction is made with a Chip &amp; PIN card</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // At this step, you are supposed to display the merchant receipt to the cardholder on the android device</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // The cardholder must have the possibility to accept or decline the transaction</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // If the cardholder clicks on decline, the transaction is VOID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // If the cardholder clicks on accept he is then asked to sign electronically the receipt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.api.signatureResult(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // This line means that the cardholder ALWAYS accepts to sign the receipt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // For this sample app we are not going to implement the whole signature process</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void endOfTransaction(TransactionResult transactionResult, Device device) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // The object TransactionResult stores the different receipts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Other information can be accessed through this object like the transaction ID, the amount...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void transactionResultReady(TransactionResult transactionResult, Device device) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Pending TransactionResult objects will be received through this event if the EndOfTransaction</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // event was not delivered during the transaction, for example because of a network issue.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // For this sample app we are not going to implement this event.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void disconnect(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.api.disconnect();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //This disconnects the connection</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>We&#x27;re done!</strong></p><p>Sort of. With the above tutorial you&#x27;ve done a basic integration that can perform sale transactions.</p><p>Explore the rest of the documentation to see more transaction types supported and possibilities.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/doc/android/Android SDK 6.4.1/androidapioverview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->API overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/doc/android/Android SDK 6.4.1/androidtransactions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Transactions<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#8" class="table-of-contents__link toc-highlight">Android Terminal Native Integration</a></li><li><a href="#9" class="table-of-contents__link toc-highlight">Bluetooth Integration</a></li><li><a href="#10" class="table-of-contents__link toc-highlight">Cloud Integration</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs Legacy</div><ul class="footer__items"><li class="footer__item"><a href="https://www.handpoint.com/docs/device/Basics/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://www.handpoint.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Handpoint<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/handpoint" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/handpointltd?lang=en" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Get our Apps</div><ul class="footer__items"><li class="footer__item"><a href="https://play.google.com/store/apps/details?id=com.handpoint.hipos&amp;hl=en&amp;gl=US&amp;pcampaignid=pcampaignidMKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Get it on Google Play<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://apps.apple.com/us/app/handpoint/id1450546788?itsct=apps_box_link&amp;itscg=30200" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Download on the App Store<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://status.handpoint.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Handpoint Status Page<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://handpoint.atlassian.net/wiki/spaces/PD/overview?homepageId=5898250" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>FAQ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://handpoint.us6.list-manage.com/subscribe?u=4d9dff9e7edb7e57a67a7b252&amp;id=0a2179241e" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Subscribe to the Handpoint Newsletter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/handpoint" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.handpoint.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="https://handpoint.imgix.net/handpoint-logo-w.png?w=150" alt="Handpoint Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="https://handpoint.imgix.net/handpoint-logo-w.png?w=150" alt="Handpoint Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2021 Handpoint</div></div></div></footer></div>
<script src="/doc/assets/js/runtime~main.7507c79a.js"></script>
<script src="/doc/assets/js/main.4245f262.js"></script>
</body>
</html>