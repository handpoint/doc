[{"title":"Hello","type":0,"sectionRef":"#","url":"blog/hello-world","content":"Welcome to this blog. This blog is created with Docusaurus 2. This is a test post. A whole bunch of other information.","keywords":""},{"title":"Hola","type":0,"sectionRef":"#","url":"blog/hola","content":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet","keywords":""},{"title":"Welcome","type":0,"sectionRef":"#","url":"blog/welcome","content":"Blog features are powered by the blog plugin. Simply add files to the blog directory. It supports tags as well! Delete the whole directory if you don't want the blog features. As simple as that!","keywords":""},{"title":"API overview","type":0,"sectionRef":"#","url":"android/Android SDK 6.4.1/androidapioverview","content":"API overview Supported functionality List the available payment terminalsConnect/disconnect to and from a payment terminal.Automatically or manually reconnect to a payment terminal.Execute financial transactions.Get the status of transactions.Control and access the device logs. Processing Payments Simulation Your test payments are sent against a test server on the Handpoint side which simulates the behavior of an acquiring bank. Funds are not moved and sensitive data from the card is fully encrypted. You can use trigger amounts to generate some specific responses from our server: Sale amounts Amount\tBehaviour37.79\tIssuer response code = 01 (Refer to issuer) 37.84\tIssuer response code = 05 (Not authorized) 37.93\tIssuer response code = 04 (Pick up card) 37.57\tRequest is partially approved 37.68\tRequest timeout","keywords":""},{"title":"Introduction","type":0,"sectionRef":"#","url":"android/Android SDK 6.4.1/androidintroduction","content":"Introduction Android SDK version 6.4.1 Get the Android SDK! tip If you are currently using 5.x of the Android SDK, take a look at the migration guide to 6.x The new generation of Handpoint APIs and SDKs are engineered to make your life simpler and happier. Awesomely simple Created for humans, coders, geeks, no need of a dark and complex knowledge of the payment industry. Super secure We take care of PCI compliance so you can be kept out of scope The Handpoint terminals encrypt all sensitive cardholder data so your app does not have to deal with it. Available through Maven Central The Handpoint Android SDK is compatible with Android version 5.1.1 (API level 22) and up. The latest version is compiled with java 1.8 Maven: <dependency> <groupId>com.handpoint.api</groupId> <artifactId>sdk</artifactId> <version>[6.0.0,7.0.0)</version> <type>aar</type> </dependency> Copy Gradle: implementation 'com.handpoint.api:sdk:6.+' Copy If you have any questions, do not hesitate to Contact Us.","keywords":""},{"title":"Events subscribers","type":0,"sectionRef":"#","url":"android/Android SDK 6.4.1/androideventsubscribers","content":"","keywords":""},{"title":"Register events delegate​","type":1,"pageTitle":"Events subscribers","url":"android/Android SDK 6.4.1/androideventsubscribers#register-events-delegate","content":"registerEventsDelegate Registers a delegate for the SDK events. Parameters Parameter\tNoteslistener Required Object\tAny Object implementing one or more of the available delegate interfaces. Code example public class ObjectHelper implements Events.Required, Events.Status, Events.Log, Events.PendingResults, Events.TransactionStarted { ... private void setEventsHandler() { // Register this class as listener for events this.api.registerEventsDelegate(this); ... } } Copy Returns Parameter\tNotesBoolean\tTrue if the new delegate was added successfully. "},{"title":"Unregister events delegate​","type":1,"pageTitle":"Events subscribers","url":"android/Android SDK 6.4.1/androideventsubscribers#unregister-events-delegate","content":"unregisterEventsDelegate Unregisters an object from SDK events. Parameters Parameter\tNoteslistener Required Object\tAny Object implementing one or more of the available delegate interfaces. Code example public class ObjectHelper implements Events.Required, Events.Status, Events.Log, Events.PendingResults, Events.TransactionStarted { ... private void unsubscribeEventsDelegate() { // Stop receiving events this.api.unregisterEventsDelegate(this); ... } Copy Returns Parameter\tNotesBoolean\tTrue if the new delegate was removed successfully. "},{"title":"Migration from 5.X","type":0,"sectionRef":"#","url":"android/Android SDK 6.4.1/androidmigrationguide","content":"Migration from 5.X Version 6.0.0 introduces a well defined, typed, way of passing extra values, options, parameters or flags to the financial transactions. We have unified all the extra and optional parameters in an Options object. Different operations have different options. 1. For a Sale or Sale and Tokenize operation, please see SaleOptions If you use a customer reference: options.setCustomerReference(\"Your customer reference\"); Copy If you need Multi MID / Custom merchant Authentication: MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(YOUR_ACQUIRER); //Optionally credential.setMerchantId(mid); //Optionally credential.setTerminalId(tid); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); options.setMerchantAuth(auth); Copy If you need to enable pin bypass: options.setPinBypass(true); Copy If you want to specify the budget period Only available for SureSwipe: options.setBudgetNumber(YOUR_BUDGET_NUMBER); Copy If you want to specify tip options Only available for PAX and Telpo terminals: TipConfiguration config = new TipConfiguration(); //Optionally config.setHeaderName(HEADER); //Optionally config.setFooter(FOOTER); //Optionally config.setEnterAmountEnabled(true); //Optionally config.setSkipEnabled(true); //Optionally config.setTipPercentages(percentages); options.setTipConfiguration(config); Copy Alternatively, you can set the tip amount directly: options.setTipConfiguration(new TipConfiguration(AMOUNT)); Copy Finally: api.sale(amount, currency, options); Copy 2. Similar to SaleOptions, but with less possible parameters, for a Refund operation, please see RefundOptions If you use a customer reference: options.setCustomerReference(\"Your customer reference\"); Copy If you need Multi MID / Custom merchant Authentication: MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(YOUR_ACQUIRER); //Optionally credential.setMerchantId(mid); //Optionally credential.setTerminalId(tid); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); options.setMerchantAuth(auth); Copy If you need to enable pin bypass: options.setPinBypass(true); Copy Finally: api.refund(amount, currency, options); Copy 3. For the rest of operations, please see Options If you use a customer reference: options.setCustomerReference(\"Your customer reference\"); Copy","keywords":""},{"title":"Data Flow","type":0,"sectionRef":"#","url":"express/Express SDK 1.2/expressdataflow","content":"Data Flow","keywords":""},{"title":"Release Notes","type":0,"sectionRef":"#","url":"android/Android SDK 6.4.1/androidreleasenotes","content":"","keywords":""},{"title":"6.4.1​","type":1,"pageTitle":"Release Notes","url":"android/Android SDK 6.4.1/androidreleasenotes#641","content":"Fixes: Automatic Cancellation parameters. "},{"title":"6.4.0​","type":1,"pageTitle":"Release Notes","url":"android/Android SDK 6.4.1/androidreleasenotes#640","content":"Features: Populate operation timeout on CLOUD operations.Max attempts on Cancellation retries.Generic screen to show text messages. Fixes: Base amount handling in TipDialogCancellation service max retry windowVerification method on transaction result objectCorrect population of MessageReasonCodeError message multi-language translationCardholder name for contact operationsAmount presentation in transactions reportAnalytics and Cloud services stability moving terminals between merchants Refactor: Deprecated jcenter repositoryImproved structure of cryptography moduleLegacy code removal "},{"title":"6.3.0​","type":1,"pageTitle":"Release Notes","url":"android/Android SDK 6.4.1/androidreleasenotes#630","content":"Features: Print Report v2.PAXA80 physical keyboard full support.Deadman mechanism for not completed trx.Addition of customer reference on transaction result for cancelled of timed out trx Fixes: Certification scenarios. Unification of sdk dialogs styles. Card reading during tokenizations. Contactless light thread handling. Xml parsing. Printing html using uncommon characters. Monospace font for printing. SCA cases on contact. PAX A80 Pin bypass handling. Receipts for partial approvals. Correct message on empty config update. Refactor: Internal Emv Classes to improve performance.  "},{"title":"6.2.2​","type":1,"pageTitle":"Release Notes","url":"android/Android SDK 6.4.1/androidreleasenotes#622","content":"Fixes: Compatibility issues with Android 11 devices.CLOUD: Improved logic to wake up device and start trx during device sleep mode.  "},{"title":"6.2.1​","type":1,"pageTitle":"Release Notes","url":"android/Android SDK 6.4.1/androidreleasenotes#621","content":"Fixes: Improved bluetooth connection logic (Datecs)  "},{"title":"6.2.0​","type":1,"pageTitle":"Release Notes","url":"android/Android SDK 6.4.1/androidreleasenotes#620","content":"Features: New Tip Dialog.Multi-mid Phase 2.Physical Keyboard PAX-A80.Visa debit US app selection.cardHolderName filed in Transaction Result object Fixes: Temporarily block during consecutive operations (Datecs devices).Translations.Compatibility with Android 11.  "},{"title":"6.1.1​","type":1,"pageTitle":"Release Notes","url":"android/Android SDK 6.4.1/androidreleasenotes#611","content":"Fixes: Translations  "},{"title":"6.1.0​","type":1,"pageTitle":"Release Notes","url":"android/Android SDK 6.4.1/androidreleasenotes#610","content":"Features: End of the day report.New printing framework.Transaction limit exceeds event.Multi-language in Status and End of Transaction → Transaction Result new fields: multiLanguageStatusMessages and multiLanguageErrorMessages.Support for MerchantAuth and Bypass options for Cloud + REST-API. Fixes: Receipt adjustments for mobile wallets.Receipt adjustments for empty tags.Fields in TransactionResult.Contactless lights after card reading error.REST-API ACK.TranslationsError handling prior connecting to device "},{"title":"Custom URL","type":0,"sectionRef":"#","url":"express/Express SDK 1.2/expresscustomurl","content":"Custom URL To initiate an Express client transaction from your web or app, you open a URL with the following format: handpoint://express/v1/?data=<url_encoded_data> For web apps, you can open this URL just as you would any other URL on a webpage.For native iOS apps, you use the openURL: method of UIApplication. The query parameter in the URL, data, is a percent-encoded JSON object that contains the information Express client needs to process the transaction request. For example, a valid unencoded JSON object looks like this (replace CLIENT_ID with your application's ID, and SHARED_SECRET_KEY with the device activation key you receive from our support team): If you're opening this URL from a native app, you can use your own app's custom scheme as a callback: \"myapp-url-scheme://payment-complete\" { \"action\": { \"type\": \"sale\", \"parameters\": { \"amount\": 1500, \"currency\": \"USD\" }, \"extraParameters\": { \"your custom field\" : \"custom value\" } }, \"client\": { \"clientId\": \"CLIENT_ID\", \"ssk\": \"SHARED_SECRET_KEY\", \"autoReturn\": true, \"autoReturnTimeout\": 0 }, \"callbackUrl\": \"http://yourbackend.com/payment-result\" } Copy If you're developing a web application, this Javascript sample demonstrates encoding a Register API URL and directing the merchant's browser to open it: <script> var dataParameter = { \"action\": { \"type\": \"sale\", \"parameters\": { \"amount\": 1500, \"currency\": \"USD\" }, \"extraParameters\": { \"your custom field\" : \"custom value\" } }, \"client\": { \"clientId\": \"CLIENT_ID\", \"ssk\": \"SHARED_SECRET_KEY\", \"autoReturn\": true, \"autoReturnTimeout\": 0 }, \"callbackUrl\": \"http://yourbackend.com/payment-result\" }; window.location = \"handpoint://express/v1/?data=\" + encodeURIComponent(JSON.stringify(dataParameter)); </script> Copy","keywords":""},{"title":"Downloads","type":0,"sectionRef":"#","url":"express/Express SDK 1.2/expressdownloads","content":"Downloads Get the Express apps! Get the SDK! ","keywords":""},{"title":"Device management","type":0,"sectionRef":"#","url":"android/Android SDK 6.4.1/androiddevicemanagement","content":"","keywords":""},{"title":"Connect​","type":1,"pageTitle":"Device management","url":"android/Android SDK 6.4.1/androiddevicemanagement#connect","content":"connect Connects to a device. Whenever the connection to the device is lost, the SDK will keep on trying to establish a connection until it’s re-established. No special actions are needed. Parameters Parameter\tNotesdevice Required Device\tThis parameter specifies which device type you want to connect to. Code example //Connect to a device Device device = new Device(\"CardReader7\", \"08:00:69:02:01:FC\", \"1\", ConnectionMethod.BLUETOOTH); Device device = new Device(\"LocalDevice\", \"0821032398-PAXA920\", \"\", ConnectionMethod.ANDROID_PAYMENT); Device device = new Device(\"CloudDevice\", \"0821032398-PAXA920\", \"\", ConnectionMethod.CLOUD); api.connect(device); Copy Events invoked connectionStatusChanged  Each time the card reader state changes (ex : going from Connected to Disconnected) the ConnectionStatusChanged event is called. It causes the connection manager to invoke this event with the appropriate information. Returns Parameter\tNotesBoolean\ttrue if the operation was successfully. "},{"title":"Get Transactions Report​","type":1,"pageTitle":"Device management","url":"android/Android SDK 6.4.1/androiddevicemanagement#get-transactions-report","content":"getTransactionsReport Fetches your transactions report from a device/devices. If you want to print the report, you can call printReceipt with the string returned in ReportResult event as parameter. Parameters Parameter\tNotesreportConfiguration Required ReportConfiguration\tThis parameter specifies the filter to get transactions report. Code example //Get the transactions report for device \"12345\", from 30th April 2021 at 00:00:00, to 30th April 2021 at 23:59:59, in eurs: List terminalSerialNumber = new ArrayList<>(); terminalSerialNumber.add(\"12345\"); ReportConfiguration configuration = new ReportConfiguration(\"EUR\", \"20210430000000\", \"20210430235959\", terminalSerialNumber); api.getTransactionsReport(configuration); Copy Events invoked reportResult The report will be returned to the ReportResult interface which has been registered Returns Parameter\tNotesBoolean\tTrue if the command was processed successfully. False if the sending was not successful. "},{"title":"Disconnect​","type":1,"pageTitle":"Device management","url":"android/Android SDK 6.4.1/androiddevicemanagement#disconnect","content":"disconnect Disconnect will stop the active connection (or reconnection process). Please note that the method ignores the current state of the terminal and just stops the connection. Calling disconnect might result in a commmunication error if triggered during a transaction. Code example //Disconnect from current device api.Disconnect(); Copy Events invoked connectionStatusChanged Causes the connection manager to invoke this event with the appropriate information. Returns Parameter\tNotesBoolean\tTrue if the operation was successful. "},{"title":"Get EMV Report​","type":1,"pageTitle":"Device management","url":"android/Android SDK 6.4.1/androiddevicemanagement#get-emv-report","content":"getEMVConfiguration Fetches the logs from the device and reports them to the deviceLogsReady event. Code example //Downloads logs from device api.getDeviceLogs(); Copy Events invoked reportResult Invoked when hapi has finished downloading the EMV report from the card reader. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Get Paired Devices​","type":1,"pageTitle":"Device management","url":"android/Android SDK 6.4.1/androiddevicemanagement#get-paired-devices","content":"getPairedDevices Returns the payment terminals associated with the specified ConnectionMethod Parameters Parameter\tNotesmethod Required ConnectionMethod The type of connection with the payment terminal (Bluetooth, Cloud, etc.). Code example // Get paired terminals List<Device> devices = api.getPairedDevices(ConnectionMethod.XXX); Copy Returns Parameter\tNotesList<Device>\tThe list of payment terminals. "},{"title":"Get device logs​","type":1,"pageTitle":"Device management","url":"android/Android SDK 6.4.1/androiddevicemanagement#get-device-logs","content":"getDeviceLogs Fetches the logs from the device and reports them to the deviceLogsReady event. Code example //Downloads logs from device api.getDeviceLogs(); Copy Events invoked deviceLogsReady Invoked when hapi has finished downloading logs from the card reader. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Get Device Manufacturer​","type":1,"pageTitle":"Device management","url":"android/Android SDK 6.4.1/androiddevicemanagement#get-device-manufacturer","content":"getDeviceManufacturer Code example Manufacturer manufacturer = api.getDeviceManufacturer(); Copy Returns Parameter\tNotesManufacturer\tThe payment terminal manufacturer. "},{"title":"Flash Reset​","type":1,"pageTitle":"Device management","url":"android/Android SDK 6.4.1/androiddevicemanagement#flash-reset","content":"deleteDeviceConfig Sends a command to the terminal to delete its configuration Code example api.deleteDeviceConfig(); Copy "},{"title":"Print Receipt​","type":1,"pageTitle":"Device management","url":"android/Android SDK 6.4.1/androiddevicemanagement#print-receipt","content":"printReceipt Print on demand functionality allowing the merchant to print any HTML formatted receipt. It is possible to print images or barcodes. A bitmap can also be printed, in order to do so it needs to be rendered as an image and inserted into the html. Parameters Parameter\tNotesreceipt Required String\tThe receipt must match the following HTML Print Format. The Transaction Report (also called End of Day Report) can be printed from the string returned in the ReportResult event. Code example (Prints a receipt with Handpoint logo) //Print a receipt with Handpoint logo (bitmap format) String validReceipt = \"<html><body><img src='data:image/bmp;base64,iVBORw0KGgoAAAANSUhEUgAAAYgAAABWCAYAAADVAAHNAAAACXBIWXMAABYlAAAWJQFJUiTwAAAWgUlEQVR4nO2dh5cVxRKH3z+lZBAURRRFxIQKKIoRBHNCchJBMBEUFAxgRFFRUYwYEBOoBGF3kSAssLAgOfXbb9jB2cvcmaq5YW6o75w67+Db29Mz09O/7urq6v85wzAMwwjhf2lXwDAMwyhNTCAMwzCMUEwgDMMwjFBMIAzDMIxQTCAMwzCMUEwgDMNIlRNHDrqtc29zm2dd7/b88Ko71rgt7SoZzZhAGIZRVI7trW/x7wN/LXO1Ezq7DaPObvrfTq52Yme3b+XilGpnBDGBMAyjaDR8McPVjG3r6hcOb/rXSe+/NS5f4GrGd/AEwrPRrdz2dx5NtZ7GKUwgDMMoCoc2/dYkBJ1OzRQmdnE7Fk/0/nv9e6P+E4cmq2maQRzdszXl2hpgAmFUNTt27HA1NTXuxIkTaVelojl5/Iirm9KthRDUPn6ua/h8uts867r/xGFM66bZxYi0q2s0YwJhVAX79u1zv/76q3vrrbfcxIkT3c033+zOPfdcd9ZZZ3k2dOjQtKtY0RzavNJbXwgKBFY3qaurGd06IBqd3fH9u93JE8fd0YZN7sD6b92RnXVpV79qMYEwKoojR464NWvWuA8++MBNmzbNDR482HXv3v20EERZQ0ND2tWvYE66vSvfd3WTuzUJxTkthaJZIGrGtPFcTxunXuxqxrZzdU0zDGYZdZMvaPq5zfDSwATCqBh+++03d8kll4jEIMwOHDiQ9i1UPMwM9v763imhGJ85o2h1xgzDE45xHb1QWKP4mEAYFQOzhaTi0Lp1a3fy5Mm0b6EqOH6w0e38ZErTjKGdF7EUJgomEKWBCYRRMdTW1rrrr78+kUB06dIl7epXPAjDrk+neTOHmnHtzxSD0W08qx3f0dWMbfOfQIxt704c3Jt29auSVASCiJF8mWbUl9Z1jeLBu/noo4/UrqaLLroo7apXNMcP7HZ1Uy5sud+Bzj+wQH1qkfo8d7BmuWtc8Yarf3eE2zTjGk9UbA0iHYoqEHSqL774omvVqlViV0CmderUyS1ZsiTyugcPHnTDhg3L2zWxnj17eouhRmnS2NjYIkopznr16pV2lSuaow2bvR3SLWcMrdzGaT2a7JKAQHRxjctfT7u6RjNFFYjDhw/nVRykH/dPP/2U92tiw4cPL86DMxIxZswY8bu86qqr0q5uxbNryVRXM67D6QVpopOO7dvptr35QMtZxKSuVbfmwMz3+PHjLawUKLqLadGiRd7HePbZZ+fcQbOw2K9fP7dixYrIa/Lwn3nmGXfxxRfnRRg6dOjgBg0a5LZs2VKkp2Yk4cMPPxS/02uvvTbt6lY8RDBteqa3Jw6Erx7dfer72bPspVPrD77baUJn1/D17JRrW1xeffXVM9pkKUTVpbZIvXv3bjd//nzPRaTtoPEv41ZK8gDp1CdPnpxoJnPjjTd6s5GjR48W4IkY+eaHH34Qv9vrrrsu7epWBSw2N3w5s2nmsOP0f9u/9itXO/G/vRE1Y9q6LbNvTLGWxWfkyJEmEGH88ssvqs6aaBPSI+TKyy+/rBIHomNKZdpnyDCBKA+OH9jjrT2wSQ63086Pp5yR8bWSYcB5/vnnm0BkI+zhZLObbropL9fctGmTSiCeeuqpvFzXKB7ff/+9CUSZcKR+gzuyfX3a1UiFhQsXhrZJE4hmNG6mG264IS/X3LBhg0ognnzyybxc1ygeJhBGqUO03QUXXGACEYUJhFEITCCMUobgGZJEZmuTJhDNmEAYhcAEwihV2BM2adKkyDZpAtFMtQoEjYQ01KyH/Pnnn27jxo1edFexF8N37drlbfojE6oE/m7z5s3u999/d//8809qUV2MwAhYWL9+vdu/f/8Z/38aAsG727Ztm/deJfX/999/U92Vz7XpiOrr671v4o8//nB1dXVu586d3r6lNOrD90DalHyf0cG74R414em8H9oX3wfZfvNRJ9rsXXfdFdsmTSCaqSaBoEMl5vnOO+/0IrLCrkVU1zXXXOONMDjDIJ8fyt69e73onjlz5rj77ruvxd4QggV4LmHw0fIbzlFg/0mwvvyb4IEXXnjB+7tCwQf65ZdfegED1KN9+/an68C+mv79+7t58+Z54gX5Fohjx455nT9ZYwmzfuWVV9yUKVPcAw884LVL0or7EXm8W66fCR3N448/7u3fadeunfe3tP9bbrnFTZ061SuXDqyQosE7evvtt716x+02JwXJiBEjvD0liEi+4XkuXbrU26d0xx13tPgmeKaHDh1KVC7fDEJHvZ944gk3YMCAFu3lsccey/rb5cuXe98eG3Aznwf147mxsKztwHl+06dPF/d3JhDNVINA0NHjb0yyQfCKK65wn332mbrT4OMijBhBeuSRR7wGH3f9cePGtSiDRsq5Cm3atBHVtW3btu7555/3OtN8gajReUrDofm71atX50UgeIZ0FsHOX2q333776XKYGfIOpL9F7Hh3+YK289VXX3nfj7b9Zd4THWgSeAbLli1zs2bNckOGDBFFL8al0fFh4PXpp596g4fbbrvNnXPOObFlM2MPgqDwW+mzYHDFYCuqTtzrvffe66Xm0X773Mtzzz13hjFAKRYmEELLRSA+/vjjnD5K3x566CGxO2ft2rWJdo7TmH0Yafbu3TtRXZlCS11Wcc+ua9eu6uvPnTs3LwLBjCXp++IZwJ49e0JHoxJDsMkllguIJZs8o66D+JHhgDpLDliiI8X1IoUEiv6MSWOvvx6dl4mZAp1mkoEXgzafTz75JFH9uO6bb74ZWi9N+L72msG6FxITCKHlIhCMMrp16+YGDhzoZs6c6Y2iFi9e7LlkcJVo6oFISFxO999/f6LG5wsEPnTpSWzZjJF3UhAXXBvSa+E+YDMjo3RmTHSq+RAI6vHoo48m2nnvCwQZA3J5jrR5fOFaaCfM5uLqjjD4bjkf2uh5550X+TtmlTxrycw2aWcZJxCM0pM+V7+T5V5zSf3Db8mwEIT1jo4dO+b03qMMF2ExMIEQWiGjmBilap4B09Y4fv7550QjIl8g+HhybcR0TJpRpg+zJOnhP7gSFixYELqgms81CGZTffv2Vd2/LxD42HN9lsGZnQTEgWSSceWyxkCQQhi0AYlr8emnn46tDzO6JPctmUFoXHdB8wWC1Du5vh/WDDMHbgRxsK6Ci9g3TZm0SQY9QaMNIsr5mJ1LMIEQWqHDXN955x1xXVgUlnS8LIhqXUR+R0RjZyGOESi+awQHYYpzVWTagw8+qH4WLOJKymaD0bp167KWk+9FatZjNM/TFwhG2Kwh0XYlvvFsRhlSeFeSMhGvKGj3knJw0cTBgrH2/uMEAhit004zgyfizBcIgh94XlyLdZ8vvvjCTZgwwfXo0UNVnmS9RFNesUQgChMIoRVaIOhEyCgqrQ+uJgns1NQcniMZqRJxIi2PWYQmd5bU58/siNDgKAoR5vrGG2+Iy/QFIgjvedWqVV4kjKb9YbxHSaeBu0PiEkNg49yVUhcOHT9/G8fKlSu9QAbpPUsEwidbyopsFufHx62nOaEQd3EcmvqZQDRjAnGK9957T1wfOkhpAyI8VVquRCDo5DQfjvQjZ90jW9qBTJPkxiqEQGjeUZhABMGPLI0Okz5L1l4uvfRSUVljx44V3TPuE0l5pMCXQCRUvtuOj+aQKMlCL65F6foTaxFxgyHNuzaBaMYE4hQ0Lk2dampqROXykUnLlPq6w/LXZzMWzCXE7Sz1jRGoZFZSCIGgU5eWGScQQASM5p3T+UeN+mfMmCEu6/PPPxfdM3s9pGV+/fXXseWx/0ZanlYgpOKISSOB2EMhLTPO1aZ51yYQzeQiEOz4ZDTJ4k3mgk6UXXnllaqXVaxUG5qFZekCcCEEgmtLy8RvHwfuCeloGveMhHIQCGZj2sXvsA14wD4DaeQMo13cjxJY+9A8x7iopnITCI3oEnIbheY9m0A0k4tAsAiqeehJrVgCofHPSnctF0Ig2AgnnXoz7Y+D3a7SOkpHvuUgEPDtt9+q2uLo0aNDyyFsWlrGZZddJqobEAKrqV/cBr9yEwg24EnLHD9+fGRZmudoAtFMLgLRp08f1UNPasUSCE08dpoCAdINbHECwYeQLe1IpiGg0hQE5SIQjLgvv/xycbmEpoaVwW7dQrxnXFqamW3mbvxMyk0gNGfax927tBzMBKKZXASC0YomSiepmUCciXTzE0ISBRuVpPUjzFZKuQgESMNSfctcg9G4/JK0Z014b5iABSk3gaCPkZZpM4gCkI9Fah6mxgr9QSWlGgVCGmuPTZw4UVy/chII8uto2uOKFSsS1wvjyF0NJBPUlB8VRFBuAsEeIGmZJhAFII0oJhJ1aV5WoQWCfD3sAahGgdAkSCN6Sko5CQRuM827J0dVEM0aDvbuu++K6wb33HOPqnw61WyYQMjMBKKZahSIv//+2y1atMhbcGQLfpJcMJUiEJqPmt24UspJIEC6DoOxHyPIww8/rGo7mucI2mAQBjvZMIGQmQlEM9UgEGwCI1wQQcBHq7l2NqsUgdBsbtKkmyg3gZBuEsTIjhpEuzObwYkGbfkmEOFonqEJRDOVKhAknSOvC9PzqBh/Ro4cYELOo2p0McVlDQ0aIYdSyk0gNGnNMzdkaUf4WheTNjswgQfZMIGQmQlEM5UmEIQc0pFFRVexh4BMj/xd8IyHahQIzfuv5BmEJiV25nPQrhFoZxDk/tKUH7Wj2gRCZiYQzVSSQHACWVz6YXZxkwo4jGoUiA4dOojrl+l7j6LcBEKz1yDz/AFtymuyB2vQziCiOt9SEYiohfQgJhApUykCsX//fu9s5qhyOJwl6kD7ahQIDlOS1i8ulUGQchIIjlXVtMfMMFLSzWh+z3naGjhDPZf6BSkVgfjxxx9FZZpApEwlCAQ56eM+Ik49yzwHN5NqFIh+/fqJ6xc85zmOchII0mBLy+Uo2Uy0x9pKDvkJIs3oil144YWRZZWKQESdJx3EBCJlKkEgGJHFlcFBOHFUo0AQ2SWtH26YqBlYkHISCM2xpGFpuhmxa9oOx6hq6Ny5s7hsjoqNolQEghxYEkwgUqbcBYJFZkln+d1338XWqxoFggVTzbsIOyQ+jHISiLvvvltcbub6g0+cezNozNqkaNPQx7XzUhGIb775RlRmWgKBVyJtTCCEFiUQLDhLyog7AQ2qUSA4E1maGRYjE6nk4ykXgWAXNe5HSZmsYWVLp83mN2ndSAsed5qcDx2ptNxevXrFllsqAhG1VyNIWgJBdoW0KQmB0GwQKkWBkCabk4TVaQRiy5YtonstdYEA7SIoR3/GUS4CoTmlLupAGmaymg5Sep7Is88+Ky7z/fffjy2vVASCPUoS8iUQCKemjWebKRaTkhAIFrWkD62cBYLOJY5qFQjpWdS+Metct25dZJnlIhDSs8j79+8fOzpHQKT1k4gsSIMIOIhLMiupVoFg5qcJZZ46darq3guBCYTQogRC2oAkh5prXC1//fWX6F7LQSDoWDSRMhg70KMOD9IIhDSNeL4Fgk5KUhY78deuXRtbHp2QdDbG5ro4WH+QtMnWrVu7NWvWiJ5htQoESAcDGN8X+6rSpCQEonv37nn/kOMgWZ6mM5o2bVrWsoiq4QORlBN3Zq3UF41JozA0AsHHK0UqEPydBM25EEFjcXb69Ole2GIw8kMjEOzF4JS8OPIpEMwApc9wzpw5omcI27dvF+W3oq3FRYQtWLAg7/UrpEBozoYpxBpEXDp69vFo2vatt97qHSWbCcItFeRcSF0g6DA1o2amaNL45SgIOdW8KBpe1OYfaaoDhIRr0xmyyIybJDhK0GT0fO2112LvkwVQzaiFvEh0MHGQSkHqDuP9ZjtHORNmMJr3Evae/B2yGoHACB+NO085XwKB/5/9DJJyBg0aJF5Q9qF9Sb6rKDcG7VLS4Q4dOlRcv5qaGlXI7IABA0TCDcwINH0JCQjj3jcQtqtpf1Giy9nr0sGkbwQU8ByYnZDyhOzPlMG9Hjx4UPRskpKKQNBpEQo3ZswY1Qv1jWMncfmwiHP48GHxdYmWIYeNdkHUN1xhjGjq6urOaFioeZJ7wego/BeNL1z6O3zSjILYhZsJz2XJkiWqoyx9I9sswh0Wh93Q0OCdfqbxpWKk05g7d25oXYMgwpqghWz1B61AYEOGDMmaBgVyEQg6B9oP7U969jhuSekRq5mQ8TUqSSRGmw0L96R9S9J3kIJD8g0SkcOARjMACrZzRD+bCDHQoj+Iu9cw412sXr06tFxceprwY9/45hhAZYu0mzRpUk7t27fhw4fHPvdcKbpAzJw5U62gUcaHFpeZkgbMi05y5kI2QywyOxLt9DFoiA4sXLhQ/Vs+8mDqBEZpuXayGAvBwSk+boRc3x3vi3N7o0ac1L9Hjx6Jr+Gv9SQRCN+yReMkEQjyHmnyTfnGiDHXzVKEVl999dWR16FjZebGrINOjRQUCKWkbUhmDozspYIYZbSJzMgrbYqRbMb6lz9zJmUOrp1cy0QMw9xYCD6h2rmUjXgHk3wWiqIKBFPFfLzMTGMNIwpcUoW4LimWg/CxaA9uwWjkPozcNDuLfWNq66M5wlPSyH3yKbCMpqNobGz0RkhJ2oIvtrkIBB9gGFqBoE1oZ5bsJZC65CTw3SFSEpdWXEfOAAGBj3K3ZoJg56vd4HXwQcySztrDzF9HIcNyvsrMFlRD++/Tp4+6PAYaCLPENZYPij6DYDSBP43QuXwYx1VyqHgUfCC8fMLw8mUstG3evPmMa/HiGInRMOJeNnmFVq1adUYZdCosDkrOScA/yTQ/uGDFdJ51DsrPZpwxzOIu0/dsz5a/CSY0YzREkEAuz61v377eLEnawDmrWRJmyYdDvH7Q/7t8+XLRR8doGL8u6ddHjhzpXnrppax+5CQzCKlg45vHDVOoFAuMONlMx5qB1kXIBj1m/1u3blVfl4hBBk7Z2iLf8MCBA71+Iao9Itr19fUtykZIBw8eHFk2AsX3GNWPTJgw4fQ75/njDci1j6A9RUWecR06e2kUJ7O8JM8/F1JfpK5k8I0iFjSCKVOmuGHDhnn++6VLl4p2QbMuwd/Onj3b67jocHA7cC6zv8hdCtvxCw1iwoiVgQCbyhACZm/kE0L4OWiJGUcmPBti/Vmk52MdNWqUmzFjhjeaJgIMd4U0r5NP0jUIPmzWhBALOiw6QmZI1J9Q3dra2qK4DHzonBicINbUgXpxaBUDHxbr6SAZpND+JEELRnIYwBJVyVoQrmJmaAS9cM447Y12n9auahMIw1BQyPMgDKPUMIEwDAUmEEY1YQJhGApMIIxqwgTCMBSYQBjVhAmEYSgwgTCqCRMIw1CgEQg2mxlGOWMCYRgKNAJBGgfDKGdMIAxDAcedSgWiZ8+eaVfXMHLCBMIwFMyfP1+1A5kNUIZRrphAGIaCefPmqQSCdQhpumrDKDVMIAxDAalSNAKB9e7d2y1atKgq0qIYlYUJhGEo4IAdrUD4RpZewygnTCAMQwGJ7JIKBMeaGkY5YQJhGArIIqsVBg5vYi0iKvWzYZQiJhCGoYB069mEgHMlOHeAQ21Ilb1ixYrQA+cNo1wwgTAMBZwExjkUHFHJATacpcD5w5z3UKxTvgyjWJhAGIZhGKGYQBiGYRihmEAYhmEYoZhAGIZhGKGYQBiGYRihmEAYhmEYoZhAGIZhGKGYQBiGYRih/B/qpc2jfj1wMQAAAABJRU5ErkJggg=='></body></html>\"; boolean success = api.printReceipt(validReceipt); Copy Returns Parameter\tNotesBoolean\tTrue if the receipt was sent to the printer, false otherwise. "},{"title":"Search Devices​","type":1,"pageTitle":"Device management","url":"android/Android SDK 6.4.1/androiddevicemanagement#search-devices","content":"searchDevices Starts the search of payment terminals associated with the specified ConnectionMethod Parameters Parameter\tNotesmethod Required ConnectionMethod\tThe type of connection with the payment terminal (Bluetooth, Cloud, etc.). Code example // Starts the search for payment terminals. // You must implement Events.DeviceDiscoveryFinished and subscribe // to the event delegate in order to receive the result api.searchDevices(ConnectionMethod.XXX); Copy Events invoked deviceDiscoveryFinished Returns a list of payment terminals. "},{"title":"Set Locale​","type":1,"pageTitle":"Device management","url":"android/Android SDK 6.4.1/androiddevicemanagement#set-locale","content":"setLocale Sets the SDK Locale (language). It is used to set the SDK language as well as the associated date and number formatting. Parameters Parameter\tNoteslocale Required SupportedLocales\tThe locale to be set. Supported locales are: SupportedLocales.en_CA, SupportedLocales.en_UK, SupportedLocales.en_US, SupportedLocales.hr_HR, SupportedLocales.is_IS, SupportedLocales.fr_FR, SupportedLocales.pt_PT. Code example // Set canadian english api.setLocale(SupportedLocales.en_CA); Copy "},{"title":"Set log level​","type":1,"pageTitle":"Device management","url":"android/Android SDK 6.4.1/androiddevicemanagement#set-log-level","content":"setLogLevel Sets the log level (info, debug...) for both the payment terminal and the SDK. Parameters Parameter\tNoteslevel * LogLevel\tThe desired log level. Can be LogLevel.None, LogLevel.Info, LogLevel.Full, LogLevel.Debug device Device\tThis parameter specifies to the system which device should be used for the operations. If no device is supplied, the system will attempt to use a default one. Code example //Sets the log level to info api.setLogLevel(LogLevel.info); Copy Events invoked None No events are invoked. Returns Parameter\tNotesBoolean\tTrue iif the operation was successfully sent to device. "},{"title":"Stop current transaction​","type":1,"pageTitle":"Device management","url":"android/Android SDK 6.4.1/androiddevicemanagement#stop-current-transaction","content":"stopCurrentTransaction Stops the current transaction. A transaction can be stopped only if the last currentTransactionStatus event reported has the property isCancelAllowed set to true.NOTE: this operation is Not supported on Datecs devices. Code example // Stops current transaction if (api.stopCurrentTransaction()) { ... } else { ... } Copy Events invoked currentTransactionStatus Invoked after stop transaction. Status UserCancelled will be reported endOfTransaction Transaction will fail with status CANCELLED Returns Parameter\tNotesBoolean\tTrue if the transaction was successfully stopped, false otherwise. "},{"title":"Update device​","type":1,"pageTitle":"Device management","url":"android/Android SDK 6.4.1/androiddevicemanagement#update-device","content":"update The update operation checks for new software or configuration updates and initiates a download if required. Parameters Parameter\tNotesdevice Device\tThis parameter specifies to the system which device should be used for the operations. If no device is supplied, the system will attempt to use a default one. Code example //Check for card reader update api.update(); Copy Events invoked None The merchant should be notified about the update process. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Javascript Interface","type":0,"sectionRef":"#","url":"express/Express SDK 1.2/expressjavascriptinterface","content":"Javascript Interface We provide a simple Javascript interface for web based implementations. It is a helper library that generates URLs for the different types of transactions. To use it you must include hapiexpress.js in your code and initialise it before generating the urls. Example for a 10$ sale let ssk = '0102030405060708091011121314151617181920212223242526272829303132'; let shouldAutoReturn = false; let autoReturnTimeout = 0; initHapiExpress('hapi-tests', ssk, shouldAutoReturn, autoReturnTimeout); let amount = 1000; // Translates to 10.00 let currency = \"USD\" let callbackurl = \"http://example.com/callbackID\" let url = Hapi.urlForSale(amount, currency, {'extra-value':'some info'}, callbackurl); Hapi.openUrl(url); Copy","keywords":""},{"title":"Introduction","type":0,"sectionRef":"#","url":"express/Express SDK 1.2/expressintroduction","content":"","keywords":""},{"title":"Handpoint Express Installation​","type":1,"pageTitle":"Introduction","url":"express/Express SDK 1.2/expressintroduction#handpoint-express-installation","content":"Windows info The Windows Express app is portable since version 1.3.2! This means that you don't need to install it, just download it and run it once. We take care of the rest. It will download updates automatically so you don't have to worry about that. However if you had a previous version installed it is advised that you uninstall it previously to avoid confusion and conflicts. Android & iOS tip Download the Android & iOS Express apps directly from the Android Play Store or iOS App Store. "},{"title":"Transactions","type":0,"sectionRef":"#","url":"android/Android SDK 6.4.1/androidtransactions","content":"","keywords":""},{"title":"Sale​","type":1,"pageTitle":"Transactions","url":"android/Android SDK 6.4.1/androidtransactions#2","content":"Sale A sale initiates a payment operation to the card reader. In it's simplest form you only have to pass the amount and currency but it also accepts tip configuration and a map with extra parameters. Parameters Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge options SaleOptions\tAn object to store all the customization options for a sale. Code example //Initiate a sale for 10.00 in Great British Pounds api.sale(new BigInteger(\"1000\"),Currency.GBP); //Initiate a sale for 10.00 in Great British Pounds with tipping configuration //This feature is only available for PAX and Telpo devices TipConfiguration tipConfiguration = new TipConfiguration(); tipConfiguration.setTipPercentages(Arrays.asList(5, 10, 15, 20)); tipConfiguration.setAmount(new BigInteger(\"1000\")); tipConfiguration.setBaseAmount(new BigInteger(\"1000\")); tipConfiguration.setEnterAmountEnabled(true); tipConfiguration.setFooter(\"Thank you\"); tipConfiguration.setSkipEnabled(true); SaleOptions options = new SaleOptions(); options.setTipConfiguration(tipConfiguration); api.sale(new BigInteger(\"1000\"),Currency.GBP, options); Copy Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry').  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the terminal finishes processing the transaction.  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Sale And Tokenize Card​","type":1,"pageTitle":"Transactions","url":"android/Android SDK 6.4.1/androidtransactions#3","content":"saleAndTokenizeCard A sale operation which also returns a card token. (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice) Parameters Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge options SaleOptions\tAn object to store all the customization options for a sale. Code example //Initiate a sale for 10.00 in Great British Pounds api.saleAndTokenizeCard(new BigInteger(\"1000\"),Currency.GBP); //Initiate a sale for 10.00 in Great British Pounds with tipping configuration //This feature is not available for HiLite & Hi5 devices TipConfiguration tipConfiguration = new TipConfiguration(); tipConfiguration.setTipPercentages(Arrays.asList(5, 10, 15, 20)); tipConfiguration.setAmount(new BigInteger(\"1000\")); tipConfiguration.setBaseAmount(new BigInteger(\"1000\")); tipConfiguration.setEnterAmountEnabled(true); tipConfiguration.setFooter(\"Thank you\"); tipConfiguration.setSkipEnabled(true); SaleOptions options = new SaleOptions(); options.setTipConfiguration(tipConfiguration); api.saleAndTokenizeCard(new BigInteger(\"1000\"),Currency.GBP,options); Copy Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry').  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the terminal finishes processing the transaction.  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Sale Reversal​","type":1,"pageTitle":"Transactions","url":"android/Android SDK 6.4.1/androidtransactions#sale-reversal","content":"saleReversal A sale reversal, also called sale VOID allows the user to reverse a previous sale operation. This operation reverts (if possible) a specific sale identified with a transaction id. In its simplest form you only have to pass the amount, currency and originalTransactionID but it also accepts a map with extra parameters. Note that transactions can only be reversed within a 24 hours timeframe or until the daily batch of transactions has been sent for submission. Parameters Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge originalTransactionID Required String\tId of the original sale transaction options SaleOptions\tAn object to store all the customization options for a sale. Code example //Initiate a reversal for 10.00 in Great British Pounds api.saleReversal(new BigInteger(\"1000\"),Currency.GBP,\"00000000-0000-0000-0000-000000000000\"); Copy Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry').  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the terminal finishes processing the transaction.  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Refund​","type":1,"pageTitle":"Transactions","url":"android/Android SDK 6.4.1/androidtransactions#5","content":"refund A refund operation moves funds from the merchant account to the cardholder´s credit card. In it's simplest form you only have to pass the amount and currency but it also accepts a map with extra parameters. Note that a card is required to be swiped, dipped or tapped for this operation. For Interac (Canadian Debit Network), refunds can only be processed until Interac closes the batch of transactions at night. Parameters Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge originalTransactionID String\tIf present it links the refund with a previous sale. It effectively limits the maximum amount refunded to that of the original transaction. options SaleOptions\tAn object to store all the customization options for a refund. Code example //Initiate a refund for 10.00 in Great British Pounds api.refund(new BigInteger(\"1000\"),Currency.GBP,\"00000000-0000-0000-0000-000000000000\"); Copy  Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry')  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the terminal finishes processing the transaction  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Refund reversal​","type":1,"pageTitle":"Transactions","url":"android/Android SDK 6.4.1/androidtransactions#refund-reversal","content":"refundReversal A refund reversal, also called refund VOID allows the merchant to reverse a previous refund operation. This operation reverts (if possible) a specific refund identified with a transaction id. In it's simplest form you only have to pass the amount, currency and originalTransactionID but it also accepts a map with extra parameters. Note that transactions can only be reversed within a 24 hours timeframe or until the daily batch of transactions has been sent for submission. Parameters Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge originalTransactionID Required String\ttransaction id of the original refund options SaleOptions\tAn object to store all the customization options for the transaction. Code example //Initiate a refund reversal for 10.00 in Great British Pounds api.refundReversal(new BigInteger(\"1000\"),Currency.GBP,\"00000000-0000-0000-0000-000000000000\"); Copy Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry')  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the terminal finishes processing the transaction  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Signature result​","type":1,"pageTitle":"Transactions","url":"android/Android SDK 6.4.1/androidtransactions#signature-result","content":"signatureResult A signatureRequired event is invoked during a transaction when a signature verification is required (f.ex when a payment is done with a swiped or chip and sign card). The merchant is required to ask the cardholder for signature and approve (or decline) the signature. signatureResult tells the card reader if the signature was approved by passing the value true in the method. To decline a signature event then false should be passed to the card reader. Note that this event is only required for an HiLite or Hi5 integration and can be safely ignored for a PAX or Telpo integration. Parameters Parameter\tNotesaccepted Required Boolean\tpass true if merchant accepts cardholder signature Code example //Approves signature automatically in signatureRequired event @Override public void signatureRequired(SignatureRequest signatureRequest, Device device){ api.signatureResult(true); } Copy Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry')  endOfTransaction Invoked when the terminal finishes processing the transaction  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Tip Adjustment​","type":1,"pageTitle":"Transactions","url":"android/Android SDK 6.4.1/androidtransactions#tip-adjustment","content":"TipAdjustment A tip adjustment operation allows merchants to adjust the tip amount of a sale transaction before the batch of transactions is settled by the processor at the end of the day. Note: This functionality is only available for the restaurant industry in the United States and the processors currently supporting this functionality are TSYS and VANTIV. Dependencies: The code example provided depends on RxJava, take a look a their documentation to see how to easily include this dependency in your android project. If you do not want to use RxJava or any additional dependencies then AsyncTask, provided by android, can be used instead for this asynchronous processing. Still we recommend using RxJava as it improves readability and maintainability. Parameters Parameter\tNotestipAmount Required BigDecimal\tTip amount added to the original (base) transaction amount - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) originalTransactionID Required String\tUnique id of the original sale transaction as received from the card reader (EFTTransactionID) Code example Observable.fromCallable(new Callable() { @Override public FinancialStatus call() throws Exception { return api.tipAdjustment(new BigDecimal(1000), \"2bc23910-c3b3-11e6-9e62-07b2a5f091ec\"); } }) .subscribeOn(Schedulers.io()) .observeOn(AndroidSchedulers.mainThread()) .subscribe(new Consumer() { @Override public void accept(@NonNull FinancialStatus status) throws Exception { if (status == FinancialStatus.AUTHORISED) { //SUCCESS } else if (status == FinancialStatus.DECLINED) { //DECLINED } else { //FAILED } }); Copy Returns Result of the tip adjustment transaction, it returns a FinancialStatus, the possible values are : Parameter\tNotesFinancialStatus\t- FinancialStatus.AUTHORISED (tip adjustment approved by the processor) - FinancialStatus.FAILED (system error or timeout) - FinancialStatus.DECLINED (tip adjustment declined by the processor). If two tip adjustments are sent for the same sale transaction, the second tip adjustment will override the first one. In case the transaction fails (not declined) we recommend that you prompt the user of the POS to retry the adjustment. "},{"title":"Tokenize Card​","type":1,"pageTitle":"Transactions","url":"android/Android SDK 6.4.1/androidtransactions#tokenize-card","content":"tokenizeCard Returns a card token (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice) Parameters Parameter\tNotesoptions SaleOptions\tAn object to store all the customization options for the transaction. Code example //Tokenize a card api.tokenizeCard(); Copy Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry')  endOfTransaction Invoked when the terminal finishes processing the transaction  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Card PAN​","type":1,"pageTitle":"Transactions","url":"android/Android SDK 6.4.1/androidtransactions#card-pan","content":"cardPan A cardPan request will return the full PAN of the card being swiped, dipped or tapped. Only the PANs of whitelisted card ranges will be returned by the Handpoint systems. This operation is mostly used to be able to process funds or points from loyalty cards. Parameters Parameter\tNotesoptions SaleOptions\tAn object to store all the customization options for the transaction. Code example //Gets the PAN of a card api.cardPan(); Copy Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry')  endOfTransaction Invoked when the terminal finishes processing the transaction  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Processing Payments Simulation","type":0,"sectionRef":"#","url":"express/Express SDK 1.2/expressprocessing","content":"Processing Payments Simulation Your test payments are sent against a test server on the Handpoint side which simulates the behavior of an acquiring bank. Funds are not moved and sensitive data from the card is fully encrypted. You can use trigger amounts to generate some specific responses from our server: Sale amounts Amount\tBehaviour37.79\tIssuer response code = 01 (Refer to issuer) 37.84\tIssuer response code = 05 (Not authorized) 37.93\tIssuer response code = 04 (Pick up card) 37.57\tRequest is partially approved 37.68\tRequest timeout","keywords":""},{"title":"Json Request","type":0,"sectionRef":"#","url":"express/Express SDK 1.2/expressjsonrequest","content":"Json Request Request fields Name\tType\tDescriptionaction\tobject\tRequired Contains the transaction type and relevant parameters client\tobject\tRequired Contains information specific to the client setup Action fields Name\tType\tDescriptiontype\tstring\tRequired The type of transaction you intend to perform, currently supported types are \"sale\", \"refund\", \"saleReversal\", \"refundReversal\", \"saleAndTokenizeCard\", \"enableScanner\" parameters\tobject\tRequired An object containing the keys an values with the parameters required for this transaction. extraParameters\tobject\tRequired Contains a custom set of keys and values passed that will go to the gateway and will be delivered back in the response. Useful for tracking the transactions, merchants, etc... Transaction Parameters fields Name\tType\tDescriptionamount\tstring\tRequired The amount of money, in the smallest unit of the applicable currency. For US dollars, this value is in cents. (So, $12 would result in 1200. $0.01 would result in 1) This value is always an integer. currency\tstring\tRequired The type of currency involved in the current payment, in ISO 4217 format. For example, the currency code for US dollars is USD. originalTransactionID\tstring\tRequired (Required for reversals.) The original transaction Id required to reverse/cancel a transaction. Barcode / QR Scanner Parameters fields Name\tType\tDescriptionmultiScan\tboolean\tOptional True if you want the scanner to stay on to capture multiple codes. False to shut off after the first succesful scan, timeout or cancel. Default is False. autoScan\tboolean\tOptional True if you want the scanner to function automatically without the press of a button. Default is False. resultsGrouped\tboolean\tOptional True if you want the results of the scan to come all grouped when the scanner is turned off. Otherwise the device will send an event per each code scanned. Default is True. timeout\tinteger\tOptional The amount of seconds after which the scanner, if left idle, turns itself off. Default is 0. Client fields Name\tType\tDescriptionclientId\tstring\tArbitrary identification of the client. Your APP_ID or just an unique identifier of your web client. ssk\tstring\tShared Secret Key to activate the card reader. autoReturn\tboolean\tRequired If true, Express client automatically gets hidden/switches back to your app following a short timeout after the transaction completes. Otherwise, the merchant must tap the Back button to return to your app. autoReturnTimeout\tinteger\tNumber of seconds to wait before switching back to your app if autoReturn is true. The default value is 10","keywords":""},{"title":"Setup","type":0,"sectionRef":"#","url":"express/Express SDK 1.2/expresssetup","content":"Setup Download and install the app for your platform and start integrating, either directly through the custom url scheme or by using our Javascript interface that abstracts the messaging format. You can start developing as soon as you receive a Handpoint payment terminal. Your end user, the merchant, only has to install the Express application on the platform of her choice to start accepting card present payments seamlessly with your application and a Handpoint card reader.","keywords":""},{"title":"Events listeners","type":0,"sectionRef":"#","url":"android/Android SDK 6.4.1/androideventlisteners","content":"","keywords":""},{"title":"All​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#all","content":"Events.All An interface which needs to be implemented and added as a listener to receive all available events. Extends Required Log Status PendingResults ReportResult PrinterEvents TransactionStarted MessageHandling PhysicalKeyboardEvent "},{"title":"Basic​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#basic","content":"Events.Basic An interface which needs to be implemented and added as a listener to receive basic events. Extends Required Log Status PendingResults ReportResult "},{"title":"Connection status changed​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#connection-status-changed","content":"Events.ConnectionStatusChanged Implement this interface in order to receive connection status changes. Methods connectionStatusChanged( ConnectionStatus status , Device device ); Parameter\tNotesstatus Required ConnectionStatus\tNew status of the connection device Required Device\tThe terminal which sent this information. Code example public final class EventHandler implements Events.ConnectionStatusChanged { @Override public void connectionStatusChanged(ConnectionStatus status, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Current transaction status​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#14","content":"Events.CurrentTransactionStatus Implement this interface in order to receive events about the current transaction. Methods currentTransactionStatus( StatusInfo status , Device device ); Parameter\tNotesstatus Required StatusInfo\tThe StatusInfo of the current transaction device Required Device\tThe terminal the request is sent from. Code example public final class EventHandler implements Events.CurrentTransactionStatus { @Override public void currentTransactionStatus(StatusInfo info, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Device capabilities ready​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#device-capabilities-ready","content":"Events.DeviceCapabilitiesReady Implement this interface in case the terminal needs to notify the SDK of its capabilities Methods deviceCapabilities( DeviceCapabilities capabilities , Device device ); Parameter\tNotescapabilities Required DeviceCapabilities\tThe capabilities of the terminal device Required Device\tThe terminal sending its capabilities Code example public final class EventHandler implements Events.DeviceCapabilitiesReady { @Override public void deviceCapabilities(DeviceCapabilities capabilities, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Device discovery finished​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#device-discovery-finished","content":"Events.DeviceDiscoveryFinished Implement this interface in order to receive a list of available terminals. The event handler defined in this interface is invoked after calling the method searchDevices Methods deviceDiscoveryFinished( List<Device> devices ); Parameter\tNotesdevice Required Device\tA list of available devices. Code example public final class EventHandler implements Events.DeviceDiscoveryFinished { @Override public void deviceDiscoveryFinished(List<Device> devices) { // Receiving a list of connectable devices foreach(Device device in devices) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"End of transaction​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#16","content":"Events.EndOfTransaction Implement this interface to receive an event when a transaction is complete. Methods dendOfTransaction( TransactionResult result , Device device ); Parameter\tNotesresult Required TransactionResult\tHolds all the information about the transaction. device Required Device\tThe payment terminal. Code example public final class EventHandler implements Events.EndOfTransaction { @Override public void endOfTransaction(TransactionResult result, Device device) { // Check the status of the transaction, save it, ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Hardware status changed​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#hardware-status-changed","content":"Events.HardwareStatusChanged Implement this interface in order to receive events when the hardware status changes. Methods hardwareStatusChanged( HardwareStatus status , Device device ); Parameter\tNotesstatus Required HardwareStatus\tNew status of the hardware. device Required Device\tThe payment terminal. Code example public final class EventHandler implements Events.HardwareStatusChanged { @Override public void hardwareStatusChanged(HardwareStatus status, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Log​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#log","content":"Events.Log An interface which needs to be implemented and added as a listener to receive logging information. Extends OnMessageLogged Code example public final class EventHandler implements Events.Log { @Override public void deviceLogsReady(String logs, Device device) { ... } @Override public void onMessageLogged(LogLevel level , String message) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"MessageHandling​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#messagehandling","content":"Events.MessageHandling An interface which needs to be implemented and added as a listener to get events which are called when the sdk asks the application to display or hide a message. Methods showMessage( String message , Boolean dismissible , int duration ); Parameter\tNotesmessage Required String\tMessage to display dismissible Required Boolean\tA flag that indicates whether the message can be dismissed duration Required int\tThe timeout to hide the message. In milliseconds, if 0 is sent, the message should not auto dismiss. hideMessage( String message ); Parameter\tNotesmessage Required String\tMessage to hide Code example public final class EventHandler implements Events.MessageHandling { @Override public void showMessage(String message, Boolean dismissible, int duration) { // Show message for a 'duration' period (if duration = 0 DO NOT dismiss until hideMessage(String message) event is received) and make it dismissible if the input marks it as possible } @Override public void hideMessage(String message) { // Hide the message } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"PhysicalKeyboardEvent​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#physicalkeyboardevent","content":"Events.PhysicalKeyboardEvent An interface which needs to be implemented and added as a listener to get events coming from the PAX A80 physical keyboard.  Methods onKeyPressed( PaxA80Keys key ); Parameter\tNoteskey Required PaxA80Keys\tThe name of the key that has been pressed Code example public final class EventHandler implements Events.PhysicalKeyboardEvent { @Override public void onKeyPressed(String key) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"On message logged​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#on-message-logged","content":"Events.OnMessageLogged Implement this interface to receive logs from the payment terminal. You must call getDeviceLogs to request the logs. Methods onMessageLogged( LogLevel level , String message ); Parameter\tNoteslevel Required LogLevel\tThe LogLevel of the logging message Required String\tThe log trace which was logged by the SDK. Code example public final class EventHandler implements Events.OnMessageLogged { @Override public void onMessageLogged(LogLevel level, String message) { // Process log trace } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"PendingResults​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#pendingresults","content":"Events.PendingResults An interface which needs to be implemented and added as a listener to receive information about pending TransactionResults. In case of a communication failure between the SDK and the payment terminal there might be a result pending from the transaction which did not get sent to the SDK. Code example public final class EventHandler implements Events.PendingResults { @Override public void transactionResultReady(TransactionResult transactionResult, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy Extends TransactionResultReady "},{"title":"PaymentProvider​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#paymentprovider","content":"Events.PaymentProvider An interface which needs to be implemented and added as a listener to receive all available events related to financial operations. Code example public final class EventHandler implements Events.PendingResults { @Override public void transactionResultReady(TransactionResult transactionResult, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy Extends SignatureRequired EndOfTransaction OnMessageLogged CurrentTransactionStatus "},{"title":"PrinterEvents​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#printerevents","content":"Events.PrinterEvents An interface which needs to be implemented and added as a listener to get events coming from the printer. Methods printSuccess( ); printError(PrintError error); Parameter\tNoteserror Required PrintError\tEnum detailing the reason of the error Code example public final class EventHandler implements Events.PrinterEvents { @Override public void printSuccess() { // Successful print action } @Override public void printError(PrintError error) { // Unable to perform print action due to error } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Report result​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#report-result","content":"Events.ReportResult Implement this interface to receive an event when a report result from a getTransactionsReport is returned Methods reportResult( TypeOfResult type , String report , DeviceStatus status , Device device ); Parameter\tNotestype Required TypeOfResult\tThe type of the report report Required String\tThe text of the report status Required DeviceStatus\tThe status of the device device Required Device\tThe terminal sending the report Code example public final class EventHandler implements Events.ReportResult { @Override public void reportResult(TypeOfResult type, String report, DeviceStatus status, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Required​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#42","content":"Events.Required You must provide a class implementing this interface when initializing the SDK. Code example public final class EventHandler implements Events.Required { @Override public void signatureRequired(SignatureRequest signatureRequest, Device device) { ... } @Override public void endOfTransaction(TransactionResult transactionResult, Device device) { ... } @Override public void deviceDiscoveryFinished(List devices) { ... } @Override public void transactionResultReady(TransactionResult transactionResult, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy Events SignatureRequired EndOfTransaction DeviceDiscoveryFinished PendingResults "},{"title":"Signature required​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#15","content":"Events.SignatureRequired The SignatureRequired interface must be implemented in order to receive an event when a card requires a signature as a verification method. This interface is only required for an Hi5 or Hilite integration, PAX and Telpo terminals automatically prompt for signature capture on the terminal. Methods signatureRequired( SignatureRequest request , Device device ); Parameter\tNotesrequest Required SignatureRequest\tHolds the signature request. device Required Device\tThe payment terminal. Code example public final class EventHandler implements Events.SignatureRequired { @Override public void signatureRequired(SignatureRequest signatureRequest, Device device) { // Save merchant receipt String merchantReceipt = signatureRequest.getMerchantReceipt(); api.signatureResult(true); } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Status​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#status","content":"Events.Status An interface which needs to be implemented and added as a listener to receive connection and transaction statuses. Code example public final class EventHandler implements Events.Status { @Override public void connectionStatusChanged(ConnectionStatus status, Device device) { ... } @Override public void hardwareStatusChanged(HardwareStatus status, Device device) { ... } @Override public void currentTransactionStatus(StatusInfo info, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy Extends ConnectionStatusChanged HardwareStatusChanged CurrentTransactionStatus "},{"title":"Transaction result ready​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#transaction-result-ready","content":"Events.TransactionResultReady Implement this interface in order to receive an event after a pending TransactionResult has been recovered from the payment terminal. Methods transactionResultReady( TransactionResult transactionResult , Device device ); Parameter\tNotestransactionResult Required TransactionResult\tA TransactionResult is containing all information about the recovered transaction. device Required Device\tThe payment terminal. Code example public final class EventHandler implements Events.TransactionResultReady { @Override public void transactionResultReady(TransactionResult transactionResult, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Transaction started​","type":1,"pageTitle":"Events listeners","url":"android/Android SDK 6.4.1/androideventlisteners#transaction-started","content":"Events.TransactionStarted Implement this interface in order to receive an event when a transaction is started through the Cloud API channel. IMPORTANT NOTE: This interface is only available for cloud-enabled devices. See DeviceCapabilitiesReady interface. Methods transactionStarted( TransactionType transactionType , BigInteger amount , Currency currency ); Parameter\tNotestransactionType Required TransactionType\tType of transaction started amount Required BigInteger\tAmount in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the transaction started Code example public final class EventHandler implements Events.TransactionStarted { @Override public void transactionStarted(TransactionType type, BigInteger amount, Currency currency) { // Notify the app user transaction has been started ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Sandbox","type":0,"sectionRef":"#","url":"express/Express SDK 1.2/expresssandbox","content":"Sandbox We've built a tool to help you in your development and testing of this solution. Check it at: https://handpoint.com/express You can generate sample transactions, test the experience in your browser and see the responses if you enable the sandbox mode. When sandbox mode is enabled you are provided with a uniqe URL which you can use for callbacks when testing your own application.","keywords":""},{"title":"Javascript Methods","type":0,"sectionRef":"#","url":"express/Express SDK 1.2/expressjavascriptmethods","content":"","keywords":""},{"title":"initHapiExpress​","type":1,"pageTitle":"Javascript Methods","url":"express/Express SDK 1.2/expressjavascriptmethods#inithapiexpress","content":"Creates an instance of Hapi. Parameters Parameter\tNotesclient_id Required string\tA unique identifier of your system to group operations ssk Required string\tThe shared secret key to authorize the operations auto_return Required Boolean\tIf true, Handpoint Express automatically switches back to your app following a short timeout after the transaction completes. Code Example initHapiExpress('hapi-tests', '010203040050606', false); Copy Returns Parameter\tNotesobject\tThe Hapi interface object with functions to generate URLs for sale, refund and reversals "},{"title":"openURL​","type":1,"pageTitle":"Javascript Methods","url":"express/Express SDK 1.2/expressjavascriptmethods#openurl","content":"Opens a URL that is passed. This is a helper method. URLs generated by the UrlFor... methods can also be opened just like a normal link. Parameters Parameter\tNotesurl Required string\tUrl to open Code Example Hapi.openURL('handpoint://express/v1/?data=') Copy "},{"title":"urlForRefund​","type":1,"pageTitle":"Javascript Methods","url":"express/Express SDK 1.2/expressjavascriptmethods#urlforrefund","content":"Constructs the URL needed for opening the express app and starting a refund operation. Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required string\tCurrency of the charge extra_parameters Required object\tAn object containing additional sale parameters, fx. Key: \"Budget\", Value: \"03\" callbacl_url Required string\tThe URL that Handpoint Express will send its response to. Code Example Hapi.urlForRefund('1000', 'USD', {'extra-value':'some info'}, 'http://callback.com'); Copy Returns Parameter\tNotesString\tA complete constructed and encoded URL string that includes the data for opening the express app and performing the operation "},{"title":"urlForRefundReversal​","type":1,"pageTitle":"Javascript Methods","url":"express/Express SDK 1.2/expressjavascriptmethods#urlforrefundreversal","content":"Constructs the URL needed for opening the express app and reverting a refund transaction. This operation tries to void an earlier refund transaction, therefor the transaction GUID is needed for the transaction to be voided. Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required string\tCurrency of the charge originalTransactionID Required string\tThe transaction id number for the transactino to void/revert extra_parameters Required object\tAn object containing additional sale parameters, fx. Key: \"Budget\", Value: \"03\" callbacl_url Required string\tThe URL that Handpoint Express will send its response to. Code Example Hapi.urlForRefundReversal('1000', 'USD', '1234' {'extra-value':'some info'}, 'http://callback.com'); Copy Returns Parameter\tNotesString\tA complete constructed and encoded URL string that includes the data for opening the express app and performing the operation "},{"title":"urlForSale​","type":1,"pageTitle":"Javascript Methods","url":"express/Express SDK 1.2/expressjavascriptmethods#urlforsale","content":"Constructs the URL needed for opening the express app and starting a sale. Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required string\tCurrency of the charge extra_parameters Required object\tAn object containing additional sale parameters, fx. Key: \"Budget\", Value: \"03\" callbacl_url Required string\tThe URL that Handpoint Express will send its response to. Code Example Hapi.urlForSale('1000', 'USD', {'extra-value':'some info'}, 'http://callback.com'); Copy Returns Parameter\tNotesString\tA complete constructed and encoded URL string that includes the data for opening the express app and performing the operation "},{"title":"urlForSaleAndTokenizeCard​","type":1,"pageTitle":"Javascript Methods","url":"express/Express SDK 1.2/expressjavascriptmethods#urlforsaleandtokenizecard","content":"Constructs the URL needed for opening the express app and starting a saleAndTokenizeCard Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required string\tCurrency of the charge extra_parameters Required object\tAn object containing additional sale parameters, fx. Key: \"Budget\", Value: \"03\" callbacl_url Required string\tThe URL that Handpoint Express will send its response to. Code Example Hapi.urlForSaleAndTokenizeCard('1000', 'USD', {'extra-value':'some info'}, 'http://callback.com'); Copy Returns Parameter\tNotesString\tA complete constructed and encoded URL string that includes the data for opening the express app and performing the operation "},{"title":"urlForSaleReversal​","type":1,"pageTitle":"Javascript Methods","url":"express/Express SDK 1.2/expressjavascriptmethods#urlforsalereversal","content":"Constructs the URL needed for opening the express app and reverting a sale transaction. This operation tries to void an earlier sale transaction, therefor the transaction GUID is needed for the transaction to be voided. Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required string\tCurrency of the charge extra_parameters Required object\tAn object containing additional sale parameters, fx. Key: \"Budget\", Value: \"03\" originalTransactionID Required string\tThe transaction id number for the transactino to void/revert callbacl_url Required string\tThe URL that Handpoint Express will send its response to. Code Example Hapi.urlForSaleReversal('1000', 'USD', '1234' {'extra-value':'some info'}, 'http://callback.com'); Copy Returns Parameter\tNotesString\tA complete constructed and encoded URL string that includes the data for opening the express app and performing the operation "},{"title":"urlForScanner​","type":1,"pageTitle":"Javascript Methods","url":"express/Express SDK 1.2/expressjavascriptmethods#urlforscanner","content":"Constructs the URL needed for opening the express app and starting scanning. Parameter\tNotesmultiScan Required boolean\tTrue if you want the scanner to stay on to capture multiple codes. False to shut off after the first succesful scan, timeout or cancel. Default is False autoScan Required boolean\tTrue if you want the scanner to function automatically without the press of a button. Default is False. resultsGrouped Required boolean\tTrue if you want the results of the scan to come all grouped when the scanner is turned off. Otherwise the device will send an event per each code scanned. Default is True. timeout Required integer\tThe amount of seconds after which the scanner, if left idle, turns itself off. Default is 0. extra_parameters Required object\tAn object containing additional sale parameters, fx. Key: \"Budget\", Value: \"03\" callback_url Required string\tThe URL that Handpoint Express will send its response to. Code Example Hapi.urlForScanner(false, false, true, 0, {'extra-value':'some info'}, 'http://callback.com'); Copy Returns Parameter\tNotesString\tA complete constructed and encoded URL string that includes the data for opening the express app and performing the operation "},{"title":"urlForTokenizeCard​","type":1,"pageTitle":"Javascript Methods","url":"express/Express SDK 1.2/expressjavascriptmethods#urlfortokenizecard","content":"Constructs the URL needed for opening the express app and starting a tokenizeCard. Parameter\tNotesextra_parameters Required object\tAn object containing additional sale parameters, fx. Key: \"Budget\", Value: \"03\" callback_url Required string\tThe URL that Handpoint Express will send its response to. Code Example Hapi.urlForTokenizeCard({'extra-value':'some info'}, 'http://callback.com'); Copy Returns Parameter\tNotesString\tA complete constructed and encoded URL string that includes the data for opening the express app and performing the operation "},{"title":"Json Response","type":0,"sectionRef":"#","url":"express/Express SDK 1.2/expressjsonresponse","content":"Json Response The response object is sent to the callback url and contains data relevant to the financial operation. It contains relevant information, extra parameters, a representation of the TransactionResult object returned from our native libraries and any error that occurred. It is formatted in JSON and structured as a collection of \"name\":\"value\" pairs. Values are always a string except in the cases where the value is a boolean or another collection of \"name\":\"value\" pairs. The response will be packed and added to your callbackUrl in the following format https://your_callback_url?data=<packed_response_data> in a GET request. <packed_response_data> is a JSON string that has been URL encoded to make it safe to use as a GET parameter. Response sample { \"metadata\": { \"appVersion\": \"1.0.0\", \"systemInfo\": { \"osName\": \"Windows 7 Home edition\", \"deviceName\": \"PP917838383832\", \"internetConnectionType\": [ \"WiFi\", \"Ethernet\" ] }, \"protocolVersion\": \"v1\" }, \"transactionResult\": { \"statusMessage\": \"AUTH CODE 12345\", \"type\": \"SALE\", \"finStatus\": \"AUTHORISED\", \"requestedAmount\": \"1000\", \"gratuityAmount\": \"000\", \"gratuityPercentage\": \"0\", \"totalAmount\": \"1000\", \"currency\": \"USD\", \"transactionID\": \"00021010001-10033331231\", \"eftTransactionID\": \"778799887-77798987-798798878887888\", \"originalEftTransactionID\": \"778799887-77798987-798798878887888\", \"eftTimestamp\": \"1476113261\", \"authorisationCode\": \"155884656588899\", \"verificationMethod\": \"PIN\", \"cardEntryType\": \"ICC\", \"cardSchemeName\": \"VISA\", \"errorMessage\": \"No error\", \"customerReference\": \"0000000\", \"budgetNumber\": \"0\", \"recoveredTransaction\": false, \"cardTypeId\": \"U015\", \"merchantReceipt\": \"https://url_to_merchant_receipt\", \"customerReceipt\": \"https://url_to_customer_receipt\" }, \"deviceStatus\": { \"serialNumber\": \"615856933558\", \"batteryStatus\": \"100%\", \"batterymV\": \"234\", \"batteryCharging\": \"Charging\", \"externalPower\": \"Connected\", \"applicationName\": \"EFTClient\", \"applicationVersion\": \"2.15.789\" }, \"extraParameters\" : {} } Copy Metadata fields Name\tType\tDescriptionappVersion\tstring\tA string representation of the client version. systemInfo\tobject\tAn object containing info about the Express client protocolVersion\tstring\tA string representation of the Express protocol version used in this request. SystemInfo fields Name\tType\tDescriptionosName\tstring\tA string containing the name and version of the OS the client is running in. deviceName\tstring\tA string containing the Bluetooth name of the card reader. internetConnectionType\tarray\tA list of the available internet connection methods.","keywords":""},{"title":"Installation","type":0,"sectionRef":"#","url":"ios/iOS SDK 4.0.0/iosinstallation","content":"","keywords":""},{"title":"CocoaPods​","type":1,"pageTitle":"Installation","url":"ios/iOS SDK 4.0.0/iosinstallation#cocoapods","content":"CocoaPods is a dependency manager for Cocoa projects. You can install it with the following command: $ gem install cocoapods Copy If you don't have a Podfile yet: $ pod init Copy To integrate HandpointSDK into your Xcode project using CocoaPods, specify it in your Podfile: source 'https://github.com/CocoaPods/Specs.git' platform :ios, '8.0' use_frameworks! target 'your_target' do pod 'HandpointSDK', '~> 3.2.3' end Copy Then, run the following command: $ pod install Copy "},{"title":"Carthage​","type":1,"pageTitle":"Installation","url":"ios/iOS SDK 4.0.0/iosinstallation#carthage","content":"Carthage is a decentralized dependency manager that builds your dependencies and provides you with binary frameworks. You can install Carthage with Homebrew using the following command: $ brew update $ brew install carthage Copy To integrate HandpointSDK into your Xcode project using Carthage, specify it in your Cartfile: github \"handpoint/HandpointSDK-iOS\" Copy Run carthage update to build the framework and drag the built HandpointSDK.framework into your Xcode project. "},{"title":"Manually​","type":1,"pageTitle":"Installation","url":"ios/iOS SDK 4.0.0/iosinstallation#manually","content":"If you'd rather handle the dependency manually there are three approaches to include HandpointSDK in your project: "},{"title":"Prebuilt static library​","type":1,"pageTitle":"Installation","url":"ios/iOS SDK 4.0.0/iosinstallation#prebuilt-static-library","content":"Download the latest pre-built static library from Handpoint's developer portal and refer to the documentation there for the installation steps. "},{"title":"Building the project yourself​","type":1,"pageTitle":"Installation","url":"ios/iOS SDK 4.0.0/iosinstallation#building-the-project-yourself","content":"Download the latest version from the master branch: $ git clone https://github.com/handpoint/HandpointSDK-iOS.git Copy Alternatively you can add it as a git submodule: $ git submodule add https://github.com/handpoint/HandpointSDK-iOS.git Copy "},{"title":"Framework​","type":1,"pageTitle":"Installation","url":"ios/iOS SDK 4.0.0/iosinstallation#framework","content":"You'll find the dynamic framework project called HandpointSDK.xcodeproj at the root of the repo. Static Library You'll find the static library project called headstart.xcodeproj under the Library folder. We strongly discourage you from building this project yourself. This project contains several targets, you need to build the aggregated target device-simulator Release This target produces a .zip file in the same directory as the headstart.xcodeproj file containing both the library and the simulator library. "},{"title":"Static Library​","type":1,"pageTitle":"Installation","url":"ios/iOS SDK 4.0.0/iosinstallation#static-library","content":"You'll find the static library project called headstart.xcodeproj under the Library folder. We strongly discourage you from building this project yourself. This project contains several targets, you need to build the aggregated target device-simulator Release This target produces a .zip file in the same directory as the headstart.xcodeproj file containing both the library and the simulator library. "},{"title":"Introduction","type":0,"sectionRef":"#","url":"ios/iOS SDK 4.0.0/iosintroduction","content":"Introduction iOS SDK version 4.0.0 Get the iOS SDK! tip If you are currently using 3.x of the iOS SDK, take a look at the migration guide to 4.x The Handpoint iOS SDK provides a simple application programming interface for the Handpoint card readers. info Please note that before submitting an app to the Apple App store a MFi hardware request has to be submitted to Apple, to be able to use an external accessory. Please fill our this form before submitting your app to the App store and we will get back to you. If you have any questions, contact us for more details.","keywords":""},{"title":"Device management","type":0,"sectionRef":"#","url":"ios/iOS SDK 4.0.0/iosdevicemanagement","content":"","keywords":""},{"title":"Shared Manager​","type":1,"pageTitle":"Device management","url":"ios/iOS SDK 4.0.0/iosdevicemanagement#11","content":"sharedManager Provides access to the heftManager. The heft manager is used for discovering devices and creating a HeftClient with a connection to selected device. Code example //SharedManager //Provides access to the heftManager //Create an instance of the shared manager at set it's delegate HeftManager* heftManager = [HeftManager sharedManager]; heftManager.delegate = self; Copy Returns Parameter\tNotesHeftManager\tThe heftManager instance "},{"title":"Client for device (NSString)​","type":1,"pageTitle":"Device management","url":"ios/iOS SDK 4.0.0/iosdevicemanagement#12","content":"clientForDevice Creates a HeftClient object. If a connection is successful the HeftClient object is returned in the didConnect event. All transactions are done using the heftClient. Parameters Parameter\tNotesdevice Required NSInteger\tThe device to connect to. sharedSecret Required NSString\tShared secret only known by the merchant and Handpoint. aDelegate Required BOOL\tThe HeftStatusReportDelegate for the HeftClient to report to. Code example //clientForDevice:sharedSecretString:delegate: //Creates a HeftClient object(connection to device) NSString* sharedSecret = @\"0102030405060708091011121314151617181920212223242526272829303132\"; -(void)connectToFirstCardReaderWith:(NSString*)sharedSecret; { //Try to connect to first device in devices array [heftManager clientForDevice:[[heftManager devicesCopy] objectAtIndex:0] sharedSecretString:sharedSecret delegate:self]; //Client calls the didConnect delegate function if successful } Copy Events invoked didConnect Called when a connection to specified device was created. Returns Parameter\tNotesBoolean\tYES if operation starts successfully "},{"title":"Start Discovery​","type":1,"pageTitle":"Device management","url":"ios/iOS SDK 4.0.0/iosdevicemanagement#32","content":"startDiscovery Displays a list of available accessory devices in a modal window. Code example //startDiscovery //Starts the BT discovery process -(void)startDiscovery; { [heftManager startDiscovery]; //Start search activity indicator or other desired functions } Copy "},{"title":"Set log level​","type":1,"pageTitle":"Device management","url":"ios/iOS SDK 4.0.0/iosdevicemanagement#33","content":"logSetLevel Sets the log level of the card reader. There are for levels of logging for the device: none, info, full, debug. Setting the log level means that relevant information concerning the application operation will be stored. Parameters Parameter\tNoteslevel Required eLogLevel\teLogLevel available types: eLogNone, eLogInfo, eLogFull, eLogDebug Code example //logSetLevel: //Sets the log level of the card reader. -(void)disableCardReaderLogs { [heftClient logSetLevel:eLogNone]; } -(void)enableCardReaderDebugLogs { [heftClient logSetLevel:eLogDebug]; } Copy Returns Parameter\tNotesBoolean\tThis method always returns YES "},{"title":"Fetch logs​","type":1,"pageTitle":"Device management","url":"ios/iOS SDK 4.0.0/iosdevicemanagement#34","content":"logGetInfo Retrieves the logging info. Returns them in the responseLogInfo event. Code example //logGetInfo //Retrieves the logging info. -(void)getLogsFromCardReader { [heftClient logGetInfo]; } Copy Returns Parameter\tNotesBoolean\tThis method always returns YES "},{"title":"Reset logs​","type":1,"pageTitle":"Device management","url":"ios/iOS SDK 4.0.0/iosdevicemanagement#35","content":"logReset Clears the logging information stored so far. Code example //logReset //Clears the logging information stored so far -(void)clearLogs { [heftClient logReset]; } Copy Returns Parameter\tNotesBoolean\tThis method always returns YES "},{"title":"Enable scanner​","type":1,"pageTitle":"Device management","url":"ios/iOS SDK 4.0.0/iosdevicemanagement#36","content":"enableScanner Places the card reader in a scan mode. Only if the card reader supports it. To cancel/stop scan mode call the cancel method of the heft client. Parameters Parameter\tNotesmultiScan Boolean\tYes [default] to activate multiScan mode - No to activate singleScan mode. Multi-scan mode allows the user to scan until scan operation is canceled or timeout occurs, single-scan mode is active until one scan has occurred then it disables the scan mode. buttonMode Boolean\tYes [default] if buttonMode is on - No otherwise. If button mode is on then the operator needs to press the scan buttons to activate the scanner(during scan mode). timeoutSeconds NSInteger\t0 [default] - card reader will determine when scanning should time out. x - the scanner will time out if x seconds of inactivity occur. Code example //enableScanner:multiScan:buttonMode:timeoutSeconds //Places the card reader in a scan only mode. //To cancel/stop scan mode call cancel function. -(IBAction)startScan { [heftClient enableScanner]; } -(IBAction)startMultiScan { [heftClient enableScannerWithMultiScan:YES]; } Copy Events invoked responseScannerEvent Called to inform that a scan has been performed, several calls can be expected. Several calls to this method happen after a scan action has been performed to inform about scan information operation. The info object contains scanCode, status and a dictionary (xml). "},{"title":"Disable scanner​","type":1,"pageTitle":"Device management","url":"ios/iOS SDK 4.0.0/iosdevicemanagement#disable-scanner","content":"disableScanner Disables the scanner if possible Code example //disableScanner //Disable the scanner -(IBAction)disableScanner { [heftClient disableScanner]; } Copy Events invoked responseScannerDisabled Called to inform that a scan has been performed, several calls can be expected. Several calls to this method happen after a scan action has been performed to inform about scan information operation. The info object contains scanCode, status and a dictionary (xml). "},{"title":"financeInit​","type":1,"pageTitle":"Device management","url":"ios/iOS SDK 4.0.0/iosdevicemanagement#47","content":"financeInit The update operation checks for update to the card reader and initiates an update if needed. The update can either be a software update or a configuration update. Code example //financeInit //Initializes the card reader and updates config. -(IBAction)updateCardReader { [heftClient financeInit]; } Copy Events invoked responseStatus Invoked while during transaction with different statuses from card reader  responseError Invoked to inform when an error response happens.  responseFinanceStatus Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\tThis method always returns YES "},{"title":"Get SDK version​","type":1,"pageTitle":"Device management","url":"ios/iOS SDK 4.0.0/iosdevicemanagement#get-sdk-version","content":"getSDKVersion Returns the current SDK version number in string format Code example //getSDKVersion //Log SDK version number NSLOG(@\"SDK version: %@\", [heftManager getSDKVersion]; Copy "},{"title":"Get SDK build number​","type":1,"pageTitle":"Device management","url":"ios/iOS SDK 4.0.0/iosdevicemanagement#get-sdk-build-number","content":"getSDKBuildNumber Returns the current SDK build number in string format Code example //getSDKBuildNumber //Log SDK build number NSLOG(@\"SDK build: %@\", [heftManager getSDKBuildNumber]; Copy "},{"title":"Integration Guide","type":0,"sectionRef":"#","url":"android/Android SDK 6.4.1/androidintegrationguide","content":"","keywords":""},{"title":"Android Terminal Native Integration​","type":1,"pageTitle":"Integration Guide","url":"android/Android SDK 6.4.1/androidintegrationguide#8","content":"Introduction This tutorial is guiding you through all the required steps to create a basic payment application for Android Payment devices such as PAX and Telpo. The new generation of Handpoint SDK's is designed to make your life easier. Simple and created for humans, it does not require any specific knowledge of the payment industry to be able to start accepting credit/debit card transactions. At Handpoint we take care of securing every transaction so you don´t have to worry about it while creating your application. We encrypt data from the payment terminal to the bank with our point-to-point encryption solution. Our platform is always up to the latest PCI-DSS security requirements. warning Please, start an operation (sale,refund etc.) ONLY if you have received the InitialisationComplete message from the currentTransactionStatus method Let's start programming! 1. Modify the AndroidManifest.xml We strongly recommend you add the following to your main <activity>: android:launchMode=\"singleTask\" Copy 2. In the gradle.build android { defaultConfig { minSdkVersion 22 //Required to support all PAX & Telpo models targetSdkVersion 29 multiDexEnabled true } packagingOptions { pickFirst '**/*.so' exclude 'META-INF/*' exclude '**/anim/*.xml' exclude '**/layout/*.xml' exclude 'resources.arsc' exclude 'AndroidManifest.xml' } } Copy 3. Create a Java class Create a new java class called HandpointDelegate.java and include com.handpoint.api.* as a dependency: package com.yourpackage.name; import com.handpoint.api.HandpointCredentials; import com.handpoint.api.Hapi; import com.handpoint.api.HapiFactory; import com.handpoint.api.shared.ConnectionMethod; import com.handpoint.api.shared.ConnectionStatus; import com.handpoint.api.shared.Currency; import com.handpoint.api.shared.Device; import com.handpoint.api.shared.Events; import com.handpoint.api.shared.SignatureRequest; import com.handpoint.api.shared.StatusInfo; import com.handpoint.api.shared.TipConfiguration; import com.handpoint.api.shared.TransactionResult; import com.handpoint.api.shared.agreements.Acquirer; import com.handpoint.api.shared.agreements.Credential; import com.handpoint.api.shared.agreements.MerchantAuth; import com.handpoint.api.shared.options.SaleOptions; import java.math.BigInteger; import java.util.Arrays; import java.util.List; //Check all the events available in the Events interface. //If you want to subscribe to more events, just add to the list of implemented interfaces. public class HandpointDelegate implements Events.Required, Events.ConnectionStatusChanged, Events.CurrentTransactionStatus { private Hapi api; public HandpointDelegate(Context context) { initApi(context); } public void initApi(Context context) { String sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; HandpointCredentials handpointCredentials = new HandpointCredentials(sharedSecret); this.api = HapiFactory.getAsyncInterface(this, context, handpointCredentials); // The api is now initialized. Yay! we've even set default credentials. // The shared secret is a unique string shared between the payment terminal and your application, it is unique per merchant. // You should replace this default shared secret with the one sent by the Handpoint support team. //Since we're running inside the terminal, we can create a device ourselves and connect to it Device device = new Device(\"some name\", \"address\", \"\", ConnectionMethod.ANDROID_PAYMENT); this.api.connect(device); } @Override public void connectionStatusChanged(ConnectionStatus status, Device device) { if (status == ConnectionStatus.Connected) { //Connection Status connected } } @Override public void deviceDiscoveryFinished(List<Device> devices) { // This event can be safely ignored for a PAX/Telpo integration } public boolean pay() { return this.api.sale(new BigInteger(\"1000\"), Currency.GBP); // Let´s start our first payment of 10 pounds // Use the currency of the country in which you will be deploying terminals } public boolean payWithOptions() { SaleOptions options = new SaleOptions(); // Adding tipping TipConfiguration config = new TipConfiguration(); //Optionally config.setHeaderName(\"HEADER\"); //Optionally config.setFooter(\"FOOTER\"); //Optionally config.setEnterAmountEnabled(true); //Optionally config.setSkipEnabled(true); //Optionally config.setTipPercentages(Arrays.asList(5, 10, 15, 20)); options.setTipConfiguration(config); // Adding Multi MID / Custom merchant Authentication MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(Acquirer.SANDBOX); //Optionally credential.setMid(\"mid\"); //Optionally credential.setTid(\"tid\"); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); options.setMerchantAuth(auth); //Add a customer reference options.setCustomerReference(\"Your customer reference\"); //Enable pin bypass options.setPinBypass(true); //Enable signature bypass options.setSignatureBypass(true); //Define a budget number options.setBudgetNumber(\"YOUR_BUDGET_NUMBER\"); return this.api.sale(new BigInteger(\"1000\"),Currency.GBP, options); } @Override public void currentTransactionStatus(StatusInfo statusInfo, Device device) { if (statusInfo.getStatus() == StatusInfo.Status.InitialisationComplete) { // The StatusInfo object holds the different transaction statuses like reading card, pin entry, etc. // Let's launch a payment pay(); } } @Override public void signatureRequired(SignatureRequest signatureRequest, Device device) { // This event can be safely ignored for a PAX/Telpo integration // The complete signature capture process is already handled in the sdk, a dialog will prompt the user for a signature if required. // If a signature was entered, it should be printed on the receipts. } @Override public void endOfTransaction(TransactionResult transactionResult, Device device) { // The TransactionResult object holds details about the transaction as well as the receipts // Useful information can be accessed through this object like the transaction ID, the amount, etc. } @Override public void transactionResultReady(TransactionResult transactionResult, Device device) { // Pending TransactionResult objects will be received through this event if the EndOfTransaction // event was not delivered during the transaction, for example because of a network issue // For this sample app we are not going to implement this event } public void disconnect(){ this.api.disconnect(); //This disconnects the connection } } Copy We're done! Sort of. With the above tutorial you've done a basic integration that can perform sale transactions. Explore the rest of the documentation to see more transaction types supported and possibilities. "},{"title":"Bluetooth Integration​","type":1,"pageTitle":"Integration Guide","url":"android/Android SDK 6.4.1/androidintegrationguide#9","content":"Introduction This tutorial is guiding you through all the required steps to create a basic payment application for Android devices integrated with a HiLite or Hi5 payment terminal. The new generation of Handpoint SDK's is designed to make your life easier. Simple and created for humans, it does not require any specific knowledge of the payment industry to be able to start accepting credit/debit card transactions. At Handpoint we take care of securing every transaction so you don´t have to worry about it while creating your application. We encrypt data from the payment terminal to the bank with our point-to-point encryption solution. Our platform is always up to the latest PCI-DSS security requirements. warning Please, start an operation (sale,refund etc.) ONLY if you have received the InitialisationComplete message from the currentTransactionStatus method Let's start programming! 1. Modify the AndroidManifest.xml We strongly recommend you add the following to your main <activity>: android:launchMode=\"singleTask\" Copy 2. In the gradle.build android { defaultConfig { minSdkVersion 22 //change the SDK version to the one corresponding to the device you are using targetSdkVersion 29 multiDexEnabled true } packagingOptions { pickFirst '**/*.so' exclude 'META-INF/*' exclude '**/anim/*.xml' exclude '**/layout/*.xml' exclude 'resources.arsc' exclude 'AndroidManifest.xml' } } Copy 3. Create a Java class Create a new java class called HandpointDelegate.java and include com.handpoint.api.* as a dependency: package com.yourpackage.name; import android.content.Context; import com.handpoint.api.HandpointCredentials; import com.handpoint.api.Hapi; import com.handpoint.api.HapiFactory; import com.handpoint.api.shared.ConnectionMethod; import com.handpoint.api.shared.ConnectionStatus; import com.handpoint.api.shared.Currency; import com.handpoint.api.shared.Device; import com.handpoint.api.shared.Events; import com.handpoint.api.shared.SignatureRequest; import com.handpoint.api.shared.StatusInfo; import com.handpoint.api.shared.TransactionResult; import java.math.BigInteger; import java.util.List; //Check all the events available in the Events interface. //If you want to subscribe to more events, just add to the list of implemented interfaces. public class HandpointDelegate implements Events.Required, Events.ConnectionStatusChanged, Events.CurrentTransactionStatus { private Hapi api; public HandpointDelegate(Context context) { initApi(context); } public void initApi(Context context) { String sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; HandpointCredentials handpointCredentials = new HandpointCredentials(sharedSecret); this.api = HapiFactory.getAsyncInterface(this, context, handpointCredentials); // The api is now initialized. Yay! we've even set a shared secret! // The shared secret is a unique string shared between the card reader and your mobile application // It prevents other people to connect to your card reader // You have to replace this default shared secret by the one sent by our support team // The shared secret is unique per merchant (not per terminal) //Now we need to find our device and connect to it discoverDevices(); } // Now we need to connect to a device to start taking payments. // Let's search for them: public void discoverDevices() { this.api.searchDevices(ConnectionMethod.BLUETOOTH); // This triggers the asynchronous search for all the devices around that haven't been paired. // You could, alternatively, search for the already paired devices // List<Device> devices = this.api.getPairedDevices(ConnectionMethod.BLUETOOTH); // Now: // selectDeviceAndConnect(devices); // You'll receive the devices found through deviceDiscoveryFinished method. // See: https://handpoint.com/docs/device/Android/#elem_eventsDeviceDiscoveryFinished } @Override public void deviceDiscoveryFinished(List<Device> devices) { selectDeviceAndConnect(devices); } private void selectDeviceAndConnect(List<Device> devices) { for (Device device : devices) { if (device.getName() != null) { // All the devices here are datecs devices if (/* Fill your logic here */) { this.api.connect(device); // Now take a look at connectionStatusChanged method break; } } } } //Potentially, if you know the MAC address of the device you want to connect to, you can skip the search and do it this way public void connect() { Device device = new Device(\"PP0513901435\", \"68:AA:D2:00:D5:27\", \"\", ConnectionMethod.BLUETOOTH); //The Address always has to be written in UPPER CASE //new Device(\"name\", \"address\", \"port\", ConnectionMethod.BLUETOOTH); this.api.connect(device); } @Override public void connectionStatusChanged(ConnectionStatus status, Device device) { if (status == ConnectionStatus.Connected) { // Connected to device } } public boolean pay() { return this.api.sale(new BigInteger(\"1000\"), Currency.GBP); // Let´s start our first payment of 10 pounds } @Override public void currentTransactionStatus(StatusInfo statusInfo, Device device) { if (statusInfo.getStatus() == StatusInfo.Status.InitialisationComplete) { // The StatusInfo object holds the different transaction statuses like reading card, pin entry, etc. // Let's launch a payment pay(); } } @Override public void signatureRequired(SignatureRequest signatureRequest, Device device) { // You'll be notified here if a sale process needs a signature verification // A signature verification is needed if the cardholder uses an MSR or a chip & signature card // This method will not be invoked if a transaction is made with a Chip & PIN card // At this step, you are supposed to display the merchant receipt to the cardholder on the android device // The cardholder must have the possibility to accept or decline the transaction // If the cardholder clicks on decline, the transaction is VOID // If the cardholder clicks on accept he is then asked to sign electronically the receipt this.api.signatureResult(true); // This line means that the cardholder ALWAYS accepts to sign the receipt // For this sample app we are not going to implement the whole signature process } @Override public void endOfTransaction(TransactionResult transactionResult, Device device) { // The object TransactionResult stores the different receipts // Other information can be accessed through this object like the transaction ID, the amount... } @Override public void transactionResultReady(TransactionResult transactionResult, Device device) { // Pending TransactionResult objects will be received through this event if the EndOfTransaction // event was not delivered during the transaction, for example because of a network issue. // For this sample app we are not going to implement this event. } public void disconnect() { this.api.disconnect(); //This disconnects the connection } } Copy info Note about reconnections: By default, the SDK will automatically reconnect to the last known device when the connection is lost.If you want to change this behaviour set the property Settings.AutomaticReconnection in HapiManager to false. We're done! Sort of. With the above tutorial you've done a basic integration that can perform sale transactions. Explore the rest of the documentation to see more transaction types supported and possibilities. "},{"title":"Cloud Integration​","type":1,"pageTitle":"Integration Guide","url":"android/Android SDK 6.4.1/androidintegrationguide#10","content":"Introduction This tutorial is guiding you through all the required steps to integrate with a Handpoint (PAX, Telpo or Datecs) payment terminal, from your Android application, through the internet. CLOUD will be the ConnectionMethod of choice for this guide. With this connection method you become the client in a client - server connection. warning There needs to be another app with one of our SDKs that is active and keeping the connection open. The new generation of Handpoint SDK's is designed to make your life easier. Simple and created for humans, it does not require any specific knowledge of the payment industry to be able to start accepting credit/debit card transactions. At Handpoint we take care of securing every transaction so you don´t have to worry about it while creating your application. We encrypt data from the payment terminal to the bank with our point-to-point encryption solution. The platform is always up to the latest PCI-DSS security requirements. warning Please, start an operation (sale,refund etc.) ONLY if you have received the InitialisationComplete message from the currentTransactionStatus method Let's start programming! 1. In the gradle.build android { defaultConfig { minSdkVersion 22 //Required to support all PAX & Telpo models targetSdkVersion 29 multiDexEnabled true } packagingOptions { pickFirst '**/*.so' exclude 'META-INF/*' exclude '**/anim/*.xml' exclude '**/layout/*.xml' exclude 'resources.arsc' exclude 'AndroidManifest.xml' } } Copy 2. Create a Java class Create a new java class called HandpointDelegate.java and include com.handpoint.api.* as a dependency: package com.yourpackage.name; import android.content.Context; import com.handpoint.api.HandpointCredentials; import com.handpoint.api.Hapi; import com.handpoint.api.HapiFactory; import com.handpoint.api.shared.ConnectionMethod; import com.handpoint.api.shared.ConnectionStatus; import com.handpoint.api.shared.Currency; import com.handpoint.api.shared.Device; import com.handpoint.api.shared.Events; import com.handpoint.api.shared.SignatureRequest; import com.handpoint.api.shared.StatusInfo; import com.handpoint.api.shared.TipConfiguration; import com.handpoint.api.shared.TransactionResult; import com.handpoint.api.shared.agreements.Acquirer; import com.handpoint.api.shared.agreements.Credential; import com.handpoint.api.shared.agreements.MerchantAuth; import com.handpoint.api.shared.options.SaleOptions; import java.math.BigInteger; import java.util.Arrays; import java.util.List; //Check all the events available in the Events interface. //If you want to subscribe to more events, just add to the list of implemented interfaces. public class HandpointDelegate implements Events.Required, Events.ConnectionStatusChanged, Events.CurrentTransactionStatus { private Hapi api; public HandpointDelegate(Context context) { initApi(context); } public void initApi(Context context) { String sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; String merchantApiKey = \"This-is-my-api-key-provided-by-Handpoint\"; HandpointCredentials handpointCredentials = new HandpointCredentials(sharedSecret, merchantApiKey); this.api = HapiFactory.getAsyncInterface(this, context, handpointCredentials); // The api is now initialized. Yay! we've even set default credentials. // The shared secret is a unique string shared between the payment terminal and your application, it is a free field. // The Api key is a unique key per merchant used to authenticate the terminal against the Cloud. // You should replace the API key with the one sent by the Handpoint support team. // Now we need to find our device and connect to it. discoverDevices(); } // Now we need to connect to a device to start taking payments. // Let's search for them: public void discoverDevices(){ this.api.searchDevices(ConnectionMethod.CLOUD); // This triggers the asynchronous search for all the devices around that haven't been paired. // You could, alternatively, search for the already paired devices // List<Device> devices = this.api.getPairedDevices(ConnectionMethod.CLOUD); // Now: // selectDeviceAndConnect(devices); // You'll receive the devices found through the deviceDiscoveryFinished method. // See: https://handpoint.com/docs/device/Android/#elem_eventsDeviceDiscoveryFinished } @Override public void deviceDiscoveryFinished(List<Device> devices) { selectDeviceAndConnect(devices); } private void selectDeviceAndConnect(List<Device> devices) { for (Device device : devices) { if (device.getName() != null){ // All the devices here are all of the merchant's devices if (/* Fill your logic here */) { this.api.connect(device); // Now take a look at connectionStatusChanged method break; } } } } //Potentially, if you know the Serial number and model of the device you want to connect to, you can skip the search and do it this way public void connect(){ Device device = new Device(\"CloudDevice\", \"9822032398-PAXA920\", \"\", ConnectionMethod.CLOUD); //new Device(\"name\", \"address\", \"port\", ConnectionMethod.CLOUD); this.api.connect(device); } @Override public void connectionStatusChanged(ConnectionStatus status, Device device) { if (status == ConnectionStatus.Connected) { // Let's launch a payment pay(); } } public boolean pay() { return this.api.sale(new BigInteger(\"1000\"), Currency.GBP); // Let´s start our first payment of 10 pounds } public boolean payWithOptions() { SaleOptions options = new SaleOptions(); // Adding tipping TipConfiguration config = new TipConfiguration(); //Optionally config.setHeaderName(\"HEADER\"); //Optionally config.setFooter(\"FOOTER\"); //Optionally config.setEnterAmountEnabled(true); //Optionally config.setSkipEnabled(true); //Optionally config.setTipPercentages(Arrays.asList(5, 10, 15, 20)); options.setTipConfiguration(config); // Adding Multi MID / Custom merchant Authentication MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(Acquirer.SANDBOX); //Optionally credential.setMid(\"mid\"); //Optionally credential.setTid(\"tid\"); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); options.setMerchantAuth(auth); //Add a customer reference options.setCustomerReference(\"Your customer reference\"); //Enable pin bypass options.setPinBypass(true); //Enable signature bypass options.setSignatureBypass(true); //Define a budget number options.setBudgetNumber(\"YOUR_BUDGET_NUMBER\"); return this.api.sale(new BigInteger(\"1000\"),Currency.GBP, options); } @Override public void currentTransactionStatus(StatusInfo statusInfo, Device device) { if (statusInfo.getStatus() == StatusInfo.Status.InitialisationComplete) { // The StatusInfo object holds the different transaction statuses like reading card, pin entry, etc. } } @Override public void signatureRequired(SignatureRequest signatureRequest, Device device) { // This event can be safely ignored for a PAX/Telpo integration. The complete signature capture process // is already handled in the sdk, a dialog will prompt the user for a signature if required. // If a signature was entered, it should be printed on the receipts. //For Datecs integrations: // You'll be notified here if a sale process needs a signature verification // A signature verification is needed if the cardholder uses an MSR or a chip & signature card // This method will not be invoked if a transaction is made with a Chip & PIN card // At this step, you are supposed to display the merchant receipt to the cardholder on the android device // The cardholder must have the possibility to accept or decline the transaction // If the cardholder clicks on decline, the transaction is VOID // If the cardholder clicks on accept he is then asked to sign electronically the receipt this.api.signatureResult(true); // This line means that the cardholder ALWAYS accepts to sign the receipt // For this sample app we are not going to implement the whole signature process } @Override public void endOfTransaction(TransactionResult transactionResult, Device device) { // The object TransactionResult stores the different receipts // Other information can be accessed through this object like the transaction ID, the amount... } @Override public void transactionResultReady(TransactionResult transactionResult, Device device) { // Pending TransactionResult objects will be received through this event if the EndOfTransaction // event was not delivered during the transaction, for example because of a network issue. // For this sample app we are not going to implement this event. } public void disconnect(){ this.api.disconnect(); //This disconnects the connection } } Copy We're done! Sort of. With the above tutorial you've done a basic integration that can perform sale transactions. Explore the rest of the documentation to see more transaction types supported and possibilities. "},{"title":"Integration Guide","type":0,"sectionRef":"#","url":"ios/iOS SDK 4.0.0/iosintegration","content":"","keywords":""},{"title":"Files in iOS SDK​","type":1,"pageTitle":"Integration Guide","url":"ios/iOS SDK 4.0.0/iosintegration#files-in-ios-sdk","content":""},{"title":"If you're using the library/Cocoapods:​","type":1,"pageTitle":"Integration Guide","url":"ios/iOS SDK 4.0.0/iosintegration#if-youre-using-the-librarycocoapods","content":"HandpointAll.h: #import this header file into your classes.libheft.a: The SDK library. "},{"title":"If you're using the framework/Carthage:​","type":1,"pageTitle":"Integration Guide","url":"ios/iOS SDK 4.0.0/iosintegration#if-youre-using-the-frameworkcarthage","content":" HandpointSDK.h: #import this header file into your classes.HandpointSDK.framework: The SDK library. The SDK also includes a simulator, a library configured to simulate a card reader - intended for early development of an user interface. To use it, just link the libheft.a file in the HeftSimulatorLibrary folder, instead of the actual SDK library. "},{"title":"Development settings for the SDK​","type":1,"pageTitle":"Integration Guide","url":"ios/iOS SDK 4.0.0/iosintegration#development-settings-for-the-sdk","content":"Dependencies:The Heft library depends on the ExternalAccessory and libc++.dylib frameworks included with the iOS SDK. These frameworks and the libheft.a SDK library itself need to be linked to your project for the Handpoint interface to work properly. Communication protocol: Your application needs to support the card reader communication protocol. For this reason, the com.datecs.pinpad string needs to be added to the Supported external accessory protocols in the .plist file:  <key>UISupportedExternalAccessoryProtocols</key> <array> <string>com.datecs.pinpad</string> </array> Copy Background mode support: Your application needs to support connection to external devices when in the background. For this reason, in the \"Capabilities\" section of the project settings, the Background Modes profile needs to be ON, and the External accessory communication option must be checked. This is equivalent to adding the following entry in the .plist file:  <key>UIBackgroundModes</key> <array> <string>external-accessory</string> </array> Copy C++ linker flag: A part of the library is written in c++ therefore the -lc++ linker flag needs to be set. Add it under \"Other Linker Flags\" under the \"Linking\" section of your projects settings \"Build Settings\" tab.Other settings: To prevent the warning: \"file was built for archive which is not the architecture being linked (armv7s)\", set Build Active Architecture Only to YES. "},{"title":"Usage summary​","type":1,"pageTitle":"Integration Guide","url":"ios/iOS SDK 4.0.0/iosintegration#usage-summary","content":"Any application using the Handpoint SDK should follow these steps: Define a class that implements the HeftDiscoveryDelegate protocol. This class defines the behavior of the app when discovery related events are received from the SDK.Define a class that implements the HeftStatusReportDelegate protocol (it can be the same as above). This class defines the behavior of the app when connection and transaction related events are received from the SDKGet a reference to the HeftManager singleton and assign your HeftDiscoveryDelegate instance as delegate.If device is available through BT connection, start the discovery process by calling the startDiscovery function of the HeftManager and recover a list of the discovered devices by calling the connectedCardReaders function of the HeftManager.If device is using a Lightning connector (HiPro devices), recover the device by directly calling the connectedCardReaders function of the HeftManager.Connect to a device by calling the clientForDevice function of the HeftManager.If connection is successful, the didConnect function of the HeftStatusReportDelegate instance will be invoked.From this point, make transactions and have fun! "},{"title":"Usage details​","type":1,"pageTitle":"Integration Guide","url":"ios/iOS SDK 4.0.0/iosintegration#usage-details","content":"Define a class that implements the HeftDiscoveryDelegate protocol. This class will define the behavior of the application when discovery related events are received from the SDK.  @interface MyDiscoveryDelegate () <HeftDiscoveryDelegate> @implementation MyDiscoveryDelegate Copy Define a class that implements the HeftStatusReportDelegate protocol (it can be the same as above). This class will define the behavior of the application when connection and transaction related events are received from the SDK.  @interface MyStatusReportDelegate () <HeftStatusReportDelegate> @implementation MyStatusReportDelegate Copy Get a reference to the HeftManager singleton in SDK by calling the sharedManager class method. Assign your HeftDiscoveryDelegate instance as delegate of the manager.  MyDiscoveryDelegate* myDiscoveryDelegate = [[alloc MyDiscoveryDelegate] init]; HeftManager* manager = [HeftManager sharedManager]; manager.delegate = myDiscoveryDelegate; Copy If device is available through BT connection, start the discovery process by calling the startDiscovery function of the HeftManager.  [manager startDiscovery]; Copy When a device is selected by the user in the “Select device” popup window, the didFindAccessoryDevice function of the HeftDiscoveryDelegate is invoked.  - (void)didFindAccessoryDevice:(HeftRemoteDevice*)newDevice { NSLog(@\"Found new device\"); //Connect to found device or store it for later } Copy When the discovery process is finished, the didDiscoverFinished function of the HeftDiscoveryDelegate instance will be invoked. Recover a list of all the discovered devices by calling the connectedCardReaders function of the HeftManager.  - (void)didDiscoverFinished { NSMutableDictionary *discoveredDevices = [self.manager connectedCardReaders]; } Copy If device is using a Lightning connection (HiPro devices), skip the previous step and recover the device by directly calling the connectedCardReaders function of the HeftManager. HeftRemoteDevice *lightningDevice = [[self.manager connectedCardReaders] firstObject]; Copy Connect to a device by calling the clientForDevice function of the HeftManager. Expected parameters of this function are: A discovered device (HeftRemoteDevice object). A shared secret. The shared secret is a unique identifier. It is a used to link a merchant with his readers. Each one of your merchants will be assigned a different shared secret so it needs to be a configurable value in your application or backend. If you received a development kit with a card reader, our support team probably sent you a shared secret via email already. A HeftStatusReportDelegate instance, which will be notified of all the events related with the device.  // Declare the shared secret (below SS is an example, please put the one sent by our support team) NSString *sharedSecret =@\"0102030405060708091011121314151617181920212223242526272829303132\"; // Connect to reader [manager clientForDevice:device sharedSecret:mySharedSecret delegate:myStatusReportDelegate]; Copy If connection is successful, the didConnect function of the HeftStatusReportDelegate instance will be invoked. Function receives as parameter a HeftClient object, whose reference must be stored since it is the communication bridge to the device we have connected to.  - (void)didConnect:(id <HeftClient>)client { self.heftClient = client; } Copy Once connected to the card reader, transactions can be started through the HeftClient object. For example, the next code starts a sale of 100 GBP: [self.heftClient saleWithAmount:100 currency:@\"GBP\" cardholder:YES]; Copy When a transaction has been initiated (f.ex saleWithAmount), the HeftClient alerts the HeftStatusReportDelegate object by invoking responseStatus during the process and responceFinanceStatus when the process has finished.  - (void)responseStatus:(id<ResponseInfo>)info { NSLog(@\"responseStatus:\"); NSLog(info.status); NSLog(info.xml.description); } - (void)responseFinanceStatus:(id<FinanceResponseInfo>)info { NSLog(@\"responseFinanceStatus:\"); NSLog(info.status); NSLog(info.customerReceipt); NSLog(info.xml.description); } Copy In case you are using the SDK simulator, the behavior changes according to the amount of the transaction: Amount\tBehavior1000\tDeclined transaction 2000\tUser Cancelled 3000\tSignature Requested Other amount\tApproved transaction "},{"title":"Processing Payments Simulation","type":0,"sectionRef":"#","url":"ios/iOS SDK 4.0.0/iosprocessing","content":"Processing Payments Simulation Your test payments are sent against a test server on the Handpoint side which simulates the behavior of an acquiring bank. Funds are not moved and sensitive data from the card is fully encrypted. You can use trigger amounts to generate some specific responses from our server: Sale amounts Amount\tBehaviour37.79\tIssuer response code = 01 (Refer to issuer) 37.84\tIssuer response code = 05 (Not authorized) 37.93\tIssuer response code = 04 (Pick up card) 37.57\tRequest is partially approved 37.68\tRequest timeout","keywords":""},{"title":"Migration from 3.X","type":0,"sectionRef":"#","url":"ios/iOS SDK 4.0.0/iosmigration","content":"Migration from 3.X tip Version 4.0.0 introduces a well defined, typed, way of passing extra values, options, parameters or flags to the financial transactions. We have unified all the extra and optional parameters in an Options object. Different operations have different options. 1. For a Sale or Sale and Tokenize operation please see SaleOptions If you use a customer reference: SaleOptions *options = [SaleOptions new]; options.customerReference = @\"Your customer reference\"; Copy If you need Multi MID / Custom merchant Authentication: MerchantAuth *auth = [MerchantAuth new]; Credential *cred = [Credential new]; //Optionally cred.acquirer = [Credential getAcquirerFromString:@\"acquirer\"]; //Optionally cred.mid = @\"mid\"; //Optionally cred.tid = @\"tid\"; //Add as many credentials as Acquirers your merchant have agreements with [auth add:cred]; options.merchantAuth = auth; Copy If you want to specify the budget period Only available for SureSwipe: options.divideByMonths = @\"YOUR_BUDGET_NUMBER\"; Copy Finally: [self.api saleWithAmount:amount currency:currency options:options]; Copy 2. Similar to SaleOptions, but with less possible parameters, for a Refund operation, please see RefundOptions If you use a customer reference: SaleOptions *options = [SaleOptions new]; options.customerReference = @\"Your customer reference\"; Copy If you need Multi MID / Custom merchant Authentication: MerchantAuth *auth = [MerchantAuth new]; Credential *cred = [Credential new]; //Optionally cred.acquirer = [Credential getAcquirerFromString:@\"acquirer\"]; //Optionally cred.mid = @\"mid\"; //Optionally cred.tid = @\"tid\"; //Add as many credentials as Acquirers your merchant have agreements with [auth add:cred]; options.merchantAuth = auth; Copy Finally: [self.api refundWithAmount:amount currency:currency transaction:originalTransactionID options:options]; Copy 3. For the rest of operations, please see Options If you use a customer reference: options.customerReference = @\"Your customer reference\"; Copy","keywords":""},{"title":"Configuration","type":0,"sectionRef":"#","url":"javascript/JavaScript SDK 6.0.0/javascriptconfiguration","content":"Configuration Getting started with the SDK is fast and easy. Simply download the Javascript SDK from here. Request a valid API key to start using the SDK and all of its functionalities. Initialize the SDK with your API key and receive the list of devices available to perform the sale.","keywords":""},{"title":"API Overview","type":0,"sectionRef":"#","url":"javascript/JavaScript SDK 6.0.0/javascriptapioverview","content":"API Overview This API flow shows how easy it is to add card present payments to your cloud application. The interaction between your cloud application and the Handpoint JavaScript SDK is simple and streamlined. The Handpoint JavaScript SDK takes care of all of the communication with the terminal. The status messages are received in the WEB APP via the callback function defined in the Financial Operation requests call. That’s it. The Handpoint JavaScript SDK shields your software from all sensitive cardholder data. With Handpoint JavaScript SDK, the transaction request goes from your software to Handpoint in the cloud. We steer the terminal from the cloud. All of the results come to your software via Handpoint in the cloud.","keywords":""},{"title":"Events","type":0,"sectionRef":"#","url":"ios/iOS SDK 4.0.0/iosevents","content":"","keywords":""},{"title":"didConnect​","type":1,"pageTitle":"Events","url":"ios/iOS SDK 4.0.0/iosevents#20","content":"didConnect Called when a connection to the client has been established through the method clientForDevice. Parameters Parameter\tNotesclient Required HeftClient\tYes [default] to activate multiScan mode - No to activate singleScan mode. Multi-scan mode allows the user to scan until scan operation is canceled or timeout occurs, single-scan mode is active until one scan has occurred then it disables the scan mode. Code example //didConnect: //Called when a connection to specified device was created. -(void)didConnect:(id<HeftClient>)client { // connected successfully to a device // assign the client to our heftClient property heftClient = client; } Copy "},{"title":"didDiscoverFinished​","type":1,"pageTitle":"Events","url":"ios/iOS SDK 4.0.0/iosevents#37","content":"didDiscoverFinished When the modal window from startDiscovery is closed then this event is called. Code example //didDiscoverFinished // This function gets called when discovery is finished - (void)didDiscoverFinished; { NSLog(@\"Discover finished\"); //Stop search activity indicator or other desired functions } Copy "},{"title":"didFindAccessoryDevice​","type":1,"pageTitle":"Events","url":"ios/iOS SDK 4.0.0/iosevents#38","content":"didFindAccessoryDevice Notifies that new accessory device was found. When a card reader is detected this delegate is called. You can take the newDevice object and create a new heft client for that particular device or store it in memory to connect to it later. Parameters Parameter\tNotesnewDevice Required HeftRemoteDevice\tAn object containing a reference to the accessory device Code example //didFindAccessoryDevice //Delegate that notifies that new accessory device was found. - (void)didFindAccessoryDevice:(HeftRemoteDevice*)newDevice { NSLog(@\"Found new device\"); //Connect to device or store found device for later } Copy "},{"title":"didLostAccessoryDevice​","type":1,"pageTitle":"Events","url":"ios/iOS SDK 4.0.0/iosevents#39","content":"didLostAccessoryDevice Notifies that accessory device was disconnected. Parameters Parameter\tNotesoldDevice Required HeftRemoteDevice\tAn object containing a reference to the accessory device Code example //didLostAccessoryDevice //Delegate that notifies that accessory device was disconnected - (void)didLostAccessoryDevice:(HeftRemoteDevice*)oldDevice { NSLog(@\"Device disconnected\"); //Remove device from devices array [heftManager.devicesCopy removeObject:oldDevice]; //Do some cleanup after disconnecting if necessary } Copy "},{"title":"responseStatus​","type":1,"pageTitle":"Events","url":"ios/iOS SDK 4.0.0/iosevents#14","content":"responseStatus Called to inform about the status of the transaction, several calls can be expected. Several calls to this method happen after a transaction is initiated from the HeftClient to inform about status of operation. The info object contains a string (status) and a dictionary (xml). Parameters Parameter\tNotesinfo Required ResponseInfo\tIncludes status code, status text and detailed xml. Code example //responseStatus: //Called to inform about the status of the transaction -(void)esponseStatus:(id<ResponseInfo>)info { NSLog(info.status); NSLog(info.xml.description); } Copy "},{"title":"responseFinanceStatus​","type":1,"pageTitle":"Events","url":"ios/iOS SDK 4.0.0/iosevents#16","content":"responseFinanceStatus Notifies that transaction has completed. Parameters Parameter\tNotesinfo Required FinanceResponseInfo\tInformation about current transaction status. Code example //responseFinanceStatus: //Called at the end of transaction to inform about the result of the operation -(void)responseFinanceStatus:(id<FinanceResponseInfo>)info { NSLog(info.status); NSLog(info.customerReceipt); //print receipts } Copy "},{"title":"responseError​","type":1,"pageTitle":"Events","url":"ios/iOS SDK 4.0.0/iosevents#15","content":"responseError Called to inform about the status of the transaction, several calls can be expected. Several calls to this method happen after a transaction is initiated from the HeftClient to inform about status of operation. The info object contains a string (status) and a dictionary (xml). Parameters Parameter\tNotesinfo Required ResponseInfo\tThe info object contains a string (status) and a dictionary (xml). Code example //responseError: //Called when to inform when an error response happens. -(void)responseError:(id<ResponseInfo>)info { NSLog(info.status); NSLog(info.xml.description); } Copy "},{"title":"requestSignature​","type":1,"pageTitle":"Events","url":"ios/iOS SDK 4.0.0/iosevents#17","content":"requestSignature Is called if during a financial operation a signature from the customer is needed. The requestSignature delegate should be implemented to print out or display the receipt for the customer to sign and provide the merchant with the means to confirm the signature. Parameters Parameter\tNotesreceipt Required NSString\tThe receipt is a html formatted string containing a receipt for the customer to sign Code example //requestSignature: //Is called if a signature from the customer is needed. -(void)requestSignature:(NSString*)receipt { NSLog(receipt); //Display buttons to accept or decline customer signature UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@\"\" message:@\"sign?\" delegate:self cancelButtonTitle:@\"No\" otherButtonTitles:@\"Yes\", nil]; [alert show]; } Copy "},{"title":"cancelSignature​","type":1,"pageTitle":"Events","url":"ios/iOS SDK 4.0.0/iosevents#40","content":"cancelSignature Called if the signature request times out. If the card reader does not receive an approval for the signature within a certain timeframe (45 sec) it cancels the transaction and sends a notification to the app. Code example //cancelSignature //Called if the signature request times out. -(void)cancelSignature { NSLog(@\"Signature request timed out\"); } Copy "},{"title":"responseScannerEvent​","type":1,"pageTitle":"Events","url":"ios/iOS SDK 4.0.0/iosevents#41","content":"responseScannerEvent Called to inform that a scan has been performed, several calls can be expected. Parameters Parameter\tNotesinfo Required ScannerEventResponseInfo\tThe info object contains scanCode, status and a dictionary (xml). Code example //responseScannerEvent: //Called to inform that a scan has been performed -(void)responseScannerEvent:(id<ScannerEventResponseInfo>)info { NSLog(info.scanCode); //barcode scanned NSLog(info.xml.description); } Copy "},{"title":"responseScannerDisabled​","type":1,"pageTitle":"Events","url":"ios/iOS SDK 4.0.0/iosevents#42","content":"responseScannerDisabled Called to notify that the scanner has been disabled. Parameters Parameter\tNotesinfo Required ScannerDisabledResponseInfo\tThe info object contains information about the scanner operation. Code example //responseScannerDisabled: //Called to notify that the scanner has been disabled. -(void)responseScannerDisabled:(id<ScannerDisabledResponseInfo>)info { NSLog(info.status); } Copy "},{"title":"responseLogInfo​","type":1,"pageTitle":"Events","url":"ios/iOS SDK 4.0.0/iosevents#43","content":"responseLogInfo Called when logs have been downloaded from the card reader by using the logGetInfo method. Parameters Parameter\tNotesinfo Required LogInfo\tThe info object has the string property log which holds the log info in text with carriage returns. Code example //responseLogInfo: //Called when logs have been downloaded from the card reader by using the logGetInfo method. -(void)responseLogInfo:(id<LogInfo>)info { NSLog(info.log); //write to log file } Copy "},{"title":"responseRecoveredTransactionStatus​","type":1,"pageTitle":"Events","url":"ios/iOS SDK 4.0.0/iosevents#44","content":"responseRecoveredTransactionStatus Notifies that a transaction has been recovered. This method is OPTIONAL and only required if retrievePendingTransaction will be called. Parameters Parameter\tNotesinfo Required FinanceResponseInfo\tInformation about the recovered transaction status. If an attempt was made to recover a transaction when none was pending then this parameter WILL be nil. Code example //responseRecoveredTransactionStatus: //Called when a pending transaction result has been recovered from the card reader - (void)responseRecoveredTransactionStatus:(id<FinanceResponseInfo>)info{ if(info != nil) { if(info.statusCode == EFT_PP_STATUS_SUCCESS) { NSLog(info.status); NSLog(info.customerReceipt); NSLog(info.merchantReceipt); // print receipts and/or save receipts in transaction log if(info.financialResult == EFT_FINANC_STATUS_TRANS_APPROVED){ // Process recovered authorized transaction result } else if(info.financialResult == EFT_FINANC_STATUS_TRANS_DECLINED) { // Process recovered declined transaction result } } else if(info.statusCode != EFT_PP_STATUS_NO_DATA_AVAILABLE) { // some other error was detected while waiting for a pending transaction result } } // else a pending transaction result was not found on the card reader } Copy "},{"title":"Card Reader Requirements​","type":1,"pageTitle":"Events","url":"ios/iOS SDK 4.0.0/iosevents#card-reader-requirements","content":"Version Requirements Card reader software v1.7.0+ and v2.1.7+ is required in order for this response to be received. "},{"title":"Integration Tips","type":0,"sectionRef":"#","url":"javascript/JavaScript SDK 6.0.0/javascriptintegrationtips","content":"Integration Tips Maintain the connection with the terminal at all times: To be able to recover a transaction result through the callback passed in the init method, the point of sale and the terminal MUST be connected and online. For that reason, we recommend to connect to the target terminal and maintain the connection alive at all times instead of connecting and disconnecting for every transaction.Using the same connection, the user may perform as many transactions as desired. The SDK is in charge of maintaining the secure channel between the point of sale and the terminal. No connection and disconnection between transactions is required. The silent connected periods will provide the possibility for the device to deliver any pending transaction result in case of a network issue. How Transaction Recovery Works: The terminal has a transaction recovery loop to automatically send back the pending Transaction Result to the Point of sale in case it becomes unreachable (network issue or other). For the first 100 seconds after a transaction is completed, a background thread will attempt to deliver the result every 5 seconds. If the point of sale is still unreachable after the first 100 seconds, the retry loop turns into an exponential increment to the power of 2 (8s-16s-32s etc…). The recovery loop is reinitialized every time the Handpoint application is restarted or anytime the startRecovery method is used.","keywords":""},{"title":"Introduction","type":0,"sectionRef":"#","url":"javascript/JavaScript SDK 6.0.0/javascriptintroduction","content":"Introduction Introducing the Revolutionary Handpoint JavaScript SDK: Seamlessly integrate card present payments into any cloud software JavaScript SDK version 6.0.0 Get the JavaScript SDK! Use the Handpoint JavaScript SDK to integrate leading smartpos terminals with your cloud software. The Handpoint JavaScript SDK is a simple javascript interface running in your web application that acts as a bridge between the web browser and the payment terminal, while shielding your software from card data. It is seamless to integrate, keeps all card data out of your system, works with every platform, and lets you use the best Android terminals on the market. Complete your integration in just three steps: Initiate the interface, choose the terminal, and start the sale. It is as simple as it sounds. The only thing you need is a valid API key to initialize the SDK. You even get a list of terminals to which you can connect. Simply execute the operation, and within seconds you’ll get back the transaction result and receipt in your software all while you monitor the transaction status. The Handpoint JavaScript SDK seamlessly starts and manages the entire P2PE transaction with the payment terminal, minimizing hassle for you and maximizing reliability, security, and control. For your merchants, the terminal setup is easier than a standalone. A merchant connects the terminal to their network, just like a smartphone, authenticates his/her account, and it simply works. Your software then control the terminal from anywhere in the world, and your merchants have secure, reliable, intuitive payments.","keywords":""},{"title":"Processing Payments Simulation","type":0,"sectionRef":"#","url":"javascript/JavaScript SDK 6.0.0/javascriptprocessingpayments","content":"Processing Payments Simulation Test transactions are conducted against a test server which is designed to simulate the behavior of an acquiring bank without moving any funds. As with every Handpoint terminal, sensitive card data is fully encrypted. Use trigger amounts to generate some specific responses from our server: Sale amounts Amount\tBehaviour37.79\tIssuer response code = 01 (Refer to issuer) 37.84\tIssuer response code = 05 (Not authorized) 37.93\tIssuer response code = 04 (Pick up card) 37.57\tRequest is partially approved 37.68\tRequest timeout","keywords":""},{"title":"Release Notes","type":0,"sectionRef":"#","url":"javascript/JavaScript SDK 6.0.0/javascriptreleasenotes","content":"","keywords":""},{"title":"6.0.0​","type":1,"pageTitle":"Release Notes","url":"javascript/JavaScript SDK 6.0.0/javascriptreleasenotes#600","content":"BREAKING CHANGE: The recovery function in the init method was added to make sure that ALL transaction results are received by the POS, even in case of an unstable network connection. The recovery function passed as third parameter in the init method MUST return a promise. The resolution of the promise will send a message to the payment terminal acknowledging the reception of the transaction result. "},{"title":"Quick Integration Test","type":0,"sectionRef":"#","url":"javascript/JavaScript SDK 6.0.0/javascriptquickintegration","content":"Quick Integration Test This js script sample shows how you can integrate your solution with Handpoint JavaScript SDK to perform a product sale in three quick and simple SDK calls: 1) Request your test configuration (apiKey and deviceName constants) from Handpoint and set them in your web application 2) Download handpoint.js from this link 3) In the same directory, copy both handpoint.js and the code below in an html file 4) Open the html file in the browser and see test transactions immediately SIMPLE, FAST, and EASY <!doctype html> <html> <head> <title>Handpoint SDK Trial Integration</title> <script src=\"handpoint.js\"></script> </head> <body> <script> var hp = new Handpoint() //************* Test configuration *************// var apiKey = 'YourApiKey'; var deviceName = '082245-Device'; var environmentIsDevelopment = true; //*********************************************// hp.init(apiKey, environmentIsDevelopment, (pendingEoT) => { console.log('Recovered Transaction -> ' + JSON.stringify(pendingEoT)); return Promise.resolve(); }).then( response1 => { console.log('Successful initialization') //document.writeln('Successful initialization<br />') hp.connect(deviceName).then( response2 => { console.log('Successful Connection to device [' + deviceName + ']'); //document.writeln('Successful Connection to device [' + deviceName + ']<br />') console.log('Executing sale'); //document.writeln('Executing sale<br />') hp.sale('10', 'EUR').then( response3 => { console.log('Successful sale'); //document.writeln('Successful sale<br />'); hp.disconnect(deviceName).then( response3 => { console.log('Successful disconnection from device [' + deviceName + ']') //document.writeln('Successful disconnection from device [' + deviceName + ']<br />') } ).catch( error => console.log('Disconnection to device [' + deviceName + '] Failed -> ' + JSON.stringify(error)) ); } ).catch( error => console.log('Sale Failed -> ' + JSON.stringify(error)) ); } ).catch( error => console.log('Connection to device [' + deviceName + '] Failed -> ' + JSON.stringify(error)) ); } ).catch( error => console.log('Initialization Failed -> ' + JSON.stringify(error)) ); </script> </body> </html> Copy","keywords":""},{"title":"Downloads","type":0,"sectionRef":"#","url":"restapi/REST API 2.3.0/restapidownloads","content":"Downloads Here is a Postman collection to get started with the REST API integration. In the collection there are different operations that can be performed such as Initialize, Ping device, Sale, Sale and tokenize, Sale reversal, Sale with partial approval, Refund, Refund reversal, Print receipt, Tokenize card and Update. Get the Postman Collection! Postman Collection","keywords":""},{"title":"Sandbox","type":0,"sectionRef":"#","url":"javascript/JavaScript SDK 6.0.0/javascriptsandbox","content":"Sandbox Get started today with our sandbox. You can generate sample transactions and test the experience right in your browser. Check it at: http://www.handpoint.com/lab/cloudpos. A payment terminal is required to start testing. This is the initial setup screen: To get started, select the target environment where you are going to operate (Sandbox/Production). If the user has any doubts selecting the correct environment, click on \"How do I know what type of card reader do I have?\" and you will be redirected to an explanation page. Next, enter your Handpoint API key in the box labeled \"INSERT API KEY” and click the check button. This will automatically populate the “SELECT A DEVICE” drop down with the list of devices that are assigned to you. If the API key is not valid, an error message will appear in the “RESPONSES” section of the sandbox. Before you can begin any further testing, you first must select the device that you will be using. In the “SELECT A DEVICE” list, you will see both the real terminals assigned to you, as well as simulated devices (listed by serial number). You can choose any device to test with. Serial numbers for the simulated devices always have this format: XXXX | 999999xxxxx. Choose a simulated terminal if you do not have access to a real device or if you just want to see simulated behavior. You can refresh the “SELECT A DEVICE” list by clicking the refresh button on the right side of the “SELECT A DEVICE” box. If you are already connected to a device, you can disconnect from it using the “Disconnect” button or trigger a software and configuration update operation by using the \"Update\" button. Once you have selected a device, the “SELECT A DEVICE” box will be disabled, and the rest of the sandbox will be enabled. With your selected device, you can simulate a number of operations, including: salesale and tokenizerefundtokenize cardreverse sale transactionsreverse refund transactions In order to reverse a transaction, a transaction id is needed, this id is available in the transaction result data coming from a previous sale or refund operation. Each transaction result will appear in the RESPONSES panel, on the right side of the screen. With each transaction result you will be able to perform several operations: View and print the merchant receiptView and print the customer receiptReverse the transactionCopy the transaction result data; it is the raw transaction result, as received by the application from the device","keywords":""},{"title":"API Overview","type":0,"sectionRef":"#","url":"restapi/REST API 2.3.0/restapioverview","content":"API Overview tip First of all, ensure you are using the correct environment by reviewing the type of card reader you have. To check if you should be using a production or development environment, see \"How do I know what type of card reader do I have?\" and select the corresponding URL, as you see below: For production terminals the endpoint to target is: https://cloud.handpoint.com/ For debug terminals the endpoint to target is: https://cloud.handpoint.io/ The following flow shows the interactions between your application and the Handpoint REST API: 1) Send a POST transaction request to the REST API. 2) The API will validate the request body and, if it is correct, will respond back to your software with the response code 202 (\"Accepted”) to confirm that the data has been correctly forwarded to the payment terminal. 3) The validated transaction request object is forwarded to the terminal and the transaction starts. 4.1) In case the original transaction request contains a callbackUrl and token, the transaction result will be sent back from the terminal to your software by using the callbackUrl. The terminal will be authenticated against your endpoint by setting the authentication token of the transaction request in the custom header ( \"AUTH-TOKEN\"). All 2XXs http response codes from the callbackUrl are considered as valid by the terminal to acknowledge of a successful delivery of the transaction result. caution 4.2) IMPORTANT Feature only compatible with Handpoint App v3.3.0 and above. In case the original transaction request does not ontain a callbackUrl and token, the transaction result is sent back from the terminal to Handpoint's REST-API. The result can then be retrieved from the endpoint GET https://cloud.handpoint.[com//io]/transaction-result/{transactionResultId} where the transactionResultId (also called cloud transaction identifier) is found in the answer from the initial POST[1] to the REST-API (see step 2)).","keywords":""},{"title":"Configuration","type":0,"sectionRef":"#","url":"restapi/REST API 2.3.0/restconfiguration","content":"Configuration Just request a valid API key from Handpoint to start using API. Initialize your interface with the API key and receive the list of devices available to perform a financial operation. Fast and easy.","keywords":""},{"title":"Objects","type":0,"sectionRef":"#","url":"android/Android SDK 6.4.1/androidobjects","content":"","keywords":""},{"title":"Transaction Result​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#25","content":"TransactionResult An object holding information about the result of a transaction. Properties Parameter\tDescriptionaid String\tApplication Identifier of the card (EMV tag 9F06) arc String\tEMV Authorisation Response Code (EMV tag 8A) authorisationCode String\tAcquirer response code balance Balance\tBalance available on the card budgetNumber String\tUsed to split payments over a period of months cardEntryType CardEntryType Method used by the terminal to read the card cardLanguagePreference String\tPreferred language of the card (EMV tag 5F2D)) cardSchemeName CardSchemeName\tThe brand of the card cardToken String\tToken representing the PAN of the card chipTransactionReport String\tFull report of the card EMV parameters currency Currency\tThe currency used for the transaction customerReceipt String\tA URL containing the customer receipt in HTML format customerReference String\tIf a customerReference was provided as an optional parameter in the transaction request it is echoed unaltered in this field deviceStatus DeviceStatus\tStatus of the device dueAmount String\tIn case of a partial approval for the transaction, this field contains the amount which remains to be paid efttimestamp String\tTime of the transaction efttransactionID String\tHandpoint unique identifier for a transaction, this id is the one to be used for a transaction to be reversed. errorMessage String\tDetailed reason for the transaction error expiryDateMMYY String\tExpiry date of the card used for the operation finStatus FinancialStatus\tThe financial status contains the outcome of the transaction. For example \"AUTHORISED\" or \"DECLINED\" iad String\tIssuer Application Data (EMV tag 9F10) issuerResponseCode String\tResponse code from the card issuer maskedCardNumber String\tMasked card number of the card used for the operation merchantAddress String\tMerchant Address merchantName String\tMerchant Name merchantReceipt String\tA URL containing the customer receipt in HTML format mid String\tMerchant Identifier originalEFTTransactionID String\tIn case the transaction type is a reversal, this field will contain the identifier of the original transaction being reversed paymentScenario PaymentScenario\tIndicates the card entry mode recoveredTransaction String\tThis flag is set to true if the transaction result is sent through the transaction recovery logic explained in the Recovey Section, false otherwise requestedAmount String\tThe requested amount is the transaction amount sent to the terminal rrn String\tRetrieval Reference Number, unique number assigned by the acquirer signatureUrl String\tIf a digital signature is required, this is the URL containing the image of the captured signature statusMessage String\tThe status of the transaction, for example \"Waiting for pin\" tenderType TenderType\tTransaction tender type (credit / debit) tid String\tTerminal Identifier tipAmount String\tTip amount, if any, in the minor unit of currency (f.ex. 1000 is 10.00 GBP) tipPercentage String\tIf tipping is enabled, this field will return the tip percentage added on top of the base amount totalAmount String\tThe total amount is the amount the card was charged for. It is possible that the total amount is not the same as the requested amount since an additional fee can be added, with the customer's approval, via the tipping functionality transactionID String\tThe transaction id is a terminal internal counter incremented for each transaction tsi String\tTransaction Status Information (EMV tag 9B) tvr String\tTransaction Verification Results (EMV tag 95) type TransactionType\tThe type of transaction initiated, for example \"SALE\" unMaskedPan String\tUnmasked PAN, only received if the card is a non-payment card (loyalty) verificationMethod VerificationMethod\tcardholder verification method, for example \"PIN\" multiLanguageStatusMessages String\tmap containing the status message in a human readable format for all the supported locales. multiLanguageErrorMessages String\tmap containing the error message in a human readable format for all the supported locales. cardHolderName String\tName of the cardholder Code example { \"aid\": \"A0000000041010\", \"arc\": \"0000\", \"authorisationCode\": \"123456\", \"balance\": null, \"budgetNumber\": \"\", \"cardEntryType\": \"UNDEFINED\", \"cardLanguagePreference\": \"\", \"cardSchemeName\": \"MasterCard\", \"cardToken\": \"\", \"chipTransactionReport\": \"\", \"currency\": \"USD\", \"customerReceipt\": \"https://s3.[...]/customerReceipt.html\", \"customerReference\": \"\", \"deviceStatus\": { \"applicationName\": \"ClientApp\", \"applicationVersion\": \"20.1.0\", \"batteryCharging\": \"Not Charging\", \"batteryStatus\": \"100\", \"batterymV\": \"4126\", \"bluetoothName\": \"PAXA920\", \"externalPower\": \"USB\", \"serialNumber\": \"0821032398\", \"statusMessage\": \"Approved or completed successfully\" }, \"dueAmount\": 0, \"errorMessage\": \"\", \"expiryDateMMYY\": \"0422\", \"finStatus\": \"AUTHORISED\", \"iad\": \"0210A000002A0000000000000000000000FF\", \"issuerResponseCode\": \"00\", \"maskedCardNumber\": \"************1456\", \"merchantAddress\": \"Plaza Soledad Torres Acosta 1 28013 Madrid\", \"merchantName\": \"Hago la cama\", \"merchantReceipt\": \"https://s3.[...]/merchantReceipt.html\", \"mid\": \"\", \"originalEFTTransactionID\": \"\", \"paymentScenario\": \"CHIPCONTACTLESS\", \"rrn\": \"\", \"signatureUrl\": \"\", \"statusMessage\": \"Approved or completed successfully\", \"tenderType\": \"CREDIT\", \"tid\": \"ACQUIRER_TID\", \"tipAmount\": 0, \"totalAmount\": 100, \"transactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"tsi\": \"0000\", \"tvr\": \"0400008001\", \"type\": \"SALE\", \"unMaskedPan\": \"\", \"verificationMethod\": \"UNDEFINED\", \"efttimestamp\": 1615374961000, \"efttransactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"requestedAmount\": 100, \"tipPercentage\": 0, \"recoveredTransaction\": false, \"multiLanguageStatusMessages\": [ { \"en_US\" : \"Approved or completed successfully\" }, { \"fr_FR\" : \"Transaction approuvée\" } ], \"multiLanguageErrorMessages\": [], \"cardHolderName\": \"cardholder name\" } Copy "},{"title":"Acquirer​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#21","content":"Acquirer An enum representing all the supported acquirers for merchant authentication Possible values AMEX BORGUN EVO OMNIPAY POSTBRIDGE INTERAC TSYS VANTIV SANDBOX Code example public enum Acquirer { AMEX, BORGUN, EVO, OMNIPAY, POSTBRIDGE, INTERAC, TSYS, VANTIV, SANDBOX } Copy "},{"title":"Card Entry Type​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#22","content":"CardEntryType An enum representing different card entry types. Possible values UNDEFINED MSR ICC CNP "},{"title":"Connection Method​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#20","content":"ConnectionMethod An enum representing different connection methods with the payment terminal. Currently BLUETOOTH, SIMULATOR, CLOUD and ANDROID_PAYMENT are supported types. Possible values USB SERIAL BLUETOOTH CLOUD ANDROID_PAYMENT HTTPS WIFI ETHERNET SIMULATOR Code example //Currently BLUETOOTH, SIMULATOR, CLOUD and ANDROID_PAYMENT are the only ConnectionMethod available. public enum ConnectionMethod { USB, SERIAL, BLUETOOTH, HTTPS, WIFI, ETHERNET, SIMULATOR, CLOUD, ANDROID_PAYMENT } Copy "},{"title":"Connection Status​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#connection-status","content":"ConnectionStatus A list of connection statuses. Note: the events starting with Cloud[...] are exclusively for devices linked to merchants with CLOUD Api key (CLOUD mode enable). Possible values Connected Connecting Disconnected Disconnecting NotConfigured Initializing CloudConnected CloudInitialized CloudAvailable CloudDisconnected CloudUnavailable "},{"title":"Currency​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#13","content":"Currency An enum of currencies. It contains the name of the currency, its ISO code, as well as information about how many decimals the currency uses. Possible values AED AFN ALL AMD ANG AOA ARS AUD AWG AZN BAM BBD BDT BGN BHD BIF BMD BND BOB BOV BRL BSD BTN BWP BYR BZD CAD CDF CHF CLP CNY COP COU CRC CUC CUP CVE CZK DJF DKK DOP DZD EEK EGP ERN ETB EUR FJD FKP GBP GEL GHS GIP GMD GNF GTQ GYD HKD HNL HRK HTG HUF IDR ILS INR IQD IRR ISK JMD JOD JPY KES KGS KHR KMF KPW KRW KWD KYD KZT LAK LBP LKR LRD LSL LTL LVL LYD MAD MDL MKD MMK MNT MOP MUR MVR MWK MXN MXV MYR MZN NAD NGN NIO NOK NPR NZD OMR PAB PEN PGK PHP PKR PLN PYG QAR RON RSD RUB RWF SAR SBD SCR SDG SEK SGD SHP SLL SOS SRD STD SYP SZL THB TJS TMT TND TOP TRY TTD TWD TZS UAH UGX USD UZS VEF VND VUV WST XAF XCD XOF XPF YER ZAR ZMK ZWL "},{"title":"Refund Options​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#6","content":"RefundOptions An object to store all the customization options for a refund. Properties Parameter\tDescriptionCustomerReference String\tAn arbitrary string to use as your own identifier for a transaction MerchantAuth MerchantAuth\tAn object containing all the credentials used to optionally authenticate a merchant PinBypass Boolean\tBypasses PIN entry when the shopper says they don't know the PIN for the card and the merchant either knows they are the legitimate cardholder or want to give them the benefit of the doubt. PIN Bypass should be set to True if you want to enable pin bypass for a transaction SignatureBypass Boolean\tWhether the terminal prompts for a signature, depends on how you configure this. The major card schemes (American Express, Diners, Discover, JCB, Mastercard, Visa, UnionPay) no longer require a signature; they regard it as optional for card-present transactions. This means you can speed up your checkout by skipping the signature prompt. But if your business requires it, you can still let the terminal prompt for a signature. The shopper then provides their signature on the touch screen of the terminal or on the printed transaction receipt. This depends on how you configure this setting. It is your responsibility to verify the signature of the shopper with the signature on the card or another form of identification. Signature Bypass should be set to True if you want to enable signature for this transaction Code example RefundOptions options = new RefundOptions(); //If you use a customer reference options.setCustomerReference(\"Your customer reference\"); //If you need Multi MID / Custom merchant Authentication MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(YOUR_ACQUIRER); //Optionally credential.setMerchantId(mid); //Optionally credential.setTerminalId(tid); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); options.setMerchantAuth(auth); //If you need to enable pin bypass options.setPinBypass(true); Copy "},{"title":"Sale Options​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#4","content":"SaleOptions An object to store all the customization options for a sale. Properties Parameter\tDescriptionBudgetNumber String\tThe budget number can be used to split payments over a period of months. CustomerReference String\tAn arbitrary string to use as your own identifier for a transaction MerchantAuth MerchantAuth\tAn object containing all the credentials used to optionally authenticate a merchant PinBypass Boolean\tBypasses PIN entry when the shopper says they don't know the PIN for the card and the merchant either knows they are the legitimate cardholder or want to give them the benefit of the doubt. PIN Bypass should be set to True if you want to enable pin bypass for a transaction SignatureBypass Boolean\tWhether the terminal prompts for a signature, depends on how you configure this. The major card schemes (American Express, Diners, Discover, JCB, Mastercard, Visa, UnionPay) no longer require a signature; they regard it as optional for card-present transactions. This means you can speed up your checkout by skipping the signature prompt. But if your business requires it, you can still let the terminal prompt for a signature. The shopper then provides their signature on the touch screen of the terminal or on the printed transaction receipt. This depends on how you configure this setting. It is your responsibility to verify the signature of the shopper with the signature on the card or another form of identification. Signature Bypass should be set to True if you want to enable signature for this transaction TipConfiguration TipConfiguration\tAn object containing the tip configuration for this transaction Code example SaleOptions options = new SaleOptions(); //If you use a customer reference options.setCustomerReference(\"Your customer reference\"); //If you need Multi MID / Custom merchant Authentication MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(YOUR_ACQUIRER); //Optionally credential.setMerchantId(mid); //Optionally credential.setTerminalId(tid); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); options.setMerchantAuth(auth); //If you need to enable pin bypass options.setPinBypass(true); //If you want to specify the budget period //Only available for SureSwipe options.setBudgetNumber(YOUR_BUDGET_NUMBER); //If you want to specify tip options //Only available for PAX and Telpo terminals. TipConfiguration config = new TipConfiguration(); //Optionally config.setHeaderName(HEADER); //Optionally config.setFooter(FOOTER); //Optionally config.setEnterAmountEnabled(true); //Optionally config.setSkipEnabled(true); config.setTipPercentages(percentages); options.setTipConfiguration(config); //Alternatively, you can set the tip amount directly options.setTipConfiguration(new TipConfiguration(AMOUNT)); Copy "},{"title":"Options​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#7","content":"options SaleOptions An object to store customer reference options for regular operations. Properties Parameter\tDescriptionCustomerReference String\tAn arbitrary string to use as your own identifier for a transaction Code example Options options = new Options(); //If you use a customer reference options.setCustomerReference(\"Your customer reference\"); Copy "},{"title":"MerchantAuthOptions​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#merchantauthoptions","content":"MerchantAuthOptions An object to store merchant authentication options for regular operations. Properties Parameter\tDescriptionCustomerReference String\tAn arbitrary string to use as your own identifier for a transaction MerchantAuth MerchantAuth\tAn object containing all the credentials used to optionally authenticate a merchant Code example MerchantAuthOptions options = new MerchantAuthOptions(); //If you use a customer reference options.setCustomerReference(\"Your customer reference\"); //If you need Multi MID / Custom merchant Authentication MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(YOUR_ACQUIRER); //Optionally credential.setMerchantId(mid); //Optionally credential.setTerminalId(tid); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); options.setMerchantAuth(auth); Copy "},{"title":"MerchantAuth​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#37","content":"MerchantAuth An object to store merchant authentication. Methods Constructor MerchantAuth( ); Copy Constructor MerchantAuth( Credential credential ); Copy Parameter\tDescriptioncredential Credential\tIf present, adds the given credential to the list. Constructor MerchantAuth( List<Credential> credentials ); Copy Parameter\tDescriptioncredential List<Credential>\tIf present, the list of credentials. Add Credential add( Credential credential ); Copy Parameter\tDescriptioncredential Required Credential\tThe credential to be added. Code example MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(YOUR_ACQUIRER); //Optionally credential.setMerchantId(mid); //Optionally credential.setTerminalId(tid); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); Copy "},{"title":"Report Configuration​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#19","content":"ReportConfiguration An object to store all the configuration for a transactions report. Properties Parameter\tDescriptioncurrency Currency\tThe currency to filter the transactions startDate String\tThe start date in format 'YYYYMMDDHHmmss. endDate String\tThe end date in format 'YYYYMMDDHHmmss. terminalSerialNumber List\tThe serial number of the terminal to fetch the transactions from (if terminalSerialNumber is empty or null, the report will show all the transactions for this merchant). Code example ReportConfiguration configuration = new ReportConfiguration(\"'USD'\", \"'20210430000000'\", \"'20210430235959'\", \"null\"); If you want to add terminal serial numbers: List terminalSerialNumber = new ArrayList<>(); terminalSerialNumber.add(\"0123456789\"); terminalSerialNumber.add(\"9876543210\"); ... ; Copy "},{"title":"Device capabilities​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#24","content":"DeviceCapabilities An object holding the capabilities of the payment terminal. Properties Parameter\tDescriptionprinter Boolean\tTrue if the terminal has printer, false otherwise cloudApi [Boolean]\tTrue if the terminal is cloud-enabled, false otherwise "},{"title":"Balance​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#balance","content":"Balance Balance available on the card Properties Parameter\tDescriptionamount Integer\tThe amount balance currency Currency\tThe balance currency sign BalanceSign\tPositive (C) or negative (D) balance. You can retrieve the balance sign using the methods isPositive() or isNegative() Code example Balance balance = Balance.Companion.factory( \"1000\", Currency.EUR.getAlpha(), BalanceSign.POSITIVE_SIGN.name() ) Copy "},{"title":"Balance Sign​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#balance-sign","content":"BalanceSign An enum representing the balance sign. Possible values POSITIVE_SIGN('C') NEGATIVE_SIGN('D') "},{"title":"Device​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#17","content":"Device An object to store the information about the payment terminal in use. Methods Constructor Device( String name , String address , String port , ConnectionMethod connectionMethod , String sharedSecret , int timeout ); Copy Parameter\tNotesname Required String\tA name to identify the device address Required String\tThe address of the device you wish to connect to. E.g.: \"08:00:69:02:01:FC\" for bluetooth, \"9822032398-PAXA920\" for CLOUD (composition of serial number and model of the target device) or just an identifier if your application is running directly on a PAX or Telpo device (ConnectionMethod.ANDROID_PAYMENT). port Required String\tThe port to connect to (optional). connectionMethod Required ConnectionMethod Type of connection with the payment terminal. E.g: Bluetooth, Cloud, Serial, etc... sharedSecret String\tReplaces the default shared secret proviced in the initialization step. timeout int\tThe number of miliseconds until a connection is considered timed out. If not set, the default timeout is 15 seconds. Properties Parameter\tDescriptionId * String\tA unique identifier for the payment terminal. Code example //Create and init a new Datecs Device Device dev = new Device(\"CardReader7\", \"08:00:69:02:01:FC\", \"1\", ConnectionMethod.BLUETOOTH); //Create and init a new PAX/Telpo Device for a CLOUD connection Device dev = new Device(\"CloudDevice\", \"9822032398-PAXA920\", \"\", ConnectionMethod.CLOUD); // The address is the composition of the serial number and model ot the target device. //Example for a PAX A920 device: serial_number - model -> 9822032398-PAXA920 //Create and init a new PAX/Telpo Device for a ANDROID_PAYMENT connection Device dev = new Device(\"LocalPaxOrTelpo\", \"LocalHost\", \"\", ConnectionMethod.ANDROID_PAYMENT); Copy "},{"title":"Device Status​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#33","content":"DeviceStatus A class which holds the status of the payment terminal. Properties Parameter\tDescriptionSerialNumber String\tGets the serial number of the payment terminal BatteryStatus String\tGets the battery status of the payment terminal (in percentages) BatterymV String\tGets the battery voltage of the payment terminal BatteryCharging String\tGets the battery charging status of the payment terminal ExternalPower String\tGets the status of the payment terminal external power ApplicationName String\tGets the application name of the payment terminal ApplicationVersion String\tGets the application version of the payment terminal "},{"title":"Device Parameter​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#device-parameter","content":"DeviceParameter An enum describing all the admin commands to send to a payment terminal. Possible values BluetoothName BluetoothPass SystemTimeout ScreenTimeout SignatureTimeout "},{"title":"Merchant Auth Credential​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#40","content":"Credential An object to store credentials (Acquirer, Mid, Tid, MCC and ExternalId) for merchant authentication. Properties Parameter\tDescriptionacquirer Acquirer If present, it links this credential to the specified acquirer. Required if more than one credential is provided. mid String\tFor this transaction, overrides the default MID (merchant ID) saved in the terminal configuration. tid String\tFor this transaction, overrides the default TID (terminal ID) saved in the terminal configuration. mcc String\tMerchant Category Code, overrides the default MCC saved in the terminal configuration. ExternalId String\tFor this transaction, the External Id will be used to lookup the credential of the merchant in the Handpoint backend and process the transaction accordingly. The External id replaces the need to pass MID/TID/MCC as credentials Code example // Credential using Acquirer, MID, TID and MCC Credential credential1 = new Credential(); //Optionally credential1.setAcquirer(YOUR_ACQUIRER); //Optionally credential1.setMerchantId(mid); //Optionally credential1.setTerminalId(tid); //Optionally credential1.setMcc(mcc); // Credential using ExternalId Credential credential2 = new Credential(); credential2.setExternalId(externalId); Copy "},{"title":"Financial Status​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#34","content":"FinancialStatus An enum representing different statuses of a finalized transaction Possible values UNDEFINED AUTHORISED DECLINED PROCESSED FAILED CANCELLED PARTIAL_APPROVAL "},{"title":"Manufacturer​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#manufacturer","content":"Manufacturer A string representing different payment terminal supported manufacturers. Possible values INVALID DATECS PAX TELPO "},{"title":"Card Scheme Name​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#32","content":"CardSchemeName A string representing different card brands. Possible values MasterCard Visa Maestro American Express Discover JCB Diners UnionPay "},{"title":"Hapi Factory​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#hapi-factory","content":"HapiFactory A factory to provide a unified entrypoint and simplify the instantiation of the Hapi object. Methods Static factorygetAsyncInterface( Events.Required requiredListener , Context context , HandpointCredentials handpointCredentials ); Parameter\tNotesrequiredListener Required Events.Required\tA listener object to report the required events. context Required Context\tThe Android context. handpointCredentials Required HandpointCredentials\tAn object containing the actor's shared secret key or shared secret key AND Api Key for CLOUD connections. Code example //InitApi for Datecs devices or PAX/Telpo ConnectionMethod.ANDROID_PAYMENT public void InitApi() { String sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.getAsyncInterface(this, new HandpointCredentials(sharedSecret)); //The api is now initialized. Yay! we've even set a default shared secret } //InitApi for Cloud devices public void InitApi() { String sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; String apikey = \"This-Is-The-Merchant-Api-Key\"; api = HapiFactory.getAsyncInterface(this, new HandpointCredentials(sharedSecret, apikey)); //The api is now initialized. Yay! we've even set a default shared secret and the merchant Api Key! } Copy "},{"title":"Hapi Manager​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#hapi-manager","content":"HapiManager A static class containing information about the current status of the SDK Properties Parameter\tDescriptionDefaultSharedSecret String\tGets the default shared secret in use. LogLevel LogLevel\tGets the current log level of the SDK and payment terminal. inTransaction boolean\tChecks whether the SDK is in the middle of a transaction. True if the SDK is in a transaction, false otherwise. SdkVersion String\tGets the current SDK version. isTransactionResultPending boolean\tIn the case of a communication failure between the payment terminal and the SDK a TransactionResult might have not been delivered. This function checks if there is a pending TransactionResult. This field is only updated when connecting to a payment terminal. If this function returns true the TransactionResult (which includes the receipt) can be fetched.getPendingTransactionResult();. This function serves the same functionality as the event pendingTransactionResult(Device device), so every time this event is invoked, HapiManager.IsTransactionResultPending() is true until the result is fetched. Settings.AutomaticReconnection boolean\tWhen this property is set to true, the SDK will automatically try to reconnect to the payment terminal after a disconnection. The SDK internally maintains a reconnection thread which keeps on trying to connect until it succeeds. The delay between reconnections is exponentially increased on every new attempt. The default value for this property is true Code example //Check if the SDK is in transaction boolean inTransaction = HapiManager.inTransaction(someConnectedDevice); //Check the current logLevel LogLevel level = HapiManager.getLogLevel(); //Disable automatic reconnection feature HapiManager.Settings.AutomaticReconnection = false; Copy "},{"title":"Handpoint Credentials​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#43","content":"HandpointCredentials A class containing the credentials used to communicate with the payment terminal, the shared secret (always required) and Cloud API Key (ony required when using CLOUD connection method). Properties Parameter\tDescriptionsharedSecret String\tString the value of the Shared secret. CloudApiKey String\tString the value of the merchant Cloud API Key, only required when using CLOUD connection method Code example { String sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; HandpointCredentials handpointCredentials = new HandpointCredentials(sharedSecret); //We've even set a default shared secret! } { String sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; string apikey = \"This-Is-The-Merchant-Api-Key\"; HandpointCredentials handpointCredentials = new HandpointCredentials(sharedSecret, apikey); //We've even set a default shared secret and the merchant Api Key! } Copy "},{"title":"Log Level​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#18","content":"LogLevel An enum describing the different levels of logging available. Possible values None Info Full Debug "},{"title":"Optional Transaction Parameters​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#optional-transaction-parameters","content":"OptionalParameters A class containing optional transaction parameters supported by the payment terminal. Properties Parameter\tDescriptionBudget String\tBudget is only available for sale transactions. A String representing the key for a budget number.A budget number can be used to split up an amout over a period of months. The value has to be a String of 2 digits representing the number of months to split the transaction to. CustomerReference String\tCustomerReference is available for all transactions. A String representing the key for a customer reference.A customer reference can be used for an internal marking system. The value is sent as a String of a maximum 25 characters and received back when the transaction has been processed. "},{"title":"Print Error​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#29","content":"PrintError An enum representing different errors that can come from print action. Possible values Unexpected InvalidArgument CantConnectToPrinter NotSupported NoPermission PrinterDisabled NotWhitelisted Busy OutOfPaper DataPacketInvalid PrinterHasProblems PrinterOverheating PrintingUnfinished FontNotPresent FontFormatError TooLong BatteryTooLow PaperCutterError PaperCutterJam CoverOpen UnsupportedEncoding "},{"title":"Payment Scenario​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#35","content":"PaymentScenario An enum representing different types of scenario. Possible values UNKNOWN MAGSTRIPE MAGSTRIPECONTACTLESS CHIP CHIPCONTACTLESS CHIPFAILMAGSTRIPE "},{"title":"Settings​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#settings","content":"Settings An Object holding the SDK initialization settings Properties Parameter\tDescriptionautomaticReconnection boolean\tWhen this property is set to true, the SDK will automatically try to reconnect to the terminal after disconnection. The SDK maintains internally a reconnection thread which keeps on trying to connect until it succeeds. The delay between reconnections is exponentially increased on every new attempt. The default value for this property is false autoRecoverTransactionResult boolean\tThe default value for this property is false sendToDeviceMaxAttempts Integer\tNumber of retry attemps when there is an error communicating with the card reader. The default value for this property is 3 timeBetweenAttempts Integer\tTime in milliseconds between attempts. The default value for this property is 5000 showSDKUIComponents boolean\tThe default value for this property is false getReceiptsAsURLs boolean\tThe default value for this property is false "},{"title":"Signature Request​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#signature-request","content":"SignatureRequest A class containing information about a signature verification. Properties Parameter\tDescriptiontimeout int\tint the value of the timeout in seconds. MerchantReceipt String\tString the merchant receipt as html. "},{"title":"Status Info​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#status-info","content":"statusInfo A class containing information about the status of the transaction. Properties Parameter\tDescriptionisCancelAllowed Boolean\tA boolean letting the integrator know if the terminal will accept a stop transaction request. status Status\tA Status enum representing the status of the transaction. cardLanguage SupportedLocales\tThe card language preference in all supported locales. multiLanguageMessages Map\tmap containing the status message in a human readable format in all the supported locales. message String\tA String containing the status message of the transaction. deviceStatus DeviceStatus\tA DeviceStatus object containing information about the payment terminal. "},{"title":"Status​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#45","content":"status An enum containing information about the status of a transaction. Possible values Undefined Success InvalidData ProcessingError CommandNotAllowed NotInitialised ConnectTimeout ConnectError SendingError ReceivingError NoDataAvailable TransactionNotAllowed UnsupportedCurrency NoHostAvailable CardReaderError CardReadingFailed InvalidCard InputTimeout UserCancelled InvalidSignature WaitingForCard CardInserted ApplicationSelection ApplicationConfirmation AmountValidation PinInput ManualCardInput WaitingForCardRemoval TipInput SharedSecretInvalid SharedSecretAuth WaitingSignature WaitingHostConnect WaitingHostSend WaitingHostReceive WaitingHostDisconnect PinInputCompleted PosCancelled RequestInvalid CardCancelled CardBlocked RequestAuthTimeout RequestPaymentTimeout ResponseAuthTimeout ResponsePaymentTimeout IccCardSwiped RemoveCard ScannerIsNotSupported ScannerEvent BatteryTooLow AccountTypeSelection BtIsNotSupported PaymentCodeSelection PartialApproval AmountDueValidation InvalidUrl WaitingCustomerReceipt PrintingMerchantReceipt PrintingCustomerReceipt UpdateStarted UpdateFinished UpdateFailed UpdateProgress WaitingHostPostSend WaitingHostPostReceive Rebooting PrinterOutOfPaper ErrorConnectingToPrinter CardTapped ReceiptPrintSuccess InvalidPinLength OfflinePinAttempt OfflinePinLastAttempt ProcessingSignature CardRemoved TipEntered CardLanguagePreference AutomaticPrintingStarted CancelOperationNotAllowed UpdateSoftwareStarted UpdateSoftwareFinished UpdateSoftwareFailed UpdateSoftwareProgress InstallSoftwareStarted InstallSoftwareFinished InstallSoftwareFailed InstallSoftwareProgress UpdateConfigStarted UpdateConfigFinished UpdateConfigFailed UpdateConfigProgress InitialisationComplete "},{"title":"Supported Locales​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#23","content":"SupportedLocales An enum of the SDK supported languages. Possible values en_CA en_UK en_US es_ES hr_HR is_IS fr_FR pt_PT "},{"title":"PAX A80 keys​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#28","content":"PaxA80Keys A string representing the PAX A80 physical keyboard keys. Possible values 0 1 2 3 4 5 6 7 8 9 GREEN ORANGE RED FUNC options SaleOptions "},{"title":"Tender Type​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#36","content":"TenderType An enum representing different tender types. Possible values NOT_SET CREDIT DEBIT "},{"title":"Tip Configuration​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#39","content":"TipConfiguration Constructor TipConfiguration( String tipAmount ); Parameter\tNotestipAmount String\tIf present, the amount of the tip to be used for the transaction. Properties Parameter\tDescriptionamount BigInteger\tTransaction amount in the minor unit of currency (f.ex. 1000 is 10.00 GBP). baseAmount BigInteger\tBase amount used to calculate the tip - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). If no base amount is defined, the transaction amount is used as base amount. headerName String\tName of the tipping menu appearing on the terminal. Default: Tip tipPercentages List<Integer>\tList of percentages used to calculate the tip amount. REQUIRED enterAmountEnabled Boolean\tFlag used to enable the cardholder to manually enter the tip amount. Default: true skipEnabled Boolean\tFlag used to enable the cardholder to skip the tipping step. Default: true footer String\tFooter note which will appear on the tipping menu. Default: Empty string Code example { \"amount\": \"2000\", \"baseAmount\": \"2000\", \"headerName\": \"\", \"tipPercentages\": [5,10,15,20,25], \"enterAmountEnabled\": true, \"skipEnabled\": false, \"footer\": \"Thank you!!! ;)\" } Copy "},{"title":"Transaction Type​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#31","content":"TransactionType An enum representing different types of transactions. Possible values UNDEFINED SALE VOID_SALE REFUND VOID_REFUND REVERSAL CANCEL_SALE CANCEL_REFUND TOKENIZE_CARD SALE_AND_TOKENIZE_CARD CARD_PAN "},{"title":"Type of Result​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#30","content":"TypeOfResult An enum representing different types of device reports. Possible values STATUS REPORT BLUETOOTHNAME EMVCONFIGURATION "},{"title":"Verification Method​","type":1,"pageTitle":"Objects","url":"android/Android SDK 6.4.1/androidobjects#38","content":"VerificationMethod An enum representing different verification methods used in the transaction. Possible values UNDEFINED SIGNATURE PIN PIN_SIGNATURE FAILED NOT_REQUIRED MOBILE_PASS_CODE "},{"title":"Objects","type":0,"sectionRef":"#","url":"ios/iOS SDK 4.0.0/iosobjects","content":"","keywords":""},{"title":"HeftManager​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#19","content":"HeftManager The HeftManager is used for discovering devices and to connect and create a HeftClient object for the appropriate device. The manager reports messages to HeftDiscoveryDelegate protocol during the discovery process. Starting the manager is usually the first thing that should be done after loading up an UIView that enables the user to search for and connect to BT devices. When starting the manager an object (usually the UIViewController itself) is passed as the HeftDiscoveryDelegate delegate to report to. Properties Property\tDescriptiondevicesCopy NSArray\tDEPRECATED_ATTRIBUTE: Stored array which contains all found devices. connectedCardReaders NSArray\tStored array which contains all found devices. delegate NSObject<HeftDiscoveryDelegate>\tKey for value in mpedInfo version NSString\tCurrent HeftManager version. Code example // Create a manager on view load - (void)viewDidLoad{ [super viewDidLoad]; HeftManager* manager = [HeftManager sharedManager]; manager.delegate = self; [manager resetDevices]; // Clean out device list } Copy Methods Start Discovery (void)startDiscovery;  Shared Manager (HeftManager *)sharedManager;  Client for device (NSString) (void)clientForDevice:(HeftRemoteDevice *)device sharedSecret:(NSString *)sharedSecret delegate:(NSObject HeftStatusReportDelegate *)delegate; "},{"title":"HeftClient​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#22","content":"HeftClient High level interface for Headstart API. HeftClient handles the communication between the mPos app and the card reader. The HeftClient object also stores information about it's card reader device in the mpedInfo dictionary. Device Log operations are also implemented in HeftClient. To create a new HeftClient object the clientForDevice method is called from an instance of the HeftManager. Transaction and log requests (and the acceptSignature response) are done by calling HeftClient methods with the relevant input. The library reports the status of the requests by calling delegates of the HeftStatusReportDelegate protocol. Properties Property\tDescriptionsharedSecret NSString\tThe shared secret is a key provided by Handpoint when you get your account that enables you to perform live operations with the card reader. However, if you're developing with a starter kit, the test shared secret is specified in the example. mpedInfo NSDictionary\tDictionary with card reader info details, obtained by querying it from device on interface creation. isTransactionResultPending BOOL\tIndicates whether a transaction result is pending on the card reader. Note: A pending transaction result is retained by the card reader if a disconnect occurs between card reader and app before the transaction result can be delivered during a SALE, REFUND or VOID processing. kSerialNumberInfoKey NSString Constant\tKey for value in mpedInfo kPublicKeyVersionInfoKey NSString Constant\tKey for value in mpedInfo kEMVParamVersionInfoKey NSString Constant\tKey for value in mpedInfo kGeneralParamInfoKey NSString Constant\tKey for value in mpedInfo kManufacturerCodeInfoKey NSString Constant\tKey for value in mpedInfo kModelCodeInfoKey NSString Constant\tKey for value in mpedInfo kAppNameInfoKey NSString Constant\tKey for value in mpedInfo kAppVersionInfoKey NSString Constant\tKey for value in mpedInfo kXMLDetailsInfoKey NSString Constant\tKey for value in mpedInfo Code example //clientForDevice:sharedSecret:delegate: //Creates a HeftClient object(connection to device) -(void)connectToFirstCardReaderWith:(NSData*)sharedSecret; { //Try to connect to first device in devices array [heftManager clientForDevice:[[heftManager devicesCopy] objectAtIndex:0] sharedSecret:sharedSecret delegate:self]; //Client calls the didConnect delegate function if successful } //.... //didConnect: //Called when a connection to specified device was created. -(void)didConnect:(id<HeftClient>)client { // connected successfully to a device // assigne the client to our heftClient property heftClient = client; } // ..... // Do one sale later in code [heftClient saleWithAmount:1000 currency:@\"GBP\" cardholder:YES]; Copy Methods cancel (void)cancel;  saleWithAmount (BOOL)saleWithAmount:(NSInteger)amount currency:(NSString*)currency cardholder:(BOOL)present;  saleWithAmount (BOOL)saleWithAmount:(NSInteger)amount currency:(NSString)currency cardholder:(BOOL)present reference:(NSString)reference;  saleWithAmount (BOOL)saleWithAmount:(NSInteger)amount currency:(NSString)currency cardholder:(BOOL)present reference:(NSString)reference;  refundWithAmount (BOOL)refundWithAmount:(NSInteger)amount currency:(NSString*)currency cardholder:(BOOL)present;  refundWithAmount (BOOL)refundWithAmount:(NSInteger)amount currency:(NSString)currency cardholder:(BOOL)present reference:(NSString)reference;  saleVoidWithAmount (BOOL)saleVoidWithAmount:(NSInteger)amount currency:(NSString)currency cardholder:(BOOL)present transaction:(NSString)transaction;  refundVoidWithAmount (BOOL)refundVoidWithAmount:(NSInteger)amount currency:(NSString)currency cardholder:(BOOL)present transaction:(NSString)transaction;  retrievePendingTransaction (BOOL)retrievePendingTransaction;  enableScanner (BOOL)enableScanner;  enableScannerWithMultiScan (BOOL)enableScannerWithMultiScan:(BOOL)multiScan;  enableScannerWithMultiScan (BOOL)enableScannerWithMultiScan:(BOOL)multiScan buttonMode:(BOOL)buttonMode;  enableScannerWithMultiScan (BOOL)enableScannerWithMultiScan:(BOOL)multiScan buttonMode:(BOOL)buttonMode timeoutSeconds:(NSInteger)timeoutSeconds;  Disable scanner (BOOL)disableScanner;  financeStartOfDay (BOOL)financeStartOfDay;  financeEndOfDay (BOOL)financeEndOfDay;  financeInit (BOOL)financeInit;  logSetLevel (BOOL)logSetLevel:(eLogLevel)level;  logReset (BOOL)logReset;  logGetInfo (BOOL)logGetInfo;  acceptSignature (void)acceptSignature:(BOOL)flag;  getEMVConfiguration (BOOL)getEMVConfiguration;  "},{"title":"HeftRemoteDevice​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#23","content":"HeftRemoteDevice An object containing a reference to the accessory device which is passed to the HeftClient on creation. Properties Property\tDescriptionname NSString\tName of device accessory EAAccessory\tThe EAAccessory object address NSString\tAddress of device "},{"title":"HeftDiscoveryDelegate​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#heftdiscoverydelegate","content":"HeftDiscoveryDelegate Notifications sent by the SDK on various events - new available device found, connection lost, connection found, etc Methods didDiscoverFinished (void)didDiscoverFinished;  didFindAccessoryDevice (void)didFindAccessoryDevice:(HeftRemoteDevice*)newDevice;  didLostAccessoryDevice (void)didLostAccessoryDevice:(HeftRemoteDevice*)oldDevice;  "},{"title":"HeftStatusReportDelegate​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#heftstatusreportdelegate","content":"HeftStatusReportDelegate Notifications sent by the SDK on various events - connected to device, request signature, response on error etc. Methods didConnect (void)didConnect:(id-HeftClient)client;  responseStatus (void)responseStatus:(id-ResponseInfo)info;  responseError (void)responseError:(id-ResponseInfo)info;  responseFinanceStatus (void)responseFinanceStatus:(id-FinanceResponseInfo)info;  responseLogInfo (void)responseLogInfo:(id-LogInfo)info;  requestSignature (void)requestSignature:(NSString*)receipt;  cancelSignature (void)cancelSignature;  responseRecoveredTransactionStatus (void)responseRecoveredTransactionStatus:(id-FinanceResponseInfo)info;  responseScannerEvent (void)responseScannerEvent:(id-ScannerEventResponseInfo)info;  responseScannerDisabled  (void)responseScannerDisabled:(id-ScannerDisabledResponseInfo)info;  responseEMVReport (void)responseEMVReport:(NSString *)report;  "},{"title":"ResponseInfo​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#24","content":"ResponseInfo A ResponseInfo object is passed to the ResponseStatus delegate. It contains information from the card reader about the status of the current transaction. There are two properties: status and xml. status is a string and xml is a dictionary. Usually status contains a message descriptive enough to know whats going on and is useful for displaying to user. The xml dictionary contains all elements of the XML formatted data passed from the card reader and has detailed information on the current state of the card reader. Properties Property\tDescriptionstatusCode int\tA numerical representation of the status. status Status as NSString\tFinancial transaction status message. xml XML as NSDictionary\tFeedback with xml details about transaction from the card reader. "},{"title":"FinanceResponseInfo​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#25","content":"FinanceResponseInfo A FinanceResponseInfo is passed to the responseFinanceStatus delegate at the end of transaction. It contains all necessary information needed about the relevant transaction. FinanceResponseInfo inherits from ResponseInfo so it includes the status string and xml dictionary in addition to authorisedAmount, transactionId and the html formatted receipts. Properties Property\tDescriptionfinancialResult NSInteger\tA numerical representation of a financial status result. Status Value EFT_FINANC_STATUS_UNDEFINED 0x00 EFT_FINANC_STATUS_TRANS_APPROVED 0x01 EFT_FINANC_STATUS_TRANS_DECLINED 0x02 EFT_FINANC_STATUS_TRANS_PROCESSED 0x03 EFT_FINANC_STATUS_TRANS_NOT_PROCESSED 0x04 EFT_FINANC_STATUS_TRANS_CANCELLED 0x05 isRestarting BOOL\tIndicates whether the card reader is about to restart or not (usually indicated after a software update was received on the card reader).If a restart is indicated then you have 2 seconds to start fetching the logs (before the card reader restarts).After fetching the logs you should disconnect from the card reader and wait for it to be visible again. authorisedAmount NSInteger\tIn the smallest unit for the given CurrencyCode - for the transaction. ISO 4217 defines number of digits in fractional part of currency for every currency code. Example 1000 in the case where CurrencyCode is \"0826\" (GBP) the amount would be 10.00 pounds or 1000 pense. transactionId NSString\tThe id of current transaction. customerReceipt NSString\tCustomer receipt in html format. merchantReceipt NSString\tMerchant receipt in html format. statusMessage NSString\tA human readable message describing the result of the transaction. type NSString\tThe transaction type represents which type of transaction was done. \"SALE\" for example. finStatus NSString\tThe financial status describes the conclusion of the transaction as received from the card reader. \"AUTHORISED\" for example. requestedAmount NSString\tThe requested amount is the payment amount sent in the original request to the card reader, i.e. the amount which was to charge the card with. gratuityAmount NSString\tThe gratuity amount is an additional amount added to the requested payment amount which represents additional fee added to the requested amount. This is used when the card reader is supporting the tipping functionality. An example: A sale is started with the amount 1000 and the card reader is set to support tipping. The card reader asks if a tip should be applied by the customer. The customer inputs an additional amount as a tip, lets say 100. The card is then charged for the requested amount, 1000, as well as the additional gratuity amount, 100. The result will be that the card will be charged for 1100. A calculated gratuity percentage will also be returned. gratuityPercentage NSString\tThe gratuity percentage is used to calculate an additional amount to the requested amount. The card reader calculates that amount, rounded up to the closest whole number. This is used when the card reader is supporting the tipping functionality. An example: A sale is started with the amount 1000 and the card reader is set to support tipping. The card reader asks if a tip should be applied by the customer. Instead of the customer adding a value he selects the percentage of the requested amount to be applied as a tip, lets say 10%. The card is then charged for the requested amount, 1000, as well as the additional gratuity percentage, 10%. The result will be that the card will be charged for 1100. A calculated gratuity amount will also be returned. totalAmount NSString\tThe total amount is the amount the card was charged for. It is possible that the total amount is not the same as the requested amount since an additional fee can be added, with the customer's approval, via the tipping functionality. currency NSString\tThe currency used in this transaction. eFTTransactionID NSString\tThe EFT (electronic funds transfer) transaction id is a unique GUID from the servers which is linked to this transaction in order to search for a particual transaction. This id is used if a transaction is to be reversed. originalEFTTransactionID NSString\tThe original EFT (electronic funds transfer) transaction id is a unique GUID previously received from the servers in order to reverse a transaction. This id is sent with the new eFTTransactionID in order to reference the original transaction. An example: A transaction is made. An eFTTransactionID is received. That transaction has to be reversed. A new transaction is started, now a reverse transaction, with the previously received eFTTransactionID as a parameter in the transaction. In the end result there will be a new eFTTransactionID, for the reverse transaction, and an originalEFTTransactionID referencing the original transaction. eFTTimestamp NSString\tThe eFTTimestamp represents the time when the transaction was done. This time is set by the device communicating to the card reader when the connection is established to the card reader. authorisationCode NSString\tIf the transaction was authorised the value represented can be used to search for a transaction in our system. verificationMethod NSString\tThe verification method represents the card holder verification method used to allow the payment. \"PIN\" for an example. cardEntryType NSString\tThe card entry type is the method the card information was input to card reader. \"ICC\" for an example represents \"Integrated Circuit Card\" i.e. the information was read from the chip of the card. cardSchemeName NSString\tThe scheme which was used when the transaction was made. (VISA, Mastercard, etc...) errorMessage NSString\tIf there was an error during the transaction it is represented here in a human readable text. customerReference NSString\tIf a customer reference was added, as an optional parameter, when the transaction was started. It is received here, unaltered. The customer reference can be used to reference in internal systems. budgetNumber NSString\tIf a budget number was added, as an optional parameter, when the transaction was started. It is received here, unaltered. The budget number can be used to split payments over a period of months. recoveredTransaction NSString\tThis flag is true if the transaction result is from a previous transaction which failed to get sent from the card reader, false otherwise. In the case that the communication between the device and the card reader breaks down, the card reader will attempt to send the result of the previous transaction as an immediate reply when the next transaction is started. If this happens the transaction is flagged as a \"RecoveredTransaction\". This should be displayed very well in the UI since this is NOT the result from the transaction just started. cardTypeId NSString\tThe card type id is an identifier inside the Handpoint gateway which represents what kind of card was used. \"U015\" for an example represents SAS Airline-Systems in our systems. chipTransactionReport NSString\tIf present, a full EMV report by the card reader on the Card and Terminal involved in the transaction. deviceStatus NSString\tGets the device status. dueAmount NSString\tIf there's still a part of the amount to be paid. balance NSString\tThe balance of the Cardholder's cards if the bank/acquirer supports it. CardToken String\tGets the card token if it's available, null otherwise. "},{"title":"ScannerEventResponseInfo​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#26","content":"ScannerEventResponseInfo A ScannerEventResponseInfo is passed to the responseScannerEvent delegate during scanner mode when a scan is detected. It contains all necessary information needed about the relevant operation. ScannerEventResponseInfo inherits from ResponseInfo so it includes the status string and xml dictionary in addition to scanCode string. Properties Property\tDescriptionstatusCode int\tA numerical representation of the status. status Status as NSString\tFinancial transaction status message. xml XML as NSDictionary\tFeedback with xml details about transaction from the card reader. scanCode NSString\tThe code that was scanned. "},{"title":"ScannerDisabledResponseInfo​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#27","content":"ScannerDisabledResponseInfo The info object contains information about the scanner operation. Properties Property\tDescriptionstatusCode int\tA numerical representation of the status. status Status as NSString\tFinancial transaction status message. xml XML as NSDictionary\tFeedback with xml details about transaction from the card reader. "},{"title":"LogInfo​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#28","content":"LogInfo A LogInfo object is passed to the ResponseLogInfo delegate when logs have been downloaded from the card reader. Properties Property\tDescriptionstatusCode int\tA numerical representation of the status. status Status as NSString\tFinancial transaction status message. xml XML as NSDictionary\tFeedback with xml details about transaction from the card reader. log NSString\tString containing the logging information. "},{"title":"eLogLevel​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#13","content":"eLogLevel An enum describing the different levels of logging used in the SDK and in the device. Possible values eLogNone eLogError eLogInfo eLogFull eLogDebug "},{"title":"Transaction Details​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#46","content":"XML as NSDictionary The contents of the xml property depend on which type of operation the card reader is responding to. Listed below are all possible keys in the dictionary. Note that not all fields are included all the time. "},{"title":"Dictionary keys​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#dictionary-keys","content":"StatusMessage A human readable description for the returned Status.  TransactionType The type of transaction performed: UNDEFINED, SALE, VOID_SALE, REFUND, VOID_REFUND, CANCEL_SALE, CANCEL_REFUND  FinancialStatus The result of the transaction: UNDEFINED, APPROVED, DECLINED, PROCESSED, FAILED, CANCELLED  RequestedAmount The amount requested by the POS, as requested by the POS (i.e. no decimal point).  GratuityAmount The gratuity amount entered by the cardholder, if any.  GratuityPercentage The gratuity amount, as a percentage of the requested amount.  TotalAmount The total of the gratuity and requested amount.  TransactionID The transaction number used for this transaction, as maintained by the Eft Client.  EFTTransactionID The EFT reference, given by the system, to make the transaction unique.  OriginalEFTTransactionID The original EFT reference, given by the POS, as part of a VOID_SALE or a VOID_REFUND transaction.  EFTTimestamp The date and time of the transaction, in ISO format (YYYYMMDDHHmmSS).  AuthorisationCode The transaction authorization code, as given by the system.  CVM The Cardholder Verfication Method: UNDEFINED, SIGNATURE, PIN, PIN_SIGNATURE, FAILED, NOT_REQUIRED  CardEntryType The card data acquisition type: UNDEFINED, MSR, ICC, CNP  CardSchemeName The card, reported, scheme name.  CardTypeId The ID of the Card Type.  SerialNumber The serial number of the PED.  BatteryStatus A number, followed by the % sign, which indicates current charge level of the battery.  BatterymV An integer, which represent the batter charge, in mV.  BatteryCharging Indicates whether the battery is charging, or not. Values are true or false.  ExternalPower Indicates whether the PED is connected to an external power source (e.g. a AC adapter). Values are true or false.  ApplicationName The name of the application running on the PED.  ApplicationVersion A version string of the form major.minor.build”(e.g. 1.2.118).  ErrorMessage Description of the error, if any.  RecoveredTransaction Indicates that the transaction result is a recovered transaction. The key is only included if value is true.  "},{"title":"CmdIds​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#cmdids","content":"card reader Status messages Status messages received from card reader: "},{"title":"Possible values​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#possible-values","content":"EFT_PP_STATUS_SUCCESSEFT_PP_STATUS_INVALID_DATAEFT_PP_STATUS_PROCESSING_ERROREFT_PP_STATUS_COMMAND_NOT_ALLOWEDEFT_PP_STATUS_NOT_INITIALISEDEFT_PP_STATUS_CONNECT_TIMEOUTEFT_PP_STATUS_CONNECT_ERROREFT_PP_STATUS_SENDING_ERROREFT_PP_STATUS_RECEIVING_ERROREFT_PP_STATUS_NO_DATA_AVAILABLEEFT_PP_STATUS_TRANS_NOT_ALLOWEDEFT_PP_STATUS_UNSUPPORTED_CURRENCYEFT_PP_STATUS_NO_HOST_AVAILABLEEFT_PP_STATUS_CARD_READER_ERROREFT_PP_STATUS_CARD_READING_FAILEDEFT_PP_STATUS_INVALID_CARDEFT_PP_STATUS_INPUT_TIMEOUTEFT_PP_STATUS_USER_CANCELLEDEFT_PP_STATUS_INVALID_SIGNATUREEFT_PP_STATUS_WAITING_CARDEFT_PP_STATUS_CARD_INSERTEDEFT_PP_STATUS_APPLICATION_SELECTIONEFT_PP_STATUS_APPLICATION_CONFIRMATIONEFT_PP_STATUS_AMOUNT_VALIDATIONEFT_PP_STATUS_PIN_INPUTEFT_PP_STATUS_MANUAL_CARD_INPUTEFT_PP_STATUS_WAITING_CARD_REMOVALEFT_PP_STATUS_TIP_INPUTEFT_PP_STATUS_SHARED_SECRET_INVALIDEFT_PP_STATUS_SHARED_SECRET_AUTHEFT_PP_STATUS_WAITING_SIGNATUREEFT_PP_STATUS_CONNECTINGEFT_PP_STATUS_SENDINGEFT_PP_STATUS_RECEIVEINGEFT_PP_STATUS_DISCONNECTINGEFT_PP_STATUS_PIN_INPUT_COMPLETEDEFT_PP_STATUS_POS_CANCELLEDEFT_PP_STATUS_REQUEST_INVALIDEFT_PP_STATUS_CARD_CANCELLEDEFT_PP_STATUS_CARD_BLOCKEDEFT_PP_STATUS_REQUEST_AUTH_TIMEOUTEFT_PP_STATUS_REQUEST_PAYMENT_TIMEOUTEFT_PP_STATUS_RESPONSE_AUTH_TIMEOUTEFT_PP_STATUS_RESPONSE_PAYMENT_TIMEOUTEFT_PP_STATUS_ICC_CARD_SWIPEDEFT_PP_STATUS_REMOVE_CARDEFT_PP_STATUS_SCANNER_IS_NOT_SUPPORTEDEFT_PP_STATUS_SCANNER_EVENTEFT_PP_STATUS_BATTERY_TOO_LOWEFT_PP_STATUS_ACCOUNT_TYPE_SELECTIONEFT_PP_STATUS_BT_IS_NOT_SUPPORTEDEFT_PP_STATUS_PAYMENT_CODE_SELECTIONEFT_PP_STATUS_PARTIAL_APPROVALEFT_PP_STATUS_AMOUNT_DUE_VALIDATIONEFT_PP_STATUS_INVALID_URLEFT_PP_STATUS_WAITING_CUSTOMER_RECEIPTEFT_PP_STATUS_PRINTING_MERCHANT_RECEIPTEFT_PP_STATUS_PRINTING_CUSTOMER_RECEIPTEFT_PP_STATUS_WAITING_HOST_MSG_TO_HOSTEFT_PP_STATUS_WAITING_HOST_MSG_RESPEFT_PP_STATUS_INITIALISATION_COMPLETE "},{"title":"Status strings​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#45","content":"Status as NSString An NSString containing the status message - can be one of the following: "},{"title":"Possible values​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#possible-values-1","content":"SuccessInvalid dataProcessing errorNot allowedNot initializedConnect timeoutConnect errorSending errorReceiveing errorNo data availableTransaction not allowedUnsupported currencyNo host availableCard reader errorCard reading failedInvalid cardInput timeoutUser cancelledInvalid signatureWaiting cardCard insertedApplication selectionApplication confirmationAmount validationPIN inputManual card inputWaiting card removalTip inputShared secret invalidConnectingSendingReceivingDisconnectingPIN entry completedMerchant cancelled the transactionRequest invalidCard cancelled the transactionBlocked cardRequest for authorisation timed outRequest for payment timed outResponse to authorisation request timed outResponse to payment request timed outPlease insert card in chip readerRemove the card from the readerThis device does not have a scannerScanner is not supportedScanner event "},{"title":"Process details​","type":1,"pageTitle":"Objects","url":"ios/iOS SDK 4.0.0/iosobjects#process-details","content":"The following table contains result codes that can occur in the COMMAND response STATUS field (see section 1.3 above). In addition the following table contains the text information presented in the StatusMessage field that is part of the FinancialTransactionResponse Xml response object. All values are in hex in the following table. Status ID\tValue\tStatusMessage\tDetailsEFT_SUCCESS\t0001\tOne of the following: \"\" (an empty string) \"AUTH CODE #\" \"REFUND ACCEPTED\" \"REVERSAL ACCEPTED\"\tOperation completed successfully. No further actions required. EFT_INVALID_DATA\t0002\t\"Invalid data\"\tInvalid COMMAND request object, from the POS App, at the start of an operation. Please retry the operation. If the issue persists please contact technical support and provide card reader logs. EFT_PROCESSING_ERROR\t0003\t\"Processing error\"\tAn unexpected error occurred during processing. Please retry the operation. If the issue persists please contact technical support and provide card reader logs. EFT_COMMAND_NOT_ALLOWED\t0004\t\"Command not allowed\"\tThe card reader is currently busy processing another command. Please retry the operation once the current operation has completed. EFT_NOT_INITIALISED\t0005\t\"Device is not initialized\"\tThe current operation can’t be completed because there is a pending software update that must be applied before processing can continue. Please retry the operation after the card reader has restarted itself. EFT_CONNECT_TIMEOUT\t0006\t\"Connection time out detected\"\tThe back end connection timed out during an update. Please retry the operation. If the issue persists please contact technical support and provide card reader logs. EFT_CONNECT_ERROR\t0007\t\"Connection error\"\tIt was not possible to establish a connection to the back end system during an update operation. Please retry the operation. If the issue persists please contact technical support and provide card reader logs. EFT_SENDING_ERROR\t0008\t\"Send error\"\tA failure was detected during communication with the back end system. If a SALE or a REFUND transaction was in progress when this occurred then you MUST contact technical support and verify whether the transaction went through or not. If you fail to do so then you may be liable for any costs incurred due to any double charges. Note: You may be asked to provide the card reader logs. Once verified please retry the operation. EFT_RECEIVING_ERROR\t0009\t\"Receiving error\"\tA failure was detected during communication with the back end system. If a SALE or a REFUND transaction was in progress when this occurred then you MUST contact technical support and verify whether the transaction went through or not. If you fail to do so then you may be liable for any costs incurred due to any double charges. Note: You may be asked to provide the card reader logs. Once verified please retry the operation. EFT_NO_DATA_AVAILABLE\t000A\t\"No data available\"\tThe POS App is trying to fetch the card reader log file but there is no data stored in the log file. If logs are required then please set the log level to an appropriate value and retry the operation. EFT_TRANS_NOT_ALLOWED\t000B\t\"Transaction not allowed\"\tCurrently not used EFT_UNSUPPORTED_CURRENCY\t000C\t\"Currency not supported\"\tA currency has been selected that the card reader has not been configured for. Please select the correct currency and retry the operation. Alternatively, please contact technical support and ask for the specific currency to be supported. EFT_NO_HOST_AVAILABLE\t000D\t\"No host configuration found\"\tAn update was initiated but the card reader could not find any host information for the back end system, even though it otherwise contains valid configuration. This is indicative of an invalid hostBlock block with in the HostList block in this device configuration, which was placed on the card reader during a previous update. Please contact technical support and provide card reader logs and ask for a replacement device. The card reader will be unable to update itself and must be replaced. EFT_CARD_READER_ERROR\t000E\t\"Card reader error\"\tError detected in the chip reader or the magnetic stripe reader. Please retry the operation. If the issue persists please contact technical support and provide them with the card reader logs as well as asking for a replacement reader. EFT_CARD_READING_FAILED\t000F\t\"Failed to read card data\"\tThe card reader could not read any data from the card. Please retry the operation. If the issue persists the card may be faulty, please try another card. If the issue still persists the card reader may require replacement, please contact technical support. EFT_INVALID_CARD\t0010\t\"INVALID CARD\"\tThe card reader detected invalid card data. Please retry the operation. If the issue persists the card may be faulty, please try another card. If the issue still persists the card reader may require replacement, please contact technical support. EFT_INPUT_TIMEOUT\t0011\t\"Timeout waiting for user input\"\tThe card reader timed out while waiting for a user action. No further actions required. EFT_USER_CANCELLED\t0012\t\"TRANSACTION VOID\" \"User cancelled the transaction\"\tThe current operation was cancelled by card holder. No further actions required. EFT_SHARED_SECRET_INVALID\t001D\t\"Shared Secret invalid\"\tThe card reader believes that the POS App has an incorrect shared secret. No financial operations will be possible (e.g. SALE, REFUND). Please type the correct shared secret into the POS App or contact technical support for further assistance. EFT_SHARED_SECRET_AUTH\t001E\t\"Authenticating POS\"\tThe card reader is about to challenge the POS App for a correct shared secret. No further actions are required. REPORT STATUS SPECIFIC EFT_INVALID_SIGNATURE\t0013\t\"TRANSACTION VOID\"\tThe merchant indicated that the signature provided by the card holder was invalid. No further actions are required. EFT_WAITING_CARD\t0014\t\"Waiting for card\"\tThe card reader is waiting for a card to be inserted into the chip reader or for a card to be swiped (only applies to card readers with external MSR). Insert or swipe a card to continue with the transaction. EFT_CARD_INSERTED\t0015\t\"Card detected\"\tCurrently not used EFT_APPLICATION_SELECTION\t0016\t\"Waiting for application selection\"\tThe card reader is waiting for the card holder to select a card application to be used for the transaction. The card holder must select an application for use (e.g. VISA, MASTERCARD, etc.) and should then press either the OK button to continue. Press the C/Cancel button to abort the transaction. EFT_APPLICATION_CONFIRMATION\t0017\t\"Waiting for application confirmation\"\tThe card reader is waiting for the card holder to confirm that the displayed card application should be used for the transaction. The card holder should press either the OK or the C/Cancel button. EFT_AMOUNT_VALIDATION\t0018\t\"Waiting for amount validation\"\tThe card reader is waiting for the card holder to confirm that the amount presented is correct. The card holder should press either the OK or the C/Cancel button. EFT_PIN_INPUT\t0019\t\"Waiting for PIN entry\"\tThe card reader is waiting for the card holder to enter his/her PIN. The card holder should enter his PIN and then press the OK button to continue. For PIN bypass press the OK button without entering any PIN digits (this will trigger signature fallback). Press the C/Cancel button to abort the transaction. Note: It is not possible to cancel this operation from the POS App. EFT_MANUAL_CARD_INPUT\t001A\t\"Waiting for manual card data\"\tCurrently not used EFT_WAITING_CARD_REMOVAL\t001B\t\"Waiting for card removal\"\tA card was detected in the card reader at the start of a transaction, presumably left there from a previous transaction. Please remove the card and restart the operation. EFT_TIP_INPUT\t001C\t\"Waiting for gratuity\"\tThe card reader is waiting for the card holder to enter/confirm tip/gratuity information. EFT_WAITING_SIGNATURE\t001F\t\"Waiting for signature\"\tThe card reader is waiting for confirmation from the merchant that the card holder signature is valid. The merchant should press either the Accepted or Declined/Cancel in the POS App. Pressing Cancel or OK on the card reader will not have any effect. EFT_WAITING_HOST_CONNECT\t0020\t\"Connecting to host\"\tThe card reader is establishing a connection to the back end system. No further actions are required. EFT_WAITING_HOST_SEND\t0021\t\"Sending data to host\"\tThe card reader is sending data to the back end system. No further actions are required. EFT_WAITING_HOST_RECEIVE\t0022\t\"Waiting for data from host\"\tThe card reader is waiting for data from to the back end system. No further actions are required. EFT_WAITING_HOST_DISCONNECT\t0023\t\"Disconnecting from host\"\tThe card reader is disconnecting from the back end system. No further actions are required. EFT_PIN_INPUT_COMPLETED\t0024\t\"PIN entry completed\"\tPIN entry has been completed. No further actions required. EFT_POS_CANCELLED\t0025\t\"TRANSACTION VOID\"\tThe current operation was cancelled by merchant. No further actions required. EFT_REQUEST_INVALID\t0026\t\"Request invalid\"\tCard not allowed with this transaction type. EFT_CARD_CANCELLED\t0027\t\"TRANSACTION VOID\"\tThe chip on the card cancelled the transaction. No further actions required. EFT_CARD_BLOCKED\t0028 \"CARD BLOCKED\" EFT_REQUEST_AUTH_TIMEOUT\t0029\t\"Request for authorisation timed out\"\tIndicates that the card reader detected a communication failure between itself and the back end system during the authorization phase. Please make sure the phone/pc has an internet connection and then retry the operation. If the problem persists then please contact technical support. Note: You may be asked to provide the card reader logs. EFT_REQUEST_PAYMENT_TIMEOUT\t002A\t\"Request for payment timed out\"\tIndicates that the card reader detected a communication failure between itself and the back end system during the payments phase. Please make sure the phone/pc has an internet connection and then retry the operation. If the problem persists then please contact technical support. Note: You may be asked to provide the card reader logs. EFT_RESPONSE_AUTH_TIMEOUT\t002B\t\"Response to authorisation request timed out\"\tIndicates that the card reader detected a communication failure between itself and the back end system during the authorization phase. Please make sure the phone/pc has an internet connection and then retry the operation. If the problem persists then please contact technical support. Note: You may be asked to provide the card reader logs. EFT_RESPONSE_PAYMENT_TIMEOUT\t002C\t\"Response to payment request timed out\"\tIndicates that the card reader detected a communication failure between itself and the back end system during the payments phase. You MUST contact technical support and verify whether the transaction went through or not. If you fail to do so then you may be liable for any costs incurred due to any double charges. Note: You may be asked to provide the card reader logs. Once you have verified that the transaction did not go through then please make sure the phone/pc has an internet connection and then retry the operation. EFT_ICC_CARD_SWIPED\t002D\t\"Please insert card in chip reader\"\tCurrently not used EFT_REMOVE_CARD\t002E\t\"Remove the card from the reader\"\tCurrently not used EFT_SCANNER_IS_NOT_SUPPORTED\t002F\t\"This device does not have a scanner\"\tBar-code scanner hardware is not present on this card reader. No further actions are required. EFT_SCANNER_EVENT\t0030\t\"\"\tBar-code data was just read with the bar-code scanner and returned to the POS App. No further actions are required. EFT_BATTERY_TOO_LOW\t0031\t\"Operation cancelled, the battery is too low. Please charge.\"\tAn operation was started, but the battery charge level is too low to complete the operation. Please recharge the card reader. EFT_ACCOUNT_TYPE_SELECTION\t0032\t\"Waiting for account type selection\"\tThe card reader is waiting for the card holder to choose an account type for the transaction (i.e. default, credit, cheque/debit or savings). "},{"title":"Introduction","type":0,"sectionRef":"#","url":"restapi/REST API 2.3.0/restintroduction","content":"Introduction Introducing the Revolutionary Handpoint REST API: Seamlessly integrate card present payments into any software Use the Handpoint REST API to integrate leading smartpos terminals with your software. The Handpoint REST API is a simple REST interface that acts as a bridge between your software and the payment terminal , while shielding your software from card data. It is seamless to integrate, keeps all card data out of your system, works with every platform, and lets you use the best Android terminals on the market. Complete your integration in just three steps: Initiate the interface, choose the terminal, and start the sale. It is as simple as it sounds. The only thing you need is a valid API key to authenticate against the API. You even get a list of terminals to which you can connect. Simply execute the financial operation, and within seconds you’ll get back the transaction result and receipts in your software. The Handpoint REST API seamlessly starts and manages the entire P2PE transaction with the payment terminal, minimizing hassle for you and maximizing reliability, security, and control.","keywords":""},{"title":"Endpoints","type":0,"sectionRef":"#","url":"restapi/REST API 2.3.0/restendpoints","content":"","keywords":""},{"title":"/initialize​","type":1,"pageTitle":"Endpoints","url":"restapi/REST API 2.3.0/restendpoints#initialize","content":"Initialize Initializes the REST API client and returns the list of payment terminals associated with the merchant account Parameters Parameter\tNotesHeader: ApiKeyCloud Required String\tRequest Header used to identify the merchant Returns Parameter\tNotesDevices\tList of Device objects Code Example Operation executed using CLI tool CURL: REQUEST: curl -X GET \\ -H \"ApiKeyCLoud: MeRcHaNt-ApIkEy\" \\ \"https://cloud.handpoint.com/initialize\" RESPONSE: Code 200 -> Body: [ { \"merchant_id_alpha\": \"merchantID\", \"serial_number\": \"082104578\", \"customerReference\": \"op15248\", \"terminal_type\": \"PAXA920\" } ] Copy "},{"title":"/transactions​","type":1,"pageTitle":"Endpoints","url":"restapi/REST API 2.3.0/restendpoints#transactions","content":"Transactions POST endpoint used to execute a financial operation Parameters Parameter\tNotesHeader: ApiKeyCloud Required String\tRequest Header used to identify the merchant Request Body: Transaction Request Required TransactionRequest\tObject containing the transaction information Returns Response\tResponse CodeTransaction Accepted\tResponse code 202 is received if the transaction has been successfully sent to the terminal. BadRequest DeviceIsBusy Error\tResponse code 400 with error 1001. Wait until the end of the current transaction to be able to execute the next operation BadRequest DeviceNotResponding Error\tResponse code 400 with error 1002. The device is not responding, verify the device is online and retry in a few seconds. BadRequest CancelOperationNotAllowed Error\tResponse code 400 with error 1003. Operation type stopCurrentTransaction cannot be executed because the terminal is processing the transaction and it can not be stopped. Code Example Operation executed using CLI tool CURL: REQUEST: curl -X GET \\ -H \"ApiKeyCLoud: MeRcHaNt-ApIkEy\" \\ \"https://cloud.handpoint.com/initialize\" RESPONSE: Code 200 -> Body: [ { \"merchant_id_alpha\": \"merchantID\", \"serial_number\": \"082104578\", \"customerReference\": \"op15248\", \"terminal_type\": \"PAXA920\" } ] Copy "},{"title":"Transaction Result Recovery​","type":1,"pageTitle":"Endpoints","url":"restapi/REST API 2.3.0/restendpoints#transaction-result-recovery","content":"TransactionResultRecovery The terminal has a transaction recovery loop to automatically send back the pending TransactionResult to the callback URL in case it becomes unreachable (network issue or server down). For the first 100 seconds after a transaction is completed, a background thread will attempt to deliver the result every 5 seconds. If the server is still unreachable after the first 100 seconds, the retry loop turns into an exponential increment to the power of 2 (8s-16s-32s etc…). The recovery loop is reinitialized every time the Handpoint application is restarted or the startRecovery method is triggered. The Transaction Result received through the transaction recovery loop will have the recoveredTransaction field set to true. All 2XXs http response codes from the callbackUrl are valid to notify the device of a successful delivery of the result. Returns Parameter\tNotesTransaction Result\tThe Transaction Result is delivered to the callback Url from the Transaction Request. "},{"title":"Transactions","type":0,"sectionRef":"#","url":"ios/iOS SDK 4.0.0/iostransactions","content":"","keywords":""},{"title":"Sale​","type":1,"pageTitle":"Transactions","url":"ios/iOS SDK 4.0.0/iostransactions#2","content":"saleWithAmount A sale initiates a payment operation to the card reader. In it's simplest form you only have to pass the amount and currency but it also accepts tip configuration and a map with extra parameters. Parameters Parameter\tNotesamount Required NSInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required NSString\t3 letter currency code in accordance to ISO4217 options SaleOptions\tAn object to store all the customization options for a sale. Code example //If you just need a plain vanilla sale: [api saleWithAmount:100 currency:Currency.EUR.alpha]; //But you can customize your sale: SaleOptions *options = [SaleOptions new]; //Optionally options.customerReference = @\"Your customer reference\"; //If you need Multi MID / Custom merchant Authentication: MerchantAuth *auth = [MerchantAuth new]; Credential *cred = [Credential new]; //Optionally cred.acquirer = [Credential getAcquirerFromString:@\"acquirer\"]; //Optionally cred.mid = @\"mid\"; //Optionally cred.tid = @\"tid\"; //Add as many credentials as Acquirers your merchant have agreements with [auth add:cred]; options.merchantAuth = auth; //If you want to specify the budget period //Only available for SureSwipe //Here it's 3 months options.divideByMonths = @\"3\"; [api saleWithAmount:100 currency:Currency.EUR.alpha options:options]; Copy Events invoked responseStatus Invoked while during transaction with different statuses from card reader.  responseError Invoked to inform when an error response happens.  requestSignature Invoked if card verification requires signature.  responseFinanceStatus  Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\tYES if operation starts successfully. "},{"title":"Sale Reversal​","type":1,"pageTitle":"Transactions","url":"ios/iOS SDK 4.0.0/iostransactions#3","content":"saleVoidWithAmount Request a void operation on previous sale transaction, referred to by the parameter transaction. Parameters amount, currency and present must be the same as the in the sale to be voided. This operation reverts (if possible) a specific sale identified with a transaction id. Note that transactions can only be reversed within the same day as the transaction was made. Parameters Parameter\tNotesamount Required NSInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required NSString\t3 letter currency code in accordance to ISO4217 transaction Required NSString\tTransactionID of the sale transaction to be voided options Options\tAn object to store all the customization options for this operation. Code example //If you just need a plain vanilla sale reversal: [api saleReversalWithAmount:100 currency:Currency.EUR.alpha transactionId:originalTransactionID options:options]; //But you can customize your sale: Options *options = [Options new]; //Optionally options.customerReference = @\"Your customer reference\"; [api saleReversalWithAmount:100 currency:Currency.EUR.alpha transactionId:@\"00000000-0000-0000-0000-000000000000\" options:options]; Copy Events invoked responseStatus Invoked while during transaction with different statuses from card reader  responseError  Invoked to inform when an error response happens.  responseFinanceStatus Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\tYES if operation starts successfully. "},{"title":"Sale And Tokenize Card​","type":1,"pageTitle":"Transactions","url":"ios/iOS SDK 4.0.0/iostransactions#4","content":"saleAndTokenizeCardWithAmount A sale initiates a payment operation to the card reader. Parameters Parameter\tNotesamount Required NSInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required NSString\t3 letter currency code in accordance to ISO4217 options SaleOptions\tAn object to store all the customization options for a sale. Code example //If you just need a plain vanilla sale tokenization: [api saleAndTokenizeWithAmount:100 currency:Currency.EUR.alpha]; //But you can customize your sale: SaleOptions *options = [SaleOptions new]; //Optionally options.customerReference = @\"Your customer reference\"; //If you need Multi MID / Custom merchant Authentication: MerchantAuth *auth = [MerchantAuth new]; Credential *cred = [Credential new]; //Optionally cred.acquirer = [Credential getAcquirerFromString:@\"acquirer\"]; //Optionally cred.mid = @\"mid\"; //Optionally cred.tid = @\"tid\"; //Add as many credentials as Acquirers your merchant have agreements with [auth add:cred]; options.merchantAuth = auth; //If you want to specify the budget period //Only available for SureSwipe //Here it's 3 months options.divideByMonths = @\"3\"; [api saleAndTokenizeWithAmount:100 currency:Currency.EUR.alpha options:options]; Copy Events invoked responseStatus Invoked while during transaction with different statuses from card reader  responseError Invoked to inform when an error response happens.  requestSignature Invoked if card verification requires signature.  responseFinanceStatus Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\tYES if operation starts successfully. "},{"title":"Refund​","type":1,"pageTitle":"Transactions","url":"ios/iOS SDK 4.0.0/iostransactions#5","content":"refundWithAmount A refund initiates a refund operation to the card reader. This operation moves funds from your account to the cardholders credit card. Parameters Parameter\tNotesamount Required NSInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required NSString\tCurrency of the charge transaction Required NSString\tIf present it links the refund with a previous sale. It effectively limits the maximum amount refunded to that of the original transaction. options MerchantAuthOptions\tAn object to store all the customization options for a refund. Code example //If you just need a plain vanilla refund: [api refundWithAmount:100 currency:Currency.EUR.alpha transaction:@\"00000000-0000-0000-0000-000000000000\"]; //But you can customize your sale: MerchantAuthOptions *options = [MerchantAuthOptions new]; //Optionally options.customerReference = @\"Your customer reference\"; //If you need Multi MID / Custom merchant Authentication: MerchantAuth *auth = [MerchantAuth new]; Credential *cred = [Credential new]; //Optionally cred.acquirer = [Credential getAcquirerFromString:@\"acquirer\"]; //Optionally cred.mid = @\"mid\"; //Optionally cred.tid = @\"tid\"; //Add as many credentials as Acquirers your merchant have agreements with [auth add:cred]; options.merchantAuth = auth; [api refundWithAmount:100 currency:Currency.EUR.alpha transaction:@\"00000000-0000-0000-0000-000000000000\" options:options]; Copy  Events invoked responseStatus Invoked while during transaction with different statuses from card reader  responseError Invoked when the card reader finishes processing the transaction  responseFinanceStatus Invoked to inform when an error response happens.  Returns Parameter\tNotesBoolean\tYES if operation starts successfully. "},{"title":"Refund reversal​","type":1,"pageTitle":"Transactions","url":"ios/iOS SDK 4.0.0/iostransactions#6","content":"refundVoidWithAmount Request a void operation on previous refund transaction, referred to by the parameter transaction. Parameters amount, currency and present must be the same as the in the refund to be voided. This operation reverts (if possible) a specific refund identified with a transaction id. Note that transactions can only be reversed within the same day as the transaction was made. Parameters Parameter\tNotesamount Required NSInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required NSString\t3 letter currency code in accordance to ISO4217 transaction Required NSString\tTransactionID of the refund transaction to be voided options Options\tAn object to store all the customization options for this operation. Code example //If you just need a plain vanilla refund reversal: [api refundReversalWithAmount:100 currency:Currency.EUR.alpha transactionId:originalTransactionID options:options]; //But you can customize your sale: Options *options = [Options new]; //Optionally options.customerReference = @\"Your customer reference\"; [api refundReversalWithAmount:100 currency:Currency.EUR.alpha transactionId:@\"00000000-0000-0000-0000-000000000000\" options:options]; Copy  Events invoked responseStatus Invoked while during transaction with different statuses from card reader  responseError Invoked to inform when an error response happens.  responseFinanceStatus Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\tYES if the operation was successfully sent to device. "},{"title":"Accept signature​","type":1,"pageTitle":"Transactions","url":"ios/iOS SDK 4.0.0/iostransactions#7","content":"acceptSignature A requestSignature event is invoked during transaction when signature verification is needed (f.ex when payment is done with a magstripe card). The merchant is required to ask the cardholder for signature and approve (or disapprove) the signature. signatureRequired tells the card reader if the signature was approved by passing YES. To disapprove then NO is passed. Parameters Parameter\tNotesflag Required Boolean\tYES if signature is valid, NO otherwise Code example //acceptSignature: //Inform the card reader if signature is valid or not -(IBAction)accept { [heftClient acceptSignature:YES]; } -(IBAction)decline { [heftClient acceptSignature:NO]; } Copy  Events invoked responseStatus Invoked while during transaction with different statuses from card reader  responseError Invoked to inform when an error response happens.  responseFinanceStatus Invoked when the card reader finishes processing the transaction  "},{"title":"Retrieve Pending Transaction​","type":1,"pageTitle":"Transactions","url":"ios/iOS SDK 4.0.0/iostransactions#8","content":"retrievePendingTransaction Retrieving a pending transaction fetches a transaction result that was lost due to unexpected disconnect between card reader and application. Code example //retrievePendingTransaction: //Called when a pending transaction is discovered upon connecting to a specific card reader - (void)didConnect:(id<HeftClient>)client{ heftClient = client; if(heftClient){ if([heftClient isTransactionResultPending] == YES) { // a pending transaction has been detected ... // ... so, lets get it [heftClient retrievePendingTransaction]; } } } Copy  Events invoked responseStatus Invoked during the operation with different statuses from the card reader.  responseError Invoked to inform when an error response happens.  responseRecoveredTransactionStatus Invoked when the card reader has returned a recovered transaction.  Returns Parameter\tNotesBoolean\tYES if operation starts successfully.  Card Reader Requirements Version RequirementsCard reader software v1.7.0+ and v2.1.7+ is required in order for this method to work  Notes On starting a new transaction If a new transaction is started with out first fetching a pending transaction result, then the pending transaction result will be discarded.  User notifications while a transaction result is pending The card reader will not give any visible indication that a transaction result is pending.  User notifications when fetching a pending transaction result The card reader will briefly display a message when a pending transaction result is recovered.  "},{"title":"Tip Adjustment​","type":1,"pageTitle":"Transactions","url":"ios/iOS SDK 4.0.0/iostransactions#9","content":"tipAdjustment A tip adjustment operation allows merchants to adjust the tip amount of a sale transaction before the batch of transactions is settled automatically by the processor at the end of the day. Note: This functionality is only available for the restaurant industry in the United States and the processors currently supporting this functionality are TSYS and VANTIV. The tip adjustment method does not rely on a card reader and is therefore a separate method that must be initialized with a shared secret. The function is defined in the file HapiRemoteService.h Parameters Parameter\tNotestipAmount Required NSInteger\tTip amount added to the original (base) transaction amount - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) transaction Required NSString\tTransactionID (GUID) of the original sale transaction to be adjusted Code example //First, you need to include the following dependency #include \"HapiRemoteService.h\" //Second, the shared secret needs to be initialized NSString* shared_secret = @\"0102030405060708091011121314151617181920212223242526272829303132\"; BOOL result = setupHandpointApiConnection(shared_secret); //Third, you need to retrieve the unique transaction id of the original sale transaction you want to adjust. The below GUID is only an example and will result in a decline from the host if used for tip adjustment NSString* transaction = @\"d50af540-a1b0-11e6-85e6-07b2a5f091ec\"; //Fourth, let's tip adjust a transaction for $10.00! -(IBAction)tipAdjustment:(UIButton*) sender { BOOL result = tipAdjustment(transaction, 1000, ^(TipAdjustmentStatus status) { if(status == TipAdjustmentAuthorised) { //Successfully adjusted! } else if(status == TipAdjustmentDeclined) { //Declined! } else if(status == TipAdjustmentFailed) { //Timeout! } }); } Copy Returns Result of the tip adjustment transaction, possible values : Parameter\tNotesstatus\t- TipAdjustmentAuthorised (tip adjustment approved by the processor) - TipAdjustmentFailed (system error or timeout) - TipAdjustmentDeclined (tip adjustment declined by the processor) If two tip adjustments are sent for the same sale transaction, the second tip adjustment will override the first one. In case the transaction fails (not declined) we recommend that you prompt the user of the POS to retry the adjustment. "},{"title":"Tokenize Card​","type":1,"pageTitle":"Transactions","url":"ios/iOS SDK 4.0.0/iostransactions#10","content":"tokenizeCard Initiates a card-tokenization operation to the card reader (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice). Parameters Parameter\tNotesreference Required NSString\tstring for customer reference Code example //Initiates a card tokenization operation. [heftClient tokenizeCard]; Copy  Events invoked responseStatus Invoked while during transaction with different statuses from card reader  responseError Invoked to inform when an error response happens.  requestSignature Invoked if card verification requires signature.  responseRecoveredTransactionStatus Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\tYES if operation starts successfully. "},{"title":"Processing Payments Simulation","type":0,"sectionRef":"#","url":"restapi/REST API 2.3.0/restprocessingpayments","content":"Processing Payments Simulation Test transactions are conducted against a test server which is designed to simulate the behavior of an acquiring bank without moving any funds. As with every Handpoint terminal, sensitive card data is fully encrypted. Use trigger amounts to generate some specific responses from our server: Sale amounts Amount\tBehaviour37.79\tIssuer response code = 01 (Refer to issuer) 37.84\tIssuer response code = 05 (Not authorized) 37.93\tIssuer response code = 04 (Pick up card) 37.57\tRequest is partially approved 37.68\tRequest timeout Any other values will behave as normal authorized operations.","keywords":""},{"title":"Sandbox","type":0,"sectionRef":"#","url":"restapi/REST API 2.3.0/restsandbox","content":"Sandbox Get started today with our sandbox. You can generate sample transactions and test the experience right in your browser. Check it at: http://www.handpoint.com/lab/cloudpos. A payment terminal is required to start testing. This is the initial setup screen: To get started, select the target environment where you are going to operate (Sandbox/Production). If the user has any doubts selecting the correct environment, click on \"*How do I know what type of card reader do I have?\" and you will be redirected to an explanation page. Next, enter your Handpoint API key in the box labeled \"INSERT API KEY” and click the check button. This will automatically populate the “SELECT A DEVICE” drop down with the list of devices that are assigned to you. If the API key is not valid, an error message will appear in the “RESPONSES” section of the sandbox. Before you can begin any further testing, you first must select the device that you will be using. In the “SELECT A DEVICE” list, you will see both the real terminals assigned to you, as well as simulated devices (listed by serial number). You can choose any device to test with. Serial numbers for the simulated devices always have this format: XXXX | 999999xxxxx. Choose a simulated terminal if you do not have access to a real device or if you just want to see simulated behavior. You can refresh the “SELECT A DEVICE” list by clicking the refresh button on the right side of the “SELECT A DEVICE” box. If you are already connected to a device, you can disconnect from it using the “Disconnect” button or trigger a software and configuration update operation by using the \"Update\" button. Once you have selected a device, the “SELECT A DEVICE” box will be disabled, and the rest of the sandbox will be enabled. With your selected device, you can simulate a number of operations, including: salesale and tokenizerefundtokenize cardreverse sale transactionsreverse refund transactions In order to reverse a transaction, a transaction id is needed, this id is available in the transaction result data coming from a previous sale or refund operation. Each transaction result will appear in the RESPONSES panel, on the right side of the screen. With each transaction result you will be able to perform several operations: View and print the merchant receiptView and print the customer receiptReverse the transactionCopy the transaction result data; it is the raw transaction result, as received by the application from the device","keywords":""},{"title":"API overview","type":0,"sectionRef":"#","url":"windows/Windows SDK 3.1.4/windowsapioverview","content":"","keywords":""},{"title":"How to implement a Sale Transaction​","type":1,"pageTitle":"API overview","url":"windows/Windows SDK 3.1.4/windowsapioverview#how-to-implement-a-sale-transaction","content":"The below flow chart shows the interaction between the SDK, the payment terminal and your application. The orange arrows represent methods (requests) that need to be invoked to communicate with the Handpoint SDK's. The dark arrows represent events that need to be integrated in your code in order to retrieve information from the SDK´s and the card reader.  "},{"title":"How to implement a Sale Transaction with Recovery feature​","type":1,"pageTitle":"API overview","url":"windows/Windows SDK 3.1.4/windowsapioverview#how-to-implement-a-sale-transaction-with-recovery-feature","content":"At some point, the connection between the SDK and the card reader can become unstable. For example, the Bluetooth connection can be cut in the middle of a sale transaction if the smartphone runs out of battery. If this happens, you need to have implemented the “transaction recovery feature” in order to get the receipts from the previous transaction and knowing if it was successful despite the connection problem.  Supported functionality Discovery of remote BT and CLOUD devices.Connect to remote BT and CLOUD device.Physical connection to HiPro external accessory.Automatic or manual reconnection to the card reader.Executing financial transaction.Reporting status of transactions.Control and access to device logs.Barcode scanner with HiPro card readers.Limited card reader simulation. Processing Payments Simulation Your test payments are sent against a test server on the Handpoint side which simulates the behavior of an acquiring bank. Funds are not moved and sensitive data from the card is fully encrypted. You can use trigger amounts to generate some specific responses from our server: Sale amounts Amount\tBehaviour37.79\tIssuer response code = 01 (Refer to issuer) 37.84\tIssuer response code = 05 (Not authorized) 37.93\tIssuer response code = 04 (Pick up card) 37.57\tRequest is partially approved 37.68\tRequest timeout "},{"title":"Events subscribers","type":0,"sectionRef":"#","url":"windows/Windows SDK 3.1.4/windowseventssubscribers","content":"","keywords":""},{"title":"Register events delegate​","type":1,"pageTitle":"Events subscribers","url":"windows/Windows SDK 3.1.4/windowseventssubscribers#register-events-delegate","content":"RegisterEventsDelegate Registers a delegate for the SDK events. Method getAsyncInterface in HapiFactory executes internally this subscription. Parameters​ Parameter\tNoteslistener Required Object\tAny Object implementing one or more of the available delegate interfaces Code example public class ObjectHelper : Events.Required, Events.Status, Events.Log { ... private void RegisterEventHandler() { // Register this class as listener for events this.api.RegisterEventsDelegate(this); ... } } Copy Returns Parameter\tNotesBoolean\tTrue if the new delegate was added successfully. "},{"title":"Unregister events delegate​","type":1,"pageTitle":"Events subscribers","url":"windows/Windows SDK 3.1.4/windowseventssubscribers#unregister-events-delegate","content":"UnregisterEventsDelegate Unregisters an object from SDK events. Parameters​ Parameter\tNoteslistener Required Object\tAny Object implementing one or more of the available delegate interfaces Code example public class ObjectHelper : Events.Required, Events.Status, Events.Log { ... private void Unsubscribe() { // Stop receiving events this.api.UnregisterEventsDelegate(this); ... } Copy Returns Parameter\tNotesBoolean\tTrue if the new delegate was removedded successfully. "},{"title":"Events","type":0,"sectionRef":"#","url":"windows/Windows SDK 3.1.4/windowsevents","content":"","keywords":""},{"title":"Transaction Result Recovery over CLOUD connection​","type":1,"pageTitle":"Events","url":"windows/Windows SDK 3.1.4/windowsevents#transaction-result-recovery-over-cloud-connection","content":"CloudTransactionResultRecovery The terminal has a transaction recovery loop to automatically send back the pending Transaction Result to the Point of sale in case it becomes unreachable (network issue or other). For the first 100 seconds after a transaction is completed, a background thread will attempt to deliver the result every 5 seconds. If the point of sale is still unreachable after the first 100 seconds, the retry loop turns into an exponential increment to the power of 2 (8s-16s-32s etc…). The recovery loop is reinitialized every time the Handpoint application is restarted.The Transaction Result received through the transaction recovery loop will have the recoveredTransaction field set to true. Important information: The point of sale must be successfully connected to a terminal in order to receive the pending transactions. Transaction Result Ready Event Event containing the pending Transaction Result "},{"title":"Device discovery finished​","type":1,"pageTitle":"Events","url":"windows/Windows SDK 3.1.4/windowsevents#13","content":"deviceDiscoveryFinished deviceDiscoveryFinished event gets called when a device discovery has finished and returns a list of devices. Parameters​ Parameter\tNotesdevice Required Device\tThe device that is invoking the event Code example //Receiving a list of connectable devices List<Device> myListOfDevices = new List<Device>(); public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { foreach(Device device in devices) { myListOfDevices.Add(device); } } Copy Subscribers Needed AddRequiredEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve the devices information. "},{"title":"Signature required​","type":1,"pageTitle":"Events","url":"windows/Windows SDK 3.1.4/windowsevents#5","content":"SignatureRequired SignatureRequired event gets called when a card requires a signature instead of PIN entry and has two parameters, request and device. Integrations with PAX or Telpo devices DO NOT need the implementation of this event. Parameters​ Parameter\tNotesrequest Required SignatureRequest\tHolds the signature request device Required Device\tThe device that is invoking the event Code example //Receiving a SignatureRequest from the SDK. public void SignatureRequired(SignatureRequest signatureRequest, Device device) { //You might want to print out the receipt or ask the customer to sign the receipt on your device DisplayReceiptInUI(signatureRequest.MerchantReceipt) //If you accept the signature api.SignatureResult(true); } Copy Subscribers Needed AddRequiredEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve signature information. "},{"title":"End of transaction​","type":1,"pageTitle":"Events","url":"windows/Windows SDK 3.1.4/windowsevents#6","content":"EndOfTransaction EndOfTransaction event gets called at the end of each transaction and has two parameters, result and device. Parameters​ Parameter\tNotesresult Required TransactionResult\tHolds the results for the transaction device Required Device\tThe device that is invoking the event Code example //Receiving a TransactionResult from the SDK. public void EndOfTransaction(TransactionResult transactionResult, Device device) { //You might want to display this information in the UI postTransactionResultToUI(transactionResult); } Copy Subscribers Needed AddRequiredEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve signature information. "},{"title":"Connection status changed​","type":1,"pageTitle":"Events","url":"windows/Windows SDK 3.1.4/windowsevents#7","content":"ConnectionStatusChanged ConnectionStatusChanged event gets called when the state of a card reader connection changes. Parameters​ Parameter\tNotesstatus Required ConnectionStatus\tAn enum containing the status code for the connection device Required Device\tThe device that is invoking the event Code example //Receiving a new ConnectionStatus from the SDK public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus connectionStatus, Device device) { //You might want to display this information in the UI postNewStatusToUI(connectionStatus); } Copy Subscribers Needed AddStatusNotificationEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve the different connection statuses (e.g : CONNECTED, DISCONNECTED...). "},{"title":"Current transaction status​","type":1,"pageTitle":"Events","url":"windows/Windows SDK 3.1.4/windowsevents#4","content":"CurrentTransactionStatus currentTransactionStatus event gets called when the state of an ongoing transaction changes. Parameters​ Parameter\tNotesstatusInfo Required ConnectionStatus\tAn object containing information about the current transaction device Required Device\tThe device that is invoking the event Code example //Receiving a transaction status from the SDK. public void currentTransactionStatus(StatusInfo statusInfo, Device device) { //You might want to display some of this information in the UI DisplayTransactionStatusInUI(statusInfo) } Copy Subscribers Needed AddStatusNotificationEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve the different states from the card reader (e.g : Waiting for card, Waiting for PIN entry...). "},{"title":"Message logged​","type":1,"pageTitle":"Events","url":"windows/Windows SDK 3.1.4/windowsevents#message-logged","content":"OnMessageLogged OnMessageLogged event gets called for all log messages that are being logged. This is only intended for debugging. Parameters​ Parameter\tNoteslogLevel Required LogLevel\tAn enum containing the log level message Required String\tA String containing the current log message Code example //Receiving a log from the SDK public void OnMessageLogged(LogLevel logLevel, String message) { //You do not want to display this information in the UI Debug.WriteLine(message); } Copy Subscribers Needed AddLogEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve the different log messages. "},{"title":"Logs ready​","type":1,"pageTitle":"Events","url":"windows/Windows SDK 3.1.4/windowsevents#10","content":"DeviceLogsReady DeviceLogsReady event gets called when the card reader logs requested by a call to getDeviceLogs() are ready. This Event is really useful if there has been a communication error between the card reader and the API (e.g : Bluetooth communication lost). After reconnecting, you can then fetch the card reader logs to the API. Parameters​ Parameter\tNoteslogs Required String\tString containing the current log device Required Device\tThe device that is invoking the event Code example //Receiving a log from the device public void **[*DeviceLogsReady*](#10)**(string logs, Device device) { //You might want to save this information WriteLogsToDisk(logs); } Copy Subscribers Needed AddLogEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve the card reader logs. "},{"title":"Pending transaction result​","type":1,"pageTitle":"Events","url":"windows/Windows SDK 3.1.4/windowsevents#pending-transaction-result","content":"PendingTransactionResult In the case of a communication failure between the device and the API a TransactionResult might have not been delivered to the API. This event is invoked when the device has a pending TransactionResult. This event might be invoked when reconnecting to a device after a communication failure during a transaction. This event will not be called if HapiManager.Settings.AutoRecoverTransactionResult is set to true. Parameters​ Parameter\tNotesdevice Required Device\tThe device that is invoking the event Code example @Override public void PendingTransactionResult(Device device){ //Here you might want to call api.GetPendingTransaction(); to receive the TransactionResult } Copy Subscribers Needed AddPendingResultsEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve information about pending results. "},{"title":"Transaction result ready​","type":1,"pageTitle":"Events","url":"windows/Windows SDK 3.1.4/windowsevents#11","content":"TransactionResultReady In the case of a communication failure between the device and the API a TransactionResult might have not been delivered to the API. This event will be invoked after using hapi.GetPendingTransaction();. When there is no pending transaction the TransactionResult will contain default/error fields and no receipts. This event is called if HapiManager.Settings.AutoRecoverTransactionResult is set to true. Parameters​ Parameter\tNotesresult Required TransactionResult\tHolds the results for the transaction device Required Device\tThe device that is invoking the event Code example @Override public void TransactionResultReady(TransactionResult transactionResult, Device device){ //Here you might want to do stuff to the transactionResult } Copy Subscribers Needed AddPendingResultsEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve information about pending results. "},{"title":"Methods","type":0,"sectionRef":"#","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods","content":"","keywords":""},{"title":"Initialize​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#1","content":"Initialize Initializes the JavaScript SDK and returns the list of payment terminals associated with the account. Parameters Parameter\tNotesAPI_key Required string\tThe Actor API key. dev_or_prod_environment Required boolean\tValue that defines if the actor is targeting a development (true -> cloud.handpoint.io) or production (false -> cloud.handpoint.com) environment. recovery_EoT_callback Required promise\tPromise that collects the pending transaction results that couldn't be delivered to the POS during the execution of the transaction, for example if the network connection became unstable. The callback input parameter is a TransactionResult object. When the promise is resolved the JS SDK will send the ACK to the payment terminal to mark the result as recovered and the device will delete it from its storage. If the promise is rejected, the device will resend the TransactionResult until the promise is correctly resolved and the ACK sent to the reader. The sdk has a 5 second window for the promise to be resolved Code example Handpoint.init('API KEY', true, (pendingEoT) => { console.log('Recovered Transaction -> ' + JSON.stringify(pendingEoT); return handleTransactionResultPromise(pendingEoT); }) // For simple or sync operations you may just return a resolved Promise. Handpoint.init('API KEY', true, (pendingEoT) => { console.log('Recovered Transaction -> ' + JSON.stringify(pendingEoT); return Promise.resolve(); }) Copy Returns Parameter\tNotesDevices\tList of Device objects "},{"title":"Connect​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#2","content":"Connect Connect the JavaScript SDK to a payment terminal. Parameters Parameter\tNotesdevice_name Required string\tThe target payment terminal to connect to. The device_name is returned in the Device object of the init call. Code example Handpoint.connect('1234263-TYPE1'); Copy Returns Parameter\tNotesConnection Result\t- 200 code for OK - 403 code for NOK "},{"title":"Disconnect​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#3","content":"Disconnect Connect the JavaScript SDK to a payment terminal. Parameters Parameter\tNotesdevice_name Required string\tThe target payment terminal to disconnect from. The device_name is returned in the Device object of the init call. Code example Handpoint.connect('1234263-TYPE1'); Copy Returns Parameter\tNotesConnection Result\t- Disconnected message for OK - ERROR disconnecting message for NOK "},{"title":"Sale​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#4","content":"Sale A sale initiates a payment operation to the card reader. In its simplest form, you only have to pass the amount and currency as parameters. Parameters Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). currency Required string\tCurrency of the charge saleOptions Required SaleOptions\tAn object to store all the customisation options for a sale. This object can be empty if no options are required. callback_function Required string\tCallback function to subscribe to the transaction status updates. Code example var [*SaleOptions*](#23) = { customerReference: \"MyCustomReference\", tipConfiguration: { baseAmount: \"100\", skipEnabled: true, enterAmountEnabled: true, tipPercentages: [ 1, 2, 3, 5 ] }, bypassOptions: { signatureBypass: true, pinBypass: true }, merchantAuth: [ { acquirer: \"ACQUIRER\", mid: \"11111\", tid: \"22222\", mcc: \"33333\" } ], } Handpoint.sale('1000', 'USD', [*SaleOptions*](#23) , function (stat) { console.log('Transaction Status received -> '+ stat.message) }); Copy Returns Parameter\tNotesSale Response\tA Financial Response object "},{"title":"Sale And Tokenization​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#5","content":"SaleAndTokenization A sale which both authorizes the transaction and returns a token representing the card. This feature is not available for all acquirers. Please check with Handpoint to know if tokenization is supported for your acquirer of choice. Parameters Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). currency Required string\tCurrency of the charge saleOptions Required SaleOptions\tAn object to store all the customisation options for a sale. This object can be empty if no options are required. callback_function Required string\tCallback function to subscribe to the transaction status updates. Code example var [*SaleOptions*](#23) = { customerReference: \"MyCustomReference\", tipConfiguration: { baseAmount: \"100\", skipEnabled: true, enterAmountEnabled: true, tipPercentages: [ 1, 2, 3, 5 ] }, bypassOptions: { signatureBypass: true, pinBypass: true }, merchantAuth: [ { acquirer: \"ACQUIRER\", mid: \"11111\", tid: \"22222\", mcc: \"33333\" } ], } Handpoint.saleAndTokenization('1000', 'USD', [*SaleOptions*](#23) , CallbackFunction(stat){...}); Copy Returns Parameter\tNotesSale and Tokenization Response\tA Financial Response object "},{"title":"Transaction Recovery​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#6","content":"StartRecovery The terminal has a transaction recovery loop to automatically send back the pending Transaction Result to the Point of sale in case it becomes unreachable (network issue or other). For the first 100 seconds after a transaction is completed, a background thread will attempt to deliver the result every 5 seconds. If the point of sale is still unreachable after the first 100 seconds, the retry loop turns into an exponential increment to the power of 2 (8s-16s-32s etc…). The recovery loop is reinitialized every time the Handpoint application is restarted or the startRecovery method is triggered.The Transaction Result received through the transaction recovery loop will have the recoveredTransaction field set to true Important information: The point of sale must be successfully connected to a terminal in order to receive the pending transactions. Code example //Start recovery of pending transactions Handpoint.startRecovery(); Copy Returns Parameter\tNotesPromise Successful Response\tThe event has been sent to the device Promise Error Response\tThe event was not sent to the terminal because it is unreachable "},{"title":"Stop Listening Device​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#7","content":"StopListeningDevice This operation interrupts the connection, stops listening to transaction events and resets the connection with the device Code example //Stop Listening to Events Handpoint.stopListeningDevice(); Copy "},{"title":"Sale Reversal​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#8","content":"SaleReversal A sale Reversal, also called sale VOID allows the user to reverse a previous sale operation. This operation reverts (if possible) a specific sale identified with a transaction id. In its simplest form, you only have to pass the amount, currency and originalTransactionID as parameters Parameters Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). currency Required string\tCurrency of the charge originalTransactionID Required string\tThe transaction id of the original sale authorization merchantAuthOptions Required MerchantAuthOptions\tAn object to store all the customisation options for a saleReversal. This object can be empty if no options are required. callback_function Required string\tCallback function to subscribe to the transaction status updates. Code example var saleReversalOptions = { customerReference: \"MyCustomReference\", merchantAuth: [ { acquirer: \"ACQUIRER\", mid: \"11111\", tid: \"22222\", mcc: \"33333\" } ], } Handpoint.saleReversal('1000', 'USD', 'OriginalSaleGUID', saleReversalOptions, CallbackFunction(stat){...}); Copy Returns Parameter\tNotesSale Reversal Response\tA Financial Response object "},{"title":"Refund​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#9","content":"Refund A refund initiates a refund operation to the payment terminal. This operation moves funds from the merchant account to the cardholder´s credit card. In its simplest form, you only have to pass the amount and currency as parameters. For Interac (Canadian Debit Network), refunds can only be processed until Interac closes the batch of transactions at night. Parameters Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). currency Required string\tCurrency of the charge originalTransactionID Required string\tThe transaction id of the original sale authorization refundOptions Required RefundOptions\tAn object to store all the customisation options for a saleReversal. This object can be empty if no options are required. callback_function Required string\tCallback function to subscribe to the transaction status updates. Code example var refundOptions = { customerReference: \"MyCustomReference\", bypassOptions: { signatureBypass: true, pinBypass: true }, merchantAuth: [ { acquirer: \"ACQUIRER\", mid: \"11111\", tid: \"22222\", mcc: \"33333\" } ], } Handpoint.refund('1000', 'USD', undefined ,refundOptions, CallbackFunction(stat){...}); // Linked Refund Handpoint.refund('1000', 'USD', 'OriginalSaleGUID' ,refundOptions, CallbackFunction(stat){...}); Copy Returns Parameter\tNotesRefund Response\tA Financial Response object "},{"title":"Refund Reversal​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#10","content":"RefundReversal A Refund Reversal, also called Refund VOID, allows the merchant to reverse a previous refund operation. This operation reverts (if possible) a specific refund identified with a transaction id. In its simplest form, you only have to pass the amount, currency and originalTransactionID as parameters. Parameters Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). currency Required string\tCurrency of the charge originalTransactionID Required string\tThe transaction id of the original sale authorization merchantAuthOptions Required MerchantAuthOptions\tAn object to store all the customisation options for a refundReversal. This object can be empty if no options are required. callback_function Required string\tCallback function to subscribe to the transaction status updates. Code example var refundOptions = { customerReference: \"MyCustomReference\", bypassOptions: { signatureBypass: true, pinBypass: true }, merchantAuth: [ { acquirer: \"ACQUIRER\", mid: \"11111\", tid: \"22222\", mcc: \"33333\" } ], } Handpoint.refund('1000', 'USD', undefined ,refundOptions, CallbackFunction(stat){...}); // Linked Refund Handpoint.refund('1000', 'USD', 'OriginalSaleGUID' ,refundOptions, CallbackFunction(stat){...}); Copy Returns Parameter\tNotesRefund Reversal Response\tA Financial Response object "},{"title":"Tokenize Card​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#11","content":"TokenizeCard Returns a token for the card. This feature is not available for all acquirers. Please check with Handpoint to know if tokenization is supported for your acquirer of choice Parameters Parameter\tNotesoptions Required Options\tAn object to store all the customisation options for a tokenizeCard. This object can be empty if no options are required. callback_function Required string\tCallback function to subscribe to the transaction status updates. Code example var options = { customerReference: \"MyCustomReference\", } Handpoint.tokenizeCard(options, CallbackFunction(stat){...}); Copy Returns Parameter\tNotesTokenize Card Response\tA Financial Response object "},{"title":"Card Pan​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#12","content":"CardPan A cardPan request will return the full PAN of the card being swiped, dipped or tapped. Only the PANs of whitelisted card ranges will be returned by the Handpoint systems. This operation is mostly used to be able to process funds or points from loyalty cards. Parameters Parameter\tNotesoptions Required Options\tAn object to store all the customisation options for a tokenizeCard. This object can be empty if no options are required. callback_function Required string\tCallback function to subscribe to the transaction status updates. Code example var options = { customerReference: \"MyCustomReference\", } Handpoint.tokenizeCard(options, CallbackFunction(stat){...}); Copy Returns Parameter\tNotesCard Pan Response\tA Financial Response object "},{"title":"Stop Current Transaction​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#13","content":"StopCurrentTransaction Operation used to stop the current transaction. The transaction can only be stopped at specific stages of a payment processing, for example a transaction can not be stopped when the card is being read but can be stopped when waiting for the cardholder to initially insert a card. Code example Handpoint.stopCurrentTransaction(); Copy Returns Parameter\tNotesPromise Successful Response\t{finStatus: CANCELLED, statusMessage: 'Operation stopped'} Promise Error Response\t{finStatus: FAILED, errorMessage: 'Unable to stop current transaction'} Promise Error Response\t{ finStatus: FAILED, errorMessage: 'No response received from the card reader' } "},{"title":"Print Receipt​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#14","content":"PrintReceipt This method sends the merchant or customer receipt to the terminal for printing. The format of the HTML data, passed to the method or stored in the url, must follow this format: Html Print Format. Code example Handpoint.printReceipt('https://location_of_receipt_container.com/receipt_location', CallbackFunction(stat){...}); var htmlReceipt = '[...] HTML receipt [...]' Handpoint.printReceipt(htmlReceipt, CallbackFunction(stat){...}); Copy Parameters Parameter\tNotesreceipt Required string\tHTML receipt or url to locate the receipt, it can be found in the response of a financial operation, in the fields merchantReceipt or customerReceipt callback_function Required string\tCallback function to subscribe to the transaction status updates. Returns Parameter\tNotesPrint Receipt Response\tA specific Status object that describes the printing action (PrinterOutOfPaper, ErrorConnectingToPrinter or ReceiptPrintSuccess) "},{"title":"Ping Device​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#15","content":"PingDevice This operation will ping the terminal to confirm if it is online. The promise is correctly resolved if the device is online and successfully answers to the ping Code example Handpoint.pingDevice(CallbackFunction(stat){...}); Copy Returns Parameter\tNotesDevice Status\tA Device Status object "},{"title":"Update​","type":1,"pageTitle":"Methods","url":"javascript/JavaScript SDK 6.0.0/javascriptmethods#16","content":"Update Triggers a terminal software and config update Code example Handpoint.update(CallbackFunction(stat){...}); Copy Parameters Parameter\tNotescallback_function Required string\tCallback function to subscribe to the transaction status updates. Returns Parameter\tNotesUpdate Response\tA Financial Response object "},{"title":"SDK integration example","type":0,"sectionRef":"#","url":"ios/iOS SDK 4.0.0/iossdkprocessing","content":"","keywords":""},{"title":"HandpointModule header​","type":1,"pageTitle":"SDK integration example","url":"ios/iOS SDK 4.0.0/iossdkprocessing#handpointmodule-header","content":"HandpointModule.h #import \"HandpointAll.h\" @interface HandpointModule : NSObject <HeftDiscoveryDelegate, HeftStatusReportDelegate> - (instancetype)initWithSharedSecret:(NSString *)sharedSecret; - (void)saleWithAmount:(NSInteger)amount currency:(NSString *)currency; - (void)refundWithAmount:(NSInteger)amount currency:(NSString *)currency; - (void)saleReversalWithAmount:(NSInteger)amount currency:(NSString *)currency originalTransactionID:(NSString *)originalTransactionID; - (void)refundReversalWithAmount:(NSInteger)amount currency:(NSString *)currency originalTransactionID:(NSString *)originalTransactionID; - (void)connectToAddress:(NSString *)address; - (void)setLogLevel:(eLogLevel)logLevel; - (void)getDeviceLogs; - (void)getPendingTransaction; - (void)update; - (void)listDevices; @end Copy "},{"title":"HandpointModule​","type":1,"pageTitle":"SDK integration example","url":"ios/iOS SDK 4.0.0/iossdkprocessing#handpointmodule","content":"HandpointModule.m #import \"<Foundation/Foundation.h>\" #import \"HandpointModule.h\" #import \"HeftRemoteDevice+SendableDevice.h\" #import \"SDKEvent.h\" #import \"ConnectionStatus.h\" #import \"Currency.h\" #import \"CDVInvokedUrlCommand+Arguments.h\" #import \"StatusInfo.h\" #import \"TransactionResult.h\" typedef NS_ENUM(NSInteger, ConnectionStatus) { ConnectionStatusNotConfigured, ConnectionStatusConnected, ConnectionStatusConnecting, ConnectionStatusDisconnected, ConnectionStatusDisconnecting, ConnectionStatusInitializing }; @interface HandpointModule () @property (nonatomic) HeftManager* manager; @property (nonatomic, strong) id<HeftClient> api; @property (nonatomic) NSString *ssk; @property (nonatomic) HeftRemoteDevice* preferredDevice; @property (nonatomic) NSString *eventHandlerCallbackId; @property (nonatomic) NSMutableDictionary *devices; @end @implementation HandpointModule - (instancetype)initWithSharedSecret:(NSString *)sharedSecret { NSLog(@\"\\n\\tpluginInitialize\"); self.manager = [HeftManager sharedManager]; self.manager.delegate = self; self.devices = [@{} mutableCopy]; [self fillDevicesFromConnectedCardReaders]; self.ssk = sharedSecret; } - (void)saleWithAmount:(NSInteger)amount currency:(NSString *)currency { BOOL result = [self.api saleWithAmount:amount currency:currency cardholder:YES]; if (result == false) { //Do something } } - (void)refundWithAmount:(NSInteger)amount currency:(NSString *)currency { BOOL result = [self.api refundWithAmount:amount currency:currency cardholder:YES] if (result == false) { //Do something } } - (void)saleReversalWithAmount:(NSInteger)amount currency:(NSString *)currency originalTransactionID:(NSString *)originalTransactionID { BOOL result = [self.api saleVoidWithAmount:amount currency:currency cardholder:YES transaction:originalTransactionID]; if (result == false) { //Do something } } - (void)refundReversalWithAmount:(NSInteger)amount currency:(NSString *)currency originalTransactionID:(NSString *)originalTransactionID { BOOL result = [self.api refundVoidWithAmount:amount currency:currency cardholder:YES transaction:originalTransactionID]; if (result == false) { //Do something } } #pragma mark - Device Management - (void)connectToAddress:(NSString *)address { HeftRemoteDevice *remoteDevice = self.devices[address]; if (remoteDevice) { BOOL isRemoteDeviceSameAsPreferred = self.preferredDevice && [self.preferredDevice.address isEqualToString:remoteDevice.address]; // If we are already connected to this device, update shared secret if (self.api && isRemoteDeviceSameAsPreferred) { // Already connected to device } else { self.preferredDevice = remoteDevice; [self.manager clientForDevice:remoteDevice sharedSecret:self.ssk delegate:self]; } [self connectionStatusChanged:ConnectionStatusConnecting]; } else { NSLog(@\"Can't connect. No device available. Have you searched?\"); } } - (void)setLogLevel:(eLogLevel)logLevel { [self.api logSetLevel:logLevel]; } - (void)getDeviceLogs { [self.api logGetInfo]; } - (void)getPendingTransaction { BOOL success = NO; if ([self.api isTransactionResultPending]) { success = [self.api retrievePendingTransaction]; } if (success) { //... } else { //... } } - (void)update { [self.api financeInit]; } - (void)listDevices { NSArray* devices = [self.manager connectedCardReaders]; /** * A device can have four levels of connection: unpaired, paired, * connected and connected in the SDK. * * Due to the nature of the iOS ExternalAccessory framework, * devices that are already connected at an iOS level will not appear in a normal search, * as they already appear through the \"connectedCardReaders\" array in the manager * (Yeah, I know) * * So the \"if\" takes care of differentiating those two cases * * If we have device(s) connected we just go for those, otherwise, search. */ if(devices.count) { //We have device(s) already connected, we skip the search. for (HeftRemoteDevice *device in devices) { [self addDevice:device]; } [self didDiscoverFinished]; } else { //We search and wait... [self.manager startDiscovery]; } } # pragma mark - Callbacks - (void)didFindAccessoryDevice:(HeftRemoteDevice*)newDevice { [self addDevice:newDevice]; } - (void)didLostAccessoryDevice:(HeftRemoteDevice *)oldDevice { [self removeDevice:oldDevice]; if(self.preferredDevice && self.preferredDevice.address == oldDevice.address) { [self connectionStatusChanged:ConnectionStatusDisconnected]; self.preferredDevice = nil; } } - (void)didDiscoverFinished { [self fillDevicesFromConnectedCardReaders]; for (NSString *key in [self.devices allKeys]) { HeftRemoteDevice *device = self.devices[key]; if ([device.address isEqualToString:<my_saved_mac_address>]) { //Do something with the device if it's the same one you expect. break; } } } - (void)didConnect:(id <HeftClient>)client { if(client) { self.api = client; [self connectionStatusChanged:ConnectionStatusConnected]; } } - (void)connectionStatusChanged:(ConnectionStatus)status { //Here you get notified of connection status changes } - (NSString *)stringFromConnectionStatus:(ConnectionStatus)status { switch(status) { case ConnectionStatusNotConfigured: return @\"NotConfigured\"; case ConnectionStatusConnected: return @\"Connected\"; case ConnectionStatusConnecting: return @\"Connecting\"; case ConnectionStatusDisconnected: return @\"Disconnected\"; case ConnectionStatusDisconnecting: return @\"Diconnecting\"; case ConnectionStatusInitializing: return @\"Initializing\"; } } - (void)responseStatus:(id <ResponseInfo>)info { //Here you'll get status updates during the transaction } - (void)responseError:(id <ResponseInfo>)info { //Here if something went wrong } - (void)responseFinanceStatus:(id <FinanceResponseInfo>)info { //Here's the result of your transaction } - (void)responseLogInfo:(id <LogInfo>)info { NSLog(@\"\\n\\tresponseLogInfo: %@\", info.status); } - (void)requestSignature:(NSString *)receipt { [self.api acceptSignature:YES]; } - (void)addDevice:(HeftRemoteDevice *)device { self.devices[device.address] = device; } - (void)removeDevice:(HeftRemoteDevice *)device { if (self.devices[device.address]) { [self.devices removeObjectForKey:device.address]; } } - (void)fillDevicesFromConnectedCardReaders { for (HeftRemoteDevice *device in [self.manager connectedCardReaders]) { [self addDevice:device]; } } @end Copy "},{"title":"Device management","type":0,"sectionRef":"#","url":"windows/Windows SDK 3.1.4/windowsdevicemanagement","content":"","keywords":""},{"title":"Connect​","type":1,"pageTitle":"Device management","url":"windows/Windows SDK 3.1.4/windowsdevicemanagement#connect","content":"Connect Configures the device as the preferred device and tries to connect to it. Everytime a new connection is started the SDK will make 3 attempts to reestablish the connection. If those attempts fail, the connection is considered dead. Parameters​ Parameter\tNotesdevice Required Device\tThis parameter specifies to the system which device you want to use for the operations. Code example //Connect to a CLOUD device Device device = new Device(\"CloudDevice\", \"9822032398-PAXA920\", \"\", ConnectionMethod.Cloud); // The address is the composition of the serial number and model ot the target device. //Example for a PAX A920 device: serial_number - model -> 9822032398-PAXA920 api.UseDevice(device); //Connect to a device Device device = new Device(\"CardReader7\", \"08:00:69:02:01:FC\", \"1\", ConnectionMethod.BLUETOOTH); api.UseDevice(device); Copy Events invoked​ ConnectionStatusChanged Each time the card reader state changes (ex : going from Connected to Disconnected) the ConnectionStatusChanged event is called. It causes the connection manager to invoke this event with the appropriate information. Returns Parameter\tNotesBoolean\tTrue if the operation was successful. "},{"title":"Disconnect​","type":1,"pageTitle":"Device management","url":"windows/Windows SDK 3.1.4/windowsdevicemanagement#disconnect","content":"Disconnect Disconnect will stop the active connection (and reconnection process). Please note that the method does NOT ignore the current state of the card reader. This means that if a disconnect is attempted during a transaction it will not be successful and the method will return false. If a transaction is not in progress the disconnect will take 1-3 seconds to successfully finish and will then return true. Parameters​ Parameter\tNotesdevice Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Disconnect from current device api.Disconnect(); Copy Events invoked​ ConnectionStatusChanged Each time the card reader state changes (ex : going from Connected to Disconnected) the ConnectionStatusChanged event is called. It causes the connection manager to invoke this event with the appropriate information. Returns Parameter\tNotesBoolean\tTrue if the operation was succesful "},{"title":"Set shared secret​","type":1,"pageTitle":"Device management","url":"windows/Windows SDK 3.1.4/windowsdevicemanagement#set-shared-secret","content":"SetSharedSecret Validates the app for this session, thus enabling financial transactions Parameters​ Parameter\tNotessharedSecret Required String\tThe shared secret is a key provided by Handpoint when you get your account that enables you to perform live operations with the card reader. However, if you're developing with a starter kit, the test shared secret is specified in the example device Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Sets the shared secret using the test key api.SetSharedSecret(\"0102030405060708091011121314151617181920212223242526272829303132\"); Copy Events invoked​ None No events invoked. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Set parameter​","type":1,"pageTitle":"Device management","url":"windows/Windows SDK 3.1.4/windowsdevicemanagement#set-parameter","content":"SetParameter Changes values of certain parameters on the card reader. Parameters​ Parameter\tNotesparam Required DeviceParameter\tThe name of the parameter to change value Required String\tNew value of the parameter device Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Changes the bluetooth name of card reader api.SetParameter(DeviceParameter.BluetoothName, \"OrangeCardReader\"); Copy Events invoked​ None No events are invoked. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Set logging level​","type":1,"pageTitle":"Device management","url":"windows/Windows SDK 3.1.4/windowsdevicemanagement#set-logging-level","content":"SetLogLevel Sets the log level (info, debug...) for both the card reader and the API. Note : At the end of a transaction, the card reader logs are always automatically fetched to the API. Parameters​ Parameter\tNoteslevel Required LogLevel\tThe desired log level. Can be LogLevel.None, LogLevel.Info, LogLevel.Full, LogLevel.Debug device Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Sets the log level to info api.SetLogLevel(LogLevel.info); Copy Events invoked​ None No events are invoked. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Request device logs​","type":1,"pageTitle":"Device management","url":"windows/Windows SDK 3.1.4/windowsdevicemanagement#request-device-logs","content":"GetDeviceLogs Fetches the logs from the device and reports them to the DeviceLogsReady event. Parameters​ Parameter\tNotesdevice Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Downloads logs from device api.GetDeviceLogs(); Copy Events invoked​ DeviceLogsReady Invoked when hapi has finished downloading logs from the card reader. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Request pending transaction results​","type":1,"pageTitle":"Device management","url":"windows/Windows SDK 3.1.4/windowsdevicemanagement#request-pending-transaction-results","content":"GetPendingTransaction Please note this method is only supported on Card Readers with EFT Software versions 1.7.x and 2.2.x and up In the case of a communication failure between the device and the API a TransactionResult might have not been delivered to the API. This function fetches a pending TransactionResult (which contains receipts) from the device, if any. If no TransactionResult was pending a result will be delivered containing default fields. In order to receive only valid TransactionResults this function should only be called when PendingTransactionResult event is invoked or when HapiManager.IsTransactionResultPending() is true. To receive events when a TransactionResult is pending on the device please add a Events.PendingResults listener. Parameters​ Parameter\tNotesdevice Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Fetches a pending TransactionResult from a device api.GetPendingTransaction(); Copy Events invoked​ TransactionResultReady Invoked when hapi has finished fetching a TransactionResult from the device. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Update device​","type":1,"pageTitle":"Device management","url":"windows/Windows SDK 3.1.4/windowsdevicemanagement#update-device","content":"Update The update operation checks for update to the card reader and initiates an update if needed. The update can either be a software update or a configuration update. Parameters​ Parameter\tNotesdevice Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Check for card reader update api.Update(); List Devices (search) Copy Events invoked​ None Information about this process should be available at the device's screen. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"List Devices (search)​","type":1,"pageTitle":"Device management","url":"windows/Windows SDK 3.1.4/windowsdevicemanagement#list-devices-search","content":"ListDevices Starts the search for devices to connect with the specified ConnectionMethod Parameters​ Parameter\tNotesmethod Required ConnectionMethod\tThe means of connection you intend to use to talk to the device. (Bluetooth, Cloud, Serial, USB, etc...) Code example //Search for Bluetooth devices api.ListDevices(ConnectionMethod.BLUETOOTH); //Search for Cloud devices api.ListDevices(ConnectionMethod.CLOUD); Copy Events invoked​ deviceDiscoveryFinished Invoked after the search is finished returning a list of the devices finished. "},{"title":"Start monitoring connections​","type":1,"pageTitle":"Device management","url":"windows/Windows SDK 3.1.4/windowsdevicemanagement#start-monitoring-connections","content":"StartMonitoringConnections Starts a connection monitoring service. The service listens to events sent by the operating system about the connected hardware. If the service notices that a previously connected device suddenly disconnects on the hardware layer it attempts to reconnect to that particular device. Since this is a service it is necessary that the service is turned off before the application ends its life-time. This means that, if the service was running, stopMonitoringConnections() has to be called before the application is exited completely. Note that the service currently only works with USB. In the case of USB the service will only disconnect from the device and when it notices that it has been plugged in again it will connect to it. Code example //Starts the connection monitoring service //app starts it's life-time api.StartMonitoringConnections(); ... //app ends its life-time api.StopMonitoringConnections Copy Events invoked​ ConnectionStatusChanged Causes the connection manager to invoke this event with the appropriate information. Returns Parameter\tNotesNone\tNo information is returned. "},{"title":"Stop monitoring connections​","type":1,"pageTitle":"Device management","url":"windows/Windows SDK 3.1.4/windowsdevicemanagement#stop-monitoring-connections","content":"StopMonitoringConnections Stops a connection monitoring service. The service listens to events sent by the operating system about the connected hardware. If the service notices that a previously connected device suddenly disconnects on the hardware layer it attempts to reconnect to that particular device. Since this is a service it is necessary that the service is turned off before the application ends its life-time. This means that, if the service was running, stopMonitoringConnections() has to be called before the application is exited completely. Note that the service currently only works with USB. In the case of USB the service will only disconnect from the device and when it notices that it has been plugged in again it will connect to it. Code example //Starts the connection monitoring service //app starts it's life-time api.StartMonitoringConnections(); ... //app ends its life-time api.StopMonitoringConnections Copy Events invoked​ ConnectionStatusChanged Causes the connection manager to invoke this event with the appropriate information. Returns Parameter\tNotesNone\tNo information is returned. "},{"title":"Introduction","type":0,"sectionRef":"#","url":"windows/Windows SDK 3.1.4/windowsintroduction","content":"Introduction Windows SDK version 3.1.4 Get the SDK! The new generation of Handpoint APIs and SDKs are engineered to make your life simpler, happier. Awesomely simple Created for humans, coders, geeks, no need of dark and complex knowledge of the payment industry. Superly secure We take care of the PCI side so you don't have to spend months becoming compliant. The Handpoint card reader encrypts all sensitive cardholder data so your app does not have to deal with it. Working with the SDK The Handpoint Windows SDK is compatible with .NET Framework Version 4.6.1. Download the SDK.Create a new windows form project in Visual Studio 2010 (or above) using .Net Framework Version 4.6.1.Add the HandpointSDK NuGet Package to your project. If you have a DEBUG device (How to identify DEBUG devices) please use the package version -beta (prerelease): Example 3.0.0-betaFollow the getting started guide, to get you up and running or dive into the documentation. If you have any questions, do not hesitate to contact us.","keywords":""},{"title":"API overview","type":0,"sectionRef":"#","url":"android/androidapioverview","content":"API overview Supported functionality List the available payment terminalsConnect/disconnect to and from a payment terminal.Automatically or manually reconnect to a payment terminal.Execute financial transactions.Get the status of transactions.Control and access the device logs. Processing Payments Simulation Your test payments are sent against a test server on the Handpoint side which simulates the behavior of an acquiring bank. Funds are not moved and sensitive data from the card is fully encrypted. You can use trigger amounts to generate some specific responses from our server: Sale amounts Amount\tBehaviour37.79\tIssuer response code = 01 (Refer to issuer) 37.84\tIssuer response code = 05 (Not authorized) 37.93\tIssuer response code = 04 (Pick up card) 37.57\tRequest is partially approved 37.68\tRequest timeout","keywords":""},{"title":"Objects","type":0,"sectionRef":"#","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects","content":"","keywords":""},{"title":"Merchant Auth​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#17","content":"MerchantAuth Object used to store merchant authentication. This object can be empty, it allows a transaction to be funded to a specific merchant account other than the default one. It is useful if a terminal is shared between multiple merchants, for example at an Hair Salon or a Doctor's office. Code example { \"merchantAuth\": [{ \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\", \"externalId\": \"4444\" }] } Copy Properties Property\tDescriptionCredential Credential[]\tArray of credentials "},{"title":"Transaction Result Object​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#18","content":"TransactionResult An object holding information about the result of a transaction. Code example { \"aid\": \"A0000000041010\", \"arc\": \"0000\", \"authorisationCode\": \"123456\", \"balance\": null, \"budgetNumber\": \"\", \"cardEntryType\": \"UNDEFINED\", \"cardLanguagePreference\": \"\", \"cardSchemeName\": \"MasterCard\", \"cardToken\": \"\", \"chipTransactionReport\": \"\", \"currency\": \"USD\", \"customerReceipt\": \"https://s3.[...]/customerReceipt.html\", \"customerReference\": \"\", \"deviceStatus\": { \"applicationName\": \"ClientApp\", \"applicationVersion\": \"20.1.0\", \"batteryCharging\": \"Not Charging\", \"batteryStatus\": \"100\", \"batterymV\": \"4126\", \"bluetoothName\": \"PAXA920\", \"externalPower\": \"USB\", \"serialNumber\": \"0821032398\", \"statusMessage\": \"Approved or completed successfully\" }, \"dueAmount\": 0, \"errorMessage\": \"\", \"expiryDateMMYY\": \"0422\", \"finStatus\": \"AUTHORISED\", \"iad\": \"0210A000002A0000000000000000000000FF\", \"issuerResponseCode\": \"00\", \"maskedCardNumber\": \"************1456\", \"merchantAddress\": \"Plaza Soledad Torres Acosta 1 28013 Madrid\", \"merchantName\": \"Hago la cama\", \"merchantReceipt\": \"https://s3.[...]/merchantReceipt.html\", \"mid\": \"\", \"originalEFTTransactionID\": \"\", \"paymentScenario\": \"CHIPCONTACTLESS\", \"rrn\": \"\", \"signatureUrl\": \"\", \"statusMessage\": \"Approved or completed successfully\", \"tenderType\": \"CREDIT\", \"tid\": \"ACQUIRER_TID\", \"tipAmount\": 0, \"totalAmount\": 100, \"transactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"tsi\": \"0000\", \"tvr\": \"0400008001\", \"type\": \"SALE\", \"unMaskedPan\": \"\", \"verificationMethod\": \"UNDEFINED\", \"efttimestamp\": 1615374961000, \"efttransactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"requestedAmount\": 100, \"tipPercentage\": 0, \"recoveredTransaction\": false, \"cardHolderName\": \"cardholder name\" } Copy Properties Property\tDescriptionaid String Application Identifier of the card (EMV tag 9F06) arc String EMV Authorisation Response Code (EMV tag 8A) authorisationCode String Application Identifier of the card (EMV tag 9F06) balance Balance\tBalance available on the card budgetNumber String Used to split payments over a period of months cardEntryType CardEntryType\tMethod used by the terminal to read the card cardLanguagePreference String Preferred language of the card (EMV tag 5F2D) cardSchemeName CardSchemeName\tThe brand of the card cardToken String Token representing the PAN of the card chipTransactionReport String Full report of the card EMV parameters currency Currency\tThe currency used for the transaction customerReceipt String A URL containing the customer receipt in HTML format customerReference String If a customerReference was provided as an optional parameter in the transaction request it is echoed unaltered in this field deviceStatus DeviceStatus\tStatus of the device dueAmount String In case of a partial approval for the transaction, this field contains the amount which remains to be paid efttimestamp String Time of the transaction efttransactionID String Handpoint unique identifier for a transaction, this id is the one to be used for a transaction to be reversed. errorMessage String Detailed reason for the transaction error expiryDateMMYY String Expiry date of the card used for the operation finStatus FinancialStatus\tThe financial status contains the outcome of the transaction. For example \"AUTHORISED\" or \"DECLINED\" iad String Issuer Application Data (EMV tag 9F10) issuerResponseCode String Response code from the card issuer maskedCardNumber String Masked card number of the card used for the operation merchantAddress String Merchant Address merchantName String Merchant Name merchantReceipt String A URL containing the customer receipt in HTML format mid String Merchant Identifier originalEFTTransactionID String In case the transaction type is a reversal, this field will contain the identifier of the original transaction being reversed paymentScenario PaymentScenario\tIndicates the card entry mode recoveredTransaction String This flag is set to true if the transaction result is sent through the transaction recovery logic explained in the Recovey Section, false otherwise requestedAmount String The requested amount is the transaction amount sent to the terminal rrn String Retrieval Reference Number, unique number assigned by the acquirer signatureUrl String If a digital signature is required, this is the URL containing the image of the captured signature statusMessage String The status of the transaction, for example \"Waiting for pin\" tenderType TenderType\tTransaction tender type (credit / debit) tid String Terminal Identifier tipAmount String Tip amount, if any, in the minor unit of currency (f.ex. 1000 is 10.00 GBP) tipPercentage String If tipping is enabled, this field will return the tip percentage added on top of the base amount totalAmount String The total amount is the amount the card was charged for. It is possible that the total amount is not the same as the requested amount since an additional fee can be added, with the customer's approval, via the tipping functionality transactionID String The transaction id is a terminal internal counter incremented for each transaction tsi String Transaction Status Information (EMV tag 9B) tvr String Transaction Verification Results (EMV tag 95) type TransactionType\tThe type of transaction initiated, for example \"SALE\" unMaskedPan String Unmasked PAN, only received if the card is a non-payment card (loyalty) verificationMethod VerificationMethod\tcardholder verification method, for example \"PIN\" multiLanguageStatusMessages Map map containing the status message in a human readable format for all the supported locales. multiLanguageErrorMessages Map map containing the error message in a human readable format for all the supported locales. cardHolderName String Name of the cardholder "},{"title":"Bypass Options​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#19","content":"BypassOptions Configuration to enable/disable signature or pin bypass. Code example { \"bypassOptions\": { \"signatureBypass\": true, \"pinBypass\": true } } Copy Properties Property\tDescriptionpinBypass Boolean\tBypasses PIN entry when the shopper says they don't know the PIN for the card and the merchant either knows they are the legitimate cardholder or want to give them the benefit of the doubt. PIN Bypass should be set to True if you want to enable pin bypass for a transaction signatureBypass Boolean\tWhether the terminal prompts for a signature, depends on how you configure this. The major card schemes (American Express, Diners, Discover, JCB, Mastercard, Visa, UnionPay) no longer require a signature; they regard it as optional for card-present transactions. This means you can speed up your checkout by skipping the signature prompt. But if your business requires it, you can still let the terminal prompt for a signature. The shopper then provides their signature on the touch screen of the terminal or on the printed transaction receipt. This depends on how you configure this setting. It is your responsibility to verify the signature of the shopper with the signature on the card or another form of identification. Signature Bypass should be set to True if you want to enable signature for this transaction "},{"title":"Device​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#20","content":"Device An object to store the information about the payment terminal you are working with. ALL values are REQUIRED Code example { \"merchant_id_alpha\": \"Test_Merchant\", \"serial_number\": \"614004878\", \"ssk\": \"74817EA5C63437ADE7AA3A5401\", \"terminal_type\": \"PAXA920\", \"device_name\": \"0821032395-PAXA920\" } Copy Properties Property\tDescriptionmerchant_id_alpha Required String\tMerchant unique identifier to which the device is associated serial_number Required String\tDevice serial number ssk Required String\tDevice shared secret key to authorize the operations. terminal_type Required String\tDevice type device_name Required String\tDevice name composed with serial_number - terminal_type "},{"title":"Acquirer​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#21","content":"Acquirer An enum representingbthe supported acquirers for merchant authentication AMEX BORGUN EVO OMNIPAY POSTBRIDGE INTERAC TSYS VANTIV SANDBOX "},{"title":"Transaction Status​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#22","content":"TransactionStatus A class that holds the device status. This is the object that will be recieved in the financial operation callback functions Properties Property\tDescriptiondeviceStatus Device Status\tOPTIONAL - The status of the payment terminal. isCancelAllowed boolean\tDefines is a transaction can be cancelled or not. message String\tHuman readable status message. status status\tAn enum containing information about the status of the transaction. "},{"title":"Sale Options​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#23","content":"SaleOptions An object to store all the customisation options for an operation. This object can be empty if no options are required. Code example { \"customerReference\": \"MyCustomReference\", \"tipConfiguration\": { \"baseAmount\": \"100\", \"skipEnabled\": true, \"enterAmountEnabled\": true, \"tipPercentages\": [ 1, 2, 3, 5 ] }, \"bypassOptions\": { \"signatureBypass\": true, \"pinBypass\": true }, \"merchantAuth\": [ { \"acquirer\": \"ACQUIRER\", \"mid\": \"11111\", \"tid\": \"22222\", \"mcc\": \"33333\" } ], } Copy Properties Property\tDescriptioncustomerReference String\tAn arbitrary string to use as your own identifier for a transaction TipConfiguration TipConfiguration bypassOptions BypassOptions merchantAuth MerchantAuth\t "},{"title":"Refund Options​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#24","content":"RefundOptions An object to store all the customisation options for a refund. This object can be empty if no options are required. Code example { \"customerReference\": \"MyCustomReference\", \"tipConfiguration\": { \"baseAmount\": \"100\", \"skipEnabled\": true, \"enterAmountEnabled\": true, \"tipPercentages\": [ 1, 2, 3, 5 ] }, \"bypassOptions\": { \"signatureBypass\": true, \"pinBypass\": true }, \"merchantAuth\": [ { \"acquirer\": \"ACQUIRER\", \"mid\": \"11111\", \"tid\": \"22222\", \"mcc\": \"33333\" } ], } Copy Properties Property\tDescriptioncustomerReference String\tAn arbitrary string to use as your own identifier for a transaction bypassOptions BypassOptions merchantAuth MerchantAuth\t "},{"title":"Merchant Auth Options​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#25","content":"MerchantAuthOptions An object to store merchant authentication options for regular operations. Code example { \"customerReference\": \"MyCustomReference\", \"merchantAuth\": [ { \"acquirer\": \"ACQUIRER\", \"mid\": \"11111\", \"tid\": \"22222\", \"mcc\": \"33333\" } ], } Copy Properties Property\tDescriptioncustomerReference String merchantAuth MerchantAuth\t "},{"title":"Balance​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#balance","content":"Balance Balance available on the card Properties Property\tDescriptionamount Integer\tThe amount balance currency Currency\tThe balance currency positive Boolean\tMarks if the balance is positive negative Boolean\tMarks if the balance is negative Code example \"balance\": { \"amount\": 1000, \"currency\": \"EUR\", \"negative\": false, \"positive\": true } Copy "},{"title":"Options​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#26","content":"Options An object to store all the customisation options for an operation. This object can be empty if no options are required. Properties Property\tDescriptioncustomerReference String\tAn arbitrary string to use as your own identifier for a transaction Code example { \"customerReference\": \"MyCustomReference\" } Copy Properties Property\tDescriptionamount Integer\tThe amount balance currency Currency\tThe balance currency positive Boolean\tMarks if the balance is positive negative Boolean\tMarks if the balance is negative "},{"title":"Merchant Auth Credential​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#28","content":"Credential An object to store credentials (Acquirer, Mid, Tid, MCC and ExternalId) for merchant authentication. Properties Property\tDescriptionacquirer Acquirer\tIf present, it links this credential to the specified acquirer. Required if more than one credential is provided. mid String\tFor this transaction, overrides the default MID (merchant ID) saved in the terminal configuration. tid String\tFor this transaction, overrides the default TID (terminal ID) saved in the terminal configuration. mcc String\tMerchant Category Code, overrides the default MCC saved in the terminal configuration. ExternalId String\tFor this transaction, the External Id will be used to lookup the credential of the merchant in the Handpoint backend and process the transaction accordingly. The External id replaces the need to pass MID/TID/MCC as credentials Code example { \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\" } { \"externalId\": \"4444\" } Copy "},{"title":"Financial Status​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#33","content":"FinancialStatus An enum representing different statuses of a finalized transaction Possible values UNDEFINED AUTHORISED DECLINED PROCESSED FAILED CANCELLED PARTIAL_APPROVAL "},{"title":"Device Status​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#27","content":"DeviceStatus A class that holds the device status. Properties Property\tDescriptionSerialNumber String The serial number of the device BatteryStatus String The battery status in percentages of a device BatterymV String The battery milli volts of a device BatteryCharging String The battery charging status of a device ExternalPower String The status of an external power of a device ApplicationName String The application name used on a device ApplicationVersion String The application version number used on a device bluetoothName String The bluetooth interface name used on a device statusMessage String Device human readable status message Code example { \"applicationName\": \"TestApp\", \"applicationVersion\": \"20.1.0.1\", \"batteryCharging\": \"Charging\", \"batteryStatus\": \"100\", \"batterymV\": \"4134\", \"bluetoothName\": \"A920\", \"externalPower\": \"USB\", \"serialNumber\": \"0821032397\", \"statusMessage\": \"Card reader time out\" } Copy "},{"title":"Currency​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#31","content":"Currency An enum of most currencies in the world. Contains the ISO name, ISO number and the name of the currency. Additionally contains information about how many decimals the currency uses. Possible values AED AFN ALL AMD ANG AOA ARS AUD AWG AZN BAM BBD BDT BGN BHD BIF BMD BND BOB BOV BRL BSD BTN BWP BYR BZD CAD CDF CHF CLP CNY COP COU CRC CUC CUP CVE CZK DJF DKK DOP DZD EEK EGP ERN ETB EUR FJD FKP GBP GEL GHS GIP GMD GNF GTQ GYD HKD HNL HRK HTG HUF IDR ILS INR IQD IRR ISK JMD JOD JPY KES KGS KHR KMF KPW KRW KWD KYD KZT LAK LBP LKR LRD LSL LTL LVL LYD MAD MDL MKD MMK MNT MOP MUR MVR MWK MXN MXV MYR MZN NAD NGN NIO NOK NPR NZD OMR PAB PEN PGK PHP PKR PLN PYG QAR RON RSD RUB RWF SAR SBD SCR SDG SEK SGD SHP SLL SOS SRD STD SYP SZL THB TJS TMT TND TOP TRY TTD TWD TZS UAH UGX USD UZS VEF VND VUV WST XAF XCD XOF XPF YER ZAR ZMK ZWL "},{"title":"Card Entry Type​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#29","content":"CardEntryType An enum representing different card entry types. Possible values UNDEFINED MSR ICC CNP "},{"title":"Card Scheme Name​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#30","content":"CardSchemeName A string representing different card brands. Possible values MasterCard Visa Maestro American Express Discover JCB Diners UnionPay "},{"title":"Verification Method​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#37","content":"VerificationMethod An enum representing different verification methods used in the transaction. Possible values UNDEFINED SIGNATURE PIN PIN_SIGNATURE FAILED NOT_REQUIRED MOBILE_PASS_CODE "},{"title":"Payment Scenario​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#34","content":"PaymentScenario An enum representing different types of scenario. Possible values UNKNOWN MAGSTRIPE MAGSTRIPECONTACTLESS CHIP CHIPCONTACTLESS CHIPFAILMAGSTRIPE "},{"title":"Status Info​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#status-info","content":"statusInfo A class containing information about the status of the transaction. Properties Property\tDescriptioncancelAllowed bool\tA boolean letting the integrator know if the terminal will accept a stop transaction request. status status\tA Status enum representing the status of the transaction. message String\tA String containing the status message of the transaction. deviceStatus Device Status\tA DeviceStatus object containing information about the payment terminal. "},{"title":"Status​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#38","content":"status An enum containing information about the status of a transaction. Possible values Undefined Success InvalidData ProcessingError CommandNotAllowed NotInitialised ConnectTimeout ConnectError SendingError ReceivingError NoDataAvailable TransactionNotAllowed UnsupportedCurrency NoHostAvailable CardReaderError CardReadingFailed InvalidCard InputTimeout UserCancelled InvalidSignature WaitingForCard CardInserted ApplicationSelection ApplicationConfirmation AmountValidation PinInput ManualCardInput WaitingForCardRemoval TipInput SharedSecretInvalid SharedSecretAuth WaitingSignature WaitingHostConnect WaitingHostSend WaitingHostReceive WaitingHostDisconnect PinInputCompleted PosCancelled RequestInvalid CardCancelled CardBlocked RequestAuthTimeout RequestPaymentTimeout ResponseAuthTimeout ResponsePaymentTimeout IccCardSwiped RemoveCard ScannerIsNotSupported ScannerEvent BatteryTooLow AccountTypeSelection BtIsNotSupported PaymentCodeSelection PartialApproval AmountDueValidation InvalidUrl WaitingCustomerReceipt PrintingMerchantReceipt PrintingCustomerReceipt UpdateStarted UpdateFinished UpdateFailed UpdateProgress WaitingHostPostSend WaitingHostPostReceive Rebooting PrinterOutOfPaper ErrorConnectingToPrinter CardTapped ReceiptPrintSuccess InvalidPinLength OfflinePinAttempt OfflinePinLastAttempt ProcessingSignature CardRemoved TipEntered CardLanguagePreference AutomaticPrintingStarted CancelOperationNotAllowed UpdateSoftwareStarted UpdateSoftwareFinished UpdateSoftwareFailed UpdateSoftwareProgress InstallSoftwareStarted InstallSoftwareFinished InstallSoftwareFailed InstallSoftwareProgress UpdateConfigStarted UpdateConfigFinished UpdateConfigFailed UpdateConfigProgress InitialisationComplete "},{"title":"Tender Type​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#35","content":"TenderType An enum representing different tender types. Possible values NOT_SET CREDIT DEBIT "},{"title":"Tip Configuration​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#39","content":"TipConfiguration Properties Property\tDescriptionbaseAmount BigInteger\tBase amount used to calculate the tip - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). If no base amount is defined, the transaction amount is used as base amount. headerName String\tName of the tipping menu appearing on the terminal. Default: Tip tipPercentages Required List<Integer>\tList of percentages used to calculate the tip amount. REQUIRED enterAmountEnabled Boolean\tFlag used to enable the cardholder to manually enter the tip amount. Default: true skipEnabled Boolean\tFlag used to enable the cardholder to skip the tipping step. Default: true footer String\tFooter note which will appear on the tipping menu. Default: Empty string Code example { baseAmount: '2000', tipPercentages: [5,10,15,20,25], enterAmountEnabled: true, skipEnabled: false, footer: 'Thank you!!! ;)' } Copy "},{"title":"Transaction Type​","type":1,"pageTitle":"Objects","url":"javascript/JavaScript SDK 6.0.0/javascriptobjects#36","content":"TransactionType An enum representing different types of transactions. Possible values UNDEFINED SALE VOID_SALE REFUND VOID_REFUND CANCEL_SALE CANCEL_REFUND TOKENIZE_CARD CARD_PAN "},{"title":"Events subscribers","type":0,"sectionRef":"#","url":"android/androideventsubscribers","content":"","keywords":""},{"title":"Register events delegate​","type":1,"pageTitle":"Events subscribers","url":"android/androideventsubscribers#register-events-delegate","content":"registerEventsDelegate Registers a delegate for the SDK events. Parameters Parameter\tNoteslistener Required Object\tAny Object implementing one or more of the available delegate interfaces. Code example public class ObjectHelper implements Events.Required, Events.Status, Events.Log, Events.PendingResults, Events.TransactionStarted { ... private void setEventsHandler() { // Register this class as listener for events this.api.registerEventsDelegate(this); ... } } Copy Returns Parameter\tNotesBoolean\tTrue if the new delegate was added successfully. "},{"title":"Unregister events delegate​","type":1,"pageTitle":"Events subscribers","url":"android/androideventsubscribers#unregister-events-delegate","content":"unregisterEventsDelegate Unregisters an object from SDK events. Parameters Parameter\tNoteslistener Required Object\tAny Object implementing one or more of the available delegate interfaces. Code example public class ObjectHelper implements Events.Required, Events.Status, Events.Log, Events.PendingResults, Events.TransactionStarted { ... private void unsubscribeEventsDelegate() { // Stop receiving events this.api.unregisterEventsDelegate(this); ... } Copy Returns Parameter\tNotesBoolean\tTrue if the new delegate was removed successfully. "},{"title":"Device management","type":0,"sectionRef":"#","url":"android/androiddevicemanagement","content":"","keywords":""},{"title":"Connect​","type":1,"pageTitle":"Device management","url":"android/androiddevicemanagement#connect","content":"connect Connects to a device. Whenever the connection to the device is lost, the SDK will keep on trying to establish a connection until it’s re-established. No special actions are needed. Parameters Parameter\tNotesdevice Required Device\tThis parameter specifies which device type you want to connect to. Code example //Connect to a device Device device = new Device(\"CardReader7\", \"08:00:69:02:01:FC\", \"1\", ConnectionMethod.BLUETOOTH); Device device = new Device(\"LocalDevice\", \"0821032398-PAXA920\", \"\", ConnectionMethod.ANDROID_PAYMENT); Device device = new Device(\"CloudDevice\", \"0821032398-PAXA920\", \"\", ConnectionMethod.CLOUD); api.connect(device); Copy Events invoked connectionStatusChanged  Each time the card reader state changes (ex : going from Connected to Disconnected) the ConnectionStatusChanged event is called. It causes the connection manager to invoke this event with the appropriate information. Returns Parameter\tNotesBoolean\ttrue if the operation was successfully. "},{"title":"Get Transactions Report​","type":1,"pageTitle":"Device management","url":"android/androiddevicemanagement#get-transactions-report","content":"getTransactionsReport Fetches your transactions report from a device/devices. If you want to print the report, you can call printReceipt with the string returned in ReportResult event as parameter. Parameters Parameter\tNotesreportConfiguration Required ReportConfiguration\tThis parameter specifies the filter to get transactions report. Code example //Get the transactions report for device \"12345\", from 30th April 2021 at 00:00:00, to 30th April 2021 at 23:59:59, in eurs: List terminalSerialNumber = new ArrayList<>(); terminalSerialNumber.add(\"12345\"); ReportConfiguration configuration = new ReportConfiguration(\"EUR\", \"20210430000000\", \"20210430235959\", terminalSerialNumber); api.getTransactionsReport(configuration); Copy Events invoked reportResult The report will be returned to the ReportResult interface which has been registered Returns Parameter\tNotesBoolean\tTrue if the command was processed successfully. False if the sending was not successful. "},{"title":"Disconnect​","type":1,"pageTitle":"Device management","url":"android/androiddevicemanagement#disconnect","content":"disconnect Disconnect will stop the active connection (or reconnection process). Please note that the method ignores the current state of the terminal and just stops the connection. Calling disconnect might result in a commmunication error if triggered during a transaction. Code example //Disconnect from current device api.Disconnect(); Copy Events invoked connectionStatusChanged Causes the connection manager to invoke this event with the appropriate information. Returns Parameter\tNotesBoolean\tTrue if the operation was successful. "},{"title":"Get EMV Report​","type":1,"pageTitle":"Device management","url":"android/androiddevicemanagement#get-emv-report","content":"getEMVConfiguration Fetches the logs from the device and reports them to the deviceLogsReady event. Code example //Downloads logs from device api.getDeviceLogs(); Copy Events invoked reportResult Invoked when hapi has finished downloading the EMV report from the card reader. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Get Paired Devices​","type":1,"pageTitle":"Device management","url":"android/androiddevicemanagement#get-paired-devices","content":"getPairedDevices Returns the payment terminals associated with the specified ConnectionMethod Parameters Parameter\tNotesmethod Required ConnectionMethod The type of connection with the payment terminal (Bluetooth, Cloud, etc.). Code example // Get paired terminals List<Device> devices = api.getPairedDevices(ConnectionMethod.XXX); Copy Returns Parameter\tNotesList<Device>\tThe list of payment terminals. "},{"title":"Get device logs​","type":1,"pageTitle":"Device management","url":"android/androiddevicemanagement#get-device-logs","content":"getDeviceLogs Fetches the logs from the device and reports them to the deviceLogsReady event. Code example //Downloads logs from device api.getDeviceLogs(); Copy Events invoked deviceLogsReady Invoked when hapi has finished downloading logs from the card reader. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Get Device Manufacturer​","type":1,"pageTitle":"Device management","url":"android/androiddevicemanagement#get-device-manufacturer","content":"getDeviceManufacturer Code example Manufacturer manufacturer = api.getDeviceManufacturer(); Copy Returns Parameter\tNotesManufacturer\tThe payment terminal manufacturer. "},{"title":"Flash Reset​","type":1,"pageTitle":"Device management","url":"android/androiddevicemanagement#flash-reset","content":"deleteDeviceConfig Sends a command to the terminal to delete its configuration Code example api.deleteDeviceConfig(); Copy "},{"title":"Print Receipt​","type":1,"pageTitle":"Device management","url":"android/androiddevicemanagement#print-receipt","content":"printReceipt Print on demand functionality allowing the merchant to print any HTML formatted receipt. It is possible to print images or barcodes. A bitmap can also be printed, in order to do so it needs to be rendered as an image and inserted into the html. Parameters Parameter\tNotesreceipt Required String\tThe receipt must match the following HTML Print Format. The Transaction Report (also called End of Day Report) can be printed from the string returned in the ReportResult event. Code example (Prints a receipt with Handpoint logo) //Print a receipt with Handpoint logo (bitmap format) String validReceipt = \"<html><body><img src='data:image/bmp;base64,iVBORw0KGgoAAAANSUhEUgAAAYgAAABWCAYAAADVAAHNAAAACXBIWXMAABYlAAAWJQFJUiTwAAAWgUlEQVR4nO2dh5cVxRKH3z+lZBAURRRFxIQKKIoRBHNCchJBMBEUFAxgRFFRUYwYEBOoBGF3kSAssLAgOfXbb9jB2cvcmaq5YW6o75w67+Db29Mz09O/7urq6v85wzAMwwjhf2lXwDAMwyhNTCAMwzCMUEwgDMMwjFBMIAzDMIxQTCAMwzCMUEwgDMNIlRNHDrqtc29zm2dd7/b88Ko71rgt7SoZzZhAGIZRVI7trW/x7wN/LXO1Ezq7DaPObvrfTq52Yme3b+XilGpnBDGBMAyjaDR8McPVjG3r6hcOb/rXSe+/NS5f4GrGd/AEwrPRrdz2dx5NtZ7GKUwgDMMoCoc2/dYkBJ1OzRQmdnE7Fk/0/nv9e6P+E4cmq2maQRzdszXl2hpgAmFUNTt27HA1NTXuxIkTaVelojl5/Iirm9KthRDUPn6ua/h8uts867r/xGFM66bZxYi0q2s0YwJhVAX79u1zv/76q3vrrbfcxIkT3c033+zOPfdcd9ZZZ3k2dOjQtKtY0RzavNJbXwgKBFY3qaurGd06IBqd3fH9u93JE8fd0YZN7sD6b92RnXVpV79qMYEwKoojR464NWvWuA8++MBNmzbNDR482HXv3v20EERZQ0ND2tWvYE66vSvfd3WTuzUJxTkthaJZIGrGtPFcTxunXuxqxrZzdU0zDGYZdZMvaPq5zfDSwATCqBh+++03d8kll4jEIMwOHDiQ9i1UPMwM9v763imhGJ85o2h1xgzDE45xHb1QWKP4mEAYFQOzhaTi0Lp1a3fy5Mm0b6EqOH6w0e38ZErTjKGdF7EUJgomEKWBCYRRMdTW1rrrr78+kUB06dIl7epXPAjDrk+neTOHmnHtzxSD0W08qx3f0dWMbfOfQIxt704c3Jt29auSVASCiJF8mWbUl9Z1jeLBu/noo4/UrqaLLroo7apXNMcP7HZ1Uy5sud+Bzj+wQH1qkfo8d7BmuWtc8Yarf3eE2zTjGk9UbA0iHYoqEHSqL774omvVqlViV0CmderUyS1ZsiTyugcPHnTDhg3L2zWxnj17eouhRmnS2NjYIkopznr16pV2lSuaow2bvR3SLWcMrdzGaT2a7JKAQHRxjctfT7u6RjNFFYjDhw/nVRykH/dPP/2U92tiw4cPL86DMxIxZswY8bu86qqr0q5uxbNryVRXM67D6QVpopOO7dvptr35QMtZxKSuVbfmwMz3+PHjLawUKLqLadGiRd7HePbZZ+fcQbOw2K9fP7dixYrIa/Lwn3nmGXfxxRfnRRg6dOjgBg0a5LZs2VKkp2Yk4cMPPxS/02uvvTbt6lY8RDBteqa3Jw6Erx7dfer72bPspVPrD77baUJn1/D17JRrW1xeffXVM9pkKUTVpbZIvXv3bjd//nzPRaTtoPEv41ZK8gDp1CdPnpxoJnPjjTd6s5GjR48W4IkY+eaHH34Qv9vrrrsu7epWBSw2N3w5s2nmsOP0f9u/9itXO/G/vRE1Y9q6LbNvTLGWxWfkyJEmEGH88ssvqs6aaBPSI+TKyy+/rBIHomNKZdpnyDCBKA+OH9jjrT2wSQ63086Pp5yR8bWSYcB5/vnnm0BkI+zhZLObbropL9fctGmTSiCeeuqpvFzXKB7ff/+9CUSZcKR+gzuyfX3a1UiFhQsXhrZJE4hmNG6mG264IS/X3LBhg0ognnzyybxc1ygeJhBGqUO03QUXXGACEYUJhFEITCCMUobgGZJEZmuTJhDNmEAYhcAEwihV2BM2adKkyDZpAtFMtQoEjYQ01KyH/Pnnn27jxo1edFexF8N37drlbfojE6oE/m7z5s3u999/d//8809qUV2MwAhYWL9+vdu/f/8Z/38aAsG727Ztm/deJfX/999/U92Vz7XpiOrr671v4o8//nB1dXVu586d3r6lNOrD90DalHyf0cG74R414em8H9oX3wfZfvNRJ9rsXXfdFdsmTSCaqSaBoEMl5vnOO+/0IrLCrkVU1zXXXOONMDjDIJ8fyt69e73onjlz5rj77ruvxd4QggV4LmHw0fIbzlFg/0mwvvyb4IEXXnjB+7tCwQf65ZdfegED1KN9+/an68C+mv79+7t58+Z54gX5Fohjx455nT9ZYwmzfuWVV9yUKVPcAw884LVL0or7EXm8W66fCR3N448/7u3fadeunfe3tP9bbrnFTZ061SuXDqyQosE7evvtt716x+02JwXJiBEjvD0liEi+4XkuXbrU26d0xx13tPgmeKaHDh1KVC7fDEJHvZ944gk3YMCAFu3lsccey/rb5cuXe98eG3Aznwf147mxsKztwHl+06dPF/d3JhDNVINA0NHjb0yyQfCKK65wn332mbrT4OMijBhBeuSRR7wGH3f9cePGtSiDRsq5Cm3atBHVtW3btu7555/3OtN8gajReUrDofm71atX50UgeIZ0FsHOX2q333776XKYGfIOpL9F7Hh3+YK289VXX3nfj7b9Zd4THWgSeAbLli1zs2bNckOGDBFFL8al0fFh4PXpp596g4fbbrvNnXPOObFlM2MPgqDwW+mzYHDFYCuqTtzrvffe66Xm0X773Mtzzz13hjFAKRYmEELLRSA+/vjjnD5K3x566CGxO2ft2rWJdo7TmH0Yafbu3TtRXZlCS11Wcc+ua9eu6uvPnTs3LwLBjCXp++IZwJ49e0JHoxJDsMkllguIJZs8o66D+JHhgDpLDliiI8X1IoUEiv6MSWOvvx6dl4mZAp1mkoEXgzafTz75JFH9uO6bb74ZWi9N+L72msG6FxITCKHlIhCMMrp16+YGDhzoZs6c6Y2iFi9e7LlkcJVo6oFISFxO999/f6LG5wsEPnTpSWzZjJF3UhAXXBvSa+E+YDMjo3RmTHSq+RAI6vHoo48m2nnvCwQZA3J5jrR5fOFaaCfM5uLqjjD4bjkf2uh5550X+TtmlTxrycw2aWcZJxCM0pM+V7+T5V5zSf3Db8mwEIT1jo4dO+b03qMMF2ExMIEQWiGjmBilap4B09Y4fv7550QjIl8g+HhybcR0TJpRpg+zJOnhP7gSFixYELqgms81CGZTffv2Vd2/LxD42HN9lsGZnQTEgWSSceWyxkCQQhi0AYlr8emnn46tDzO6JPctmUFoXHdB8wWC1Du5vh/WDDMHbgRxsK6Ci9g3TZm0SQY9QaMNIsr5mJ1LMIEQWqHDXN955x1xXVgUlnS8LIhqXUR+R0RjZyGOESi+awQHYYpzVWTagw8+qH4WLOJKymaD0bp167KWk+9FatZjNM/TFwhG2Kwh0XYlvvFsRhlSeFeSMhGvKGj3knJw0cTBgrH2/uMEAhit004zgyfizBcIgh94XlyLdZ8vvvjCTZgwwfXo0UNVnmS9RFNesUQgChMIoRVaIOhEyCgqrQ+uJgns1NQcniMZqRJxIi2PWYQmd5bU58/siNDgKAoR5vrGG2+Iy/QFIgjvedWqVV4kjKb9YbxHSaeBu0PiEkNg49yVUhcOHT9/G8fKlSu9QAbpPUsEwidbyopsFufHx62nOaEQd3EcmvqZQDRjAnGK9957T1wfOkhpAyI8VVquRCDo5DQfjvQjZ90jW9qBTJPkxiqEQGjeUZhABMGPLI0Okz5L1l4uvfRSUVljx44V3TPuE0l5pMCXQCRUvtuOj+aQKMlCL65F6foTaxFxgyHNuzaBaMYE4hQ0Lk2dampqROXykUnLlPq6w/LXZzMWzCXE7Sz1jRGoZFZSCIGgU5eWGScQQASM5p3T+UeN+mfMmCEu6/PPPxfdM3s9pGV+/fXXseWx/0ZanlYgpOKISSOB2EMhLTPO1aZ51yYQzeQiEOz4ZDTJ4k3mgk6UXXnllaqXVaxUG5qFZekCcCEEgmtLy8RvHwfuCeloGveMhHIQCGZj2sXvsA14wD4DaeQMo13cjxJY+9A8x7iopnITCI3oEnIbheY9m0A0k4tAsAiqeehJrVgCofHPSnctF0Ig2AgnnXoz7Y+D3a7SOkpHvuUgEPDtt9+q2uLo0aNDyyFsWlrGZZddJqobEAKrqV/cBr9yEwg24EnLHD9+fGRZmudoAtFMLgLRp08f1UNPasUSCE08dpoCAdINbHECwYeQLe1IpiGg0hQE5SIQjLgvv/xycbmEpoaVwW7dQrxnXFqamW3mbvxMyk0gNGfax927tBzMBKKZXASC0YomSiepmUCciXTzE0ISBRuVpPUjzFZKuQgESMNSfctcg9G4/JK0Z014b5iABSk3gaCPkZZpM4gCkI9Fah6mxgr9QSWlGgVCGmuPTZw4UVy/chII8uto2uOKFSsS1wvjyF0NJBPUlB8VRFBuAsEeIGmZJhAFII0oJhJ1aV5WoQWCfD3sAahGgdAkSCN6Sko5CQRuM827J0dVEM0aDvbuu++K6wb33HOPqnw61WyYQMjMBKKZahSIv//+2y1atMhbcGQLfpJcMJUiEJqPmt24UspJIEC6DoOxHyPIww8/rGo7mucI2mAQBjvZMIGQmQlEM9UgEGwCI1wQQcBHq7l2NqsUgdBsbtKkmyg3gZBuEsTIjhpEuzObwYkGbfkmEOFonqEJRDOVKhAknSOvC9PzqBh/Ro4cYELOo2p0McVlDQ0aIYdSyk0gNGnNMzdkaUf4WheTNjswgQfZMIGQmQlEM5UmEIQc0pFFRVexh4BMj/xd8IyHahQIzfuv5BmEJiV25nPQrhFoZxDk/tKUH7Wj2gRCZiYQzVSSQHACWVz6YXZxkwo4jGoUiA4dOojrl+l7j6LcBEKz1yDz/AFtymuyB2vQziCiOt9SEYiohfQgJhApUykCsX//fu9s5qhyOJwl6kD7ahQIDlOS1i8ulUGQchIIjlXVtMfMMFLSzWh+z3naGjhDPZf6BSkVgfjxxx9FZZpApEwlCAQ56eM+Ik49yzwHN5NqFIh+/fqJ6xc85zmOchII0mBLy+Uo2Uy0x9pKDvkJIs3oil144YWRZZWKQESdJx3EBCJlKkEgGJHFlcFBOHFUo0AQ2SWtH26YqBlYkHISCM2xpGFpuhmxa9oOx6hq6Ny5s7hsjoqNolQEghxYEkwgUqbcBYJFZkln+d1338XWqxoFggVTzbsIOyQ+jHISiLvvvltcbub6g0+cezNozNqkaNPQx7XzUhGIb775RlRmWgKBVyJtTCCEFiUQLDhLyog7AQ2qUSA4E1maGRYjE6nk4ykXgWAXNe5HSZmsYWVLp83mN2ndSAsed5qcDx2ptNxevXrFllsqAhG1VyNIWgJBdoW0KQmB0GwQKkWBkCabk4TVaQRiy5YtonstdYEA7SIoR3/GUS4CoTmlLupAGmaymg5Sep7Is88+Ky7z/fffjy2vVASCPUoS8iUQCKemjWebKRaTkhAIFrWkD62cBYLOJY5qFQjpWdS+Metct25dZJnlIhDSs8j79+8fOzpHQKT1k4gsSIMIOIhLMiupVoFg5qcJZZ46darq3guBCYTQogRC2oAkh5prXC1//fWX6F7LQSDoWDSRMhg70KMOD9IIhDSNeL4Fgk5KUhY78deuXRtbHp2QdDbG5ro4WH+QtMnWrVu7NWvWiJ5htQoESAcDGN8X+6rSpCQEonv37nn/kOMgWZ6mM5o2bVrWsoiq4QORlBN3Zq3UF41JozA0AsHHK0UqEPydBM25EEFjcXb69Ole2GIw8kMjEOzF4JS8OPIpEMwApc9wzpw5omcI27dvF+W3oq3FRYQtWLAg7/UrpEBozoYpxBpEXDp69vFo2vatt97qHSWbCcItFeRcSF0g6DA1o2amaNL45SgIOdW8KBpe1OYfaaoDhIRr0xmyyIybJDhK0GT0fO2112LvkwVQzaiFvEh0MHGQSkHqDuP9ZjtHORNmMJr3Evae/B2yGoHACB+NO085XwKB/5/9DJJyBg0aJF5Q9qF9Sb6rKDcG7VLS4Q4dOlRcv5qaGlXI7IABA0TCDcwINH0JCQjj3jcQtqtpf1Giy9nr0sGkbwQU8ByYnZDyhOzPlMG9Hjx4UPRskpKKQNBpEQo3ZswY1Qv1jWMncfmwiHP48GHxdYmWIYeNdkHUN1xhjGjq6urOaFioeZJ7wego/BeNL1z6O3zSjILYhZsJz2XJkiWqoyx9I9sswh0Wh93Q0OCdfqbxpWKk05g7d25oXYMgwpqghWz1B61AYEOGDMmaBgVyEQg6B9oP7U969jhuSekRq5mQ8TUqSSRGmw0L96R9S9J3kIJD8g0SkcOARjMACrZzRD+bCDHQoj+Iu9cw412sXr06tFxceprwY9/45hhAZYu0mzRpUk7t27fhw4fHPvdcKbpAzJw5U62gUcaHFpeZkgbMi05y5kI2QywyOxLt9DFoiA4sXLhQ/Vs+8mDqBEZpuXayGAvBwSk+boRc3x3vi3N7o0ac1L9Hjx6Jr+Gv9SQRCN+yReMkEQjyHmnyTfnGiDHXzVKEVl999dWR16FjZebGrINOjRQUCKWkbUhmDozspYIYZbSJzMgrbYqRbMb6lz9zJmUOrp1cy0QMw9xYCD6h2rmUjXgHk3wWiqIKBFPFfLzMTGMNIwpcUoW4LimWg/CxaA9uwWjkPozcNDuLfWNq66M5wlPSyH3yKbCMpqNobGz0RkhJ2oIvtrkIBB9gGFqBoE1oZ5bsJZC65CTw3SFSEpdWXEfOAAGBj3K3ZoJg56vd4HXwQcySztrDzF9HIcNyvsrMFlRD++/Tp4+6PAYaCLPENZYPij6DYDSBP43QuXwYx1VyqHgUfCC8fMLw8mUstG3evPmMa/HiGInRMOJeNnmFVq1adUYZdCosDkrOScA/yTQ/uGDFdJ51DsrPZpwxzOIu0/dsz5a/CSY0YzREkEAuz61v377eLEnawDmrWRJmyYdDvH7Q/7t8+XLRR8doGL8u6ddHjhzpXnrppax+5CQzCKlg45vHDVOoFAuMONlMx5qB1kXIBj1m/1u3blVfl4hBBk7Z2iLf8MCBA71+Iao9Itr19fUtykZIBw8eHFk2AsX3GNWPTJgw4fQ75/njDci1j6A9RUWecR06e2kUJ7O8JM8/F1JfpK5k8I0iFjSCKVOmuGHDhnn++6VLl4p2QbMuwd/Onj3b67jocHA7cC6zv8hdCtvxCw1iwoiVgQCbyhACZm/kE0L4OWiJGUcmPBti/Vmk52MdNWqUmzFjhjeaJgIMd4U0r5NP0jUIPmzWhBALOiw6QmZI1J9Q3dra2qK4DHzonBicINbUgXpxaBUDHxbr6SAZpND+JEELRnIYwBJVyVoQrmJmaAS9cM447Y12n9auahMIw1BQyPMgDKPUMIEwDAUmEEY1YQJhGApMIIxqwgTCMBSYQBjVhAmEYSgwgTCqCRMIw1CgEQg2mxlGOWMCYRgKNAJBGgfDKGdMIAxDAcedSgWiZ8+eaVfXMHLCBMIwFMyfP1+1A5kNUIZRrphAGIaCefPmqQSCdQhpumrDKDVMIAxDAalSNAKB9e7d2y1atKgq0qIYlYUJhGEo4IAdrUD4RpZewygnTCAMQwGJ7JIKBMeaGkY5YQJhGArIIqsVBg5vYi0iKvWzYZQiJhCGoYB069mEgHMlOHeAQ21Ilb1ixYrQA+cNo1wwgTAMBZwExjkUHFHJATacpcD5w5z3UKxTvgyjWJhAGIZhGKGYQBiGYRihmEAYhmEYoZhAGIZhGKGYQBiGYRihmEAYhmEYoZhAGIZhGKGYQBiGYRih/B/qpc2jfj1wMQAAAABJRU5ErkJggg=='></body></html>\"; boolean success = api.printReceipt(validReceipt); Copy Returns Parameter\tNotesBoolean\tTrue if the receipt was sent to the printer, false otherwise. "},{"title":"Search Devices​","type":1,"pageTitle":"Device management","url":"android/androiddevicemanagement#search-devices","content":"searchDevices Starts the search of payment terminals associated with the specified ConnectionMethod Parameters Parameter\tNotesmethod Required ConnectionMethod\tThe type of connection with the payment terminal (Bluetooth, Cloud, etc.). Code example // Starts the search for payment terminals. // You must implement Events.DeviceDiscoveryFinished and subscribe // to the event delegate in order to receive the result api.searchDevices(ConnectionMethod.XXX); Copy Events invoked deviceDiscoveryFinished Returns a list of payment terminals. "},{"title":"Set Locale​","type":1,"pageTitle":"Device management","url":"android/androiddevicemanagement#set-locale","content":"setLocale Sets the SDK Locale (language). It is used to set the SDK language as well as the associated date and number formatting. Parameters Parameter\tNoteslocale Required SupportedLocales\tThe locale to be set. Supported locales are: SupportedLocales.en_CA, SupportedLocales.en_UK, SupportedLocales.en_US, SupportedLocales.hr_HR, SupportedLocales.is_IS, SupportedLocales.fr_FR, SupportedLocales.pt_PT. Code example // Set canadian english api.setLocale(SupportedLocales.en_CA); Copy "},{"title":"Set log level​","type":1,"pageTitle":"Device management","url":"android/androiddevicemanagement#set-log-level","content":"setLogLevel Sets the log level (info, debug...) for both the payment terminal and the SDK. Parameters Parameter\tNoteslevel * LogLevel\tThe desired log level. Can be LogLevel.None, LogLevel.Info, LogLevel.Full, LogLevel.Debug device Device\tThis parameter specifies to the system which device should be used for the operations. If no device is supplied, the system will attempt to use a default one. Code example //Sets the log level to info api.setLogLevel(LogLevel.info); Copy Events invoked None No events are invoked. Returns Parameter\tNotesBoolean\tTrue iif the operation was successfully sent to device. "},{"title":"Stop current transaction​","type":1,"pageTitle":"Device management","url":"android/androiddevicemanagement#stop-current-transaction","content":"stopCurrentTransaction Stops the current transaction. A transaction can be stopped only if the last currentTransactionStatus event reported has the property isCancelAllowed set to true.NOTE: this operation is Not supported on Datecs devices. Code example // Stops current transaction if (api.stopCurrentTransaction()) { ... } else { ... } Copy Events invoked currentTransactionStatus Invoked after stop transaction. Status UserCancelled will be reported endOfTransaction Transaction will fail with status CANCELLED Returns Parameter\tNotesBoolean\tTrue if the transaction was successfully stopped, false otherwise. "},{"title":"Update device​","type":1,"pageTitle":"Device management","url":"android/androiddevicemanagement#update-device","content":"update The update operation checks for new software or configuration updates and initiates a download if required. Parameters Parameter\tNotesdevice Device\tThis parameter specifies to the system which device should be used for the operations. If no device is supplied, the system will attempt to use a default one. Code example //Check for card reader update api.update(); Copy Events invoked None The merchant should be notified about the update process. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Transactions","type":0,"sectionRef":"#","url":"windows/Windows SDK 3.1.4/windowstransactions","content":"","keywords":""},{"title":"Sale​","type":1,"pageTitle":"Transactions","url":"windows/Windows SDK 3.1.4/windowstransactions#sale","content":"Sale A sale initiates a payment operation to the card reader. In it's simplest form you only have to pass the amount and currency but it also accepts a map with extra parameters. Parameters​ Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge map Required Map\tA map including extra optional transaction parameters. device Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Initiate a sale for 10.00 Pounds api.Sale(new BigInteger(1000),Currency.GBP); Copy Events invoked​ currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the card reader (ex : 'waiting for card' or 'waiting for PIN entry')  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\ttrue if the operation was successfully sent to device "},{"title":"Sale And Tokenize Card​","type":1,"pageTitle":"Transactions","url":"windows/Windows SDK 3.1.4/windowstransactions#sale-and-tokenize-card","content":"SaleAndTokenizeCard A sale that returns the tokenized version of the card used if successful. (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice) Parameters​ Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge map Required Map\tA map including extra optional transaction parameters. Code example //Initiate a sale for 10.00 in Great British Pounds api.SaleAndTokenizeCard(new BigInteger(\"1000\"),Currency.GBP); Copy Events invoked​ currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the card reader (ex : 'waiting for card' or 'waiting for PIN entry').  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the card reader finishes processing the transaction.  Returns Parameter\tNotesBoolean\ttrue if the operation was successfully sent to device "},{"title":"Sale Reversal​","type":1,"pageTitle":"Transactions","url":"windows/Windows SDK 3.1.4/windowstransactions#sale-reversal","content":"SaleReversal A sale Reversal, also called sale VOID allows the user to reverse a previous sale operation. This operation reverts (if possible) a specific sale identified with a transaction id. In it's simplest form you only have to pass the amount, currency and originalTransactionID but it also accepts a map with extra parameters. Note that transactions can only be reversed within the same day as the transaction was made. Parameters​ Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge originalTransactionID Required String\tAs received from the card reader (EFTTransactionID) map Required Map\tA map including extra optional transaction parameters. device Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Initiate a reversal for 10.00 Pounds api.SaleReversal(new BigInteger(1000),Currency.GBP,\"00000000-0000-0000-0000-000000000000\"); Copy Events invoked​ currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the card reader (ex : 'waiting for card' or 'waiting for PIN entry')  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\ttrue if the operation was successfully sent to device "},{"title":"Refund​","type":1,"pageTitle":"Transactions","url":"windows/Windows SDK 3.1.4/windowstransactions#refund","content":"Refund A refund initiates a refund operation to the card reader. This operation moves funds from the merchant account to the cardholder´s credit card. In it's simplest form you only have to pass the amount and currency but it also accepts a map with extra parameters. Parameters​ Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge originalTransactionID Required String\tAs received from the card reader (EFTTransactionID) map Required Map\tA map including extra optional transaction parameters. Code example //Initiate a refund for 10.00 in Great British Pounds api.Refund(new BigInteger(1000),Currency.GBP,\"00000000-0000-0000-0000-000000000000\"); Copy Events invoked​ currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the card reader (ex : 'waiting for card' or 'waiting for PIN entry')  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\ttrue if the operation was successfully sent to device "},{"title":"Refund reversal​","type":1,"pageTitle":"Transactions","url":"windows/Windows SDK 3.1.4/windowstransactions#refund-reversal","content":"RefundReversal A Refund Reversal, also called Refund VOID allows the merchant to reverse a previous refund operation. This operation reverts (if possible) a specific refund identified with a transaction id. In it's simplest form you only have to pass the amount, currency and originalTransactionID but it also accepts a map with extra parameters. Note that transactions can only be reversed within the same day as the transaction was made. Parameters​ Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge originalTransactionID Required String\tAs received from the card reader (EFTTransactionID) map Required Map\tA map including extra optional transaction parameters. device Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Initiate a refund reversal for 10.00 in Great British Pounds api.RefundReversal(new BigInteger(1000),Currency.GBP,\"00000000-0000-0000-0000-000000000000\"); Copy Events invoked​ currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the card reader (ex : 'waiting for card' or 'waiting for PIN entry')  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\ttrue if the operation was successfully sent to device "},{"title":"Print Receipt​","type":1,"pageTitle":"Transactions","url":"windows/Windows SDK 3.1.4/windowstransactions#print-receipt","content":"PrintReceipt Print on demand functionality allowing the merchant to print any HTML formatted receipt. Available for CLOUD connections Parameters​ Parameter\tNotesreceipt Required String\tHTML receipt or url to locate the receipt, it can be found in the response of a financial operation, in the fields merchantReceipt or customerReceipt. The receipt must match the following HTML Print Format Code example // string validReceipt = '...'; bool success = api.PrintReceipt(validReceipt); Copy Returns Parameter\tNotesBoolean\ttrue if the receipt was sent to the printer, false otherwise "},{"title":"Signature result​","type":1,"pageTitle":"Transactions","url":"windows/Windows SDK 3.1.4/windowstransactions#signature-result","content":"SignatureResult A signatureRequired event is invoked during transaction when signature verification is needed (f.ex when payment is done with a magstripe card). The merchant is required to ask the cardholder for signature and approve (or disapprove) the signature. signatureResult tells the card reader if the signature was approved by passing true in the method. To disapprove then false is passed. Integrations with PAX or Telpo devices DO NOT need the implementation of this event. Parameters​ Parameter\tNotesaccepted Required Boolean\tpass true if merchant accepts customer signature device Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Receiving a SignatureRequest from the SDK. public void SignatureRequired(SignatureRequest signatureRequest, Device device) { //If you accept the signature api.SignatureResult(true); } Copy Events invoked​ currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the card reader (ex : 'waiting for card' or 'waiting for PIN entry')  endOfTransaction Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\ttrue if the operation was successfully sent to device "},{"title":"Tip Adjustment​","type":1,"pageTitle":"Transactions","url":"windows/Windows SDK 3.1.4/windowstransactions#tip-adjustment","content":"TipAdjustment A tip adjustment operation allows merchants to adjust the tip amount of a sale transaction before the batch of transactions is settled by the processor at the end of the day. Note: This functionality is only available for the restaurant industry in the United States and the processors currently supporting this functionality are TSYS and VANTIV. Parameters​ Parameter\tNotestipAmount Required BigInteger\tTip amount added to the original (base) transaction amount - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) originalTransactionID Required String\tUnique id of the original sale transaction as received from the card reader (EFTTransactionID) Code example //Initiate a tip adjustment for $10.00 Task<FinancialStatus> result = hapi.TipAdjustment(BigInteger.Parse(\"1000\"), \"2bc23910-c3b3-11e6-9e62-07b2a5f091ec\"); FinancialStatus status = result.Result; if (status != FinancialStatus.FAILED) { if (status == FinancialStatus.AUTHORISED) { //Success! } else { //Declined } } Copy Returns Result of the tip adjustment transaction, this is an asynchronous method that returns a task called <FinancialStatus>, the possible values are : Parameter\tNotesFinancialStatus\t- FinancialStatus.AUTHORISED (tip adjustment approved by the processor) - FinancialStatus.FAILED (system error or timeout) - FinancialStatus.DECLINED (tip adjustment declined by the processor) If two tip adjustments are sent for the same sale transaction, the second tip adjustment will override the first one. In case the transaction fails (not declined) we recommend that you prompt the user of the POS to retry the adjustment. "},{"title":"Tokenize Card​","type":1,"pageTitle":"Transactions","url":"windows/Windows SDK 3.1.4/windowstransactions#tokenize-card","content":"TokenizeCard Returns the tokenized version of the card used if successful (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice). Parameters​ Parameter\tNotesmap Required Map\tA map including extra optional transaction parameters Code example //Initiates a card tokenization operation. api.TokenizeCard(); Copy Events invoked​ currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the card reader (ex : 'waiting for card' or 'waiting for PIN entry').  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the card reader finishes processing the transaction.  Returns Parameter\tNotesBoolean\ttrue if the operation was successfully sent to device "},{"title":"Objects","type":0,"sectionRef":"#","url":"windows/Windows SDK 3.1.4/windowobjects","content":"","keywords":""},{"title":"Transaction Result Object​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#14","content":"TransactionResult An object holding information about the result of a transaction. Properties Parameter\tNotesaid String\tApplication Identifier of the card (EMV tag 9F06) arc String\tEMV Authorisation Response Code (EMV tag 8A) authorisationCode String\tAcquirer response code balance BigInteger\tBalance available on the card budgetNumber String\tUsed to split payments over a period of months cardEntryType CardEntryType\tMethod used by the terminal to read the card cardLanguagePreference String\tPreferred language of the card (EMV tag 5F2D) cardSchemeName CardSchemeName\tThe brand of the card cardToken String\tToken representing the PAN of the card chipTransactionReport String\tFull report of the card EMV parameters currency Currency\tThe currency used for the transaction customerReceipt String\tA URL containing the customer receipt in HTML format customerReference String\tIf a customerReference was provided as an optional parameter in the transaction request it is echoed unaltered in this field deviceStatus DeviceStatus\tStatus of the device dueAmount String\tIn case of a partial approval for the transaction, this field contains the amount which remains to be paid efttimestamp Date\tTime of the transaction efttransactionID String\tHandpoint unique identifier for a transaction, this id is the one to be used for a transaction to be reversed. errorMessage String\tDetailed reason for the transaction error expiryDateMMYY String\tExpiry date of the card used for the operation finStatus FinancialStatus\tThe financial status contains the outcome of the transaction. For example \"AUTHORISED\" or \"DECLINED\" iad String\tIssuer Application Data (EMV tag 9F10) issuerResponseCode String\tResponse code from the card issuer maskedCardNumber String\tMasked card number of the card used for the operation merchantAddress String\tMerchant Address merchantName String\tMerchant Name merchantName String\tA URL containing the customer receipt in HTML format mid String\tMerchant Identifier originalEFTTransactionID String\tIn case the transaction type is a reversal, this field will contain the identifier of the original transaction being reversed paymentScenario PaymentScenario\tIndicates the card entry mode recoveredTransaction boolean\tThis flag is set to true if the transaction result is sent through the transaction recovery logic explained in the Recovey Section, false otherwise requestedAmount BigInteger\tThe requested amount is the transaction amount sent to the terminal rrn String\tRetrieval Reference Number, unique number assigned by the acquirer signatureUrl String\tIf a digital signature is required, this is the URL containing the image of the captured signature statusMessage String\tThe status of the transaction, for example \"Waiting for pin\" tenderType TenderType\tTransaction tender type (credit / debit) tid String\tTerminal Identifier tipAmount BigInteger\tTip amount, if any, in the minor unit of currency (f.ex. 1000 is 10.00 GBP) tipPercentage double\tIf tipping is enabled, this field will return the tip percentage added on top of the base amount totalAmount BigInteger\tThe total amount is the amount the card was charged for. It is possible that the total amount is not the same as the requested amount since an additional fee can be added, with the customer's approval, via the tipping functionality transactionID String\tThe transaction id is a terminal internal counter incremented for each transaction tsi String\tTransaction Status Information (EMV tag 9B) tvr String\tTransaction Verification Results (EMV tag 95) type TransactionType\tThe type of transaction initiated, for example \"SALE\" unMaskedPan String\tUnmasked PAN, only received if the card is a non-payment card (loyalty) verificationMethod VerificationMethod\tcardholder verification method, for example \"PIN\" Code example { \"aid\": \"A0000000041010\", \"arc\": \"0000\", \"authorisationCode\": \"123456\", \"balance\": null, \"budgetNumber\": \"\", \"cardEntryType\": \"UNDEFINED\", \"cardLanguagePreference\": \"\", \"cardSchemeName\": \"MasterCard\", \"cardToken\": \"\", \"chipTransactionReport\": \"\", \"currency\": \"USD\", \"customerReceipt\": \"https://s3.[...]/customerReceipt.html\", \"customerReference\": \"\", \"deviceStatus\": { \"applicationName\": \"ClientApp\", \"applicationVersion\": \"20.1.0\", \"batteryCharging\": \"Not Charging\", \"batteryStatus\": \"100\", \"batterymV\": \"4126\", \"bluetoothName\": \"PAXA920\", \"externalPower\": \"USB\", \"serialNumber\": \"0821032398\", \"statusMessage\": \"Approved or completed successfully\" }, \"dueAmount\": 0, \"errorMessage\": \"\", \"expiryDateMMYY\": \"0422\", \"finStatus\": \"AUTHORISED\", \"iad\": \"0210A000002A0000000000000000000000FF\", \"issuerResponseCode\": \"00\", \"maskedCardNumber\": \"************1456\", \"merchantAddress\": \"Plaza Soledad Torres Acosta 1 28013 Madrid\", \"merchantName\": \"Hago la cama\", \"merchantReceipt\": \"https://s3.[...]/merchantReceipt.html\", \"mid\": \"\", \"originalEFTTransactionID\": \"\", \"paymentScenario\": \"CHIPCONTACTLESS\", \"rrn\": \"\", \"signatureUrl\": \"\", \"statusMessage\": \"Approved or completed successfully\", \"tenderType\": \"CREDIT\", \"tid\": \"ACQUIRER_TID\", \"tipAmount\": 0, \"totalAmount\": 100, \"transactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"tsi\": \"0000\", \"tvr\": \"0400008001\", \"type\": \"SALE\", \"unMaskedPan\": \"\", \"verificationMethod\": \"UNDEFINED\", \"efttimestamp\": 1615374961000, \"efttransactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"requestedAmount\": 100, \"tipPercentage\": 0, \"recoveredTransaction\": false } Copy "},{"title":"Handpoint Credentials​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#30","content":"HandpointCredentials A class containing information related to the Actor credentials: Shared secret (always required) and Cloud API Key (ony required when using CLOUD connection method). Properties Parameter\tNotesSharedSecret String\tString the value of the Shared secret CloudApiKey String\tString the value of the merchant Cloud Api Key, just required when using CLOUD connection method Code example { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; new HandpointCredentials(sharedSecret); //We've even set a default shared secret! } { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; string apikey = \"This-Is-The-Merchant-Api-Key\"; new HandpointCredentials(sharedSecret, apikey); //We've even set a default shared secret and the merchant Api Key! } Copy "},{"title":"Handpoint API (Hapi) factory​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#handpoint-api-hapi-factory","content":"HapiFactory A factory to provide a unified entrypoint and to simplify the way to instantiate the Hapi object. Methods Static factorygetAsyncInterface( Events.Required requiredListener , HandpointCredentials handpointCredentials ); Parameter\tNotesrequiredListener Required Events.Required\tA listener object to report the required events. handpointCredentials Required HandpointCredentials\tObject containing the actor's Ssk or Ssk and Api Key for CLOUD connections. Code example //InitApi for Datecs devices public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); //The api is now initialized. Yay! we've even set a default shared secret } //InitApi for Cloud devices public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; string apikey = \"This-Is-The-Merchant-Api-Key\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret, apikey)); //The api is now initialized. Yay! we've even set a default shared secret and the merchant Api Key! } Copy "},{"title":"Transaction Type​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#28","content":"TransactionType An enum representing different types of transactions. Possible valuesUNDEFINED SALE VOID_SALE REFUND VOID_REFUND CANCEL_SALE CANCEL_REFUND TOKENIZE_CARD SALE_AND_TOKENIZE_CARD REVERSAL UPDATE HOST_INIT PRINT_RECEIPT CARD_PAN "},{"title":"Connection Method​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#12","content":"ConnectionMethod An enum representing different types of connection methods. BLUETOOTH, CLOUD and SIMULATOR are supported for Windows. Possible valuesUSB SERIAL BLUETOOTH CLOUD HTTPS WIFI ETHERNET SIMULATOR Code example //Currently CLOUD, BLUETOOTH, and SIMULATOR are the only ConnectionMethod available. public enum ConnectionMethod { USB, SERIAL, HTTPS, WIFI, ETHERNET, BLUETOOTH, CLOUD, SIMULATOR } Copy "},{"title":"Device​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#2","content":"Device An object to store the information about the device we're working with. Methods ConstructorDevice( String name , String address , String port , ConnectionMethod connectionMethod , String sharedSecret , int timeout ); Parameter\tNotesname Required String\tA name to identify the device address Required String\tThe address of the device you wish to connect to. E.g.: \"08:00:69:02:01:FC\" for bluetooth or \"9822032398-PAXA920\" for CLOUD (composition of serial number and model of the target device) . port Required String\tThe port to connect to. connectionMethod Required ConnectionMethod\tEnumerated type to specify the type of connection with the device. E.g: Bluetooth, Cloud, Serial, etc... sharedSecret String\tThis is used if you want this specific device to use the specified sharedSecret instead of the default one proviced in the initialization. timeout int\tThe amount of miliseconds to consider the connection has timed out. If not set, the default timeout is 15 seconds. Code example //Create and init a new Datecs Device Device dev = new Device(\"CardReader7\", \"08:00:69:02:01:FC\", \"1\", ConnectionMethod.BLUETOOTH); //Create and init a new PAX/Telpo Device Device dev = new Device(\"CloudDevice\", \"9822032398-PAXA920\", \"\", ConnectionMethod.CLOUD); // The address is the composition of the serial number and model ot the target device. //Example for a PAX A920 device: serial_number - model -> 9822032398-PAXA920 Copy Properties Property\tDescriptionId String\tAn unique identifier of the device. "},{"title":"Connection Status​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#18","content":"ConnectionStatus A list of statuses given to a connection Possible values Connected Connecting Disconnected Disconnecting Initializing NotConfigured "},{"title":"Currency​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#1","content":"Currency An enum of most currencies in the world. Contains the ISO name, ISO number and the name of the currency. Additionally contains information about how many decimals the currency uses. Possible values AED AFN ALL AMD ANG AOA ARS AUD AWG AZN BAM BBD BDT BGN BHD BIF BMD BND BOB BOV BRL BSD BTN BWP BYR BZD CAD CDF CHF CLP CNY COP COU CRC CUC CUP CVE CZK DJF DKK DOP DZD EEK EGP ERN ETB EUR FJD FKP GBP GEL GHS GIP GMD GNF GTQ GYD HKD HNL HRK HTG HUF IDR ILS INR IQD IRR ISK JMD JOD JPY KES KGS KHR KMF KPW KRW KWD KYD KZT LAK LBP LKR LRD LSL LTL LVL LYD MAD MDL MKD MMK MNT MOP MUR MVR MWK MXN MXV MYR MZN NAD NGN NIO NOK NPR NZD OMR PAB PEN PGK PHP PKR PLN PYG QAR RON RSD RUB RWF SAR SBD SCR SDG SEK SGD SHP SLL SOS SRD STD SYP SZL THB TJS TMT TND TOP TRY TTD TWD TZS UAH UGX USD UZS VEF VND VUV WST XAF XCD XOF XPF YER ZAR ZMK ZWL "},{"title":"Signature Request​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#17","content":"SignatureRequest A class containing information about a signature request/signature verification. Properties Property\tDescriptionTimeout String\tint the value of the timeout in seconds. MerchantReceipt String\tString the merchant receipt as html. "},{"title":"Card Scheme Name​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#23","content":"CardSchemeName A string representing different card brands. Possible values MasterCard Visa Maestro American Express Discover JCB Diners UnionPay "},{"title":"Device Parameter​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#8","content":"DeviceParameter An enum describing all the available commands to send to a device. When used a legal value is expected with the command Possible values BluetoothName BluetoothPass SystemTimeout ScreenTimeout SignatureTimeoutLanguage "},{"title":"Device Status​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#24","content":"DeviceStatus A class that holds the device status. Properties Property\tDescriptionSerialNumber String\tGets the serial number of the device BatteryStatus String\tString Gets the battery status in percentages of a device. BatterymV String\tString Gets the battery milli volts of a device. BatteryChargingt String\tString Gets the battery charging status of a device. ExternalPower String\tString Gets the status of an external power of a device. ApplicationName String\tString Gets the application name used on a device. ApplicationVersion String\tString Gets the applicadevicetion version number used on a device. "},{"title":"Terminal Type​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#terminal-type","content":"TerminalType An enum describing all the supported terminal types. Possible values BluetoothName BluetoothPass SystemTimeout ScreenTimeout SignatureTimeoutLanguage "},{"title":"Financial Status​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#25","content":"FinancialStatus An enum representing different statuses of a finalized transaction Possible values UNDEFINED AUTHORISED DECLINED PROCESSED FAILED CANCELLED "},{"title":"Optional Transaction Parameters​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#3","content":"OptionalParameters A class containing optional transaction parameters now supported by the device. Properties Property\tDescriptionBudget String\tBudget is only available for sale transactions. A String representing the key for a budget number.A budget number can be used to split up an amout over a period of months. The value has to be a String of 2 digits representing the number of months to split the transaction to. Example: \"03\" or \"24\". CustomerReference String\tString CustomerReference is available for all transactions. A String representing the key for a customer reference.A customer reference can be used for an internal marking system. The value is sent as a String of a maximum 25 characters and received back when the transaction has been processed. Example: \"C.nr. 212311\". "},{"title":"Log Level​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#9","content":"LogLevel An enum describing the different levels of logging used in the hapi and used in the device. Possible values None Info Full Debug "},{"title":"Status Info​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#status-info","content":"statusInfo A class containing information about the status of the transaction. Properties Property\tDescriptionCancelAllowed bool\tA bool representing if the card reader will accept a cancel request status Status\tA Status enum representing the status of the transaction. message String\tA String containing the status message of the transaction. DeviceStatus DeviceStatus\tA DeviceStatus object containing information about the device. "},{"title":"Verification Method​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#29","content":"VerificationMethod An enum representing different verification methods used in the transaction.  Possible values  UNDEFINED SIGNATURE PIN PIN_SIGNATURE FAILED NOT_REQUIREDMOBILE_PASS_CODE "},{"title":"Payment Scenario​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#26","content":"PaymentScenario An enum representing different types of scenario.  Possible values  UNKNOWN MAGSTRIPE MAGSTRIPECONTACTLESS CHIP CHIPCONTACTLESS CHIPFAILMAGSTRIPE "},{"title":"Status​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#status","content":"status An enum containing information about the status of the transaction.  Possible values  Undefined Success InvalidData ProcessingError CommandNotAllowed NotInitialised ConnectTimeout ConnectError SendingError ReceivingError NoDataAvailable TransactionNotAllowed UnsupportedCurrency NoHostAvailable CardReaderError CardReadingFailed InvalidCard InputTimeout UserCancelled InvalidSignature WaitingForCard CardInserted ApplicationSelection ApplicationConfirmation AmountValidation PinInput ManualCardInput WaitingForCardRemoval TipInput SharedSecretInvalid SharedSecretAuth WaitingSignature WaitingHostConnect WaitingHostSend WaitingHostReceive WaitingHostDisconnect PinInputCompleted PosCancelled RequestInvalid CardCancelled CardBlocked RequestAuthTimeout RequestPaymentTimeout ResponseAuthTimeout ResponsePaymentTimeout IccCardSwiped RemoveCard ScannerIsNotSupported ScannerEvent BatteryTooLow AccountTypeSelection BtIsNotSupported PaymentCodeSelection PartialApproval AmountDueValidation InvalidUrl WaitingCustomerReceipt PrintingMerchantReceipt PrintingCustomerReceipt UpdateStarted UpdateFinished UpdateFailed UpdateProgress WaitingHostPostSend WaitingHostPostReceive Rebooting PrinterOutOfPaper ErrorConnectingToPrinter CardTapped ReceiptPrintSuccess InvalidPinLength OfflinePinAttempt OfflinePinLastAttempt ProcessingSignature CardRemoved TipEntered CardLanguagePreference AutomaticPrintingStarted CancelOperationNotAllowed UpdateSoftwareStarted UpdateSoftwareFinished UpdateSoftwareFailed UpdateSoftwareProgress InstallSoftwareStarted InstallSoftwareFinished InstallSoftwareFailed InstallSoftwareProgress UpdateConfigStarted UpdateConfigFinished UpdateConfigFailed UpdateConfigProgress `InitialisationComplete "},{"title":"Tender Type​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#27","content":"TenderType An enum representing different tender types.  Possible values NOT_SET CREDIT DEBIT "},{"title":"Card Entry Type​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#card-entry-type","content":"CardEntryType An enum representing different card entry types.  Possible values  UNDEFINED MSR ICC CNP "},{"title":"Card Entry Type​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#22","content":"CardEntryType An enum representing different card entry types.  Possible values  UNDEFINED MSR ICC CNP "},{"title":"Hapi Manager​","type":1,"pageTitle":"Objects","url":"windows/Windows SDK 3.1.4/windowobjects#hapi-manager","content":"HapiManager A static class containing information about the current status of the SDK  Properties  Property\tDescriptionDefaultSharedSecret String\tGets the default shared secret is use in the SDK. LogLevel LogLevel\tGets the current log level of the SDK and card reader. inTransaction bool\tChecks whether the SDK is in transaction or not. True if the SDK is in transaction, false otherwise. This might return a true if there is a communication error between the SDK and card reader but the transaction has been completed on the card reader. SdkVersion String\tGets the current Sdk version. IsTransactionResultPending boolean\tIn the case of a communication failure between the device and the API a Transaction Result might have not been delivered to the API. This function checks if there is a pending Transaction Result. This field is only updated when connecting to a device. If this function returns true the Transaction Result (which includes the receipt) can be fetched with hapi.GetPendingTransactionResult();. This function serves the same functionality as the event PendingTransactionResult(Device device), so every time that event is invoked, HapiManager.IsTransactionResultPending() is true until the result is fetched. Settings.AutoRecoverTransactionResult boolean\tIn the case of a communication failure between the device and the API a Transaction Result might have not been delivered to the API. This property can be set to true or false. If set to true, the SDK will automatically fetch the pending Transaction Result when detected and return it via TransactionResultReady. The function PendingTransactionResult is never invoked if this property is set to true. If set to false PendingTransactionResult will be called when a TransactionResult is pending. Code example //Check if the SDK is in transaction bool inTransaction = HapiManager.InTransaction(SomeConnectedDevice); //Check the current logLevel LogLevel level = HapiManager.GetLogLevel(); Copy "},{"title":"Introduction","type":0,"sectionRef":"#","url":"android/androidintroduction","content":"Introduction Android SDK version 6.5.0 Get the Android SDK! tip If you are currently using 5.x of the Android SDK, take a look at the migration guide to 6.x The new generation of Handpoint APIs and SDKs are engineered to make your life simpler and happier. Awesomely simple Created for humans, coders, geeks, no need of a dark and complex knowledge of the payment industry. Super secure We take care of PCI compliance so you can be kept out of scope The Handpoint terminals encrypt all sensitive cardholder data so your app does not have to deal with it. Available through Maven Central The Handpoint Android SDK is compatible with Android version 5.1.1 (API level 22) and up. The latest version is compiled with java 1.8 Maven: <dependency> <groupId>com.handpoint.api</groupId> <artifactId>sdk</artifactId> <version>[6.0.0,7.0.0)</version> <type>aar</type> </dependency> Copy Gradle: implementation 'com.handpoint.api:sdk:6.+' Copy If you have any questions, do not hesitate to Contact Us.","keywords":""},{"title":"Migration from 5.X","type":0,"sectionRef":"#","url":"android/androidmigrationguide","content":"Migration from 5.X Version 6.0.0 introduces a well defined, typed, way of passing extra values, options, parameters or flags to the financial transactions. We have unified all the extra and optional parameters in an Options object. Different operations have different options. 1. For a Sale or Sale and Tokenize operation, please see SaleOptions If you use a customer reference: options.setCustomerReference(\"Your customer reference\"); Copy If you need Multi MID / Custom merchant Authentication: MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(YOUR_ACQUIRER); //Optionally credential.setMerchantId(mid); //Optionally credential.setTerminalId(tid); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); options.setMerchantAuth(auth); Copy If you need to enable pin bypass: options.setPinBypass(true); Copy If you want to specify the budget period Only available for SureSwipe: options.setBudgetNumber(YOUR_BUDGET_NUMBER); Copy If you want to specify tip options Only available for PAX and Telpo terminals: TipConfiguration config = new TipConfiguration(); //Optionally config.setHeaderName(HEADER); //Optionally config.setFooter(FOOTER); //Optionally config.setEnterAmountEnabled(true); //Optionally config.setSkipEnabled(true); //Optionally config.setTipPercentages(percentages); options.setTipConfiguration(config); Copy Alternatively, you can set the tip amount directly: options.setTipConfiguration(new TipConfiguration(AMOUNT)); Copy Finally: api.sale(amount, currency, options); Copy 2. Similar to SaleOptions, but with less possible parameters, for a Refund operation, please see RefundOptions If you use a customer reference: options.setCustomerReference(\"Your customer reference\"); Copy If you need Multi MID / Custom merchant Authentication: MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(YOUR_ACQUIRER); //Optionally credential.setMerchantId(mid); //Optionally credential.setTerminalId(tid); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); options.setMerchantAuth(auth); Copy If you need to enable pin bypass: options.setPinBypass(true); Copy Finally: api.refund(amount, currency, options); Copy 3. For the rest of operations, please see Options If you use a customer reference: options.setCustomerReference(\"Your customer reference\"); Copy","keywords":""},{"title":"Events listeners","type":0,"sectionRef":"#","url":"android/androideventlisteners","content":"","keywords":""},{"title":"All​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#all","content":"Events.All An interface which needs to be implemented and added as a listener to receive all available events. Extends Required Log Status PendingResults ReportResult PrinterEvents TransactionStarted MessageHandling PhysicalKeyboardEvent "},{"title":"Basic​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#basic","content":"Events.Basic An interface which needs to be implemented and added as a listener to receive basic events. Extends Required Log Status PendingResults ReportResult "},{"title":"Card Brand Display​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#card-brand-display","content":"Events.CardBrandDisplay An interface which needs to be implemented and added as a listener to get events providing information on the supported card brands and/or the card brand used during the transaction. Methods deviceCapabilities( List supportedCardBrands ); Parameter\tNotessupportedCardBrands Required List\tA list containing the supported card brands  readCard( CardBrands usedCard ); Parameter\tNotesusedCard Required CardBrands\tName of the card brand Code example public final class EventHandler implements Events.CardBrandDisplay { @Override public void deviceCapabilities(List supportedCardBrands) { // Get supported card brands } @Override public void readCard(CardBrands usedCard) { // Get the used card brand } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Connection status changed​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#connection-status-changed","content":"Events.ConnectionStatusChanged Implement this interface in order to receive connection status changes. Methods connectionStatusChanged( ConnectionStatus status , Device device ); Parameter\tNotesstatus Required ConnectionStatus\tNew status of the connection device Required Device\tThe terminal which sent this information. Code example public final class EventHandler implements Events.ConnectionStatusChanged { @Override public void connectionStatusChanged(ConnectionStatus status, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Current transaction status​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#14","content":"Events.CurrentTransactionStatus Implement this interface in order to receive events about the current transaction. Methods currentTransactionStatus( StatusInfo status , Device device ); Parameter\tNotesstatus Required StatusInfo\tThe StatusInfo of the current transaction device Required Device\tThe terminal the request is sent from. Code example public final class EventHandler implements Events.CurrentTransactionStatus { @Override public void currentTransactionStatus(StatusInfo info, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Device capabilities ready​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#device-capabilities-ready","content":"Events.DeviceCapabilitiesReady Implement this interface in case the terminal needs to notify the SDK of its capabilities Methods deviceCapabilities( DeviceCapabilities capabilities , Device device ); Parameter\tNotescapabilities Required DeviceCapabilities\tThe capabilities of the terminal device Required Device\tThe terminal sending its capabilities Code example public final class EventHandler implements Events.DeviceCapabilitiesReady { @Override public void deviceCapabilities(DeviceCapabilities capabilities, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Device discovery finished​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#device-discovery-finished","content":"Events.DeviceDiscoveryFinished Implement this interface in order to receive a list of available terminals. The event handler defined in this interface is invoked after calling the method searchDevices Methods deviceDiscoveryFinished( List<Device> devices ); Parameter\tNotesdevice Required Device\tA list of available devices. Code example public final class EventHandler implements Events.DeviceDiscoveryFinished { @Override public void deviceDiscoveryFinished(List<Device> devices) { // Receiving a list of connectable devices foreach(Device device in devices) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"End of transaction​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#16","content":"Events.EndOfTransaction Implement this interface to receive an event when a transaction is complete. Methods dendOfTransaction( TransactionResult result , Device device ); Parameter\tNotesresult Required TransactionResult\tHolds all the information about the transaction. device Required Device\tThe payment terminal. Code example public final class EventHandler implements Events.EndOfTransaction { @Override public void endOfTransaction(TransactionResult result, Device device) { // Check the status of the transaction, save it, ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Hardware status changed​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#hardware-status-changed","content":"Events.HardwareStatusChanged Implement this interface in order to receive events when the hardware status changes. Methods hardwareStatusChanged( HardwareStatus status , Device device ); Parameter\tNotesstatus Required HardwareStatus\tNew status of the hardware. device Required Device\tThe payment terminal. Code example public final class EventHandler implements Events.HardwareStatusChanged { @Override public void hardwareStatusChanged(HardwareStatus status, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Log​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#log","content":"Events.Log An interface which needs to be implemented and added as a listener to receive logging information. Extends OnMessageLogged Code example public final class EventHandler implements Events.Log { @Override public void deviceLogsReady(String logs, Device device) { ... } @Override public void onMessageLogged(LogLevel level , String message) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"MessageHandling​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#messagehandling","content":"Events.MessageHandling An interface which needs to be implemented and added as a listener to get events which are called when the sdk asks the application to display or hide a message. Methods showMessage( String message , Boolean dismissible , int duration ); Parameter\tNotesmessage Required String\tMessage to display dismissible Required Boolean\tA flag that indicates whether the message can be dismissed duration Required int\tThe timeout to hide the message. In milliseconds, if 0 is sent, the message should not auto dismiss. hideMessage( String message ); Parameter\tNotesmessage Required String\tMessage to hide Code example public final class EventHandler implements Events.MessageHandling { @Override public void showMessage(String message, Boolean dismissible, int duration) { // Show message for a 'duration' period (if duration = 0 DO NOT dismiss until hideMessage(String message) event is received) and make it dismissible if the input marks it as possible } @Override public void hideMessage(String message) { // Hide the message } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"PhysicalKeyboardEvent​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#physicalkeyboardevent","content":"Events.PhysicalKeyboardEvent An interface which needs to be implemented and added as a listener to get events coming from the PAX A80 physical keyboard.  Methods onKeyPressed( PaxA80Keys key ); Parameter\tNoteskey Required PaxA80Keys\tThe name of the key that has been pressed Code example public final class EventHandler implements Events.PhysicalKeyboardEvent { @Override public void onKeyPressed(String key) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"On message logged​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#on-message-logged","content":"Events.OnMessageLogged Implement this interface to receive logs from the payment terminal. You must call getDeviceLogs to request the logs. Methods onMessageLogged( LogLevel level , String message ); Parameter\tNoteslevel Required LogLevel\tThe LogLevel of the logging message Required String\tThe log trace which was logged by the SDK. Code example public final class EventHandler implements Events.OnMessageLogged { @Override public void onMessageLogged(LogLevel level, String message) { // Process log trace } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"PendingResults​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#pendingresults","content":"Events.PendingResults An interface which needs to be implemented and added as a listener to receive information about pending TransactionResults. In case of a communication failure between the SDK and the payment terminal there might be a result pending from the transaction which did not get sent to the SDK. Code example public final class EventHandler implements Events.PendingResults { @Override public void transactionResultReady(TransactionResult transactionResult, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy Extends TransactionResultReady "},{"title":"PaymentProvider​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#paymentprovider","content":"Events.PaymentProvider An interface which needs to be implemented and added as a listener to receive all available events related to financial operations. Code example public final class EventHandler implements Events.PendingResults { @Override public void transactionResultReady(TransactionResult transactionResult, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy Extends SignatureRequired EndOfTransaction OnMessageLogged CurrentTransactionStatus "},{"title":"PrinterEvents​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#printerevents","content":"Events.PrinterEvents An interface which needs to be implemented and added as a listener to get events coming from the printer. Methods printSuccess( ); printError(PrintError error); Parameter\tNoteserror Required PrintError\tEnum detailing the reason of the error Code example public final class EventHandler implements Events.PrinterEvents { @Override public void printSuccess() { // Successful print action } @Override public void printError(PrintError error) { // Unable to perform print action due to error } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Report result​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#report-result","content":"Events.ReportResult Implement this interface to receive an event when a report result from a getTransactionsReport is returned Methods reportResult( TypeOfResult type , String report , DeviceStatus status , Device device ); Parameter\tNotestype Required TypeOfResult\tThe type of the report report Required String\tThe text of the report status Required DeviceStatus\tThe status of the device device Required Device\tThe terminal sending the report Code example public final class EventHandler implements Events.ReportResult { @Override public void reportResult(TypeOfResult type, String report, DeviceStatus status, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Required​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#42","content":"Events.Required You must provide a class implementing this interface when initializing the SDK. Code example public final class EventHandler implements Events.Required { @Override public void signatureRequired(SignatureRequest signatureRequest, Device device) { ... } @Override public void endOfTransaction(TransactionResult transactionResult, Device device) { ... } @Override public void deviceDiscoveryFinished(List devices) { ... } @Override public void transactionResultReady(TransactionResult transactionResult, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy Events SignatureRequired EndOfTransaction DeviceDiscoveryFinished PendingResults "},{"title":"Signature required​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#15","content":"Events.SignatureRequired The SignatureRequired interface must be implemented in order to receive an event when a card requires a signature as a verification method. This interface is only required for an Hi5 or Hilite integration, PAX and Telpo terminals automatically prompt for signature capture on the terminal. Methods signatureRequired( SignatureRequest request , Device device ); Parameter\tNotesrequest Required SignatureRequest\tHolds the signature request. device Required Device\tThe payment terminal. Code example public final class EventHandler implements Events.SignatureRequired { @Override public void signatureRequired(SignatureRequest signatureRequest, Device device) { // Save merchant receipt String merchantReceipt = signatureRequest.getMerchantReceipt(); api.signatureResult(true); } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Status​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#status","content":"Events.Status An interface which needs to be implemented and added as a listener to receive connection and transaction statuses. Code example public final class EventHandler implements Events.Status { @Override public void connectionStatusChanged(ConnectionStatus status, Device device) { ... } @Override public void hardwareStatusChanged(HardwareStatus status, Device device) { ... } @Override public void currentTransactionStatus(StatusInfo info, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy Extends ConnectionStatusChanged HardwareStatusChanged CurrentTransactionStatus "},{"title":"Transaction result ready​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#transaction-result-ready","content":"Events.TransactionResultReady Implement this interface in order to receive an event after a pending TransactionResult has been recovered from the payment terminal. Methods transactionResultReady( TransactionResult transactionResult , Device device ); Parameter\tNotestransactionResult Required TransactionResult\tA TransactionResult is containing all information about the recovered transaction. device Required Device\tThe payment terminal. Code example public final class EventHandler implements Events.TransactionResultReady { @Override public void transactionResultReady(TransactionResult transactionResult, Device device) { ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Transaction started​","type":1,"pageTitle":"Events listeners","url":"android/androideventlisteners#transaction-started","content":"Events.TransactionStarted Implement this interface in order to receive an event when a transaction is started through the Cloud API channel. IMPORTANT NOTE: This interface is only available for cloud-enabled devices. See DeviceCapabilitiesReady interface. Methods transactionStarted( TransactionType transactionType , BigInteger amount , Currency currency ); Parameter\tNotestransactionType Required TransactionType\tType of transaction started amount Required BigInteger\tAmount in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the transaction started Code example public final class EventHandler implements Events.TransactionStarted { @Override public void transactionStarted(TransactionType type, BigInteger amount, Currency currency) { // Notify the app user transaction has been started ... } } // Remember to register the instance of this EventHandler: this.api.registerEventsDelegate(eventHandlerInstance); Copy "},{"title":"Objects","type":0,"sectionRef":"#","url":"restapi/REST API 2.3.0/restobjects","content":"","keywords":""},{"title":"Operation Type​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#operation-type","content":"OperationType An enum representing different types of transactions. Possible Values: sale refund refundReversal saleReversal saleAndTokenizeCard tokenizeCard printReceipt update cardPan pingDevice stopCurrentTransaction "},{"title":"Operation Types Description​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#operation-types-description","content":"OperationTypesDescription Parameter\tNotessale String\tA sale initiates a payment operation to the card reader refund String\tA refund operation moves funds from the merchant account to the cardholder´s credit card. For Interac (Canadian Debit Network), refunds can only be processed until Interac closes the batch of transactions at night refundReversal String\tA refund reversal, also called refund VOID allows the merchant to reverse a previous refund operation. This operation reverts (if possible) a specific refund identified with a transaction id saleReversal String\tA sale reversal, also called sale VOID allows the user to reverse a previous sale operation. This operation reverts (if possible) a specific sale identified with a transaction id saleAndTokenizeCard String\tA sale operation which also returns a card token (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice) tokenizeCard String\tReturns a card token (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice) printReceipt String\tThis method sends the merchant or customer receipt to the terminal for printing. The format of the HTML data, passed to the method or stored in the url, must follow this format: Html Print Format update String\tThe update operation checks for new software or configuration updates and initiates a download if required. cardPan String\tA cardPan request will return the full PAN of the card being swiped, dipped or tapped. Only the PANs of whitelisted card ranges will be returned by the Handpoint systems. This operation is mostly used to be able to process funds or points from loyalty cards. pingDevice String\tThis operation will ping the terminal to confirm if it is online. stopCurrentTransaction String\tOperation used to stop the current transaction. The transaction can only be stopped at specific stages of a payment processing, for example a transaction can not be stopped when the card is being read but can be stopped when waiting for the cardholder to initially insert a card. "},{"title":"Financial Status​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#financial-status","content":"Financial Status: UNDEFINED AUTHORISED DECLINED PROCESSED FAILED CANCELLED PARTIAL_APPROVAL "},{"title":"Transaction Result Object​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#transaction-result-object","content":"TransactionResult An object holding information about the result of a transaction. An object holding information about the result of a transaction. Property\tDescriptionaid String\tApplication Identifier of the card (EMV tag 9F06) arc String\tEMV Authorisation Response Code (EMV tag 8A) authorisationCode String\tAcquirer response code balance Balance\tBalance available on the card budgetNumber String\tUsed to split payments over a period of months cardEntryType CardEntryType\tMethod used by the terminal to read the card cardLanguagePreference String\tPreferred language of the card (EMV tag 5F2D) cardSchemeName CardSchemeName\tThe brand of the card cardToken String\tToken representing the PAN of the card chipTransactionReport String\tFull report of the card EMV parameters currency Currency\tThe currency used for the transaction customerReceipt String\tA URL containing the customer receipt in HTML format customerReference String\tIf a customerReference was provided as an optional parameter in the transaction request it is echoed unaltered in this field deviceStatus DeviceStatus\tStatus of the device dueAmount String\tIn case of a partial approval for the transaction, this field contains the amount which remains to be paid efttimestamp Date\tTime of the transaction efttransactionID String\tHandpoint unique identifier for a transaction, this id is the one to be used for a transaction to be reversed. errorMessage String\tDetailed reason for the transaction error expiryDateMMYY String\tExpiry date of the card used for the operation finStatus FinancialStatus\tThe financial status contains the outcome of the transaction. For example \"AUTHORISED\" or \"DECLINED\" iad String\tIssuer Application Data (EMV tag 9F10) issuerResponseCode String\tResponse code from the card issuer maskedCardNumber String\tMasked card number of the card used for the operation merchantAddress String\tMerchant Address merchantName String\tMerchant Name merchantReceipt String\tA URL containing the customer receipt in HTML format mid String\tMerchant Identifier originalEFTTransactionID String\tIn case the transaction type is a reversal, this field will contain the identifier of the original transaction being reversed paymentScenario PaymentScenario\tIndicates the card entry mode recoveredTransaction boolean\tThis flag is set to true if the transaction result is sent through the transaction recovery logic explained in the Recovey Section, false otherwise requestedAmount BigInteger\tThe requested amount is the transaction amount sent to the terminal rrn String\tRetrieval Reference Number, unique number assigned by the acquirer signatureUrl String\tIf a digital signature is required, this is the URL containing the image of the captured signature statusMessage String\tThe status of the transaction, for example \"Waiting for pin\" tenderType TenderType\tTransaction tender type (credit / debit) tid String\tMerchTerminalant Identifier tipAmount BigInteger\tTip amount, if any, in the minor unit of currency (f.ex. 1000 is 10.00 GBP) tipPercentage double\tIf tipping is enabled, this field will return the tip percentage added on top of the base amount totalAmount BigInteger\tThe total amount is the amount the card was charged for. It is possible that the total amount is not the same as the requested amount since an additional fee can be added, with the customer's approval, via the tipping functionality transactionID String\tThe transaction id is a terminal internal counter incremented for each transaction tsi String\tTransaction Status Information (EMV tag 9B) tvr String\tTransaction Verification Results (EMV tag 95) type TransactionType\tThe type of transaction initiated, for example \"SALE\" unMaskedPan String\tUnmasked PAN, only received if the card is a non-payment card (loyalty) verificationMethod VerificationMethod\tcardholder verification method, for example \"PIN\" multiLanguageStatusMessages Map\tContaining the status message in a human readable format for all the supported locales. multiLanguageErrorMessages Map\tContaining the error message in a human readable format for all the supported locales. cardHolderName String\tName of the cardholder Code example { \"aid\": \"A0000000041010\", \"arc\": \"0000\", \"authorisationCode\": \"123456\", \"balance\": null, \"budgetNumber\": \"\", \"cardEntryType\": \"UNDEFINED\", \"cardLanguagePreference\": \"\", \"cardSchemeName\": \"MasterCard\", \"cardToken\": \"\", \"chipTransactionReport\": \"\", \"currency\": \"USD\", \"customerReceipt\": \"https://s3.[...]/customerReceipt.html\", \"customerReference\": \"\", \"deviceStatus\": { \"applicationName\": \"ClientApp\", \"applicationVersion\": \"20.1.0\", \"batteryCharging\": \"Not Charging\", \"batteryStatus\": \"100\", \"batterymV\": \"4126\", \"bluetoothName\": \"PAXA920\", \"externalPower\": \"USB\", \"serialNumber\": \"0821032398\", \"statusMessage\": \"Approved or completed successfully\" }, \"dueAmount\": 0, \"errorMessage\": \"\", \"expiryDateMMYY\": \"0422\", \"finStatus\": \"AUTHORISED\", \"iad\": \"0210A000002A0000000000000000000000FF\", \"issuerResponseCode\": \"00\", \"maskedCardNumber\": \"************1456\", \"merchantAddress\": \"Plaza Soledad Torres Acosta 1 28013 Madrid\", \"merchantName\": \"Hago la cama\", \"merchantReceipt\": \"https://s3.[...]/merchantReceipt.html\", \"mid\": \"\", \"originalEFTTransactionID\": \"\", \"paymentScenario\": \"CHIPCONTACTLESS\", \"rrn\": \"\", \"signatureUrl\": \"\", \"statusMessage\": \"Approved or completed successfully\", \"tenderType\": \"CREDIT\", \"tid\": \"ACQUIRER_TID\", \"tipAmount\": 0, \"totalAmount\": 100, \"transactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"tsi\": \"0000\", \"tvr\": \"0400008001\", \"type\": \"SALE\", \"unMaskedPan\": \"\", \"verificationMethod\": \"UNDEFINED\", \"efttimestamp\": 1615374961000, \"efttransactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"requestedAmount\": 100, \"tipPercentage\": 0, \"recoveredTransaction\": false, \"cardHolderName\": \"Mr/Mrs card holder full name\" } Copy "},{"title":"Transaction Request Object​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#transaction-request-object","content":"TransactionRequest An object to store the information about the payment terminal in use Properties Property\tDescriptionoperation Required OperationTypesDescription\tThe type of transaction to be performed. serial_number Required String\tDevice serial number. terminal_type Required String\tDevice type. callbackUrl String\tif used, url the terminal will use to send the Transaction Result. All 2XXs http response codes from the callbackUrl are valid to notify the terminal of a successful delivery of the result. If the callbackUrl is not present, the device will send back the transaction result to Handpoint's REST-API and results can be retrieved using the Transaction Result Retrieval endpoint token Required String\tToken used to authenticate the terminal and transaction when serving the Transaction Result through the callbackUrl . The token will be injected in the Request Header with key value 'AUTH-TOKEN'. REQUIRED when the callbackUrl is present. customerReference String\tTransaction identifier provided by the integrator. The customerReference sent in TransactionRequests objects is echoed in the TransactionResults amount Required String\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 EUR). REQUIRED for operations: sale, refund, refundReversal, saleReversal and saleAndTokenizeCard. currency Required Currency\tThe currency of the transaction. REQUIRED for operations: sale, refund, refundReversal, saleReversal and saleAndTokenizeCard. originalTransactionId Required String\tThe transaction id of the original transaction to reverse. REQUIRED for operations: refundReversal, saleReversal and LINKED refunds. receipt Required String\tHTML receipt, following the format defined in Html Print Format, or url to locate the receipt, it can be found in the response of a Transaction Request, in the fields merchantReceipt or customerReceipt. REQUIRED for operations: printReceipt. tipConfiguration TipConfiguration\tConfiguration to enable tipping. At the time of sale, a tip menu will be shown to the cardholder with the predefined configuration. The tip configuration is optional and can only be used with the sale and saleAndTokenize operations. bypassOptions ByPassOptions\tConfiguration to enable the possibility of bypassing signature or pin. The bypass configuration is optional and can only be used with the sale, saleAndTokenize and refund operations merchantAuth MerchantAuth\tObject used to store merchant authentication. The merchantAuth is optional and can only be used with the sale, saleAndTokenize and refund operations. For reversals, the credentials passed for the original sale will be automatically looked up by Handpoint and used to process the reversal. This object allows a transaction to be funded to a specific merchant account other than the default one. It is useful if a terminal is shared between multiple merchants, for example at an Hair Salon or a Doctor's office. Code example // Result will be served to result.com { \"operation\": \"sale\", \"amount\": \"10000\", \"currency\": \"EUR\", \"terminal_type\": \"PAXA920\", \"serial_number\": \"1547854757\", \"customerReference\": \"storeSale12548\", \"callbackUrl\": \"https://result.com\", \"token\": \"123456789\", \"tipConfiguration\": { \"baseAmount\": \"2000\", \"tipPercentages\": [5,10,15,20,25], \"enterAmountEnabled\": true, \"skipEnabled\": false, \"footer\": \"Thank you!!! ;)\" }, \"bypassOptions\": { \"signatureBypass\": true, \"pinBypass\": true }, \"merchantAuth\": [{ \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\", \"externalId\": \"4444\" }] } // Result will be served back to Handpoint's REST-API { \"operation\": \"sale\", \"amount\": \"10000\", \"currency\": \"EUR\", \"terminal_type\": \"PAXA920\", \"serial_number\": \"1547854757\", \"customerReference\": \"storeSale12548\", \"tipConfiguration\": { \"baseAmount\": \"2000\", \"tipPercentages\": [5,10,15,20,25], \"enterAmountEnabled\": true, \"skipEnabled\": false, \"footer\": \"Thank you!!! ;)\" }, \"bypassOptions\": { \"signatureBypass\": true, \"pinBypass\": true }, \"merchantAuth\": [{ \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\", \"externalId\": \"4444\" }] } Copy "},{"title":"Bypass Options​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#bypass-options","content":"BypassOptions Configuration to enable/disable signature or pin bypass. Property\tDescriptionpinBypass Boolean\tEnables/disables pin bypass. Bypasses PIN entry when the shopper says they don't know the PIN for the card and the merchant either knows they are the legitimate cardholder or want to give them the benefit of the doubt. signatureBypass Boolean\tEnables/disables signature bypass. Whether the terminal prompts for a signature, depends on how you configure this parameter. The major card schemes (American Express, Diners, Discover, JCB, Mastercard, Visa, UnionPay) no longer require a signature; they regard it as optional for card-present transactions. This means you can speed up your checkout by skipping the signature prompt. But if your business requires it, you can still let the terminal prompt for a signature. The shopper then provides their signature on the touch screen of the terminal or on the printed transaction receipt. This depends on how you configure this setting. It is your responsibility to verify the signature of the shopper with the signature on the card or another form of identification. Code example { \"bypassOptions\": { \"signatureBypass\": true, \"pinBypass\": true } } Copy "},{"title":"Merchant Auth​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#merchant-auth","content":"MerchantAuth Object used to store merchant authentication. This object is optional, it allows a transaction to be funded to a specific merchant account other than the default one. It is useful if a terminal is shared between multiple merchants, for example at an Hair Salon or a Doctor's office. Property\tDescriptionCredential Credential[]\tArray of credentials Code example { \"merchantAuth\": [{ \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\", \"externalId\": \"4444\" }] } Copy "},{"title":"Acquirer​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#acquirer","content":"Acquirer An enum representing the supported acquirers for merchant authentication. Possible values AMEX BORGUN EVO OMNIPAY POSTBRIDGE INTERAC TSYS VANTIV SANDBOX "},{"title":"Device​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#device","content":"Device An object to store the information about the payment terminal you are working with. ALL values are REQUIRED Properties Property\tDescriptionmerchant_id_alpha Required String\tMerchant unique identifier to which the device is associated serial_number Required String\tDevice serial number ssk Required String\tMerchant shared secret key, unique id for the merchant terminal_type Required String\tDevice type Code example { \"merchant_id_alpha\": \"Test_Merchant\", \"serial_number\": \"614004878\", \"ssk\": \"74817EA5C63437ADE7AA3A5401\", \"terminal_type\": \"PAXA920\" } Copy "},{"title":"Currency​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#currency","content":"Currency An enum of most currencies in the world. Contains the ISO name, ISO number and the name of the currency. Additionally contains information about how many decimals the currency uses. Possible values AED AFN ALL AMD ANG AOA ARS AUD AWG AZN BAM BBD BDT BGN BHD BIF BMD BND BOB BOV BRL BSD BTN BWP BYR BZD CAD CDF CHF CLP CNY COP COU CRC CUC CUP CVE CZK DJF DKK DOP DZD EEK EGP ERN ETB EUR FJD FKP GBP GEL GHS GIP GMD GNF GTQ GYD HKD HNL HRK HTG HUF IDR ILS INR IQD IRR ISK JMD JOD JPY KES KGS KHR KMF KPW KRW KWD KYD KZT LAK LBP LKR LRD LSL LTL LVL LYD MAD MDL MKD MMK MNT MOP MUR MVR MWK MXN MXV MYR MZN NAD NGN NIO NOK NPR NZD OMR PAB PEN PGK PHP PKR PLN PYG QAR RON RSD RUB RWF SAR SBD SCR SDG SEK SGD SHP SLL SOS SRD STD SYP SZL THB TJS TMT TND TOP TRY TTD TWD TZS UAH UGX VND VUV WST XAF XCD XOF XPF YER ZAR ZMK ZWL USD UZS VEF "},{"title":"Card Entry Type​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#card-entry-type","content":"CardEntryType An enum representing different card entry types. Possible values UNDEFINED MSR ICC CNP Code example { \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\" } { \"externalId\": \"4444\" } Copy "},{"title":"Verification Method​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#verification-method","content":"VerificationMethod An enum representing the possible verification methods used during the transaction. Possible values: UNDEFINEDSIGNATURE PIN PIN_SIGNATURE FAILED NOT_REQUIRED MOBILE_PASS_CODE "},{"title":"Merchant Auth Credential​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#merchant-auth-credential","content":"CredentialAn object to store credentials (Acquirer, Mid, Tid, MCC and ExternalId) for merchant authentication. Properties Property\tDescriptionacquirer Acquirer\tIf present, it links this credential to the specified acquirer. Required if more than one credential is provided. mid String\tFor this transaction, overrides the default MID (merchant ID) saved in the terminal configuration. tid String\tFor this transaction, overrides the default TID (terminal ID) saved in the terminal configuration. mcc String\tMerchant Category Code, overrides the default MCC saved in the terminal configuration. ExternalId String\tFor this transaction, the External Id will be used to lookup the credential of the merchant in the Handpoint backend and process the transaction accordingly. The External id replaces the need to pass MID/TID/MCC as credentials "},{"title":"Balance​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#balance","content":"Balance Balance available on the card Properties Property\tDescriptionamount Integer\tThe balance currency Currency\tThe balance currency positive Boolean\tDefines if the balance is positive negative Boolean\tDefines if the balance is negative Code example \"balance\": { \"amount\": 1000, \"currency\": \"EUR\", \"negative\": false, \"positive\": true } Copy "},{"title":"Device Status​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#device-status","content":"DeviceStatus A class that holds the device status. Properties Property\tDescriptionSerialNumber String\tThe serial number of the device. BatteryStatus String\tThe battery status in percentages of a device. BatterymV String\tThe battery milli volts of a device. BatteryCharging String\tThe battery charging status of a device. ExternalPower String\tThe status of an external power of a device ApplicationName String\tThe application name used on a device ApplicationVersion String\tThe application version number used on a device bluetoothName String\tThe bluetooth interface name used on a device statusMessage String\tDevice human readable status message Code example { \"applicationName\": \"TestApp\", \"applicationVersion\": \"20.1.0.1\", \"batteryCharging\": \"Charging\", \"batteryStatus\": \"100\", \"batterymV\": \"4134\", \"bluetoothName\": \"A920\", \"externalPower\": \"USB\", \"serialNumber\": \"0821032397\", \"statusMessage\": \"Card reader time out\" } Copy "},{"title":"Card Scheme Name​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#card-scheme-name","content":"CardSchemeName A string representing different card brands. Possible values MasterCard Visa Maestro American Express Discover JCB Diners UnionPay "},{"title":"Transaction Type​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#transaction-type","content":"TransactionType An enum representing different types of transactions. Possible values UNDEFINED SALE VOID_SALE REFUND VOID_REFUND CANCEL_SALE CANCEL_REFUND TOKENIZE_CARD CARD_PAN "},{"title":"Payment Scenario​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#payment-scenario","content":"PaymentScenario An enum representing different types of scenario. Possible values UNKNOWN MAGSTRIPE MAGSTRIPECONTACTLESS CHIP CHIPCONTACTLESS CHIPFAILMAGSTRIPE "},{"title":"Status Info​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#status-info","content":"StatusInfo A class containing information about the status of the transaction. Properties Property\tDescriptioncancelAllowed boolean\tA boolean letting the integrator know if the terminal will accept a stop transaction request.) status Status\tA Status enum representing the status of the transaction. message String\tA String containing the status message of the transaction. deviceStatus DeviceStatus\tA DeviceStatus object containing information about the payment terminal. "},{"title":"Status​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#status","content":"status An enum containing information about the status of a transaction. Possible values Undefined Success InvalidData ProcessingError CommandNotAllowed NotInitialised ConnectTimeout ConnectError SendingError ReceivingError NoDataAvailable TransactionNotAllowed UnsupportedCurrency NoHostAvailable CardReaderError CardReadingFailed InvalidCard InputTimeout UserCancelled InvalidSignature WaitingForCard CardInserted ApplicationSelection ApplicationConfirmation AmountValidation PinInput ManualCardInput WaitingForCardRemoval TipInput SharedSecretInvalid SharedSecretAuth WaitingSignature WaitingHostConnect WaitingHostSend WaitingHostReceive WaitingHostDisconnect PinInputCompleted PosCancelled RequestInvalid CardCancelled CardBlocked RequestAuthTimeout RequestPaymentTimeout ´ResponseAuthTimeout´ ´ResponsePaymentTimeout´ IccCardSwiped RemoveCard ScannerIsNotSupported ScannerEvent BatteryTooLow AccountTypeSelection BtIsNotSupported PaymentCodeSelection PartialApproval AmountDueValidation InvalidUrl WaitingCustomerReceipt PrintingMerchantReceipt PrintingCustomerReceipt UpdateStarted UpdateFinished UpdateFailed UpdateProgress WaitingHostPostSend WaitingHostPostReceive Rebooting PrinterOutOfPaper ErrorConnectingToPrinter CardTapped ReceiptPrintSuccess InvalidPinLength OfflinePinAttempt OfflinePinLastAttempt ProcessingSignature CardRemoved TipEntered CardLanguagePreference AutomaticPrintingStarted CancelOperationNotAllowed UpdateSoftwareStarted UpdateSoftwareFinished UpdateSoftwareFailed UpdateSoftwareProgress InstallSoftwareStarted InstallSoftwareFinished InstallSoftwareFailed InstallSoftwareProgress UpdateConfigStarted UpdateConfigFinished UpdateConfigFailed UpdateConfigProgress InitialisationComplete "},{"title":"Tip Configuration​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#tip-configuration","content":"TipConfiguration Properties Property\tDescriptionbaseAmount Biginteger\tBase amount used to calculate the tip - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). If no base amount is defined, the transaction amount is used as base amount. headerName String\tName of the tipping menu appearing on the terminal. Default: Tip tipPercentages Required List\tList of percentages used to calculate the tip amount. enterAmountEnabled boolean\tFlag used to enable the cardholder to manually enter the tip amount. Default: true skipEnabled Boolean\tFlag used to enable the cardholder to skip the tipping step. Default: true footer String\tFooter note which will appear on the tipping menu. Default: Empty string Code example { \"baseAmount\": \"2000\", \"headerName\": \"\", \"tipPercentages\": [5,10,15,20,25], \"enterAmountEnabled\": true, \"skipEnabled\": false, \"footer\": \"Thank you!!! ;)\" } Copy "},{"title":"Tender Type​","type":1,"pageTitle":"Objects","url":"restapi/REST API 2.3.0/restobjects#tender-type","content":"TenderType An enum representing different tender types. Possible values NOT_SET CREDIT DEBIT "},{"title":"FAQ","type":0,"sectionRef":"#","url":"docs/faq","content":"","keywords":""},{"title":"What is the difference between a Debug device and a Prod device?​","type":1,"pageTitle":"FAQ","url":"docs/faq#what-is-the-difference-between-a-debug-device-and-a-prod-device","content":"The A920 Debug device is intended for development purposes only. It allows you to sideload an APK and transfer files through USB cable easily and quickly. With Prod devices, for security reasons, it is impossible to sideload an APK. The only way to update the applications is through PAXSTORE. Only Prod devices are allowed to be deployed in the market. "},{"title":"How to check if a PAX A920 device is Debug Mode or Prod Mode?​","type":1,"pageTitle":"FAQ","url":"docs/faq#how-to-check-if-a-pax-a920-device-is-debug-mode-or-prod-mode","content":"Turn on the device, you can find a DEBUG only Not for COMMERCIAL watermark on the bottom right of the screen on a Debug device. If there is no watermark visible, it is a Prod device. Here we have a guide with more info about this topic. "},{"title":"How to install an App on a Debug device?​","type":1,"pageTitle":"FAQ","url":"docs/faq#how-to-install-an-app-on-a-debug-device","content":"If you develop your Android app with Android Studio you can simply connect the device to your computer and install the APK directly on the device. Alternatively, you can transfer the APK to the device, then click it on the device and follow the instructions to install it. On Mac, you will need a file transfer tool (e.g. Android File Transfer). On Windows, you can simply copy and paste the APK. "},{"title":"PAX Password​","type":1,"pageTitle":"FAQ","url":"docs/faq#pax-password","content":"Terminal OS\tSetting Password\tDeveloper Option Password (Debug Device Only)A920 5.1 (V3.22 and Below\t9876\tpax9876 A920 5.1 (V3.23 and Above)\tpax9876@@\tDev9876@@ A920 7.1 (V5.05 and Below)\t9876\tpax9876 A920 7.1 (V5.06 and Above)\tpax9876@@\tDev9876@@ "},{"title":"What type of signature should be used when signing an App?​","type":1,"pageTitle":"FAQ","url":"docs/faq#what-type-of-signature-should-be-used-when-signing-an-app","content":"In order to publish an APK on PAXSTORE, the suggested method is to use a local Keystore and let Android Studio sign the APK. All the APK versions of the same App should be signed with the same developer signature. "},{"title":"Release Notes","type":0,"sectionRef":"#","url":"android/androidreleasenotes","content":"","keywords":""},{"title":"6.5.0​","type":1,"pageTitle":"Release Notes","url":"android/androidreleasenotes#650","content":"Features: Card brand display: 2 new events deviceCapabilities (supportedCardBrands) and readCard to show the supported card brands and card used during a transaction respectively.Update webview for devices that do not support co-branding. Fixes: Correct handling of stopCurrentTransaction operation result for cloud operations.Pin bypass for contactless transactions.Automatic reconnection logic for android Datecs devices. "},{"title":"6.4.1​","type":1,"pageTitle":"Release Notes","url":"android/androidreleasenotes#641","content":"Fixes: Automatic Cancellation parameters. "},{"title":"6.4.0​","type":1,"pageTitle":"Release Notes","url":"android/androidreleasenotes#640","content":"Features: Populate operation timeout on CLOUD operations.Max attempts on Cancellation retries.Generic screen to show text messages. Fixes: Base amount handling in TipDialogCancellation service max retry windowVerification method on transaction result objectCorrect population of MessageReasonCodeError message multi-language translationCardholder name for contact operationsAmount presentation in transactions reportAnalytics and Cloud services stability moving terminals between merchants Refactor: Deprecated jcenter repositoryImproved structure of cryptography moduleLegacy code removal "},{"title":"6.3.0​","type":1,"pageTitle":"Release Notes","url":"android/androidreleasenotes#630","content":"Features: Print Report v2.PAXA80 physical keyboard full support.Deadman mechanism for not completed trx.Addition of customer reference on transaction result for cancelled of timed out trx Fixes: Certification scenarios. Unification of sdk dialogs styles. Card reading during tokenizations. Contactless light thread handling. Xml parsing. Printing html using uncommon characters. Monospace font for printing. SCA cases on contact. PAX A80 Pin bypass handling. Receipts for partial approvals. Correct message on empty config update. Refactor: Internal Emv Classes to improve performance.  "},{"title":"6.2.2​","type":1,"pageTitle":"Release Notes","url":"android/androidreleasenotes#622","content":"Fixes: Compatibility issues with Android 11 devices.CLOUD: Improved logic to wake up device and start trx during device sleep mode.  "},{"title":"6.2.1​","type":1,"pageTitle":"Release Notes","url":"android/androidreleasenotes#621","content":"Fixes: Improved bluetooth connection logic (Datecs)  "},{"title":"6.2.0​","type":1,"pageTitle":"Release Notes","url":"android/androidreleasenotes#620","content":"Features: New Tip Dialog.Multi-mid Phase 2.Physical Keyboard PAX-A80.Visa debit US app selection.cardHolderName filed in Transaction Result object Fixes: Temporarily block during consecutive operations (Datecs devices).Translations.Compatibility with Android 11.  "},{"title":"6.1.1​","type":1,"pageTitle":"Release Notes","url":"android/androidreleasenotes#611","content":"Fixes: Translations  "},{"title":"6.1.0​","type":1,"pageTitle":"Release Notes","url":"android/androidreleasenotes#610","content":"Features: End of the day report.New printing framework.Transaction limit exceeds event.Multi-language in Status and End of Transaction → Transaction Result new fields: multiLanguageStatusMessages and multiLanguageErrorMessages.Support for MerchantAuth and Bypass options for Cloud + REST-API. Fixes: Receipt adjustments for mobile wallets.Receipt adjustments for empty tags.Fields in TransactionResult.Contactless lights after card reading error.REST-API ACK.TranslationsError handling prior connecting to device "},{"title":"Data Flow","type":0,"sectionRef":"#","url":"express/expressdataflow","content":"Data Flow","keywords":""},{"title":"Custom URL","type":0,"sectionRef":"#","url":"express/expresscustomurl","content":"Custom URL To initiate an Express client transaction from your web or app, you open a URL with the following format: handpoint://express/v1/?data=<url_encoded_data> For web apps, you can open this URL just as you would any other URL on a webpage.For native iOS apps, you use the openURL: method of UIApplication. The query parameter in the URL, data, is a percent-encoded JSON object that contains the information Express client needs to process the transaction request. For example, a valid unencoded JSON object looks like this (replace CLIENT_ID with your application's ID, and SHARED_SECRET_KEY with the device activation key you receive from our support team): If you're opening this URL from a native app, you can use your own app's custom scheme as a callback: \"myapp-url-scheme://payment-complete\" { \"action\": { \"type\": \"sale\", \"parameters\": { \"amount\": 1500, \"currency\": \"USD\" }, \"extraParameters\": { \"your custom field\" : \"custom value\" } }, \"client\": { \"clientId\": \"CLIENT_ID\", \"ssk\": \"SHARED_SECRET_KEY\", \"autoReturn\": true, \"autoReturnTimeout\": 0 }, \"callbackUrl\": \"http://yourbackend.com/payment-result\" } Copy If you're developing a web application, this Javascript sample demonstrates encoding a Register API URL and directing the merchant's browser to open it: <script> var dataParameter = { \"action\": { \"type\": \"sale\", \"parameters\": { \"amount\": 1500, \"currency\": \"USD\" }, \"extraParameters\": { \"your custom field\" : \"custom value\" } }, \"client\": { \"clientId\": \"CLIENT_ID\", \"ssk\": \"SHARED_SECRET_KEY\", \"autoReturn\": true, \"autoReturnTimeout\": 0 }, \"callbackUrl\": \"http://yourbackend.com/payment-result\" }; window.location = \"handpoint://express/v1/?data=\" + encodeURIComponent(JSON.stringify(dataParameter)); </script> Copy","keywords":""},{"title":"Introduction","type":0,"sectionRef":"#","url":"express/expressintroduction","content":"","keywords":""},{"title":"Handpoint Express Installation​","type":1,"pageTitle":"Introduction","url":"express/expressintroduction#handpoint-express-installation","content":"Windows info The Windows Express app is portable since version 1.3.2! This means that you don't need to install it, just download it and run it once. We take care of the rest. It will download updates automatically so you don't have to worry about that. However if you had a previous version installed it is advised that you uninstall it previously to avoid confusion and conflicts. Android & iOS tip Download the Android & iOS Express apps directly from the Android Play Store or iOS App Store. "},{"title":"Downloads","type":0,"sectionRef":"#","url":"express/expressdownloads","content":"Downloads The Express application then takes care of finalizing the transaction with the card reader and sends the result and receipts back to the web application at the end of the operation. Get the Express apps! Get the SDK! JavaScript Express SDK","keywords":""},{"title":"Javascript Interface","type":0,"sectionRef":"#","url":"express/expressjavascriptinterface","content":"Javascript Interface We provide a simple Javascript interface for web based implementations. It is a helper library that generates URLs for the different types of transactions. To use it you must include hapiexpress.js in your code and initialise it before generating the urls. Example for a 10$ sale let ssk = '0102030405060708091011121314151617181920212223242526272829303132'; let shouldAutoReturn = false; let autoReturnTimeout = 0; initHapiExpress('hapi-tests', ssk, shouldAutoReturn, autoReturnTimeout); let amount = 1000; // Translates to 10.00 let currency = \"USD\" let callbackurl = \"http://example.com/callbackID\" let url = Hapi.urlForSale(amount, currency, {'extra-value':'some info'}, callbackurl); Hapi.openUrl(url); Copy","keywords":""},{"title":"Transactions","type":0,"sectionRef":"#","url":"android/androidtransactions","content":"","keywords":""},{"title":"Sale​","type":1,"pageTitle":"Transactions","url":"android/androidtransactions#2","content":"Sale A sale initiates a payment operation to the card reader. In it's simplest form you only have to pass the amount and currency but it also accepts tip configuration and a map with extra parameters. Parameters Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge options SaleOptions\tAn object to store all the customization options for a sale. Code example //Initiate a sale for 10.00 in Great British Pounds api.sale(new BigInteger(\"1000\"),Currency.GBP); //Initiate a sale for 10.00 in Great British Pounds with tipping configuration //This feature is only available for PAX and Telpo devices TipConfiguration tipConfiguration = new TipConfiguration(); tipConfiguration.setTipPercentages(Arrays.asList(5, 10, 15, 20)); tipConfiguration.setAmount(new BigInteger(\"1000\")); tipConfiguration.setBaseAmount(new BigInteger(\"1000\")); tipConfiguration.setEnterAmountEnabled(true); tipConfiguration.setFooter(\"Thank you\"); tipConfiguration.setSkipEnabled(true); SaleOptions options = new SaleOptions(); options.setTipConfiguration(tipConfiguration); api.sale(new BigInteger(\"1000\"),Currency.GBP, options); Copy Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry').  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the terminal finishes processing the transaction.  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Sale And Tokenize Card​","type":1,"pageTitle":"Transactions","url":"android/androidtransactions#3","content":"saleAndTokenizeCard A sale operation which also returns a card token. (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice) Parameters Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge options SaleOptions\tAn object to store all the customization options for a sale. Code example //Initiate a sale for 10.00 in Great British Pounds api.saleAndTokenizeCard(new BigInteger(\"1000\"),Currency.GBP); //Initiate a sale for 10.00 in Great British Pounds with tipping configuration //This feature is not available for HiLite & Hi5 devices TipConfiguration tipConfiguration = new TipConfiguration(); tipConfiguration.setTipPercentages(Arrays.asList(5, 10, 15, 20)); tipConfiguration.setAmount(new BigInteger(\"1000\")); tipConfiguration.setBaseAmount(new BigInteger(\"1000\")); tipConfiguration.setEnterAmountEnabled(true); tipConfiguration.setFooter(\"Thank you\"); tipConfiguration.setSkipEnabled(true); SaleOptions options = new SaleOptions(); options.setTipConfiguration(tipConfiguration); api.saleAndTokenizeCard(new BigInteger(\"1000\"),Currency.GBP,options); Copy Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry').  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the terminal finishes processing the transaction.  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Sale Reversal​","type":1,"pageTitle":"Transactions","url":"android/androidtransactions#sale-reversal","content":"saleReversal A sale reversal, also called sale VOID allows the user to reverse a previous sale operation. This operation reverts (if possible) a specific sale identified with a transaction id. In its simplest form you only have to pass the amount, currency and originalTransactionID but it also accepts a map with extra parameters. Note that transactions can only be reversed within a 24 hours timeframe or until the daily batch of transactions has been sent for submission. Parameters Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge originalTransactionID Required String\tId of the original sale transaction options SaleOptions\tAn object to store all the customization options for a sale. Code example //Initiate a reversal for 10.00 in Great British Pounds api.saleReversal(new BigInteger(\"1000\"),Currency.GBP,\"00000000-0000-0000-0000-000000000000\"); Copy Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry').  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the terminal finishes processing the transaction.  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Refund​","type":1,"pageTitle":"Transactions","url":"android/androidtransactions#5","content":"refund A refund operation moves funds from the merchant account to the cardholder´s credit card. In it's simplest form you only have to pass the amount and currency but it also accepts a map with extra parameters. Note that a card is required to be swiped, dipped or tapped for this operation. For Interac (Canadian Debit Network), refunds can only be processed until Interac closes the batch of transactions at night. Parameters Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge originalTransactionID String\tIf present it links the refund with a previous sale. It effectively limits the maximum amount refunded to that of the original transaction. options SaleOptions\tAn object to store all the customization options for a refund. Code example //Initiate a refund for 10.00 in Great British Pounds api.refund(new BigInteger(\"1000\"),Currency.GBP,\"00000000-0000-0000-0000-000000000000\"); Copy  Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry')  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the terminal finishes processing the transaction  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Refund reversal​","type":1,"pageTitle":"Transactions","url":"android/androidtransactions#refund-reversal","content":"refundReversal A refund reversal, also called refund VOID allows the merchant to reverse a previous refund operation. This operation reverts (if possible) a specific refund identified with a transaction id. In it's simplest form you only have to pass the amount, currency and originalTransactionID but it also accepts a map with extra parameters. Note that transactions can only be reversed within a 24 hours timeframe or until the daily batch of transactions has been sent for submission. Parameters Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge originalTransactionID Required String\ttransaction id of the original refund options SaleOptions\tAn object to store all the customization options for the transaction. Code example //Initiate a refund reversal for 10.00 in Great British Pounds api.refundReversal(new BigInteger(\"1000\"),Currency.GBP,\"00000000-0000-0000-0000-000000000000\"); Copy Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry')  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the terminal finishes processing the transaction  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Signature result​","type":1,"pageTitle":"Transactions","url":"android/androidtransactions#signature-result","content":"signatureResult A signatureRequired event is invoked during a transaction when a signature verification is required (f.ex when a payment is done with a swiped or chip and sign card). The merchant is required to ask the cardholder for signature and approve (or decline) the signature. signatureResult tells the card reader if the signature was approved by passing the value true in the method. To decline a signature event then false should be passed to the card reader. Note that this event is only required for an HiLite or Hi5 integration and can be safely ignored for a PAX or Telpo integration. Parameters Parameter\tNotesaccepted Required Boolean\tpass true if merchant accepts cardholder signature Code example //Approves signature automatically in signatureRequired event @Override public void signatureRequired(SignatureRequest signatureRequest, Device device){ api.signatureResult(true); } Copy Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry')  endOfTransaction Invoked when the terminal finishes processing the transaction  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Tip Adjustment​","type":1,"pageTitle":"Transactions","url":"android/androidtransactions#tip-adjustment","content":"TipAdjustment A tip adjustment operation allows merchants to adjust the tip amount of a sale transaction before the batch of transactions is settled by the processor at the end of the day. Note: This functionality is only available for the restaurant industry in the United States and the processors currently supporting this functionality are TSYS and VANTIV. Dependencies: The code example provided depends on RxJava, take a look a their documentation to see how to easily include this dependency in your android project. If you do not want to use RxJava or any additional dependencies then AsyncTask, provided by android, can be used instead for this asynchronous processing. Still we recommend using RxJava as it improves readability and maintainability. Parameters Parameter\tNotestipAmount Required BigDecimal\tTip amount added to the original (base) transaction amount - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) originalTransactionID Required String\tUnique id of the original sale transaction as received from the card reader (EFTTransactionID) Code example Observable.fromCallable(new Callable() { @Override public FinancialStatus call() throws Exception { return api.tipAdjustment(new BigDecimal(1000), \"2bc23910-c3b3-11e6-9e62-07b2a5f091ec\"); } }) .subscribeOn(Schedulers.io()) .observeOn(AndroidSchedulers.mainThread()) .subscribe(new Consumer() { @Override public void accept(@NonNull FinancialStatus status) throws Exception { if (status == FinancialStatus.AUTHORISED) { //SUCCESS } else if (status == FinancialStatus.DECLINED) { //DECLINED } else { //FAILED } }); Copy Returns Result of the tip adjustment transaction, it returns a FinancialStatus, the possible values are : Parameter\tNotesFinancialStatus\t- FinancialStatus.AUTHORISED (tip adjustment approved by the processor) - FinancialStatus.FAILED (system error or timeout) - FinancialStatus.DECLINED (tip adjustment declined by the processor). If two tip adjustments are sent for the same sale transaction, the second tip adjustment will override the first one. In case the transaction fails (not declined) we recommend that you prompt the user of the POS to retry the adjustment. "},{"title":"Tokenize Card​","type":1,"pageTitle":"Transactions","url":"android/androidtransactions#tokenize-card","content":"tokenizeCard Returns a card token (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice) Parameters Parameter\tNotesoptions SaleOptions\tAn object to store all the customization options for the transaction. Code example //Tokenize a card api.tokenizeCard(); Copy Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry')  endOfTransaction Invoked when the terminal finishes processing the transaction  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Card PAN​","type":1,"pageTitle":"Transactions","url":"android/androidtransactions#card-pan","content":"cardPan A cardPan request will return the full PAN of the card being swiped, dipped or tapped. Only the PANs of whitelisted card ranges will be returned by the Handpoint systems. This operation is mostly used to be able to process funds or points from loyalty cards. Parameters Parameter\tNotesoptions SaleOptions\tAn object to store all the customization options for the transaction. Code example //Gets the PAN of a card api.cardPan(); Copy Events invoked currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the terminal (ex : 'waiting for card' or 'waiting for PIN entry')  endOfTransaction Invoked when the terminal finishes processing the transaction  Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to the terminal. "},{"title":"Json Request","type":0,"sectionRef":"#","url":"express/expressjsonrequest","content":"Json Request Request fields Name\tType\tDescriptionaction\tobject\tRequired Contains the transaction type and relevant parameters client\tobject\tRequired Contains information specific to the client setup Action fields Name\tType\tDescriptiontype\tstring\tRequired The type of transaction you intend to perform, currently supported types are \"sale\", \"refund\", \"saleReversal\", \"refundReversal\", \"saleAndTokenizeCard\", \"enableScanner\" parameters\tobject\tRequired An object containing the keys an values with the parameters required for this transaction. extraParameters\tobject\tRequired Contains a custom set of keys and values passed that will go to the gateway and will be delivered back in the response. Useful for tracking the transactions, merchants, etc... Transaction Parameters fields Name\tType\tDescriptionamount\tstring\tRequired The amount of money, in the smallest unit of the applicable currency. For US dollars, this value is in cents. (So, $12 would result in 1200. $0.01 would result in 1) This value is always an integer. currency\tstring\tRequired The type of currency involved in the current payment, in ISO 4217 format. For example, the currency code for US dollars is USD. originalTransactionID\tstring\tRequired (Required for reversals.) The original transaction Id required to reverse/cancel a transaction. Barcode / QR Scanner Parameters fields Name\tType\tDescriptionmultiScan\tboolean\tOptional True if you want the scanner to stay on to capture multiple codes. False to shut off after the first succesful scan, timeout or cancel. Default is False. autoScan\tboolean\tOptional True if you want the scanner to function automatically without the press of a button. Default is False. resultsGrouped\tboolean\tOptional True if you want the results of the scan to come all grouped when the scanner is turned off. Otherwise the device will send an event per each code scanned. Default is True. timeout\tinteger\tOptional The amount of seconds after which the scanner, if left idle, turns itself off. Default is 0. Client fields Name\tType\tDescriptionclientId\tstring\tArbitrary identification of the client. Your APP_ID or just an unique identifier of your web client. ssk\tstring\tShared Secret Key to activate the card reader. autoReturn\tboolean\tRequired If true, Express client automatically gets hidden/switches back to your app following a short timeout after the transaction completes. Otherwise, the merchant must tap the Back button to return to your app. autoReturnTimeout\tinteger\tNumber of seconds to wait before switching back to your app if autoReturn is true. The default value is 10","keywords":""},{"title":"Javascript Methods","type":0,"sectionRef":"#","url":"express/expressjavascriptmethods","content":"","keywords":""},{"title":"initHapiExpress​","type":1,"pageTitle":"Javascript Methods","url":"express/expressjavascriptmethods#inithapiexpress","content":"Creates an instance of Hapi. Parameters Parameter\tNotesclient_id Required string\tA unique identifier of your system to group operations ssk Required string\tThe shared secret key to authorize the operations auto_return Required Boolean\tIf true, Handpoint Express automatically switches back to your app following a short timeout after the transaction completes. Code Example initHapiExpress('hapi-tests', '010203040050606', false); Copy Returns Parameter\tNotesobject\tThe Hapi interface object with functions to generate URLs for sale, refund and reversals "},{"title":"openURL​","type":1,"pageTitle":"Javascript Methods","url":"express/expressjavascriptmethods#openurl","content":"Opens a URL that is passed. This is a helper method. URLs generated by the UrlFor... methods can also be opened just like a normal link. Parameters Parameter\tNotesurl Required string\tUrl to open Code Example Hapi.openURL('handpoint://express/v1/?data=') Copy "},{"title":"urlForRefund​","type":1,"pageTitle":"Javascript Methods","url":"express/expressjavascriptmethods#urlforrefund","content":"Constructs the URL needed for opening the express app and starting a refund operation. Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required string\tCurrency of the charge extra_parameters Required object\tAn object containing additional sale parameters, fx. Key: \"Budget\", Value: \"03\" callbacl_url Required string\tThe URL that Handpoint Express will send its response to. Code Example Hapi.urlForRefund('1000', 'USD', {'extra-value':'some info'}, 'http://callback.com'); Copy Returns Parameter\tNotesString\tA complete constructed and encoded URL string that includes the data for opening the express app and performing the operation "},{"title":"urlForRefundReversal​","type":1,"pageTitle":"Javascript Methods","url":"express/expressjavascriptmethods#urlforrefundreversal","content":"Constructs the URL needed for opening the express app and reverting a refund transaction. This operation tries to void an earlier refund transaction, therefor the transaction GUID is needed for the transaction to be voided. Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required string\tCurrency of the charge originalTransactionID Required string\tThe transaction id number for the transactino to void/revert extra_parameters Required object\tAn object containing additional sale parameters, fx. Key: \"Budget\", Value: \"03\" callbacl_url Required string\tThe URL that Handpoint Express will send its response to. Code Example Hapi.urlForRefundReversal('1000', 'USD', '1234' {'extra-value':'some info'}, 'http://callback.com'); Copy Returns Parameter\tNotesString\tA complete constructed and encoded URL string that includes the data for opening the express app and performing the operation "},{"title":"urlForSale​","type":1,"pageTitle":"Javascript Methods","url":"express/expressjavascriptmethods#urlforsale","content":"Constructs the URL needed for opening the express app and starting a sale. Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required string\tCurrency of the charge extra_parameters Required object\tAn object containing additional sale parameters, fx. Key: \"Budget\", Value: \"03\" callbacl_url Required string\tThe URL that Handpoint Express will send its response to. Code Example Hapi.urlForSale('1000', 'USD', {'extra-value':'some info'}, 'http://callback.com'); Copy Returns Parameter\tNotesString\tA complete constructed and encoded URL string that includes the data for opening the express app and performing the operation "},{"title":"urlForSaleAndTokenizeCard​","type":1,"pageTitle":"Javascript Methods","url":"express/expressjavascriptmethods#urlforsaleandtokenizecard","content":"Constructs the URL needed for opening the express app and starting a saleAndTokenizeCard Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required string\tCurrency of the charge extra_parameters Required object\tAn object containing additional sale parameters, fx. Key: \"Budget\", Value: \"03\" callbacl_url Required string\tThe URL that Handpoint Express will send its response to. Code Example Hapi.urlForSaleAndTokenizeCard('1000', 'USD', {'extra-value':'some info'}, 'http://callback.com'); Copy Returns Parameter\tNotesString\tA complete constructed and encoded URL string that includes the data for opening the express app and performing the operation "},{"title":"urlForSaleReversal​","type":1,"pageTitle":"Javascript Methods","url":"express/expressjavascriptmethods#urlforsalereversal","content":"Constructs the URL needed for opening the express app and reverting a sale transaction. This operation tries to void an earlier sale transaction, therefor the transaction GUID is needed for the transaction to be voided. Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required string\tCurrency of the charge extra_parameters Required object\tAn object containing additional sale parameters, fx. Key: \"Budget\", Value: \"03\" originalTransactionID Required string\tThe transaction id number for the transactino to void/revert callbacl_url Required string\tThe URL that Handpoint Express will send its response to. Code Example Hapi.urlForSaleReversal('1000', 'USD', '1234' {'extra-value':'some info'}, 'http://callback.com'); Copy Returns Parameter\tNotesString\tA complete constructed and encoded URL string that includes the data for opening the express app and performing the operation "},{"title":"urlForScanner​","type":1,"pageTitle":"Javascript Methods","url":"express/expressjavascriptmethods#urlforscanner","content":"Constructs the URL needed for opening the express app and starting scanning. Parameter\tNotesmultiScan Required boolean\tTrue if you want the scanner to stay on to capture multiple codes. False to shut off after the first succesful scan, timeout or cancel. Default is False autoScan Required boolean\tTrue if you want the scanner to function automatically without the press of a button. Default is False. resultsGrouped Required boolean\tTrue if you want the results of the scan to come all grouped when the scanner is turned off. Otherwise the device will send an event per each code scanned. Default is True. timeout Required integer\tThe amount of seconds after which the scanner, if left idle, turns itself off. Default is 0. extra_parameters Required object\tAn object containing additional sale parameters, fx. Key: \"Budget\", Value: \"03\" callback_url Required string\tThe URL that Handpoint Express will send its response to. Code Example Hapi.urlForScanner(false, false, true, 0, {'extra-value':'some info'}, 'http://callback.com'); Copy Returns Parameter\tNotesString\tA complete constructed and encoded URL string that includes the data for opening the express app and performing the operation "},{"title":"urlForTokenizeCard​","type":1,"pageTitle":"Javascript Methods","url":"express/expressjavascriptmethods#urlfortokenizecard","content":"Constructs the URL needed for opening the express app and starting a tokenizeCard. Parameter\tNotesextra_parameters Required object\tAn object containing additional sale parameters, fx. Key: \"Budget\", Value: \"03\" callback_url Required string\tThe URL that Handpoint Express will send its response to. Code Example Hapi.urlForTokenizeCard({'extra-value':'some info'}, 'http://callback.com'); Copy Returns Parameter\tNotesString\tA complete constructed and encoded URL string that includes the data for opening the express app and performing the operation "},{"title":"Setup","type":0,"sectionRef":"#","url":"express/expresssetup","content":"Setup Download and install the app for your platform and start integrating, either directly through the custom url scheme or by using our Javascript interface that abstracts the messaging format. You can start developing as soon as you receive a Handpoint payment terminal. Your end user, the merchant, only has to install the Express application on the platform of her choice to start accepting card present payments seamlessly with your application and a Handpoint card reader.","keywords":""},{"title":"Integration Guide","type":0,"sectionRef":"#","url":"android/androidintegrationguide","content":"","keywords":""},{"title":"Android Terminal Native Integration​","type":1,"pageTitle":"Integration Guide","url":"android/androidintegrationguide#8","content":"Introduction This tutorial is guiding you through all the required steps to create a basic payment application for Android Payment devices such as PAX and Telpo. The new generation of Handpoint SDK's is designed to make your life easier. Simple and created for humans, it does not require any specific knowledge of the payment industry to be able to start accepting credit/debit card transactions. At Handpoint we take care of securing every transaction so you don´t have to worry about it while creating your application. We encrypt data from the payment terminal to the bank with our point-to-point encryption solution. Our platform is always up to the latest PCI-DSS security requirements. warning Please, start an operation (sale,refund etc.) ONLY if you have received the InitialisationComplete message from the currentTransactionStatus method Let's start programming! 1. Modify the AndroidManifest.xml We strongly recommend you add the following to your main <activity>: android:launchMode=\"singleTask\" Copy 2. In the gradle.build android { defaultConfig { minSdkVersion 22 //Required to support all PAX & Telpo models targetSdkVersion 29 multiDexEnabled true } packagingOptions { pickFirst '**/*.so' exclude 'META-INF/*' exclude '**/anim/*.xml' exclude '**/layout/*.xml' exclude 'resources.arsc' exclude 'AndroidManifest.xml' } } Copy 3. Create a Java class Create a new java class called HandpointDelegate.java and include com.handpoint.api.* as a dependency: package com.yourpackage.name; import com.handpoint.api.HandpointCredentials; import com.handpoint.api.Hapi; import com.handpoint.api.HapiFactory; import com.handpoint.api.shared.ConnectionMethod; import com.handpoint.api.shared.ConnectionStatus; import com.handpoint.api.shared.Currency; import com.handpoint.api.shared.Device; import com.handpoint.api.shared.Events; import com.handpoint.api.shared.SignatureRequest; import com.handpoint.api.shared.StatusInfo; import com.handpoint.api.shared.TipConfiguration; import com.handpoint.api.shared.TransactionResult; import com.handpoint.api.shared.agreements.Acquirer; import com.handpoint.api.shared.agreements.Credential; import com.handpoint.api.shared.agreements.MerchantAuth; import com.handpoint.api.shared.options.SaleOptions; import java.math.BigInteger; import java.util.Arrays; import java.util.List; //Check all the events available in the Events interface. //If you want to subscribe to more events, just add to the list of implemented interfaces. public class HandpointDelegate implements Events.Required, Events.ConnectionStatusChanged, Events.CurrentTransactionStatus { private Hapi api; public HandpointDelegate(Context context) { initApi(context); } public void initApi(Context context) { String sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; HandpointCredentials handpointCredentials = new HandpointCredentials(sharedSecret); this.api = HapiFactory.getAsyncInterface(this, context, handpointCredentials); // The api is now initialized. Yay! we've even set default credentials. // The shared secret is a unique string shared between the payment terminal and your application, it is unique per merchant. // You should replace this default shared secret with the one sent by the Handpoint support team. //Since we're running inside the terminal, we can create a device ourselves and connect to it Device device = new Device(\"some name\", \"address\", \"\", ConnectionMethod.ANDROID_PAYMENT); this.api.connect(device); } @Override public void connectionStatusChanged(ConnectionStatus status, Device device) { if (status == ConnectionStatus.Connected) { //Connection Status connected } } @Override public void deviceDiscoveryFinished(List<Device> devices) { // This event can be safely ignored for a PAX/Telpo integration } public boolean pay() { return this.api.sale(new BigInteger(\"1000\"), Currency.GBP); // Let´s start our first payment of 10 pounds // Use the currency of the country in which you will be deploying terminals } public boolean payWithOptions() { SaleOptions options = new SaleOptions(); // Adding tipping TipConfiguration config = new TipConfiguration(); //Optionally config.setHeaderName(\"HEADER\"); //Optionally config.setFooter(\"FOOTER\"); //Optionally config.setEnterAmountEnabled(true); //Optionally config.setSkipEnabled(true); //Optionally config.setTipPercentages(Arrays.asList(5, 10, 15, 20)); options.setTipConfiguration(config); // Adding Multi MID / Custom merchant Authentication MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(Acquirer.SANDBOX); //Optionally credential.setMid(\"mid\"); //Optionally credential.setTid(\"tid\"); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); options.setMerchantAuth(auth); //Add a customer reference options.setCustomerReference(\"Your customer reference\"); //Enable pin bypass options.setPinBypass(true); //Enable signature bypass options.setSignatureBypass(true); //Define a budget number options.setBudgetNumber(\"YOUR_BUDGET_NUMBER\"); return this.api.sale(new BigInteger(\"1000\"),Currency.GBP, options); } @Override public void currentTransactionStatus(StatusInfo statusInfo, Device device) { if (statusInfo.getStatus() == StatusInfo.Status.InitialisationComplete) { // The StatusInfo object holds the different transaction statuses like reading card, pin entry, etc. // Let's launch a payment pay(); } } @Override public void signatureRequired(SignatureRequest signatureRequest, Device device) { // This event can be safely ignored for a PAX/Telpo integration // The complete signature capture process is already handled in the sdk, a dialog will prompt the user for a signature if required. // If a signature was entered, it should be printed on the receipts. } @Override public void endOfTransaction(TransactionResult transactionResult, Device device) { // The TransactionResult object holds details about the transaction as well as the receipts // Useful information can be accessed through this object like the transaction ID, the amount, etc. } @Override public void transactionResultReady(TransactionResult transactionResult, Device device) { // Pending TransactionResult objects will be received through this event if the EndOfTransaction // event was not delivered during the transaction, for example because of a network issue // For this sample app we are not going to implement this event } public void disconnect(){ this.api.disconnect(); //This disconnects the connection } } Copy We're done! Sort of. With the above tutorial you've done a basic integration that can perform sale transactions. Explore the rest of the documentation to see more transaction types supported and possibilities. "},{"title":"Bluetooth Integration​","type":1,"pageTitle":"Integration Guide","url":"android/androidintegrationguide#9","content":"Introduction This tutorial is guiding you through all the required steps to create a basic payment application for Android devices integrated with a HiLite or Hi5 payment terminal. The new generation of Handpoint SDK's is designed to make your life easier. Simple and created for humans, it does not require any specific knowledge of the payment industry to be able to start accepting credit/debit card transactions. At Handpoint we take care of securing every transaction so you don´t have to worry about it while creating your application. We encrypt data from the payment terminal to the bank with our point-to-point encryption solution. Our platform is always up to the latest PCI-DSS security requirements. warning Please, start an operation (sale,refund etc.) ONLY if you have received the InitialisationComplete message from the currentTransactionStatus method Let's start programming! 1. Modify the AndroidManifest.xml We strongly recommend you add the following to your main <activity>: android:launchMode=\"singleTask\" Copy 2. In the gradle.build android { defaultConfig { minSdkVersion 22 //change the SDK version to the one corresponding to the device you are using targetSdkVersion 29 multiDexEnabled true } packagingOptions { pickFirst '**/*.so' exclude 'META-INF/*' exclude '**/anim/*.xml' exclude '**/layout/*.xml' exclude 'resources.arsc' exclude 'AndroidManifest.xml' } } Copy 3. Create a Java class Create a new java class called HandpointDelegate.java and include com.handpoint.api.* as a dependency: package com.yourpackage.name; import android.content.Context; import com.handpoint.api.HandpointCredentials; import com.handpoint.api.Hapi; import com.handpoint.api.HapiFactory; import com.handpoint.api.shared.ConnectionMethod; import com.handpoint.api.shared.ConnectionStatus; import com.handpoint.api.shared.Currency; import com.handpoint.api.shared.Device; import com.handpoint.api.shared.Events; import com.handpoint.api.shared.SignatureRequest; import com.handpoint.api.shared.StatusInfo; import com.handpoint.api.shared.TransactionResult; import java.math.BigInteger; import java.util.List; //Check all the events available in the Events interface. //If you want to subscribe to more events, just add to the list of implemented interfaces. public class HandpointDelegate implements Events.Required, Events.ConnectionStatusChanged, Events.CurrentTransactionStatus { private Hapi api; public HandpointDelegate(Context context) { initApi(context); } public void initApi(Context context) { String sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; HandpointCredentials handpointCredentials = new HandpointCredentials(sharedSecret); this.api = HapiFactory.getAsyncInterface(this, context, handpointCredentials); // The api is now initialized. Yay! we've even set a shared secret! // The shared secret is a unique string shared between the card reader and your mobile application // It prevents other people to connect to your card reader // You have to replace this default shared secret by the one sent by our support team // The shared secret is unique per merchant (not per terminal) //Now we need to find our device and connect to it discoverDevices(); } // Now we need to connect to a device to start taking payments. // Let's search for them: public void discoverDevices() { this.api.searchDevices(ConnectionMethod.BLUETOOTH); // This triggers the asynchronous search for all the devices around that haven't been paired. // You could, alternatively, search for the already paired devices // List<Device> devices = this.api.getPairedDevices(ConnectionMethod.BLUETOOTH); // Now: // selectDeviceAndConnect(devices); // You'll receive the devices found through deviceDiscoveryFinished method. // See: https://handpoint.com/docs/device/Android/#elem_eventsDeviceDiscoveryFinished } @Override public void deviceDiscoveryFinished(List<Device> devices) { selectDeviceAndConnect(devices); } private void selectDeviceAndConnect(List<Device> devices) { for (Device device : devices) { if (device.getName() != null) { // All the devices here are datecs devices if (/* Fill your logic here */) { this.api.connect(device); // Now take a look at connectionStatusChanged method break; } } } } //Potentially, if you know the MAC address of the device you want to connect to, you can skip the search and do it this way public void connect() { Device device = new Device(\"PP0513901435\", \"68:AA:D2:00:D5:27\", \"\", ConnectionMethod.BLUETOOTH); //The Address always has to be written in UPPER CASE //new Device(\"name\", \"address\", \"port\", ConnectionMethod.BLUETOOTH); this.api.connect(device); } @Override public void connectionStatusChanged(ConnectionStatus status, Device device) { if (status == ConnectionStatus.Connected) { // Connected to device } } public boolean pay() { return this.api.sale(new BigInteger(\"1000\"), Currency.GBP); // Let´s start our first payment of 10 pounds } @Override public void currentTransactionStatus(StatusInfo statusInfo, Device device) { if (statusInfo.getStatus() == StatusInfo.Status.InitialisationComplete) { // The StatusInfo object holds the different transaction statuses like reading card, pin entry, etc. // Let's launch a payment pay(); } } @Override public void signatureRequired(SignatureRequest signatureRequest, Device device) { // You'll be notified here if a sale process needs a signature verification // A signature verification is needed if the cardholder uses an MSR or a chip & signature card // This method will not be invoked if a transaction is made with a Chip & PIN card // At this step, you are supposed to display the merchant receipt to the cardholder on the android device // The cardholder must have the possibility to accept or decline the transaction // If the cardholder clicks on decline, the transaction is VOID // If the cardholder clicks on accept he is then asked to sign electronically the receipt this.api.signatureResult(true); // This line means that the cardholder ALWAYS accepts to sign the receipt // For this sample app we are not going to implement the whole signature process } @Override public void endOfTransaction(TransactionResult transactionResult, Device device) { // The object TransactionResult stores the different receipts // Other information can be accessed through this object like the transaction ID, the amount... } @Override public void transactionResultReady(TransactionResult transactionResult, Device device) { // Pending TransactionResult objects will be received through this event if the EndOfTransaction // event was not delivered during the transaction, for example because of a network issue. // For this sample app we are not going to implement this event. } public void disconnect() { this.api.disconnect(); //This disconnects the connection } } Copy info Note about reconnections: By default, the SDK will automatically reconnect to the last known device when the connection is lost.If you want to change this behaviour set the property Settings.AutomaticReconnection in HapiManager to false. We're done! Sort of. With the above tutorial you've done a basic integration that can perform sale transactions. Explore the rest of the documentation to see more transaction types supported and possibilities. "},{"title":"Cloud Integration​","type":1,"pageTitle":"Integration Guide","url":"android/androidintegrationguide#10","content":"Introduction This tutorial is guiding you through all the required steps to integrate with a Handpoint (PAX, Telpo or Datecs) payment terminal, from your Android application, through the internet. CLOUD will be the ConnectionMethod of choice for this guide. With this connection method you become the client in a client - server connection. warning There needs to be another app with one of our SDKs that is active and keeping the connection open. The new generation of Handpoint SDK's is designed to make your life easier. Simple and created for humans, it does not require any specific knowledge of the payment industry to be able to start accepting credit/debit card transactions. At Handpoint we take care of securing every transaction so you don´t have to worry about it while creating your application. We encrypt data from the payment terminal to the bank with our point-to-point encryption solution. The platform is always up to the latest PCI-DSS security requirements. warning Please, start an operation (sale,refund etc.) ONLY if you have received the InitialisationComplete message from the currentTransactionStatus method Let's start programming! 1. In the gradle.build android { defaultConfig { minSdkVersion 22 //Required to support all PAX & Telpo models targetSdkVersion 29 multiDexEnabled true } packagingOptions { pickFirst '**/*.so' exclude 'META-INF/*' exclude '**/anim/*.xml' exclude '**/layout/*.xml' exclude 'resources.arsc' exclude 'AndroidManifest.xml' } } Copy 2. Create a Java class Create a new java class called HandpointDelegate.java and include com.handpoint.api.* as a dependency: package com.yourpackage.name; import android.content.Context; import com.handpoint.api.HandpointCredentials; import com.handpoint.api.Hapi; import com.handpoint.api.HapiFactory; import com.handpoint.api.shared.ConnectionMethod; import com.handpoint.api.shared.ConnectionStatus; import com.handpoint.api.shared.Currency; import com.handpoint.api.shared.Device; import com.handpoint.api.shared.Events; import com.handpoint.api.shared.SignatureRequest; import com.handpoint.api.shared.StatusInfo; import com.handpoint.api.shared.TipConfiguration; import com.handpoint.api.shared.TransactionResult; import com.handpoint.api.shared.agreements.Acquirer; import com.handpoint.api.shared.agreements.Credential; import com.handpoint.api.shared.agreements.MerchantAuth; import com.handpoint.api.shared.options.SaleOptions; import java.math.BigInteger; import java.util.Arrays; import java.util.List; //Check all the events available in the Events interface. //If you want to subscribe to more events, just add to the list of implemented interfaces. public class HandpointDelegate implements Events.Required, Events.ConnectionStatusChanged, Events.CurrentTransactionStatus { private Hapi api; public HandpointDelegate(Context context) { initApi(context); } public void initApi(Context context) { String sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; String merchantApiKey = \"This-is-my-api-key-provided-by-Handpoint\"; HandpointCredentials handpointCredentials = new HandpointCredentials(sharedSecret, merchantApiKey); this.api = HapiFactory.getAsyncInterface(this, context, handpointCredentials); // The api is now initialized. Yay! we've even set default credentials. // The shared secret is a unique string shared between the payment terminal and your application, it is a free field. // The Api key is a unique key per merchant used to authenticate the terminal against the Cloud. // You should replace the API key with the one sent by the Handpoint support team. // Now we need to find our device and connect to it. discoverDevices(); } // Now we need to connect to a device to start taking payments. // Let's search for them: public void discoverDevices(){ this.api.searchDevices(ConnectionMethod.CLOUD); // This triggers the asynchronous search for all the devices around that haven't been paired. // You could, alternatively, search for the already paired devices // List<Device> devices = this.api.getPairedDevices(ConnectionMethod.CLOUD); // Now: // selectDeviceAndConnect(devices); // You'll receive the devices found through the deviceDiscoveryFinished method. // See: https://handpoint.com/docs/device/Android/#elem_eventsDeviceDiscoveryFinished } @Override public void deviceDiscoveryFinished(List<Device> devices) { selectDeviceAndConnect(devices); } private void selectDeviceAndConnect(List<Device> devices) { for (Device device : devices) { if (device.getName() != null){ // All the devices here are all of the merchant's devices if (/* Fill your logic here */) { this.api.connect(device); // Now take a look at connectionStatusChanged method break; } } } } //Potentially, if you know the Serial number and model of the device you want to connect to, you can skip the search and do it this way public void connect(){ Device device = new Device(\"CloudDevice\", \"9822032398-PAXA920\", \"\", ConnectionMethod.CLOUD); //new Device(\"name\", \"address\", \"port\", ConnectionMethod.CLOUD); this.api.connect(device); } @Override public void connectionStatusChanged(ConnectionStatus status, Device device) { if (status == ConnectionStatus.Connected) { // Let's launch a payment pay(); } } public boolean pay() { return this.api.sale(new BigInteger(\"1000\"), Currency.GBP); // Let´s start our first payment of 10 pounds } public boolean payWithOptions() { SaleOptions options = new SaleOptions(); // Adding tipping TipConfiguration config = new TipConfiguration(); //Optionally config.setHeaderName(\"HEADER\"); //Optionally config.setFooter(\"FOOTER\"); //Optionally config.setEnterAmountEnabled(true); //Optionally config.setSkipEnabled(true); //Optionally config.setTipPercentages(Arrays.asList(5, 10, 15, 20)); options.setTipConfiguration(config); // Adding Multi MID / Custom merchant Authentication MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(Acquirer.SANDBOX); //Optionally credential.setMid(\"mid\"); //Optionally credential.setTid(\"tid\"); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); options.setMerchantAuth(auth); //Add a customer reference options.setCustomerReference(\"Your customer reference\"); //Enable pin bypass options.setPinBypass(true); //Enable signature bypass options.setSignatureBypass(true); //Define a budget number options.setBudgetNumber(\"YOUR_BUDGET_NUMBER\"); return this.api.sale(new BigInteger(\"1000\"),Currency.GBP, options); } @Override public void currentTransactionStatus(StatusInfo statusInfo, Device device) { if (statusInfo.getStatus() == StatusInfo.Status.InitialisationComplete) { // The StatusInfo object holds the different transaction statuses like reading card, pin entry, etc. } } @Override public void signatureRequired(SignatureRequest signatureRequest, Device device) { // This event can be safely ignored for a PAX/Telpo integration. The complete signature capture process // is already handled in the sdk, a dialog will prompt the user for a signature if required. // If a signature was entered, it should be printed on the receipts. //For Datecs integrations: // You'll be notified here if a sale process needs a signature verification // A signature verification is needed if the cardholder uses an MSR or a chip & signature card // This method will not be invoked if a transaction is made with a Chip & PIN card // At this step, you are supposed to display the merchant receipt to the cardholder on the android device // The cardholder must have the possibility to accept or decline the transaction // If the cardholder clicks on decline, the transaction is VOID // If the cardholder clicks on accept he is then asked to sign electronically the receipt this.api.signatureResult(true); // This line means that the cardholder ALWAYS accepts to sign the receipt // For this sample app we are not going to implement the whole signature process } @Override public void endOfTransaction(TransactionResult transactionResult, Device device) { // The object TransactionResult stores the different receipts // Other information can be accessed through this object like the transaction ID, the amount... } @Override public void transactionResultReady(TransactionResult transactionResult, Device device) { // Pending TransactionResult objects will be received through this event if the EndOfTransaction // event was not delivered during the transaction, for example because of a network issue. // For this sample app we are not going to implement this event. } public void disconnect(){ this.api.disconnect(); //This disconnects the connection } } Copy We're done! Sort of. With the above tutorial you've done a basic integration that can perform sale transactions. Explore the rest of the documentation to see more transaction types supported and possibilities. "},{"title":"Processing Payments Simulation","type":0,"sectionRef":"#","url":"express/expressprocessing","content":"Processing Payments Simulation Your test payments are sent against a test server on the Handpoint side which simulates the behavior of an acquiring bank. Funds are not moved and sensitive data from the card is fully encrypted. You can use trigger amounts to generate some specific responses from our server: Sale amounts Amount\tBehaviour37.79\tIssuer response code = 01 (Refer to issuer) 37.84\tIssuer response code = 05 (Not authorized) 37.93\tIssuer response code = 04 (Pick up card) 37.57\tRequest is partially approved 37.68\tRequest timeout","keywords":""},{"title":"Sandbox","type":0,"sectionRef":"#","url":"express/expresssandbox","content":"Sandbox We've built a tool to help you in your development and testing of this solution. Check it at: https://handpoint.com/express You can generate sample transactions, test the experience in your browser and see the responses if you enable the sandbox mode. When sandbox mode is enabled you are provided with a uniqe URL which you can use for callbacks when testing your own application.","keywords":""},{"title":"Json Response","type":0,"sectionRef":"#","url":"express/expressjsonresponse","content":"Json Response The response object is sent to the callback url and contains data relevant to the financial operation. It contains relevant information, extra parameters, a representation of the TransactionResult object returned from our native libraries and any error that occurred. It is formatted in JSON and structured as a collection of \"name\":\"value\" pairs. Values are always a string except in the cases where the value is a boolean or another collection of \"name\":\"value\" pairs. The response will be packed and added to your callbackUrl in the following format https://your_callback_url?data=<packed_response_data> in a GET request. <packed_response_data> is a JSON string that has been URL encoded to make it safe to use as a GET parameter. Response sample { \"metadata\": { \"appVersion\": \"1.0.0\", \"systemInfo\": { \"osName\": \"Windows 7 Home edition\", \"deviceName\": \"PP917838383832\", \"internetConnectionType\": [ \"WiFi\", \"Ethernet\" ] }, \"protocolVersion\": \"v1\" }, \"transactionResult\": { \"statusMessage\": \"AUTH CODE 12345\", \"type\": \"SALE\", \"finStatus\": \"AUTHORISED\", \"requestedAmount\": \"1000\", \"gratuityAmount\": \"000\", \"gratuityPercentage\": \"0\", \"totalAmount\": \"1000\", \"currency\": \"USD\", \"transactionID\": \"00021010001-10033331231\", \"eftTransactionID\": \"778799887-77798987-798798878887888\", \"originalEftTransactionID\": \"778799887-77798987-798798878887888\", \"eftTimestamp\": \"1476113261\", \"authorisationCode\": \"155884656588899\", \"verificationMethod\": \"PIN\", \"cardEntryType\": \"ICC\", \"cardSchemeName\": \"VISA\", \"errorMessage\": \"No error\", \"customerReference\": \"0000000\", \"budgetNumber\": \"0\", \"recoveredTransaction\": false, \"cardTypeId\": \"U015\", \"merchantReceipt\": \"https://url_to_merchant_receipt\", \"customerReceipt\": \"https://url_to_customer_receipt\" }, \"deviceStatus\": { \"serialNumber\": \"615856933558\", \"batteryStatus\": \"100%\", \"batterymV\": \"234\", \"batteryCharging\": \"Charging\", \"externalPower\": \"Connected\", \"applicationName\": \"EFTClient\", \"applicationVersion\": \"2.15.789\" }, \"extraParameters\" : {} } Copy Metadata fields Name\tType\tDescriptionappVersion\tstring\tA string representation of the client version. systemInfo\tobject\tAn object containing info about the Express client protocolVersion\tstring\tA string representation of the Express protocol version used in this request. SystemInfo fields Name\tType\tDescriptionosName\tstring\tA string containing the name and version of the OS the client is running in. deviceName\tstring\tA string containing the Bluetooth name of the card reader. internetConnectionType\tarray\tA list of the available internet connection methods.","keywords":""},{"title":"Introduction","type":0,"sectionRef":"#","url":"ios/iosintroduction","content":"Introduction iOS SDK version 4.0.1 Get the iOS SDK! tip If you are currently using 3.x of the iOS SDK, take a look at the migration guide to 4.x The Handpoint iOS SDK provides a simple application programming interface for the Handpoint card readers. info Please note that before submitting an app to the Apple App store a MFi hardware request has to be submitted to Apple, to be able to use an external accessory. Please fill our this form before submitting your app to the App store and we will get back to you. If you have any questions, contact us for more details.","keywords":""},{"title":"Installation","type":0,"sectionRef":"#","url":"ios/iosinstallation","content":"","keywords":""},{"title":"CocoaPods​","type":1,"pageTitle":"Installation","url":"ios/iosinstallation#cocoapods","content":"CocoaPods is a dependency manager for Cocoa projects. You can install it with the following command: $ gem install cocoapods Copy If you don't have a Podfile yet: $ pod init Copy To integrate HandpointSDK into your Xcode project using CocoaPods, specify it in your Podfile: source 'https://github.com/CocoaPods/Specs.git' platform :ios, '8.0' use_frameworks! target 'your_target' do pod 'HandpointSDK', '~> 3.2.3' end Copy Then, run the following command: $ pod install Copy "},{"title":"Carthage​","type":1,"pageTitle":"Installation","url":"ios/iosinstallation#carthage","content":"Carthage is a decentralized dependency manager that builds your dependencies and provides you with binary frameworks. You can install Carthage with Homebrew using the following command: $ brew update $ brew install carthage Copy To integrate HandpointSDK into your Xcode project using Carthage, specify it in your Cartfile: github \"handpoint/HandpointSDK-iOS\" Copy Run carthage update to build the framework and drag the built HandpointSDK.framework into your Xcode project. "},{"title":"Manually​","type":1,"pageTitle":"Installation","url":"ios/iosinstallation#manually","content":"If you'd rather handle the dependency manually there are three approaches to include HandpointSDK in your project: "},{"title":"Prebuilt static library​","type":1,"pageTitle":"Installation","url":"ios/iosinstallation#prebuilt-static-library","content":"Download the latest pre-built static library from Handpoint's developer portal and refer to the documentation there for the installation steps. "},{"title":"Building the project yourself​","type":1,"pageTitle":"Installation","url":"ios/iosinstallation#building-the-project-yourself","content":"Download the latest version from the master branch: $ git clone https://github.com/handpoint/HandpointSDK-iOS.git Copy Alternatively you can add it as a git submodule: $ git submodule add https://github.com/handpoint/HandpointSDK-iOS.git Copy "},{"title":"Framework​","type":1,"pageTitle":"Installation","url":"ios/iosinstallation#framework","content":"You'll find the dynamic framework project called HandpointSDK.xcodeproj at the root of the repo. Static Library You'll find the static library project called headstart.xcodeproj under the Library folder. We strongly discourage you from building this project yourself. This project contains several targets, you need to build the aggregated target device-simulator Release This target produces a .zip file in the same directory as the headstart.xcodeproj file containing both the library and the simulator library. "},{"title":"Static Library​","type":1,"pageTitle":"Installation","url":"ios/iosinstallation#static-library","content":"You'll find the static library project called headstart.xcodeproj under the Library folder. We strongly discourage you from building this project yourself. This project contains several targets, you need to build the aggregated target device-simulator Release This target produces a .zip file in the same directory as the headstart.xcodeproj file containing both the library and the simulator library. "},{"title":"Device management","type":0,"sectionRef":"#","url":"ios/iosdevicemanagement","content":"","keywords":""},{"title":"Shared Manager​","type":1,"pageTitle":"Device management","url":"ios/iosdevicemanagement#11","content":"sharedManager Provides access to the heftManager. The heft manager is used for discovering devices and creating a HeftClient with a connection to selected device. Code example //SharedManager //Provides access to the heftManager //Create an instance of the shared manager at set it's delegate HeftManager* heftManager = [HeftManager sharedManager]; heftManager.delegate = self; Copy Returns Parameter\tNotesHeftManager\tThe heftManager instance "},{"title":"Client for device (NSString)​","type":1,"pageTitle":"Device management","url":"ios/iosdevicemanagement#12","content":"clientForDevice Creates a HeftClient object. If a connection is successful the HeftClient object is returned in the didConnect event. All transactions are done using the heftClient. Parameters Parameter\tNotesdevice Required NSInteger\tThe device to connect to. sharedSecret Required NSString\tShared secret only known by the merchant and Handpoint. aDelegate Required BOOL\tThe HeftStatusReportDelegate for the HeftClient to report to. Code example //clientForDevice:sharedSecretString:delegate: //Creates a HeftClient object(connection to device) NSString* sharedSecret = @\"0102030405060708091011121314151617181920212223242526272829303132\"; -(void)connectToFirstCardReaderWith:(NSString*)sharedSecret; { //Try to connect to first device in devices array [heftManager clientForDevice:[[heftManager devicesCopy] objectAtIndex:0] sharedSecretString:sharedSecret delegate:self]; //Client calls the didConnect delegate function if successful } Copy Events invoked didConnect Called when a connection to specified device was created. Returns Parameter\tNotesBoolean\tYES if operation starts successfully "},{"title":"Start Discovery​","type":1,"pageTitle":"Device management","url":"ios/iosdevicemanagement#32","content":"startDiscovery Displays a list of available accessory devices in a modal window. Code example //startDiscovery //Starts the BT discovery process -(void)startDiscovery; { [heftManager startDiscovery]; //Start search activity indicator or other desired functions } Copy "},{"title":"Set log level​","type":1,"pageTitle":"Device management","url":"ios/iosdevicemanagement#33","content":"logSetLevel Sets the log level of the card reader. There are for levels of logging for the device: none, info, full, debug. Setting the log level means that relevant information concerning the application operation will be stored. Parameters Parameter\tNoteslevel Required eLogLevel\teLogLevel available types: eLogNone, eLogInfo, eLogFull, eLogDebug Code example //logSetLevel: //Sets the log level of the card reader. -(void)disableCardReaderLogs { [heftClient logSetLevel:eLogNone]; } -(void)enableCardReaderDebugLogs { [heftClient logSetLevel:eLogDebug]; } Copy Returns Parameter\tNotesBoolean\tThis method always returns YES "},{"title":"Fetch logs​","type":1,"pageTitle":"Device management","url":"ios/iosdevicemanagement#34","content":"logGetInfo Retrieves the logging info. Returns them in the responseLogInfo event. Code example //logGetInfo //Retrieves the logging info. -(void)getLogsFromCardReader { [heftClient logGetInfo]; } Copy Returns Parameter\tNotesBoolean\tThis method always returns YES "},{"title":"Reset logs​","type":1,"pageTitle":"Device management","url":"ios/iosdevicemanagement#35","content":"logReset Clears the logging information stored so far. Code example //logReset //Clears the logging information stored so far -(void)clearLogs { [heftClient logReset]; } Copy Returns Parameter\tNotesBoolean\tThis method always returns YES "},{"title":"Enable scanner​","type":1,"pageTitle":"Device management","url":"ios/iosdevicemanagement#36","content":"enableScanner Places the card reader in a scan mode. Only if the card reader supports it. To cancel/stop scan mode call the cancel method of the heft client. Parameters Parameter\tNotesmultiScan Boolean\tYes [default] to activate multiScan mode - No to activate singleScan mode. Multi-scan mode allows the user to scan until scan operation is canceled or timeout occurs, single-scan mode is active until one scan has occurred then it disables the scan mode. buttonMode Boolean\tYes [default] if buttonMode is on - No otherwise. If button mode is on then the operator needs to press the scan buttons to activate the scanner(during scan mode). timeoutSeconds NSInteger\t0 [default] - card reader will determine when scanning should time out. x - the scanner will time out if x seconds of inactivity occur. Code example //enableScanner:multiScan:buttonMode:timeoutSeconds //Places the card reader in a scan only mode. //To cancel/stop scan mode call cancel function. -(IBAction)startScan { [heftClient enableScanner]; } -(IBAction)startMultiScan { [heftClient enableScannerWithMultiScan:YES]; } Copy Events invoked responseScannerEvent Called to inform that a scan has been performed, several calls can be expected. Several calls to this method happen after a scan action has been performed to inform about scan information operation. The info object contains scanCode, status and a dictionary (xml). "},{"title":"Disable scanner​","type":1,"pageTitle":"Device management","url":"ios/iosdevicemanagement#disable-scanner","content":"disableScanner Disables the scanner if possible Code example //disableScanner //Disable the scanner -(IBAction)disableScanner { [heftClient disableScanner]; } Copy Events invoked responseScannerDisabled Called to inform that a scan has been performed, several calls can be expected. Several calls to this method happen after a scan action has been performed to inform about scan information operation. The info object contains scanCode, status and a dictionary (xml). "},{"title":"financeInit​","type":1,"pageTitle":"Device management","url":"ios/iosdevicemanagement#47","content":"financeInit The update operation checks for update to the card reader and initiates an update if needed. The update can either be a software update or a configuration update. Code example //financeInit //Initializes the card reader and updates config. -(IBAction)updateCardReader { [heftClient financeInit]; } Copy Events invoked responseStatus Invoked while during transaction with different statuses from card reader  responseError Invoked to inform when an error response happens.  responseFinanceStatus Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\tThis method always returns YES "},{"title":"Get SDK version​","type":1,"pageTitle":"Device management","url":"ios/iosdevicemanagement#get-sdk-version","content":"getSDKVersion Returns the current SDK version number in string format Code example //getSDKVersion //Log SDK version number NSLOG(@\"SDK version: %@\", [heftManager getSDKVersion]; Copy "},{"title":"Get SDK build number​","type":1,"pageTitle":"Device management","url":"ios/iosdevicemanagement#get-sdk-build-number","content":"getSDKBuildNumber Returns the current SDK build number in string format Code example //getSDKBuildNumber //Log SDK build number NSLOG(@\"SDK build: %@\", [heftManager getSDKBuildNumber]; Copy "},{"title":"Integration Guide","type":0,"sectionRef":"#","url":"ios/iosintegration","content":"","keywords":""},{"title":"Files in iOS SDK​","type":1,"pageTitle":"Integration Guide","url":"ios/iosintegration#files-in-ios-sdk","content":""},{"title":"If you're using the library/Cocoapods:​","type":1,"pageTitle":"Integration Guide","url":"ios/iosintegration#if-youre-using-the-librarycocoapods","content":"HandpointAll.h: #import this header file into your classes.libheft.a: The SDK library. "},{"title":"If you're using the framework/Carthage:​","type":1,"pageTitle":"Integration Guide","url":"ios/iosintegration#if-youre-using-the-frameworkcarthage","content":" HandpointSDK.h: #import this header file into your classes.HandpointSDK.framework: The SDK library. The SDK also includes a simulator, a library configured to simulate a card reader - intended for early development of an user interface. To use it, just link the libheft.a file in the HeftSimulatorLibrary folder, instead of the actual SDK library. "},{"title":"Development settings for the SDK​","type":1,"pageTitle":"Integration Guide","url":"ios/iosintegration#development-settings-for-the-sdk","content":"Dependencies:The Heft library depends on the ExternalAccessory and libc++.dylib frameworks included with the iOS SDK. These frameworks and the libheft.a SDK library itself need to be linked to your project for the Handpoint interface to work properly. Communication protocol: Your application needs to support the card reader communication protocol. For this reason, the com.datecs.pinpad string needs to be added to the Supported external accessory protocols in the .plist file:  <key>UISupportedExternalAccessoryProtocols</key> <array> <string>com.datecs.pinpad</string> </array> Copy Background mode support: Your application needs to support connection to external devices when in the background. For this reason, in the \"Capabilities\" section of the project settings, the Background Modes profile needs to be ON, and the External accessory communication option must be checked. This is equivalent to adding the following entry in the .plist file:  <key>UIBackgroundModes</key> <array> <string>external-accessory</string> </array> Copy C++ linker flag: A part of the library is written in c++ therefore the -lc++ linker flag needs to be set. Add it under \"Other Linker Flags\" under the \"Linking\" section of your projects settings \"Build Settings\" tab.Other settings: To prevent the warning: \"file was built for archive which is not the architecture being linked (armv7s)\", set Build Active Architecture Only to YES. "},{"title":"Usage summary​","type":1,"pageTitle":"Integration Guide","url":"ios/iosintegration#usage-summary","content":"Any application using the Handpoint SDK should follow these steps: Define a class that implements the HeftDiscoveryDelegate protocol. This class defines the behavior of the app when discovery related events are received from the SDK.Define a class that implements the HeftStatusReportDelegate protocol (it can be the same as above). This class defines the behavior of the app when connection and transaction related events are received from the SDKGet a reference to the HeftManager singleton and assign your HeftDiscoveryDelegate instance as delegate.If device is available through BT connection, start the discovery process by calling the startDiscovery function of the HeftManager and recover a list of the discovered devices by calling the connectedCardReaders function of the HeftManager.If device is using a Lightning connector (HiPro devices), recover the device by directly calling the connectedCardReaders function of the HeftManager.Connect to a device by calling the clientForDevice function of the HeftManager.If connection is successful, the didConnect function of the HeftStatusReportDelegate instance will be invoked.From this point, make transactions and have fun! "},{"title":"Usage details​","type":1,"pageTitle":"Integration Guide","url":"ios/iosintegration#usage-details","content":"Define a class that implements the HeftDiscoveryDelegate protocol. This class will define the behavior of the application when discovery related events are received from the SDK.  @interface MyDiscoveryDelegate () <HeftDiscoveryDelegate> @implementation MyDiscoveryDelegate Copy Define a class that implements the HeftStatusReportDelegate protocol (it can be the same as above). This class will define the behavior of the application when connection and transaction related events are received from the SDK.  @interface MyStatusReportDelegate () <HeftStatusReportDelegate> @implementation MyStatusReportDelegate Copy Get a reference to the HeftManager singleton in SDK by calling the sharedManager class method. Assign your HeftDiscoveryDelegate instance as delegate of the manager.  MyDiscoveryDelegate* myDiscoveryDelegate = [[alloc MyDiscoveryDelegate] init]; HeftManager* manager = [HeftManager sharedManager]; manager.delegate = myDiscoveryDelegate; Copy If device is available through BT connection, start the discovery process by calling the startDiscovery function of the HeftManager.  [manager startDiscovery]; Copy When a device is selected by the user in the “Select device” popup window, the didFindAccessoryDevice function of the HeftDiscoveryDelegate is invoked.  - (void)didFindAccessoryDevice:(HeftRemoteDevice*)newDevice { NSLog(@\"Found new device\"); //Connect to found device or store it for later } Copy When the discovery process is finished, the didDiscoverFinished function of the HeftDiscoveryDelegate instance will be invoked. Recover a list of all the discovered devices by calling the connectedCardReaders function of the HeftManager.  - (void)didDiscoverFinished { NSMutableDictionary *discoveredDevices = [self.manager connectedCardReaders]; } Copy If device is using a Lightning connection (HiPro devices), skip the previous step and recover the device by directly calling the connectedCardReaders function of the HeftManager. HeftRemoteDevice *lightningDevice = [[self.manager connectedCardReaders] firstObject]; Copy Connect to a device by calling the clientForDevice function of the HeftManager. Expected parameters of this function are: A discovered device (HeftRemoteDevice object). A shared secret. The shared secret is a unique identifier. It is a used to link a merchant with his readers. Each one of your merchants will be assigned a different shared secret so it needs to be a configurable value in your application or backend. If you received a development kit with a card reader, our support team probably sent you a shared secret via email already. A HeftStatusReportDelegate instance, which will be notified of all the events related with the device.  // Declare the shared secret (below SS is an example, please put the one sent by our support team) NSString *sharedSecret =@\"0102030405060708091011121314151617181920212223242526272829303132\"; // Connect to reader [manager clientForDevice:device sharedSecret:mySharedSecret delegate:myStatusReportDelegate]; Copy If connection is successful, the didConnect function of the HeftStatusReportDelegate instance will be invoked. Function receives as parameter a HeftClient object, whose reference must be stored since it is the communication bridge to the device we have connected to.  - (void)didConnect:(id <HeftClient>)client { self.heftClient = client; } Copy Once connected to the card reader, transactions can be started through the HeftClient object. For example, the next code starts a sale of 100 GBP: [self.heftClient saleWithAmount:100 currency:@\"GBP\" cardholder:YES]; Copy When a transaction has been initiated (f.ex saleWithAmount), the HeftClient alerts the HeftStatusReportDelegate object by invoking responseStatus during the process and responceFinanceStatus when the process has finished.  - (void)responseStatus:(id<ResponseInfo>)info { NSLog(@\"responseStatus:\"); NSLog(info.status); NSLog(info.xml.description); } - (void)responseFinanceStatus:(id<FinanceResponseInfo>)info { NSLog(@\"responseFinanceStatus:\"); NSLog(info.status); NSLog(info.customerReceipt); NSLog(info.xml.description); } Copy In case you are using the SDK simulator, the behavior changes according to the amount of the transaction: Amount\tBehavior1000\tDeclined transaction 2000\tUser Cancelled 3000\tSignature Requested Other amount\tApproved transaction "},{"title":"Migration from 3.X","type":0,"sectionRef":"#","url":"ios/iosmigration","content":"Migration from 3.X tip Version 4.0.0 introduces a well defined, typed, way of passing extra values, options, parameters or flags to the financial transactions. We have unified all the extra and optional parameters in an Options object. Different operations have different options. 1. For a Sale or Sale and Tokenize operation please see SaleOptions If you use a customer reference: SaleOptions *options = [SaleOptions new]; options.customerReference = @\"Your customer reference\"; Copy If you need Multi MID / Custom merchant Authentication: MerchantAuth *auth = [MerchantAuth new]; Credential *cred = [Credential new]; //Optionally cred.acquirer = [Credential getAcquirerFromString:@\"acquirer\"]; //Optionally cred.mid = @\"mid\"; //Optionally cred.tid = @\"tid\"; //Add as many credentials as Acquirers your merchant have agreements with [auth add:cred]; options.merchantAuth = auth; Copy If you want to specify the budget period Only available for SureSwipe: options.divideByMonths = @\"YOUR_BUDGET_NUMBER\"; Copy Finally: [self.api saleWithAmount:amount currency:currency options:options]; Copy 2. Similar to SaleOptions, but with less possible parameters, for a Refund operation, please see RefundOptions If you use a customer reference: SaleOptions *options = [SaleOptions new]; options.customerReference = @\"Your customer reference\"; Copy If you need Multi MID / Custom merchant Authentication: MerchantAuth *auth = [MerchantAuth new]; Credential *cred = [Credential new]; //Optionally cred.acquirer = [Credential getAcquirerFromString:@\"acquirer\"]; //Optionally cred.mid = @\"mid\"; //Optionally cred.tid = @\"tid\"; //Add as many credentials as Acquirers your merchant have agreements with [auth add:cred]; options.merchantAuth = auth; Copy Finally: [self.api refundWithAmount:amount currency:currency transaction:originalTransactionID options:options]; Copy 3. For the rest of operations, please see Options If you use a customer reference: options.customerReference = @\"Your customer reference\"; Copy","keywords":""},{"title":"Processing Payments Simulation","type":0,"sectionRef":"#","url":"ios/iosprocessing","content":"Processing Payments Simulation Your test payments are sent against a test server on the Handpoint side which simulates the behavior of an acquiring bank. Funds are not moved and sensitive data from the card is fully encrypted. You can use trigger amounts to generate some specific responses from our server: Sale amounts Amount\tBehaviour37.79\tIssuer response code = 01 (Refer to issuer) 37.84\tIssuer response code = 05 (Not authorized) 37.93\tIssuer response code = 04 (Pick up card) 37.57\tRequest is partially approved 37.68\tRequest timeout","keywords":""},{"title":"Objects","type":0,"sectionRef":"#","url":"android/androidobjects","content":"","keywords":""},{"title":"Transaction Result​","type":1,"pageTitle":"Objects","url":"android/androidobjects#25","content":"TransactionResult An object holding information about the result of a transaction. Properties Parameter\tDescriptionaid String\tApplication Identifier of the card (EMV tag 9F06) arc String\tEMV Authorisation Response Code (EMV tag 8A) authorisationCode String\tAcquirer response code balance Balance\tBalance available on the card budgetNumber String\tUsed to split payments over a period of months cardEntryType CardEntryType Method used by the terminal to read the card cardLanguagePreference String\tPreferred language of the card (EMV tag 5F2D)) cardSchemeName CardSchemeName\tThe brand of the card cardToken String\tToken representing the PAN of the card chipTransactionReport String\tFull report of the card EMV parameters currency Currency\tThe currency used for the transaction customerReceipt String\tA URL containing the customer receipt in HTML format customerReference String\tIf a customerReference was provided as an optional parameter in the transaction request it is echoed unaltered in this field deviceStatus DeviceStatus\tStatus of the device dueAmount String\tIn case of a partial approval for the transaction, this field contains the amount which remains to be paid efttimestamp String\tTime of the transaction efttransactionID String\tHandpoint unique identifier for a transaction, this id is the one to be used for a transaction to be reversed. errorMessage String\tDetailed reason for the transaction error expiryDateMMYY String\tExpiry date of the card used for the operation finStatus FinancialStatus\tThe financial status contains the outcome of the transaction. For example \"AUTHORISED\" or \"DECLINED\" iad String\tIssuer Application Data (EMV tag 9F10) issuerResponseCode String\tResponse code from the card issuer maskedCardNumber String\tMasked card number of the card used for the operation merchantAddress String\tMerchant Address merchantName String\tMerchant Name merchantReceipt String\tA URL containing the customer receipt in HTML format mid String\tMerchant Identifier originalEFTTransactionID String\tIn case the transaction type is a reversal, this field will contain the identifier of the original transaction being reversed paymentScenario PaymentScenario\tIndicates the card entry mode recoveredTransaction String\tThis flag is set to true if the transaction result is sent through the transaction recovery logic explained in the Recovey Section, false otherwise requestedAmount String\tThe requested amount is the transaction amount sent to the terminal rrn String\tRetrieval Reference Number, unique number assigned by the acquirer signatureUrl String\tIf a digital signature is required, this is the URL containing the image of the captured signature statusMessage String\tThe status of the transaction, for example \"Waiting for pin\" tenderType TenderType\tTransaction tender type (credit / debit) tid String\tTerminal Identifier tipAmount String\tTip amount, if any, in the minor unit of currency (f.ex. 1000 is 10.00 GBP) tipPercentage String\tIf tipping is enabled, this field will return the tip percentage added on top of the base amount totalAmount String\tThe total amount is the amount the card was charged for. It is possible that the total amount is not the same as the requested amount since an additional fee can be added, with the customer's approval, via the tipping functionality transactionID String\tThe transaction id is a terminal internal counter incremented for each transaction tsi String\tTransaction Status Information (EMV tag 9B) tvr String\tTransaction Verification Results (EMV tag 95) type TransactionType\tThe type of transaction initiated, for example \"SALE\" unMaskedPan String\tUnmasked PAN, only received if the card is a non-payment card (loyalty) verificationMethod VerificationMethod\tcardholder verification method, for example \"PIN\" multiLanguageStatusMessages String\tmap containing the status message in a human readable format for all the supported locales. multiLanguageErrorMessages String\tmap containing the error message in a human readable format for all the supported locales. cardHolderName String\tName of the cardholder Code example { \"aid\": \"A0000000041010\", \"arc\": \"0000\", \"authorisationCode\": \"123456\", \"balance\": null, \"budgetNumber\": \"\", \"cardEntryType\": \"UNDEFINED\", \"cardLanguagePreference\": \"\", \"cardSchemeName\": \"MasterCard\", \"cardToken\": \"\", \"chipTransactionReport\": \"\", \"currency\": \"USD\", \"customerReceipt\": \"https://s3.[...]/customerReceipt.html\", \"customerReference\": \"\", \"deviceStatus\": { \"applicationName\": \"ClientApp\", \"applicationVersion\": \"20.1.0\", \"batteryCharging\": \"Not Charging\", \"batteryStatus\": \"100\", \"batterymV\": \"4126\", \"bluetoothName\": \"PAXA920\", \"externalPower\": \"USB\", \"serialNumber\": \"0821032398\", \"statusMessage\": \"Approved or completed successfully\" }, \"dueAmount\": 0, \"errorMessage\": \"\", \"expiryDateMMYY\": \"0422\", \"finStatus\": \"AUTHORISED\", \"iad\": \"0210A000002A0000000000000000000000FF\", \"issuerResponseCode\": \"00\", \"maskedCardNumber\": \"************1456\", \"merchantAddress\": \"Plaza Soledad Torres Acosta 1 28013 Madrid\", \"merchantName\": \"Hago la cama\", \"merchantReceipt\": \"https://s3.[...]/merchantReceipt.html\", \"mid\": \"\", \"originalEFTTransactionID\": \"\", \"paymentScenario\": \"CHIPCONTACTLESS\", \"rrn\": \"\", \"signatureUrl\": \"\", \"statusMessage\": \"Approved or completed successfully\", \"tenderType\": \"CREDIT\", \"tid\": \"ACQUIRER_TID\", \"tipAmount\": 0, \"totalAmount\": 100, \"transactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"tsi\": \"0000\", \"tvr\": \"0400008001\", \"type\": \"SALE\", \"unMaskedPan\": \"\", \"verificationMethod\": \"UNDEFINED\", \"efttimestamp\": 1615374961000, \"efttransactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"requestedAmount\": 100, \"tipPercentage\": 0, \"recoveredTransaction\": false, \"multiLanguageStatusMessages\": [ { \"en_US\" : \"Approved or completed successfully\" }, { \"fr_FR\" : \"Transaction approuvée\" } ], \"multiLanguageErrorMessages\": [], \"cardHolderName\": \"cardholder name\" } Copy "},{"title":"Acquirer​","type":1,"pageTitle":"Objects","url":"android/androidobjects#21","content":"Acquirer An enum representing all the supported acquirers for merchant authentication Possible values AMEX BORGUN EVO OMNIPAY POSTBRIDGE INTERAC TSYS VANTIV SANDBOX Code example public enum Acquirer { AMEX, BORGUN, EVO, OMNIPAY, POSTBRIDGE, INTERAC, TSYS, VANTIV, SANDBOX } Copy "},{"title":"Card Brands​","type":1,"pageTitle":"Objects","url":"android/androidobjects#card-brands","content":"CardBrands A string representing the supported card brands. Possible values VISA MASTERCARD MAESTRO AMEX DISCOVER DINERS JCB INTERAC OTHER "},{"title":"Card Entry Type​","type":1,"pageTitle":"Objects","url":"android/androidobjects#22","content":"CardEntryType An enum representing different card entry types. Possible values UNDEFINED MSR ICC CNP "},{"title":"Connection Method​","type":1,"pageTitle":"Objects","url":"android/androidobjects#20","content":"ConnectionMethod An enum representing different connection methods with the payment terminal. Currently BLUETOOTH, SIMULATOR, CLOUD and ANDROID_PAYMENT are supported types. Possible values USB SERIAL BLUETOOTH CLOUD ANDROID_PAYMENT HTTPS WIFI ETHERNET SIMULATOR Code example //Currently BLUETOOTH, SIMULATOR, CLOUD and ANDROID_PAYMENT are the only ConnectionMethod available. public enum ConnectionMethod { USB, SERIAL, BLUETOOTH, HTTPS, WIFI, ETHERNET, SIMULATOR, CLOUD, ANDROID_PAYMENT } Copy "},{"title":"Connection Status​","type":1,"pageTitle":"Objects","url":"android/androidobjects#connection-status","content":"ConnectionStatus A list of connection statuses. Note: the events starting with Cloud[...] are exclusively for devices linked to merchants with CLOUD Api key (CLOUD mode enable). Possible values Connected Connecting Disconnected Disconnecting NotConfigured Initializing CloudConnected CloudInitialized CloudAvailable CloudDisconnected CloudUnavailable "},{"title":"Currency​","type":1,"pageTitle":"Objects","url":"android/androidobjects#13","content":"Currency An enum of currencies. It contains the name of the currency, its ISO code, as well as information about how many decimals the currency uses. Possible values AED AFN ALL AMD ANG AOA ARS AUD AWG AZN BAM BBD BDT BGN BHD BIF BMD BND BOB BOV BRL BSD BTN BWP BYR BZD CAD CDF CHF CLP CNY COP COU CRC CUC CUP CVE CZK DJF DKK DOP DZD EEK EGP ERN ETB EUR FJD FKP GBP GEL GHS GIP GMD GNF GTQ GYD HKD HNL HRK HTG HUF IDR ILS INR IQD IRR ISK JMD JOD JPY KES KGS KHR KMF KPW KRW KWD KYD KZT LAK LBP LKR LRD LSL LTL LVL LYD MAD MDL MKD MMK MNT MOP MUR MVR MWK MXN MXV MYR MZN NAD NGN NIO NOK NPR NZD OMR PAB PEN PGK PHP PKR PLN PYG QAR RON RSD RUB RWF SAR SBD SCR SDG SEK SGD SHP SLL SOS SRD STD SYP SZL THB TJS TMT TND TOP TRY TTD TWD TZS UAH UGX USD UZS VEF VND VUV WST XAF XCD XOF XPF YER ZAR ZMK ZWL "},{"title":"Refund Options​","type":1,"pageTitle":"Objects","url":"android/androidobjects#6","content":"RefundOptions An object to store all the customization options for a refund. Properties Parameter\tDescriptionCustomerReference String\tAn arbitrary string to use as your own identifier for a transaction MerchantAuth MerchantAuth\tAn object containing all the credentials used to optionally authenticate a merchant PinBypass Boolean\tBypasses PIN entry when the shopper says they don't know the PIN for the card and the merchant either knows they are the legitimate cardholder or want to give them the benefit of the doubt. PIN Bypass should be set to True if you want to enable pin bypass for a transaction SignatureBypass Boolean\tWhether the terminal prompts for a signature, depends on how you configure this. The major card schemes (American Express, Diners, Discover, JCB, Mastercard, Visa, UnionPay) no longer require a signature; they regard it as optional for card-present transactions. This means you can speed up your checkout by skipping the signature prompt. But if your business requires it, you can still let the terminal prompt for a signature. The shopper then provides their signature on the touch screen of the terminal or on the printed transaction receipt. This depends on how you configure this setting. It is your responsibility to verify the signature of the shopper with the signature on the card or another form of identification. Signature Bypass should be set to True if you want to enable signature for this transaction Code example RefundOptions options = new RefundOptions(); //If you use a customer reference options.setCustomerReference(\"Your customer reference\"); //If you need Multi MID / Custom merchant Authentication MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(YOUR_ACQUIRER); //Optionally credential.setMerchantId(mid); //Optionally credential.setTerminalId(tid); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); options.setMerchantAuth(auth); //If you need to enable pin bypass options.setPinBypass(true); Copy "},{"title":"Sale Options​","type":1,"pageTitle":"Objects","url":"android/androidobjects#4","content":"SaleOptions An object to store all the customization options for a sale. Properties Parameter\tDescriptionBudgetNumber String\tThe budget number can be used to split payments over a period of months. CustomerReference String\tAn arbitrary string to use as your own identifier for a transaction MerchantAuth MerchantAuth\tAn object containing all the credentials used to optionally authenticate a merchant PinBypass Boolean\tBypasses PIN entry when the shopper says they don't know the PIN for the card and the merchant either knows they are the legitimate cardholder or want to give them the benefit of the doubt. PIN Bypass should be set to True if you want to enable pin bypass for a transaction SignatureBypass Boolean\tWhether the terminal prompts for a signature, depends on how you configure this. The major card schemes (American Express, Diners, Discover, JCB, Mastercard, Visa, UnionPay) no longer require a signature; they regard it as optional for card-present transactions. This means you can speed up your checkout by skipping the signature prompt. But if your business requires it, you can still let the terminal prompt for a signature. The shopper then provides their signature on the touch screen of the terminal or on the printed transaction receipt. This depends on how you configure this setting. It is your responsibility to verify the signature of the shopper with the signature on the card or another form of identification. Signature Bypass should be set to True if you want to enable signature for this transaction TipConfiguration TipConfiguration\tAn object containing the tip configuration for this transaction Code example SaleOptions options = new SaleOptions(); //If you use a customer reference options.setCustomerReference(\"Your customer reference\"); //If you need Multi MID / Custom merchant Authentication MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(YOUR_ACQUIRER); //Optionally credential.setMerchantId(mid); //Optionally credential.setTerminalId(tid); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); options.setMerchantAuth(auth); //If you need to enable pin bypass options.setPinBypass(true); //If you want to specify the budget period //Only available for SureSwipe options.setBudgetNumber(YOUR_BUDGET_NUMBER); //If you want to specify tip options //Only available for PAX and Telpo terminals. TipConfiguration config = new TipConfiguration(); //Optionally config.setHeaderName(HEADER); //Optionally config.setFooter(FOOTER); //Optionally config.setEnterAmountEnabled(true); //Optionally config.setSkipEnabled(true); config.setTipPercentages(percentages); options.setTipConfiguration(config); //Alternatively, you can set the tip amount directly options.setTipConfiguration(new TipConfiguration(AMOUNT)); Copy "},{"title":"Options​","type":1,"pageTitle":"Objects","url":"android/androidobjects#7","content":"options SaleOptions An object to store customer reference options for regular operations. Properties Parameter\tDescriptionCustomerReference String\tAn arbitrary string to use as your own identifier for a transaction Code example Options options = new Options(); //If you use a customer reference options.setCustomerReference(\"Your customer reference\"); Copy "},{"title":"MerchantAuthOptions​","type":1,"pageTitle":"Objects","url":"android/androidobjects#merchantauthoptions","content":"MerchantAuthOptions An object to store merchant authentication options for regular operations. Properties Parameter\tDescriptionCustomerReference String\tAn arbitrary string to use as your own identifier for a transaction MerchantAuth MerchantAuth\tAn object containing all the credentials used to optionally authenticate a merchant Code example MerchantAuthOptions options = new MerchantAuthOptions(); //If you use a customer reference options.setCustomerReference(\"Your customer reference\"); //If you need Multi MID / Custom merchant Authentication MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(YOUR_ACQUIRER); //Optionally credential.setMerchantId(mid); //Optionally credential.setTerminalId(tid); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); options.setMerchantAuth(auth); Copy "},{"title":"MerchantAuth​","type":1,"pageTitle":"Objects","url":"android/androidobjects#37","content":"MerchantAuth An object to store merchant authentication. Methods Constructor MerchantAuth( ); Copy Constructor MerchantAuth( Credential credential ); Copy Parameter\tDescriptioncredential Credential\tIf present, adds the given credential to the list. Constructor MerchantAuth( List<Credential> credentials ); Copy Parameter\tDescriptioncredential List<Credential>\tIf present, the list of credentials. Add Credential add( Credential credential ); Copy Parameter\tDescriptioncredential Required Credential\tThe credential to be added. Code example MerchantAuth auth = new MerchantAuth(); Credential credential = new Credential(); //Optionally credential.setAcquirer(YOUR_ACQUIRER); //Optionally credential.setMerchantId(mid); //Optionally credential.setTerminalId(tid); //Add as many credentials as Acquirers your merchant have agreements with auth.add(credential); Copy "},{"title":"Report Configuration​","type":1,"pageTitle":"Objects","url":"android/androidobjects#19","content":"ReportConfiguration An object to store all the configuration for a transactions report. Properties Parameter\tDescriptioncurrency Currency\tThe currency to filter the transactions startDate String\tThe start date in format 'YYYYMMDDHHmmss. endDate String\tThe end date in format 'YYYYMMDDHHmmss. terminalSerialNumber List\tThe serial number of the terminal to fetch the transactions from (if terminalSerialNumber is empty or null, the report will show all the transactions for this merchant). Code example ReportConfiguration configuration = new ReportConfiguration(\"'USD'\", \"'20210430000000'\", \"'20210430235959'\", \"null\"); If you want to add terminal serial numbers: List terminalSerialNumber = new ArrayList<>(); terminalSerialNumber.add(\"0123456789\"); terminalSerialNumber.add(\"9876543210\"); ... ; Copy "},{"title":"Device capabilities​","type":1,"pageTitle":"Objects","url":"android/androidobjects#24","content":"DeviceCapabilities An object holding the capabilities of the payment terminal. Properties Parameter\tDescriptionprinter Boolean\tTrue if the terminal has printer, false otherwise cloudApi [Boolean]\tTrue if the terminal is cloud-enabled, false otherwise "},{"title":"Balance​","type":1,"pageTitle":"Objects","url":"android/androidobjects#balance","content":"Balance Balance available on the card Properties Parameter\tDescriptionamount Integer\tThe amount balance currency Currency\tThe balance currency sign BalanceSign\tPositive (C) or negative (D) balance. You can retrieve the balance sign using the methods isPositive() or isNegative() Code example Balance balance = Balance.Companion.factory( \"1000\", Currency.EUR.getAlpha(), BalanceSign.POSITIVE_SIGN.name() ) Copy "},{"title":"Balance Sign​","type":1,"pageTitle":"Objects","url":"android/androidobjects#balance-sign","content":"BalanceSign An enum representing the balance sign. Possible values POSITIVE_SIGN('C') NEGATIVE_SIGN('D') "},{"title":"Device​","type":1,"pageTitle":"Objects","url":"android/androidobjects#17","content":"Device An object to store the information about the payment terminal in use. Methods Constructor Device( String name , String address , String port , ConnectionMethod connectionMethod , String sharedSecret , int timeout ); Copy Parameter\tNotesname Required String\tA name to identify the device address Required String\tThe address of the device you wish to connect to. E.g.: \"08:00:69:02:01:FC\" for bluetooth, \"9822032398-PAXA920\" for CLOUD (composition of serial number and model of the target device) or just an identifier if your application is running directly on a PAX or Telpo device (ConnectionMethod.ANDROID_PAYMENT). port Required String\tThe port to connect to (optional). connectionMethod Required ConnectionMethod Type of connection with the payment terminal. E.g: Bluetooth, Cloud, Serial, etc... sharedSecret String\tReplaces the default shared secret proviced in the initialization step. timeout int\tThe number of miliseconds until a connection is considered timed out. If not set, the default timeout is 15 seconds. Properties Parameter\tDescriptionId * String\tA unique identifier for the payment terminal. Code example //Create and init a new Datecs Device Device dev = new Device(\"CardReader7\", \"08:00:69:02:01:FC\", \"1\", ConnectionMethod.BLUETOOTH); //Create and init a new PAX/Telpo Device for a CLOUD connection Device dev = new Device(\"CloudDevice\", \"9822032398-PAXA920\", \"\", ConnectionMethod.CLOUD); // The address is the composition of the serial number and model ot the target device. //Example for a PAX A920 device: serial_number - model -> 9822032398-PAXA920 //Create and init a new PAX/Telpo Device for a ANDROID_PAYMENT connection Device dev = new Device(\"LocalPaxOrTelpo\", \"LocalHost\", \"\", ConnectionMethod.ANDROID_PAYMENT); Copy "},{"title":"Device Status​","type":1,"pageTitle":"Objects","url":"android/androidobjects#33","content":"DeviceStatus A class which holds the status of the payment terminal. Properties Parameter\tDescriptionSerialNumber String\tGets the serial number of the payment terminal BatteryStatus String\tGets the battery status of the payment terminal (in percentages) BatterymV String\tGets the battery voltage of the payment terminal BatteryCharging String\tGets the battery charging status of the payment terminal ExternalPower String\tGets the status of the payment terminal external power ApplicationName String\tGets the application name of the payment terminal ApplicationVersion String\tGets the application version of the payment terminal "},{"title":"Device Parameter​","type":1,"pageTitle":"Objects","url":"android/androidobjects#device-parameter","content":"DeviceParameter An enum describing all the admin commands to send to a payment terminal. Possible values BluetoothName BluetoothPass SystemTimeout ScreenTimeout SignatureTimeout "},{"title":"Merchant Auth Credential​","type":1,"pageTitle":"Objects","url":"android/androidobjects#40","content":"Credential An object to store credentials (Acquirer, Mid, Tid, MCC and ExternalId) for merchant authentication. Properties Parameter\tDescriptionacquirer Acquirer If present, it links this credential to the specified acquirer. Required if more than one credential is provided. mid String\tFor this transaction, overrides the default MID (merchant ID) saved in the terminal configuration. tid String\tFor this transaction, overrides the default TID (terminal ID) saved in the terminal configuration. mcc String\tMerchant Category Code, overrides the default MCC saved in the terminal configuration. ExternalId String\tFor this transaction, the External Id will be used to lookup the credential of the merchant in the Handpoint backend and process the transaction accordingly. The External id replaces the need to pass MID/TID/MCC as credentials Code example // Credential using Acquirer, MID, TID and MCC Credential credential1 = new Credential(); //Optionally credential1.setAcquirer(YOUR_ACQUIRER); //Optionally credential1.setMerchantId(mid); //Optionally credential1.setTerminalId(tid); //Optionally credential1.setMcc(mcc); // Credential using ExternalId Credential credential2 = new Credential(); credential2.setExternalId(externalId); Copy "},{"title":"Financial Status​","type":1,"pageTitle":"Objects","url":"android/androidobjects#34","content":"FinancialStatus An enum representing different statuses of a finalized transaction Possible values UNDEFINED AUTHORISED DECLINED PROCESSED FAILED CANCELLED PARTIAL_APPROVAL "},{"title":"Manufacturer​","type":1,"pageTitle":"Objects","url":"android/androidobjects#manufacturer","content":"Manufacturer A string representing different payment terminal supported manufacturers. Possible values INVALID DATECS PAX TELPO "},{"title":"Card Scheme Name​","type":1,"pageTitle":"Objects","url":"android/androidobjects#32","content":"CardSchemeName A string representing different card brands. Possible values MasterCard Visa Maestro American Express Discover JCB Diners UnionPay "},{"title":"Hapi Factory​","type":1,"pageTitle":"Objects","url":"android/androidobjects#hapi-factory","content":"HapiFactory A factory to provide a unified entrypoint and simplify the instantiation of the Hapi object. Methods Static factorygetAsyncInterface( Events.Required requiredListener , Context context , HandpointCredentials handpointCredentials ); Parameter\tNotesrequiredListener Required Events.Required\tA listener object to report the required events. context Required Context\tThe Android context. handpointCredentials Required HandpointCredentials\tAn object containing the actor's shared secret key or shared secret key AND Api Key for CLOUD connections. Code example //InitApi for Datecs devices or PAX/Telpo ConnectionMethod.ANDROID_PAYMENT public void InitApi() { String sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.getAsyncInterface(this, new HandpointCredentials(sharedSecret)); //The api is now initialized. Yay! we've even set a default shared secret } //InitApi for Cloud devices public void InitApi() { String sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; String apikey = \"This-Is-The-Merchant-Api-Key\"; api = HapiFactory.getAsyncInterface(this, new HandpointCredentials(sharedSecret, apikey)); //The api is now initialized. Yay! we've even set a default shared secret and the merchant Api Key! } Copy "},{"title":"Hapi Manager​","type":1,"pageTitle":"Objects","url":"android/androidobjects#hapi-manager","content":"HapiManager A static class containing information about the current status of the SDK Properties Parameter\tDescriptionDefaultSharedSecret String\tGets the default shared secret in use. LogLevel LogLevel\tGets the current log level of the SDK and payment terminal. inTransaction boolean\tChecks whether the SDK is in the middle of a transaction. True if the SDK is in a transaction, false otherwise. SdkVersion String\tGets the current SDK version. isTransactionResultPending boolean\tIn the case of a communication failure between the payment terminal and the SDK a TransactionResult might have not been delivered. This function checks if there is a pending TransactionResult. This field is only updated when connecting to a payment terminal. If this function returns true the TransactionResult (which includes the receipt) can be fetched.getPendingTransactionResult();. This function serves the same functionality as the event pendingTransactionResult(Device device), so every time this event is invoked, HapiManager.IsTransactionResultPending() is true until the result is fetched. Settings.AutomaticReconnection boolean\tWhen this property is set to true, the SDK will automatically try to reconnect to the payment terminal after a disconnection. The SDK internally maintains a reconnection thread which keeps on trying to connect until it succeeds. The delay between reconnections is exponentially increased on every new attempt. The default value for this property is true Code example //Check if the SDK is in transaction boolean inTransaction = HapiManager.inTransaction(someConnectedDevice); //Check the current logLevel LogLevel level = HapiManager.getLogLevel(); //Disable automatic reconnection feature HapiManager.Settings.AutomaticReconnection = false; Copy "},{"title":"Handpoint Credentials​","type":1,"pageTitle":"Objects","url":"android/androidobjects#43","content":"HandpointCredentials A class containing the credentials used to communicate with the payment terminal, the shared secret (always required) and Cloud API Key (ony required when using CLOUD connection method). Properties Parameter\tDescriptionsharedSecret String\tString the value of the Shared secret. CloudApiKey String\tString the value of the merchant Cloud API Key, only required when using CLOUD connection method Code example { String sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; HandpointCredentials handpointCredentials = new HandpointCredentials(sharedSecret); //We've even set a default shared secret! } { String sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; string apikey = \"This-Is-The-Merchant-Api-Key\"; HandpointCredentials handpointCredentials = new HandpointCredentials(sharedSecret, apikey); //We've even set a default shared secret and the merchant Api Key! } Copy "},{"title":"Log Level​","type":1,"pageTitle":"Objects","url":"android/androidobjects#18","content":"LogLevel An enum describing the different levels of logging available. Possible values None Info Full Debug "},{"title":"Optional Transaction Parameters​","type":1,"pageTitle":"Objects","url":"android/androidobjects#optional-transaction-parameters","content":"OptionalParameters A class containing optional transaction parameters supported by the payment terminal. Properties Parameter\tDescriptionBudget String\tBudget is only available for sale transactions. A String representing the key for a budget number.A budget number can be used to split up an amout over a period of months. The value has to be a String of 2 digits representing the number of months to split the transaction to. CustomerReference String\tCustomerReference is available for all transactions. A String representing the key for a customer reference.A customer reference can be used for an internal marking system. The value is sent as a String of a maximum 25 characters and received back when the transaction has been processed. "},{"title":"Print Error​","type":1,"pageTitle":"Objects","url":"android/androidobjects#29","content":"PrintError An enum representing different errors that can come from print action. Possible values Unexpected InvalidArgument CantConnectToPrinter NotSupported NoPermission PrinterDisabled NotWhitelisted Busy OutOfPaper DataPacketInvalid PrinterHasProblems PrinterOverheating PrintingUnfinished FontNotPresent FontFormatError TooLong BatteryTooLow PaperCutterError PaperCutterJam CoverOpen UnsupportedEncoding "},{"title":"Payment Scenario​","type":1,"pageTitle":"Objects","url":"android/androidobjects#35","content":"PaymentScenario An enum representing different types of scenario. Possible values UNKNOWN MAGSTRIPE MAGSTRIPECONTACTLESS CHIP CHIPCONTACTLESS CHIPFAILMAGSTRIPE "},{"title":"Settings​","type":1,"pageTitle":"Objects","url":"android/androidobjects#settings","content":"Settings An Object holding the SDK initialization settings Properties Parameter\tDescriptionautomaticReconnection boolean\tWhen this property is set to true, the SDK will automatically try to reconnect to the terminal after disconnection. The SDK maintains internally a reconnection thread which keeps on trying to connect until it succeeds. The delay between reconnections is exponentially increased on every new attempt. The default value for this property is false autoRecoverTransactionResult boolean\tThe default value for this property is false sendToDeviceMaxAttempts Integer\tNumber of retry attemps when there is an error communicating with the card reader. The default value for this property is 3 timeBetweenAttempts Integer\tTime in milliseconds between attempts. The default value for this property is 5000 showSDKUIComponents boolean\tThe default value for this property is false getReceiptsAsURLs boolean\tThe default value for this property is false "},{"title":"Signature Request​","type":1,"pageTitle":"Objects","url":"android/androidobjects#signature-request","content":"SignatureRequest A class containing information about a signature verification. Properties Parameter\tDescriptiontimeout int\tint the value of the timeout in seconds. MerchantReceipt String\tString the merchant receipt as html. "},{"title":"Status Info​","type":1,"pageTitle":"Objects","url":"android/androidobjects#status-info","content":"statusInfo A class containing information about the status of the transaction. Properties Parameter\tDescriptionisCancelAllowed Boolean\tA boolean letting the integrator know if the terminal will accept a stop transaction request. status Status\tA Status enum representing the status of the transaction. cardLanguage SupportedLocales\tThe card language preference in all supported locales. multiLanguageMessages Map\tmap containing the status message in a human readable format in all the supported locales. message String\tA String containing the status message of the transaction. deviceStatus DeviceStatus\tA DeviceStatus object containing information about the payment terminal. "},{"title":"Status​","type":1,"pageTitle":"Objects","url":"android/androidobjects#45","content":"status An enum containing information about the status of a transaction. Possible values Undefined Success InvalidData ProcessingError CommandNotAllowed NotInitialised ConnectTimeout ConnectError SendingError ReceivingError NoDataAvailable TransactionNotAllowed UnsupportedCurrency NoHostAvailable CardReaderError CardReadingFailed InvalidCard InputTimeout UserCancelled InvalidSignature WaitingForCard CardInserted ApplicationSelection ApplicationConfirmation AmountValidation PinInput ManualCardInput WaitingForCardRemoval TipInput SharedSecretInvalid SharedSecretAuth WaitingSignature WaitingHostConnect WaitingHostSend WaitingHostReceive WaitingHostDisconnect PinInputCompleted PosCancelled RequestInvalid CardCancelled CardBlocked RequestAuthTimeout RequestPaymentTimeout ResponseAuthTimeout ResponsePaymentTimeout IccCardSwiped RemoveCard ScannerIsNotSupported ScannerEvent BatteryTooLow AccountTypeSelection BtIsNotSupported PaymentCodeSelection PartialApproval AmountDueValidation InvalidUrl WaitingCustomerReceipt PrintingMerchantReceipt PrintingCustomerReceipt UpdateStarted UpdateFinished UpdateFailed UpdateProgress WaitingHostPostSend WaitingHostPostReceive Rebooting PrinterOutOfPaper ErrorConnectingToPrinter CardTapped ReceiptPrintSuccess InvalidPinLength OfflinePinAttempt OfflinePinLastAttempt ProcessingSignature CardRemoved TipEntered CardLanguagePreference AutomaticPrintingStarted CancelOperationNotAllowed UpdateSoftwareStarted UpdateSoftwareFinished UpdateSoftwareFailed UpdateSoftwareProgress InstallSoftwareStarted InstallSoftwareFinished InstallSoftwareFailed InstallSoftwareProgress UpdateConfigStarted UpdateConfigFinished UpdateConfigFailed UpdateConfigProgress InitialisationComplete "},{"title":"Supported Locales​","type":1,"pageTitle":"Objects","url":"android/androidobjects#23","content":"SupportedLocales An enum of the SDK supported languages. Possible values en_CA en_UK en_US es_ES hr_HR is_IS fr_FR pt_PT "},{"title":"PAX A80 keys​","type":1,"pageTitle":"Objects","url":"android/androidobjects#28","content":"PaxA80Keys A string representing the PAX A80 physical keyboard keys. Possible values 0 1 2 3 4 5 6 7 8 9 GREEN ORANGE RED FUNC options SaleOptions "},{"title":"Tender Type​","type":1,"pageTitle":"Objects","url":"android/androidobjects#36","content":"TenderType An enum representing different tender types. Possible values NOT_SET CREDIT DEBIT "},{"title":"Tip Configuration​","type":1,"pageTitle":"Objects","url":"android/androidobjects#39","content":"TipConfiguration Constructor TipConfiguration( String tipAmount ); Parameter\tNotestipAmount String\tIf present, the amount of the tip to be used for the transaction. Properties Parameter\tDescriptionamount BigInteger\tTransaction amount in the minor unit of currency (f.ex. 1000 is 10.00 GBP). baseAmount BigInteger\tBase amount used to calculate the tip - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). If no base amount is defined, the transaction amount is used as base amount. headerName String\tName of the tipping menu appearing on the terminal. Default: Tip tipPercentages List<Integer>\tList of percentages used to calculate the tip amount. REQUIRED enterAmountEnabled Boolean\tFlag used to enable the cardholder to manually enter the tip amount. Default: true skipEnabled Boolean\tFlag used to enable the cardholder to skip the tipping step. Default: true footer String\tFooter note which will appear on the tipping menu. Default: Empty string Code example { \"amount\": \"2000\", \"baseAmount\": \"2000\", \"headerName\": \"\", \"tipPercentages\": [5,10,15,20,25], \"enterAmountEnabled\": true, \"skipEnabled\": false, \"footer\": \"Thank you!!! ;)\" } Copy "},{"title":"Transaction Type​","type":1,"pageTitle":"Objects","url":"android/androidobjects#31","content":"TransactionType An enum representing different types of transactions. Possible values UNDEFINED SALE VOID_SALE REFUND VOID_REFUND REVERSAL CANCEL_SALE CANCEL_REFUND TOKENIZE_CARD SALE_AND_TOKENIZE_CARD CARD_PAN "},{"title":"Type of Result​","type":1,"pageTitle":"Objects","url":"android/androidobjects#30","content":"TypeOfResult An enum representing different types of device reports. Possible values STATUS REPORT BLUETOOTHNAME EMVCONFIGURATION "},{"title":"Verification Method​","type":1,"pageTitle":"Objects","url":"android/androidobjects#38","content":"VerificationMethod An enum representing different verification methods used in the transaction. Possible values UNDEFINED SIGNATURE PIN PIN_SIGNATURE FAILED NOT_REQUIRED MOBILE_PASS_CODE "},{"title":"Events","type":0,"sectionRef":"#","url":"ios/iosevents","content":"","keywords":""},{"title":"didConnect​","type":1,"pageTitle":"Events","url":"ios/iosevents#20","content":"didConnect Called when a connection to the client has been established through the method clientForDevice. Parameters Parameter\tNotesclient Required HeftClient\tYes [default] to activate multiScan mode - No to activate singleScan mode. Multi-scan mode allows the user to scan until scan operation is canceled or timeout occurs, single-scan mode is active until one scan has occurred then it disables the scan mode. Code example //didConnect: //Called when a connection to specified device was created. -(void)didConnect:(id<HeftClient>)client { // connected successfully to a device // assign the client to our heftClient property heftClient = client; } Copy "},{"title":"didDiscoverFinished​","type":1,"pageTitle":"Events","url":"ios/iosevents#37","content":"didDiscoverFinished When the modal window from startDiscovery is closed then this event is called. Code example //didDiscoverFinished // This function gets called when discovery is finished - (void)didDiscoverFinished; { NSLog(@\"Discover finished\"); //Stop search activity indicator or other desired functions } Copy "},{"title":"didFindAccessoryDevice​","type":1,"pageTitle":"Events","url":"ios/iosevents#38","content":"didFindAccessoryDevice Notifies that new accessory device was found. When a card reader is detected this delegate is called. You can take the newDevice object and create a new heft client for that particular device or store it in memory to connect to it later. Parameters Parameter\tNotesnewDevice Required HeftRemoteDevice\tAn object containing a reference to the accessory device Code example //didFindAccessoryDevice //Delegate that notifies that new accessory device was found. - (void)didFindAccessoryDevice:(HeftRemoteDevice*)newDevice { NSLog(@\"Found new device\"); //Connect to device or store found device for later } Copy "},{"title":"didLostAccessoryDevice​","type":1,"pageTitle":"Events","url":"ios/iosevents#39","content":"didLostAccessoryDevice Notifies that accessory device was disconnected. Parameters Parameter\tNotesoldDevice Required HeftRemoteDevice\tAn object containing a reference to the accessory device Code example //didLostAccessoryDevice //Delegate that notifies that accessory device was disconnected - (void)didLostAccessoryDevice:(HeftRemoteDevice*)oldDevice { NSLog(@\"Device disconnected\"); //Remove device from devices array [heftManager.devicesCopy removeObject:oldDevice]; //Do some cleanup after disconnecting if necessary } Copy "},{"title":"responseStatus​","type":1,"pageTitle":"Events","url":"ios/iosevents#14","content":"responseStatus Called to inform about the status of the transaction, several calls can be expected. Several calls to this method happen after a transaction is initiated from the HeftClient to inform about status of operation. The info object contains a string (status) and a dictionary (xml). Parameters Parameter\tNotesinfo Required ResponseInfo\tIncludes status code, status text and detailed xml. Code example //responseStatus: //Called to inform about the status of the transaction -(void)esponseStatus:(id<ResponseInfo>)info { NSLog(info.status); NSLog(info.xml.description); } Copy "},{"title":"responseFinanceStatus​","type":1,"pageTitle":"Events","url":"ios/iosevents#16","content":"responseFinanceStatus Notifies that transaction has completed. Parameters Parameter\tNotesinfo Required FinanceResponseInfo\tInformation about current transaction status. Code example //responseFinanceStatus: //Called at the end of transaction to inform about the result of the operation -(void)responseFinanceStatus:(id<FinanceResponseInfo>)info { NSLog(info.status); NSLog(info.customerReceipt); //print receipts } Copy "},{"title":"responseError​","type":1,"pageTitle":"Events","url":"ios/iosevents#15","content":"responseError Called to inform about the status of the transaction, several calls can be expected. Several calls to this method happen after a transaction is initiated from the HeftClient to inform about status of operation. The info object contains a string (status) and a dictionary (xml). Parameters Parameter\tNotesinfo Required ResponseInfo\tThe info object contains a string (status) and a dictionary (xml). Code example //responseError: //Called when to inform when an error response happens. -(void)responseError:(id<ResponseInfo>)info { NSLog(info.status); NSLog(info.xml.description); } Copy "},{"title":"requestSignature​","type":1,"pageTitle":"Events","url":"ios/iosevents#17","content":"requestSignature Is called if during a financial operation a signature from the customer is needed. The requestSignature delegate should be implemented to print out or display the receipt for the customer to sign and provide the merchant with the means to confirm the signature. Parameters Parameter\tNotesreceipt Required NSString\tThe receipt is a html formatted string containing a receipt for the customer to sign Code example //requestSignature: //Is called if a signature from the customer is needed. -(void)requestSignature:(NSString*)receipt { NSLog(receipt); //Display buttons to accept or decline customer signature UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@\"\" message:@\"sign?\" delegate:self cancelButtonTitle:@\"No\" otherButtonTitles:@\"Yes\", nil]; [alert show]; } Copy "},{"title":"cancelSignature​","type":1,"pageTitle":"Events","url":"ios/iosevents#40","content":"cancelSignature Called if the signature request times out. If the card reader does not receive an approval for the signature within a certain timeframe (45 sec) it cancels the transaction and sends a notification to the app. Code example //cancelSignature //Called if the signature request times out. -(void)cancelSignature { NSLog(@\"Signature request timed out\"); } Copy "},{"title":"responseScannerEvent​","type":1,"pageTitle":"Events","url":"ios/iosevents#41","content":"responseScannerEvent Called to inform that a scan has been performed, several calls can be expected. Parameters Parameter\tNotesinfo Required ScannerEventResponseInfo\tThe info object contains scanCode, status and a dictionary (xml). Code example //responseScannerEvent: //Called to inform that a scan has been performed -(void)responseScannerEvent:(id<ScannerEventResponseInfo>)info { NSLog(info.scanCode); //barcode scanned NSLog(info.xml.description); } Copy "},{"title":"responseScannerDisabled​","type":1,"pageTitle":"Events","url":"ios/iosevents#42","content":"responseScannerDisabled Called to notify that the scanner has been disabled. Parameters Parameter\tNotesinfo Required ScannerDisabledResponseInfo\tThe info object contains information about the scanner operation. Code example //responseScannerDisabled: //Called to notify that the scanner has been disabled. -(void)responseScannerDisabled:(id<ScannerDisabledResponseInfo>)info { NSLog(info.status); } Copy "},{"title":"responseLogInfo​","type":1,"pageTitle":"Events","url":"ios/iosevents#43","content":"responseLogInfo Called when logs have been downloaded from the card reader by using the logGetInfo method. Parameters Parameter\tNotesinfo Required LogInfo\tThe info object has the string property log which holds the log info in text with carriage returns. Code example //responseLogInfo: //Called when logs have been downloaded from the card reader by using the logGetInfo method. -(void)responseLogInfo:(id<LogInfo>)info { NSLog(info.log); //write to log file } Copy "},{"title":"responseRecoveredTransactionStatus​","type":1,"pageTitle":"Events","url":"ios/iosevents#44","content":"responseRecoveredTransactionStatus Notifies that a transaction has been recovered. This method is OPTIONAL and only required if retrievePendingTransaction will be called. Parameters Parameter\tNotesinfo Required FinanceResponseInfo\tInformation about the recovered transaction status. If an attempt was made to recover a transaction when none was pending then this parameter WILL be nil. Code example //responseRecoveredTransactionStatus: //Called when a pending transaction result has been recovered from the card reader - (void)responseRecoveredTransactionStatus:(id<FinanceResponseInfo>)info{ if(info != nil) { if(info.statusCode == EFT_PP_STATUS_SUCCESS) { NSLog(info.status); NSLog(info.customerReceipt); NSLog(info.merchantReceipt); // print receipts and/or save receipts in transaction log if(info.financialResult == EFT_FINANC_STATUS_TRANS_APPROVED){ // Process recovered authorized transaction result } else if(info.financialResult == EFT_FINANC_STATUS_TRANS_DECLINED) { // Process recovered declined transaction result } } else if(info.statusCode != EFT_PP_STATUS_NO_DATA_AVAILABLE) { // some other error was detected while waiting for a pending transaction result } } // else a pending transaction result was not found on the card reader } Copy "},{"title":"Card Reader Requirements​","type":1,"pageTitle":"Events","url":"ios/iosevents#card-reader-requirements","content":"Version Requirements Card reader software v1.7.0+ and v2.1.7+ is required in order for this response to be received. "},{"title":"API Overview","type":0,"sectionRef":"#","url":"javascript/javascriptapioverview","content":"API Overview This API flow shows how easy it is to add card present payments to your cloud application. The interaction between your cloud application and the Handpoint JavaScript SDK is simple and streamlined. The Handpoint JavaScript SDK takes care of all of the communication with the terminal. The status messages are received in the WEB APP via the callback function defined in the Financial Operation requests call. That’s it. The Handpoint JavaScript SDK shields your software from all sensitive cardholder data. With Handpoint JavaScript SDK, the transaction request goes from your software to Handpoint in the cloud. We steer the terminal from the cloud. All of the results come to your software via Handpoint in the cloud.","keywords":""},{"title":"Integration Guide","type":0,"sectionRef":"#","url":"windows/Windows SDK 3.1.4/windowsintegrationguide","content":"","keywords":""},{"title":"Hilite & Hi5 - Bluetooth Integration​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#hilite--hi5---bluetooth-integration","content":""},{"title":"Introduction​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#introduction","content":"This tutorial is guiding you through all the steps to create a basic payment application for Windows devices integrated with a Datecs terminal. The new generation of Handpoint SDK's is designed to make your life easier. Simple and created for humans, it does not require any specific knowledge of the payment industry to be able to start accepting credit/debit card transactions. At Handpoint we take care of securing every transaction so you don´t have to worry about it while creating your application. We encrypt data from the payment terminal to the bank with our point-to-point encryption solution. Our platform is always up to the latest PCI-DSS security requirements. "},{"title":"Let's start programming!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-start-programming","content":"1. Create a C# classCreate a new C# class called MyClass and include com.handpoint.api as a dependency : using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass { } } Copy 2. Initialize the API using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass { Hapi api; public MyClass() { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); // The api is now initialized. Yay! we've even set a default shared secret! // The shared secret is a unique string shared between the card reader and your mobile application. // It prevents other people to connect to your card reader. // You should replace this default shared secret by the one sent by our support team. } } } Copy 3. Implement the mandatory Events(Events.Required) and per recommendation Status events (Events.Status) using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; public MyClass() { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { // Here you get a list of Bluetooth payment terminals paired with your computer } public void EndOfTransaction(TransactionResult transactionResult, Device device) { // The TransactionResult object holds details about the transaction as well as the receipts. // Useful information can be accessed through this object like the transaction ID, the amount, etc. } public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { // The ConnectionStatus object holds details about the status regarding the connection to the target device. } public void CurrentTransactionStatus(StatusInfo info, Device device) { // The StatusInfo object holds details about the status and step taken during the transaction. } public void SignatureRequired(SignatureRequest signatureRequest, Device device) { // You'll be notified here if a sale process needs a signature verification // A signature verification is needed if the cardholder uses an MSR or a chip & signature card // This method will not be invoked if a transaction is made with a Chip & PIN card api.SignatureResult(true); // This line means that the cardholder ALWAYS accepts to sign the receipt. // A specific line will be displayed on the merchant receipt for the cardholder to be able to sign it } public void HardwareStatusChanged(HardwareStatus status, ConnectionMethod hardware) { // Ignore, legacy event, will be deleted in future version. } } } Copy 4. Add a method to discover surrounding devices and connect to the card readerEnsure that the card reader and PC are correctly paired via bluetooth. public void DiscoverDevices() { api.ListDevices(ConnectionMethod.BLUETOOTH); // This triggers the search for all the bluetooth devices around. // You can also search for USB and Serial as a connection method } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { foreach (Device device in devices) { if (device.Name != null) { if (device.Name.Equals(\"PP0513901435\")) // Put the name of your device, find it by doing C then up arrow on your card reader keypad { this.device = device; //We'll remember the device for this session, it is nice if you would do that too api.Connect(this.device); //Connection to the device is handled automatically in the API } } } } Copy 5. Add a method to connect directly to the card readerInstead of discovering the surrounding devices you can also directly connect to the card reader by implementing the following method: public void DirectConnect() { Device device = new Device(\"PP0513901435\", \"68:AA:D2:00:D5:27\", \"\", ConnectionMethod.BLUETOOTH); //new Device(\"name\", \"address\", \"port\", ConnectionMethod); //The address always has to be written in UPPER CASE api.Connect(device); } Copy 6. Add a method to take payments public bool Pay() { return api.Sale(new BigInteger(1000), Currency.GBP); // Let´s start our first payment of 10 pounds } Copy 7. Add a method to disconnect from the card reader public void Disconnect() { api.Disconnect(); } Copy 8. Eventually, MyClass.cs must look like this after implementing all the necessary methods : using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; public MyClass(Form1 form1) { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); } public void DiscoverDevices() { api.SearchDevices(ConnectionMethod.BLUETOOTH); } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { foreach (Device device in devices) { if (device.Name != null) { if (device.Name.Equals(\"PP0513901435\")) { this.device = device; api.Connect(this.device); } } } } public void DirectConnect() { Device device = new Device(\"PP0513901435\", \"68:AA:D2:00:D5:27\", \"\", ConnectionMethod.BLUETOOTH); api.Connect(device); } public bool Pay() { return api.Sale(new BigInteger(1000), Currency.GPB); } public void Disconnect() { api.Disconnect(); } public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { Console.WriteLine(\"*** ConnectionStatus *** \" + status); } public void CurrentTransactionStatus(StatusInfo info, Device device) { Console.WriteLine(\"*** CurrentTransactionStatus *** \" + info.Status.ToString()); } public void SignatureRequired(SignatureRequest signatureRequest, Device device) { api.SignatureResult(true); } public void EndOfTransaction(TransactionResult result, Device device) { Console.WriteLine(\"*** EndOfTransaction *** \" + result.ToJSON()); } public void HardwareStatusChanged(HardwareStatus status, ConnectionMethod hardware) { //Ignore } } } Copy "},{"title":"Let's create a User Interface!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-create-a-user-interface","content":"1. Create buttons Go to your user interface (usually Form1.cs[Design])Select View > ToolboxIn the toolbox, under “Common Controls” drag and drop 3 button items to the user interfaceSelect \"button1\" > Right-Click > PropertiesChange the attribute \"Name\" from \"button1\" to \"PayButton\"Change the attribute \"text\" from \"button1\" to \"Pay Now\"Change the attribute \"Name\" from \"button2\" to \"ConnectButton\"Change the attribute \"text\" from \"button2\" to \"Connect To Card reader\"Change the attribute \"Name\" from \"button3\" to \"DisconnectButton\"Change the attribute \"text\" from \"button3\" to \"Disconnect From Card Reader\"Select View > Toolbox > Common Controls > LabelChange the attribute \"Name\" from \"label1\" to \"ConnectionLabel\"Change the attribute \"text\" from \"label1\" to \"Disconnected\"Change the attribute \"backColor\" from \"label1\" to \"Red\" 2. Create WebBrowsers Now that we have our 3 buttons, let´s create two webBrowsers items to display the merchant receipt as well as the cardholder´s receipt at the end of the transaction. Select View > Toolbox > Common Controls > WebBrowserDrag and drop two web browsers to the user interfaceSelect View > Toolbox > Common Controls > LabelDrag and drop two labels to the user interface in order to identify the webBrowser itemsChange the attribute \"Name\" from the left webBrowser to \"MerchantReceiptBrowser\"Change the attribute \"Name\" from the right webBrowser to \"CardholderReceiptBrowser\"Change the attribute \"Name\" from \"label2\" to \"MerchantReceiptLabel\"Change the attribute \"text\" from \"label2\" to \"Merchant Receipt :\"Change the attribute \"Name\" from \"label3\" to \"CardholderReceiptLabel\"Change the attribute \"text\" from \"label3\" to \"Cardholder Receipt :\" "},{"title":"Let's link our user interface with methods!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-link-our-user-interface-with-methods","content":"1. Referencing the user interface(Form1.cs) in MyClass In MyClass.cs, create an instance of Form1 called UIClass and initialize it. Instantiate MyClass and add form1 as a parameter for the Class. class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; private Form1 uIClass; public MyClass(Form1 form1) { uIClass = form1; InitApi(); } [...] } Copy 2. Referencing Myclass in Form1.cs and link methods to the user interface Go to Form1.cs[Design] and double click on the button \"Pay Now\". By Double Clicking on it you created a method called PayButton_Click. Create a new instance of MyClass called \"my\" in Form1.cs then, inside the new method PayButton_Click call the Pay() method from MyClass. using System; using System.Drawing; using System.Windows.Forms; namespace GettingStartedApp { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void PayButton_Click(object sender, EventArgs e) { my.Pay(); } } } Copy Go back to Form1.cs[Design] and double click on each of the other buttons to automatically generate an OnClick method in Form1.cs. Link each of the buttons to the correct methods in MyClass.cs. using System; using System.Drawing; using System.Windows.Forms; namespace GettingStartedApp { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void PayButton_Click(object sender, EventArgs e) { my.Pay(); } private void ConnectButton_Click(object sender, EventArgs e) { //my.DiscoverDevices(); my.DirectConnect(); } private void DisconnectButton_Click(object sender, EventArgs e) { my.Disconnect(); } } } Copy "},{"title":"Let´s notify the user when the app is connected and ready to send the transaction​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-notify-the-user-when-the-app-is-connected-and-ready-to-send-the-transaction","content":"Update the ConnectionLabel to notify the user of the connection statusGet the connection status from the method ConnectionStatusChanged in MyClass.cs. public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { Console.WriteLine(\"*** ConnectionStatus *** \" + status); if (status == ConnectionStatus.Connected) { uIClass.UpdateLabel(true); } else { uIClass.UpdateLabel(false); } } public void CurrentTransactionStatus(StatusInfo info, Device device) { //Let also console log the status during the transaction Console.WriteLine(\"*** CurrentTransactionStatus *** \" + info.Status.ToString()); } Create the UpdateLabel method in Form1.cs public delegate void UpdateConnectionLabel(bool Connected); public void UpdateLabel(bool Connected) { //Only need to check for one of the webbrowsers if (ConnectionLabel.InvokeRequired) { UpdateConnectionLabel d = new UpdateConnectionLabel(UpdateLabel); this.Invoke(d, new object[] { Connected }); } else { if (Connected) { ConnectionLabel.Text = \"Connected\"; ConnectionLabel.BackColor = Color.Green; } else { ConnectionLabel.Text = \"Disconnected\"; ConnectionLabel.BackColor = Color.Red; } } } Copy "},{"title":"Let´s display the receipts at the end of a transaction!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-display-the-receipts-at-the-end-of-a-transaction","content":"1. Fetch the cardholder's and merchant receipts from the method EndOfTransaction in MyClassAt this point all the buttons are connected but we are still missing to display the receipts in the webBrowsers. First, let´s get the receipts from the method EndOfTransaction in myClass.cs. public void EndOfTransaction(TransactionResult transactionResult, Device device) { Console.WriteLine(\"*** EndOfTransaction *** \" + result.ToJSON()); uIClass.DisplayReceipts(result.MerchantReceipt, result.CustomerReceipt); } Copy 2. Create the DisplayReceipts method in form1.cs public delegate void UpdateReceiptsCallback(string MerchantReceipt, string CustomerReceipt); public void DisplayReceipts(string MerchantReceipt, string CustomerReceipt) { //Only need to check for one of the webbrowsers if (MerchantReceiptBrowser.InvokeRequired) { UpdateReceiptsCallback d = new UpdateReceiptsCallback(DisplayReceipts); this.Invoke(d, new object[] { MerchantReceipt, CustomerReceipt }); } else { MerchantReceiptBrowser.DocumentText = MerchantReceipt; CardholderReceiptBrowser.DocumentText = CustomerReceipt; } } Copy "},{"title":"Final Result!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#final-result","content":"Here is how MyClass.cs and Form1.cs must eventually look like : 1. MyClass.cs : using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; private Form1 uIClass; public MyClass(Form1 form1) { uIClass = form1; InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); } public void DiscoverDevices() { api.SearchDevices(ConnectionMethod.BLUETOOTH); } public void DirectConnect() { Device device = new Device(\"PP0513901435\", \"68:AA:D2:00:D5:27\", \"\", ConnectionMethod.BLUETOOTH); api.Connect(device); } public bool Pay() { return api.Sale(new BigInteger(1000), Currency.GBP); } public void Disconnect() { api.Disconnect(); } public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { Console.WriteLine(\"*** ConnectionStatus *** \" + status); if (status == ConnectionStatus.Connected) { uIClass.UpdateLabel(true); } else { uIClass.UpdateLabel(false); } } public void CurrentTransactionStatus(StatusInfo info, Device device) { //Let's log also the status during the transaction Console.WriteLine(\"*** CurrentTransactionStatus *** \" + info.Status.ToString()); } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { foreach (Device device in devices) { if (device.Name != null) { if (device.Name.Equals(\"PP0513901435\")) { this.device = device; api.Connect(this.device); } } } } public void EndOfTransaction(TransactionResult result, Device device) { Console.WriteLine(\"*** EndOfTransaction *** \" + result.ToJSON()); uIClass.DisplayReceipts(result.MerchantReceipt, result.CustomerReceipt); } public void SignatureRequired(SignatureRequest signatureRequest, Device device) { api.SignatureResult(true); // This line means that the cardholder ALWAYS accepts to sign the receipt. } public void HardwareStatusChanged(HardwareStatus status, ConnectionMethod hardware) { //Ignore } } } Copy 2. Form1.cs : using System; using System.Drawing; using System.Windows.Forms; namespace GettingStartedApp { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void PayButton_Click(object sender, EventArgs e) { my.Pay(); } private void ConnectButton_Click(object sender, EventArgs e) { my.DirectConnect(); } private void DisconnectButton_Click(object sender, EventArgs e) { my.Disconnect(); } public delegate void UpdateReceiptsCallback(string MerchantReceipt, string CustomerReceipt); public void DisplayReceipts(string MerchantReceipt, string CustomerReceipt) { //Only need to check for one of the webbrowsers if (MerchantReceiptBrowser.InvokeRequired) { UpdateReceiptsCallback d = new UpdateReceiptsCallback(DisplayReceipts); this.Invoke(d, new object[] { MerchantReceipt, CustomerReceipt }); } else { MerchantReceiptBrowser.DocumentText = MerchantReceipt; CardholderReceiptBrowser.DocumentText = CustomerReceipt; } } public delegate void UpdateConnectionLabel(bool connected); public void UpdateLabel(bool Connected) { //Only need to check for one of the webbrowsers if (ConnectionLabel.InvokeRequired) { UpdateConnectionLabel d = new UpdateConnectionLabel(UpdateLabel); this.Invoke(d, new object[] { Connected }); } else { if (Connected) { ConnectionLabel.Text = \"Connected\"; ConnectionLabel.BackColor = Color.Green; } else { ConnectionLabel.Text = \"Disconnected\"; ConnectionLabel.BackColor = Color.Red; } } } } } Copy "},{"title":"Let's run our program!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-run-our-program","content":"Run the program by clicking the \"play\" button : Click on \"Connect To Card Reader\", this can take a little bit of time (10 sec max) due to the fact that we are looking for all the devices around before connecting to a specific oneClick \"Pay Now\"Follow the instructions on the card readerWhen the transaction is finished, the receipts should be displayed in the webBrowsersClick on \"Disconnect From Card Reader\" to stop the connection with the card reader "},{"title":"PAX & Telpo - Cloud Integration​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#pax--telpo---cloud-integration","content":""},{"title":"Introduction​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#introduction-1","content":""},{"title":"Let's start programming!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-start-programming-1","content":"1. Create a C# class Create a new C# class called MyClass and include com.handpoint.api as a dependency : using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass { } } Copy 2. Initialize the API using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass { Hapi api; public MyClass() { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; string apikey = \"This-is-my-api-key-provided-by-Handpoint\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret, apikey)); // The api is now initialized. Yay! we've even set default credentials. // The shared secret is a unique string shared between the payment terminal and your application, it is a free field. // The Api key is a unique key per merchant used to authenticate the terminal against the Cloud. // You should replace the API key with the one sent by the Handpoint support team. } } } Copy 3. Implement the mandatory Events(Events.Required) and per recommendation Status events (Events.Status) using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; public MyClass() { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; string apikey = \"This-is-my-api-key-provided-by-Handpoint\" api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret, apikey)); } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { // here you get a list of payment terminals associated with the api key. } public void EndOfTransaction(TransactionResult transactionResult, Device device) { // The TransactionResult object holds details about the transaction as well as the receipts. // Useful information can be accessed through this object like the transaction ID, the amount, etc. } public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { // The ConnectionStatus object holds details about the status regarding the connection to the target device. } public void CurrentTransactionStatus(StatusInfo info, Device device) { // The StatusInfo object holds details about the status and step taken during the transaction. } public void SignatureRequired(SignatureRequest request, Device device) { // Ignore for a PAX/Telpo integration. The complete signature capture process // is already handled in the sdk, a dialog will prompt the user for a signature if required. // If a signature was entered, it should be printed on the receipts. } public void HardwareStatusChanged(HardwareStatus status, ConnectionMethod hardware) { // Ignore, legacy event, will be deleted in future version. } } } Copy 4. Add a method to list the terminals of your merchant and connect to one of themEnsure that the card reader and PC are correctly paired via Cloud connection. public void DiscoverDevices() { // This triggers the search for all the cloud devices related to your Api Key. api.SearchDevices(ConnectionMethod.CLOUD); } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { foreach (Device device in devices) { if (device.Name != null) { if (device.Name.Equals(\"9822032398-PAXA920\")) // Put the name of your device, it is the composition of: serial number - device model. // Example for a PAX A920 device: serial_number - model -> 9822032398-PAXA920 { this.myDevice = device; //We'll remember the device for this session, it is nice if you would do that too api.Connect(this.myDevice); //Connection to the device is handled automatically by the api } } } } Copy 5. Add a method to connect directly to the payment terminalInstead of discovering terminals you can also connect directly to one of them: public void DirectConnect() { Device device = new Device(\"CloudDevice\", \"9822032398-PAXA920\", \"\", ConnectionMethod.CLOUD); // new Device(\"name\", \"address\", \"port (optional)\", ConnectionMethod); // The address always has to be written in UPPER CASE // It is the composition of the serial number and model ot the payment terminal. // Example for a PAX A920 device: serial_number - model -> 9822032398-PAXA920 api.Connect(device); } Copy 6. Add a method to take payments public bool Pay() { return api.Sale(new BigInteger(1000), Currency.EUR); // Let´s start our first transaction for 10 euros // The amount should always be in the minor unit of the currency } Copy 7. Add a method to disconnect from the card reader public void Disconnect() { api.Disconnect(); } Copy 8. Eventually, MyClass.cs must look like this after implementing all the necessary methods : using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; public MyClass(Form1 form1) { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; string apikey = \"This-is-my-api-key-provided-by-Handpoint\" api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret, apikey)); } public void DiscoverDevices() { api.SearchDevices(ConnectionMethod.CLOUD); } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { foreach (Device device in devices) { if (device.Name != null) { if (device.Name.Equals(\"9822032398-PAXA920\")) { this.myDevice = device; api.Connect(this.myDevice); } } } } public void DirectConnect() { Device device = new Device(\"CloudDevice\", \"9822032398-PAXA920\", \"\", ConnectionMethod.CLOUD); api.Connect(device); } public bool Pay() { return api.Sale(new BigInteger(1000), Currency.EUR); } public void Disconnect() { api.Disconnect(); } public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { Console.WriteLine(\"*** ConnectionStatus *** \" + status); } public void CurrentTransactionStatus(StatusInfo info, Device device) { Console.WriteLine(\"*** CurrentTransactionStatus *** \" + info.Status.ToString()); } public void EndOfTransaction(TransactionResult result, Device device) { Console.WriteLine(\"*** EndOfTransaction *** \" + result.ToJSON()); } public void HardwareStatusChanged(HardwareStatus status, ConnectionMethod hardware) { //Ignore } public void SignatureRequired(SignatureRequest request, Device device) { //Ignore } } } Copy "},{"title":"Let's create a User Interface!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-create-a-user-interface-1","content":"1. Create buttons and labels Go to your user interface (usually Form1.cs[Design])Select View > ToolboxIn the toolbox, under “Common Controls” drag and drop 3 button items to the user interfaceSelect \"button1\" > Right-Click > PropertiesChange the attribute \"Name\" from \"button1\" to \"PayButton\"Change the attribute \"text\" from \"button1\" to \"Pay Now\"Change the attribute \"Name\" from \"button2\" to \"ConnectButton\"Change the attribute \"text\" from \"button2\" to \"Connect To Card reader\"Change the attribute \"Name\" from \"button3\" to \"DisconnectButton\"Change the attribute \"text\" from \"button3\" to \"Disconnect From Card Reader\"Select View > Toolbox > Common Controls > LabelChange the attribute \"Name\" from \"label1\" to \"ConnectionLabel\"Change the attribute \"text\" from \"label1\" to \"Disconnected\"Change the attribute \"backColor\" from \"label1\" to \"Red\" 2. Create WebBrowsersNow that we have our 3 buttons, let´s create two webBrowsers items to display the merchant receipt as well as the cardholder´s receipt at the end of the transaction. Select View > Toolbox > Common Controls > WebBrowserDrag and drop two web browsers to the user interfaceSelect View > Toolbox > Common Controls > LabelDrag and drop two labels to the user interface in order to identify the webBrowser itemsChange the attribute \"Name\" from the left webBrowser to \"MerchantReceiptBrowser\"Change the attribute \"Name\" from the right webBrowser to \"CardholderReceiptBrowser\"Change the attribute \"Name\" from \"label2\" to \"MerchantReceiptLabel\"Change the attribute \"text\" from \"label2\" to \"Merchant Receipt :\"Change the attribute \"Name\" from \"label3\" to \"CardholderReceiptLabel\"Change the attribute \"text\" from \"label3\" to \"Cardholder Receipt :\" "},{"title":"Let's link our user interface with methods!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-link-our-user-interface-with-methods-1","content":"1. Referencing the user interface(Form1.cs) in MyClass In MyClass.cs, create an instance of Form1 called UIClass and initialize it. Instantiate MyClass and add form1 as a parameter for the Class. class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; private Form1 uIClass; public MyClass(Form1 form1) { uIClass = form1; InitApi(); } [...] } Copy 2. Referencing Myclass in Form1.cs and link methods to the user interfaceGo to Form1.cs[Design] and double click on the button \"Pay Now\". By Double Clicking on it you created a method called PayButton_Click. Create a new instance of MyClass called \"my\" in Form1.cs then, inside the new method PayButton_Click call the Pay() method from MyClass. using System; using System.Drawing; using System.Windows.Forms; namespace GettingStartedApp { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void PayButton_Click(object sender, EventArgs e) { my.Pay(); } } } Copy Go back to Form1.cs[Design] and double click on each of the other buttons to automatically generate an OnClick method in Form1.cs. Link each of the buttons to the correct methods in MyClass.cs. using System; using System.Drawing; using System.Windows.Forms; namespace GettingStartedApp { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void PayButton_Click(object sender, EventArgs e) { my.Pay(); } private void ConnectButton_Click(object sender, EventArgs e) { //my.DiscoverDevices(); my.DirectConnect(); } private void DisconnectButton_Click(object sender, EventArgs e) { my.Disconnect(); } } } Copy "},{"title":"Let´s notify the user when the app is connected and ready to send the transaction​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-notify-the-user-when-the-app-is-connected-and-ready-to-send-the-transaction-1","content":"1. Update the ConnectionLabel to notify the user of the connection statusGet the connection status from the method ConnectionStatusChanged in MyClass.cs. public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { Console.WriteLine(\"*** ConnectionStatus *** \" + status); if (status == ConnectionStatus.Connected) { uIClass.UpdateLabel(true); } else { uIClass.UpdateLabel(false); } } public void CurrentTransactionStatus(StatusInfo info, Device device) { //Let also console log the status during the transaction Console.WriteLine(\"*** CurrentTransactionStatus *** \" + info.Status.ToString()); } Copy 2. Create the UpdateLabel method in Form1.cs public delegate void UpdateConnectionLabel(bool Connected); public void UpdateLabel(bool Connected) { //Only need to check for one of the webbrowsers if (ConnectionLabel.InvokeRequired) { UpdateConnectionLabel d = new UpdateConnectionLabel(UpdateLabel); this.Invoke(d, new object[] { Connected }); } else { if (Connected) { ConnectionLabel.Text = \"Connected\"; ConnectionLabel.BackColor = Color.Green; } else { ConnectionLabel.Text = \"Disconnected\"; ConnectionLabel.BackColor = Color.Red; } } } Copy "},{"title":"Let´s display the receipts at the end of a transaction!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-display-the-receipts-at-the-end-of-a-transaction-1","content":"1. Fetch the cardholder's and merchant receipts from the method EndOfTransaction in MyClassAt this point all the buttons are connected but we are still missing to display the receipts in the webBrowsers. First, let´s get the receipts from the method EndOfTransaction in myClass.cs. public void EndOfTransaction(TransactionResult transactionResult, Device device) { Console.WriteLine(\"*** EndOfTransaction *** \" + result.ToJSON()); uIClass.DisplayReceipts(result.MerchantReceipt, result.CustomerReceipt); } Copy 2. Create the DisplayReceipts method in Form1.cs public delegate void UpdateReceiptsCallback(string MerchantReceipt, string CustomerReceipt); public void DisplayReceipts(string MerchantReceipt, string CustomerReceipt) { //Only need to check for one of the webbrowsers if (MerchantReceiptBrowser.InvokeRequired) { UpdateReceiptsCallback d = new UpdateReceiptsCallback(DisplayReceipts); this.Invoke(d, new object[] { MerchantReceipt, CustomerReceipt }); } else { MerchantReceiptBrowser.DocumentText = MerchantReceipt; CardholderReceiptBrowser.DocumentText = CustomerReceipt; } } Copy "},{"title":"Final Result!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#final-result-1","content":"Here is how MyClass.cs and Form1.cs must eventually look like: 1. MyClass.cs : using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; private Form1 uIClass; public MyClass(Form1 form1) { uIClass = form1; InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; string apikey = \"This-is-my-api-key-provided-by-Handpoint\" api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret, apikey)); } public void DiscoverDevices() { api.SearchDevices(ConnectionMethod.CLOUD); } public void DirectConnect() { Device device = new Device(\"CloudDevice\", \"0821032398-PAXA920\", \"\", ConnectionMethod.CLOUD); api.Connect(device); } public bool Pay() { return api.Sale(new BigInteger(1000), Currency.EUR); } public void Disconnect() { api.Disconnect(); } public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { Console.WriteLine(\"***ConnectionStatus*** \" + status); if (status == ConnectionStatus.Connected) { uIClass.UpdateLabel(true); } else { uIClass.UpdateLabel(false); } } public void CurrentTransactionStatus(StatusInfo info, Device device) { //Let's log also the status during the transaction Console.WriteLine(\"*** CurrentTransactionStatus *** \" + info.Status.ToString()); } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { foreach (Device device in devices) { if (device.Name != null) { if (device.Name.Equals(\"0821032398-PAXA920\")) { this.myDevice = device; api.Connect(this.myDevice); } } } } public void EndOfTransaction(TransactionResult result, Device device) { Console.WriteLine(\"*** EndOfTransaction *** \" + result.ToJSON()); uIClass.DisplayReceipts(result.MerchantReceipt, result.CustomerReceipt); } public void HardwareStatusChanged(HardwareStatus status, ConnectionMethod hardware) { //Ignore } public void SignatureRequired(SignatureRequest request, Device device) { //Ignore } } } Copy 2. Form1.cs :  using System; using System.Drawing; using System.Windows.Forms; namespace GettingStartedApp { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void PayButton_Click(object sender, EventArgs e) { my.Pay(); } private void ConnectButton_Click(object sender, EventArgs e) { my.DirectConnect(); } private void DisconnectButton_Click(object sender, EventArgs e) { my.Disconnect(); } public delegate void UpdateReceiptsCallback(string MerchantReceipt, string CustomerReceipt); public void DisplayReceipts(string MerchantReceipt, string CustomerReceipt) { //Only need to check for one of the webbrowsers if (MerchantReceiptBrowser.InvokeRequired) { UpdateReceiptsCallback d = new UpdateReceiptsCallback(DisplayReceipts); this.Invoke(d, new object[] { MerchantReceipt, CustomerReceipt }); } else { MerchantReceiptBrowser.DocumentText = MerchantReceipt; CardholderReceiptBrowser.DocumentText = CustomerReceipt; } } public delegate void UpdateConnectionLabel(bool connected); public void UpdateLabel(bool Connected) { //Only need to check for one of the webbrowsers if (ConnectionLabel.InvokeRequired) { UpdateConnectionLabel d = new UpdateConnectionLabel(UpdateLabel); this.Invoke(d, new object[] { Connected }); } else { if (Connected) { ConnectionLabel.Text = \"Connected\"; ConnectionLabel.BackColor = Color.Green; } else { ConnectionLabel.Text = \"Disconnected\"; ConnectionLabel.BackColor = Color.Red; } } } } } Copy "},{"title":"Let's run our program!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-run-our-program-1","content":"Run the program by clicking the \"play\" button : Click on \"Connect To Card Reader\", this can take a little bit of time (10 sec max) due to the fact that we are looking for all the devices around before connecting to a specific oneClick \"Pay Now\"Follow the instructions on the card readerWhen the transaction is finished, the receipts should be displayed in the webBrowsersClick on \"Disconnect From Card Reader\" to stop the connection with the card reader "},{"title":"Terminal Simulator Integration​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#terminal-simulator-integration","content":""},{"title":"Introduction​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#introduction-2","content":"This tutorial is guiding you through all the steps to create a basic payment application for Windows using a card reader simulator. The simulator only has limited capabilities and we highly recommend that you order a development kit if you want to carry a full integration. The development kit contains a card reader as well as a test card and will allow you to test your integration from end to end. The new generation of Handpoint SDK's is designed to make your life easier. Simple and created for humans, it does not require any specific knowledge of the payment industry to be able to start accepting credit/debit card transactions. At Handpoint we take care of securing every transaction so you don´t have to worry about it while creating your application. We encrypt data from the payment terminal to the bank with our point-to-point encryption solution. Our platform is always up to the latest PCI-DSS security requirements. "},{"title":"Connecting to the simulator​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#connecting-to-the-simulator","content":"The SDK offers a method in which you will need to specify the card reader to be used: hapi.useDevice(new Device(\"Name\", \"Port\", \"Address\", ConnectionMethod.****)) Copy Simply set the ConnectionMethod to Simulator, i.e. ConnectionMethod.Simulator. The SDK does the rest. You don't need to search via bluetooth for surrounding card readers when using the simulator. hapi.useDevice(new Device(\"Name\", \"Port\", \"Address\", ConnectionMethod.Simulator)) Copy "},{"title":"Controlling responses​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#controlling-responses","content":"The simulator mimics the card reader as much as possible regarding information flow from the SDK interface to your application. It will return all the transaction statuses, transaction results and receipts. Results of a transaction are controlled by the amount sent into the sale function: The 3rd position from the right sets the desired financial status, 0 = Authorized and 1 = Declined. The 4th position from the right sets the desired verification method, 0 = Signature and 1 = PIN. hapi.Sale(X10XX, Currency.GBP); // amount = X 10 XX - where X represents an integer [0;9] Copy X 00 XX = Signature authorizedX 01 XX = Signature declinedX 10 XX = Pin authorizedX 11 XX = Pin declined "},{"title":"Let's start programming!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-start-programming-2","content":"1. Create a C# classCreate a new C# class called MyClass and include com.handpoint.api as a dependency :  using System; using System.Collections.Generic; using System.Linq; using System.Text; using com.handpoint.api; namespace GettingStartedWithSimulator { class MyClass { } } Copy 2. Initialize the API  using System; using System.Collections.Generic; using System.Linq; using System.Text; using com.handpoint.api; namespace GettingStartedWithSimulator { class MyClass { Hapi api; public MyClass() { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); // The api is now initialized. Yay! we've even set a default shared secret! // The shared secret is a unique string shared between the card reader and your mobile application. // It prevents other people to connect to your card reader. } } } Copy 3. Implement the mandatory Events(Events.Required)  using System; using System.Collections.Generic; using System.Linq; using System.Text; using com.handpoint.api; namespace GettingStartedWithSimulator { class MyClass : Events.Required { Hapi api; public MyClass() { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); // The api is now initialized. Yay! we've even set a default shared secret! // The shared secret is a unique string shared between the card reader and your mobile application // It prevents other people to connect to your card reader } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { // Only needed when using a payment terminal //here you get a list of Bluetooth payment terminals paired with your PC // You can also get a list of serial / USB payment terminals attached to your computer } public void SignatureRequired(SignatureRequest signatureRequest, Device device) { // You'll be notified here if a sale process needs a signature verification // A signature verification is needed if the cardholder uses an MSR or a chip & signature card // This method will not be invoked if a transaction is made with a Chip & PIN card api.SignatureResult(true); // This line means that the cardholder ALWAYS accepts to sign the receipt // A specific line will be displayed on the merchant receipt for the cardholder to be able to sign it } public void EndOfTransaction(TransactionResult transactionResult, Device device) { // The object TransactionResult holds the different receipts // Other information can be accessed through this object like the transaction ID, the amount... } } } Copy 4. Add a method to connect to the simulator  public void Connect() { Device device = new Device(\"Name\", \"Address\", \"Port\", ConnectionMethod.SIMULATOR); api.UseDevice(device); } Copy 5. Add a method to take payments with the simulator The simulator mimics the card reader as much as possible regarding the information flow from the SDK interface to your application. The results of the transaction (declined, authorized) and the type of verification method (PIN, signature) will depend on the amount used. You can get different responses from the simulator by setting different values for the amount parameter, e.g. for a Sale function :  api.Sale(X10XX, Currency.GBP); // amount = X 10 XX - where X represents an integer [0;9] Copy Amount Values X00XX = Signature authorizedX01XX = Signature declinedX10XX = PIN authorizedX11XX = PIN declined The 3rd number from right sets desired financial status, Authorized or Declined. Default status is Authorized. The 4th number from right sets desired verification method, Signature or PIN. Default method is Signature. Let´s add 4 methods to MyClass in order to represent the 4 cases above :  using System; using System.Collections.Generic; using System.Linq; using System.Text; using com.handpoint.api; namespace GettingStartedWithSimulator { class MyClass : Events.Required { Hapi api; public MyClass() { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); // The api is now initialized. Yay! we've even set a default shared secret! // The shared secret is a unique string shared between the card reader and your mobile application. // It prevents other people to connect to your card reader. } public void **[*deviceDiscoveryFinished*](#13)**(List <Device> devices) { // Only needed when using a payment terminal //Here you get a list of Bluetooth payment terminals paired with your PC // You can also get a list of serial / USB payment terminals attached to your computer } public void Connect() { Device device = new Device(\"Name\", \"Address\", \"Port\", ConnectionMethod.SIMULATOR); api.UseDevice(device); } public bool PayWithSignatureAuthorized() { return api.Sale(new BigInteger(\"10000\"), Currency.GBP); // amount X00XX where X represents an integer [0;9] --> Signature authorized } public bool PayWithSignatureDeclined() { return api.Sale(new BigInteger(\"10100\"), Currency.GBP); // amount X01XX where X represents an integer [0;9] --> Signature declined } public bool PayWithPinAuthorized() { return api.Sale(new BigInteger(\"11000\"), Currency.GBP); // amount X10XX where X represents an integer [0;9] --> PIN authorized } public bool PayWithPinDeclined() { return api.Sale(new BigInteger(\"11100\"), Currency.GBP); // amount X11XX where X represents an integer [0;9] --> PIN declined } public void SignatureRequired(SignatureRequest signatureRequest, Device device) { // You'll be notified here if a sale process needs a signature verification // A signature verification is needed if the cardholder uses an MSR or a chip & signature card // This method will not be invoked if a transaction is made with a Chip & PIN card api.SignatureResult(true); // This line means that the cardholder ALWAYS accepts to sign the receipt. // A specific line will be displayed on the merchant receipt for the cardholder to be able to sign it } public void EndOfTransaction(TransactionResult transactionResult, Device device) { // The object TransactionResult stores the different receipts // Other information can be accessed through this object like the transaction ID, the amount... } } } Copy "},{"title":"Let's create a User Interface!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-create-a-user-interface-2","content":"1. Create buttons Go to your user interface (usually Form1.cs[Design])Select View > ToolboxIn the toolbox, under “Common Controls” drag and drop 5 button items to the user interfaceSelect \"button1\" > Right-Click > PropertiesChange the attribute \"Name\" from \"button1\" to \"ConnectToSimulator\"Change the attribute \"text\" from \"button1\" to \"Connect To Simulator\"Change the attribute \"Name\" from \"button2\" to \"PayWithSignatureAuthorized\"Change the attribute \"text\" from \"button2\" to \"Pay With Signature Authorized\"Change the attribute \"Name\" from \"button3\" to \"PayWithSignatureDeclined\"Change the attribute \"text\" from \"button3\" to \"Pay With Signature Declined\"Change the attribute \"Name\" from \"button4\" to \"PayWithPinAuthorized\"Change the attribute \"text\" from \"button4\" to \"Pay With Pin Authorized\"Change the attribute \"Name\" from \"button5\" to \"PayWithPinDeclined\"Change the attribute \"text\" from \"button5\" to \"Pay With Pin Declined\" 2. Create WebBrowsers Now that we have our 5 buttons let´s create two webBrowsers items to display the merchant receipt as well as the cardholder´s receipt at the end of the transaction. Select View > Toolbox > Common Controls > WebBrowserDrag and drop two web browsers to the user interfaceSelect View > Toolbox > Common Controls > LabelDrag and drop two labels to the user interface in order to identify the webBrowser itemsChange the attribute \"Name\" from the left webBrowser to \"MerchantReceiptBrowser\"Change the attribute \"Name\" from the right webBrowser to \"CardholderReceiptBrowser\"Change the attribute \"Name\" from \"label1\" to \"MerchantReceiptLabel\"Change the attribute \"text\" from \"label1\" to \"Merchant Receipt :\"Change the attribute \"Name\" from \"label2\" to \"CardholderReceiptLabel\"Change the attribute \"text\" from \"label2\" to \"Cardholder Receipt :\" "},{"title":"Let's link our user interface with methods!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-link-our-user-interface-with-methods-2","content":"1. Referencing the user interface(Form1.cs) in MyClass In MyClass.cs, create an instance of Form1 called UIClass and initialize it. Instantiate MyClass and add form1 as a parameter for the Class.  class MyClass : Events.Required { Hapi api; private Form1 UIClass; public MyClass(Form1 form1) { InitApi(); UIClass = form1; } Copy 2. Referencing Myclass in Form1.cs and link methods to the user interface Go to Form1.cs[Design] and double click on the button \"Connect To Simulator\". By Double Clicking on the \"Connect To Simulator\" button you created a method called ConnectToSimulator_Click. Create a new instance of MyClass called \"my\" in Form1.cs then, inside the new method ConnectToSimulator_Click call the Connect() method from MyClass.  using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Windows.Forms; namespace GettingStartedWithSimulator { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void ConnectToSimulator_Click(object sender, EventArgs e) { my.Connect(); } } } Copy Go back to Form1.cs[Design] and double click on each of the other buttons to automatically generate an OnClick method in Form1.cs. Link each of the buttons to the correct methods in MyClass.cs.  using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Windows.Forms; namespace GettingStartedWithSimulator { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void ConnectToSimulator_Click(object sender, EventArgs e) { my.Connect(); } private void PayWithSignatureAuthorized_Click(object sender, EventArgs e) { my.PayWithSignatureAuthorized(); } private void PayWithSignatureDeclined_Click(object sender, EventArgs e) { my.PayWithSignatureDeclined(); } private void PayWithPinAuthorized_Click(object sender, EventArgs e) { my.PayWithPinAuthorized(); } private void PayWithPinDeclined_Click(object sender, EventArgs e) { my.PayWithPinDeclined(); } } } Copy "},{"title":"Let´s display the receipts at the end of a transaction!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-display-the-receipts-at-the-end-of-a-transaction-2","content":"1. Fetch the cardholder's and merchant receipts from the method EndOfTransaction in MyClass At this point all the buttons are connected but we are still missing to display the receipts in the webBrowsers. First, let´s get the receipts from the method EndOfTransaction in myClass.cs.  public void EndOfTransaction(TransactionResult transactionResult, Device device) { UIClass.DisplayReceipts(transactionResult.MerchantReceipt, transactionResult.CustomerReceipt); } Copy 2. Create the DisplayReceipts method in form1.cs  public delegate void UpdateReceiptsCallback(string MerchantReceipt, string CustomerReceipt); public void DisplayReceipts(string MerchantReceipt, string CustomerReceipt) { //Only need to check for one of the webBrowsers if (MerchantReceiptBrowser.InvokeRequired) { UpdateReceiptsCallback d = new UpdateReceiptsCallback(DisplayReceipts); this.Invoke(d, new object[] { MerchantReceipt, CustomerReceipt }); } else { MerchantReceiptBrowser.DocumentText = MerchantReceipt; CardholderReceiptBrowser.DocumentText = CustomerReceipt; } } Copy "},{"title":"Final Result!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#final-result-2","content":"Here is how MyClass.cs and Form1.cs must eventually look like : 1. MyClass.cs :  using System; using System.Collections.Generic; using System.Linq; using System.Text; using com.handpoint.api; namespace GettingStartedWithSimulator { class MyClass : Events.Required { Hapi api; private Form1 UIClass; public MyClass(Form1 form1) { InitApi(); UIClass = form1; } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); // The api is now initialized. Yay! we've even set a default shared secret! // The shared secret is a unique string shared between the card reader and your mobile application. // It prevents other people to connect to your card reader. } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { // Only needed when using a payment terminal //Here you get a list of Bluetooth payment terminals paired with your PC // You can also get a list of serial / USB payment terminals attached to your computer } public void Connect() { Device device = new Device(\"Name\", \"Address\", \"Port\", ConnectionMethod.SIMULATOR); api.UseDevice(device); } public bool PayWithSignatureAuthorized() { return api.Sale(new BigInteger(\"10000\"), Currency.GBP); // amount X00XX where X represents an integer [0;9] --> Signature authorized } public bool PayWithSignatureDeclined() { return api.Sale(new BigInteger(\"10100\"), Currency.GBP); // amount X01XX where X represents an integer [0;9] --> Signature declined } public bool PayWithPinAuthorized() { return api.Sale(new BigInteger(\"11000\"), Currency.GBP); // amount X10XX where X represents an integer [0;9] --> PIN authorized } public bool PayWithPinDeclined() { return api.Sale(new BigInteger(\"11100\"), Currency.GBP); // amount X11XX where X represents an integer [0;9] --> PIN declined } public void SignatureRequired(SignatureRequest signatureRequest, Device device) { // You'll be notified here if a sale process needs a signature verification // A signature verification is needed if the cardholder uses an MSR or a chip & signature card // This method will not be invoked if a transaction is made with a Chip & PIN card api.SignatureResult(true); // This line means that the cardholder ALWAYS accepts to sign the receipt. // A specific line will be displayed on the merchant receipt for the cardholder to be able to sign it } public void EndOfTransaction(TransactionResult transactionResult, Device device) { UIClass.DisplayReceipts(transactionResult.MerchantReceipt, transactionResult.CustomerReceipt); } } } Copy 2. Form1.cs :  using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Windows.Forms; namespace GettingStartedWithSimulator { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void ConnectToSimulator_Click(object sender, EventArgs e) { my.Connect(); } private void PayWithSignatureAuthorized_Click(object sender, EventArgs e) { my.PayWithSignatureAuthorized(); } private void PayWithSignatureDeclined_Click(object sender, EventArgs e) { my.PayWithSignatureDeclined(); } private void PayWithPinAuthorized_Click(object sender, EventArgs e) { my.PayWithPinAuthorized(); } private void PayWithPinDeclined_Click(object sender, EventArgs e) { my.PayWithPinDeclined(); } public delegate void UpdateReceiptsCallback(string MerchantReceipt, string CustomerReceipt); public void DisplayReceipts(string MerchantReceipt, string CustomerReceipt) { //Only need to check for one of the webbrowsers if (MerchantReceiptBrowser.InvokeRequired) { UpdateReceiptsCallback d = new UpdateReceiptsCallback(DisplayReceipts); this.Invoke(d, new object[] { MerchantReceipt, CustomerReceipt }); } else { MerchantReceiptBrowser.DocumentText = MerchantReceipt; CardholderReceiptBrowser.DocumentText = CustomerReceipt; } } } } Copy "},{"title":"Let's run our program!​","type":1,"pageTitle":"Integration Guide","url":"windows/Windows SDK 3.1.4/windowsintegrationguide#lets-run-our-program-2","content":"Run the program by clicking the \"play\" button, click on \"Connect to simulator\" and then Click on one of the payment types available and have a look at the receipts! Voila! "},{"title":"Configuration","type":0,"sectionRef":"#","url":"javascript/javascriptconfiguration","content":"Configuration Getting started with the SDK is fast and easy. Simply download the Javascript SDK from here. Request a valid API key to start using the SDK and all of its functionalities. Initialize the SDK with your API key and receive the list of devices available to perform the sale.","keywords":""},{"title":"Transactions","type":0,"sectionRef":"#","url":"ios/iostransactions","content":"","keywords":""},{"title":"Sale​","type":1,"pageTitle":"Transactions","url":"ios/iostransactions#2","content":"saleWithAmount A sale initiates a payment operation to the card reader. In it's simplest form you only have to pass the amount and currency but it also accepts tip configuration and a map with extra parameters. Parameters Parameter\tNotesamount Required NSInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required NSString\t3 letter currency code in accordance to ISO4217 options SaleOptions\tAn object to store all the customization options for a sale. Code example //If you just need a plain vanilla sale: [api saleWithAmount:100 currency:Currency.EUR.alpha]; //But you can customize your sale: SaleOptions *options = [SaleOptions new]; //Optionally options.customerReference = @\"Your customer reference\"; //If you need Multi MID / Custom merchant Authentication: MerchantAuth *auth = [MerchantAuth new]; Credential *cred = [Credential new]; //Optionally cred.acquirer = [Credential getAcquirerFromString:@\"acquirer\"]; //Optionally cred.mid = @\"mid\"; //Optionally cred.tid = @\"tid\"; //Add as many credentials as Acquirers your merchant have agreements with [auth add:cred]; options.merchantAuth = auth; //If you want to specify the budget period //Only available for SureSwipe //Here it's 3 months options.divideByMonths = @\"3\"; [api saleWithAmount:100 currency:Currency.EUR.alpha options:options]; Copy Events invoked responseStatus Invoked while during transaction with different statuses from card reader.  responseError Invoked to inform when an error response happens.  requestSignature Invoked if card verification requires signature.  responseFinanceStatus  Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\tYES if operation starts successfully. "},{"title":"Sale Reversal​","type":1,"pageTitle":"Transactions","url":"ios/iostransactions#3","content":"saleVoidWithAmount Request a void operation on previous sale transaction, referred to by the parameter transaction. Parameters amount, currency and present must be the same as the in the sale to be voided. This operation reverts (if possible) a specific sale identified with a transaction id. Note that transactions can only be reversed within the same day as the transaction was made. Parameters Parameter\tNotesamount Required NSInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required NSString\t3 letter currency code in accordance to ISO4217 transaction Required NSString\tTransactionID of the sale transaction to be voided options Options\tAn object to store all the customization options for this operation. Code example //If you just need a plain vanilla sale reversal: [api saleReversalWithAmount:100 currency:Currency.EUR.alpha transactionId:originalTransactionID options:options]; //But you can customize your sale: Options *options = [Options new]; //Optionally options.customerReference = @\"Your customer reference\"; [api saleReversalWithAmount:100 currency:Currency.EUR.alpha transactionId:@\"00000000-0000-0000-0000-000000000000\" options:options]; Copy Events invoked responseStatus Invoked while during transaction with different statuses from card reader  responseError  Invoked to inform when an error response happens.  responseFinanceStatus Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\tYES if operation starts successfully. "},{"title":"Sale And Tokenize Card​","type":1,"pageTitle":"Transactions","url":"ios/iostransactions#4","content":"saleAndTokenizeCardWithAmount A sale initiates a payment operation to the card reader. Parameters Parameter\tNotesamount Required NSInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required NSString\t3 letter currency code in accordance to ISO4217 options SaleOptions\tAn object to store all the customization options for a sale. Code example //If you just need a plain vanilla sale tokenization: [api saleAndTokenizeWithAmount:100 currency:Currency.EUR.alpha]; //But you can customize your sale: SaleOptions *options = [SaleOptions new]; //Optionally options.customerReference = @\"Your customer reference\"; //If you need Multi MID / Custom merchant Authentication: MerchantAuth *auth = [MerchantAuth new]; Credential *cred = [Credential new]; //Optionally cred.acquirer = [Credential getAcquirerFromString:@\"acquirer\"]; //Optionally cred.mid = @\"mid\"; //Optionally cred.tid = @\"tid\"; //Add as many credentials as Acquirers your merchant have agreements with [auth add:cred]; options.merchantAuth = auth; //If you want to specify the budget period //Only available for SureSwipe //Here it's 3 months options.divideByMonths = @\"3\"; [api saleAndTokenizeWithAmount:100 currency:Currency.EUR.alpha options:options]; Copy Events invoked responseStatus Invoked while during transaction with different statuses from card reader  responseError Invoked to inform when an error response happens.  requestSignature Invoked if card verification requires signature.  responseFinanceStatus Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\tYES if operation starts successfully. "},{"title":"Refund​","type":1,"pageTitle":"Transactions","url":"ios/iostransactions#5","content":"refundWithAmount A refund initiates a refund operation to the card reader. This operation moves funds from your account to the cardholders credit card. Parameters Parameter\tNotesamount Required NSInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required NSString\tCurrency of the charge transaction Required NSString\tIf present it links the refund with a previous sale. It effectively limits the maximum amount refunded to that of the original transaction. options MerchantAuthOptions\tAn object to store all the customization options for a refund. Code example //If you just need a plain vanilla refund: [api refundWithAmount:100 currency:Currency.EUR.alpha transaction:@\"00000000-0000-0000-0000-000000000000\"]; //But you can customize your sale: MerchantAuthOptions *options = [MerchantAuthOptions new]; //Optionally options.customerReference = @\"Your customer reference\"; //If you need Multi MID / Custom merchant Authentication: MerchantAuth *auth = [MerchantAuth new]; Credential *cred = [Credential new]; //Optionally cred.acquirer = [Credential getAcquirerFromString:@\"acquirer\"]; //Optionally cred.mid = @\"mid\"; //Optionally cred.tid = @\"tid\"; //Add as many credentials as Acquirers your merchant have agreements with [auth add:cred]; options.merchantAuth = auth; [api refundWithAmount:100 currency:Currency.EUR.alpha transaction:@\"00000000-0000-0000-0000-000000000000\" options:options]; Copy  Events invoked responseStatus Invoked while during transaction with different statuses from card reader  responseError Invoked when the card reader finishes processing the transaction  responseFinanceStatus Invoked to inform when an error response happens.  Returns Parameter\tNotesBoolean\tYES if operation starts successfully. "},{"title":"Refund reversal​","type":1,"pageTitle":"Transactions","url":"ios/iostransactions#6","content":"refundVoidWithAmount Request a void operation on previous refund transaction, referred to by the parameter transaction. Parameters amount, currency and present must be the same as the in the refund to be voided. This operation reverts (if possible) a specific refund identified with a transaction id. Note that transactions can only be reversed within the same day as the transaction was made. Parameters Parameter\tNotesamount Required NSInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required NSString\t3 letter currency code in accordance to ISO4217 transaction Required NSString\tTransactionID of the refund transaction to be voided options Options\tAn object to store all the customization options for this operation. Code example //If you just need a plain vanilla refund reversal: [api refundReversalWithAmount:100 currency:Currency.EUR.alpha transactionId:originalTransactionID options:options]; //But you can customize your sale: Options *options = [Options new]; //Optionally options.customerReference = @\"Your customer reference\"; [api refundReversalWithAmount:100 currency:Currency.EUR.alpha transactionId:@\"00000000-0000-0000-0000-000000000000\" options:options]; Copy  Events invoked responseStatus Invoked while during transaction with different statuses from card reader  responseError Invoked to inform when an error response happens.  responseFinanceStatus Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\tYES if the operation was successfully sent to device. "},{"title":"Accept signature​","type":1,"pageTitle":"Transactions","url":"ios/iostransactions#7","content":"acceptSignature A requestSignature event is invoked during transaction when signature verification is needed (f.ex when payment is done with a magstripe card). The merchant is required to ask the cardholder for signature and approve (or disapprove) the signature. signatureRequired tells the card reader if the signature was approved by passing YES. To disapprove then NO is passed. Parameters Parameter\tNotesflag Required Boolean\tYES if signature is valid, NO otherwise Code example //acceptSignature: //Inform the card reader if signature is valid or not -(IBAction)accept { [heftClient acceptSignature:YES]; } -(IBAction)decline { [heftClient acceptSignature:NO]; } Copy  Events invoked responseStatus Invoked while during transaction with different statuses from card reader  responseError Invoked to inform when an error response happens.  responseFinanceStatus Invoked when the card reader finishes processing the transaction  "},{"title":"Retrieve Pending Transaction​","type":1,"pageTitle":"Transactions","url":"ios/iostransactions#8","content":"retrievePendingTransaction Retrieving a pending transaction fetches a transaction result that was lost due to unexpected disconnect between card reader and application. Code example //retrievePendingTransaction: //Called when a pending transaction is discovered upon connecting to a specific card reader - (void)didConnect:(id<HeftClient>)client{ heftClient = client; if(heftClient){ if([heftClient isTransactionResultPending] == YES) { // a pending transaction has been detected ... // ... so, lets get it [heftClient retrievePendingTransaction]; } } } Copy  Events invoked responseStatus Invoked during the operation with different statuses from the card reader.  responseError Invoked to inform when an error response happens.  responseRecoveredTransactionStatus Invoked when the card reader has returned a recovered transaction.  Returns Parameter\tNotesBoolean\tYES if operation starts successfully.  Card Reader Requirements Version RequirementsCard reader software v1.7.0+ and v2.1.7+ is required in order for this method to work  Notes On starting a new transaction If a new transaction is started with out first fetching a pending transaction result, then the pending transaction result will be discarded.  User notifications while a transaction result is pending The card reader will not give any visible indication that a transaction result is pending.  User notifications when fetching a pending transaction result The card reader will briefly display a message when a pending transaction result is recovered.  "},{"title":"Tip Adjustment​","type":1,"pageTitle":"Transactions","url":"ios/iostransactions#9","content":"tipAdjustment A tip adjustment operation allows merchants to adjust the tip amount of a sale transaction before the batch of transactions is settled automatically by the processor at the end of the day. Note: This functionality is only available for the restaurant industry in the United States and the processors currently supporting this functionality are TSYS and VANTIV. The tip adjustment method does not rely on a card reader and is therefore a separate method that must be initialized with a shared secret. The function is defined in the file HapiRemoteService.h Parameters Parameter\tNotestipAmount Required NSInteger\tTip amount added to the original (base) transaction amount - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) transaction Required NSString\tTransactionID (GUID) of the original sale transaction to be adjusted Code example //First, you need to include the following dependency #include \"HapiRemoteService.h\" //Second, the shared secret needs to be initialized NSString* shared_secret = @\"0102030405060708091011121314151617181920212223242526272829303132\"; BOOL result = setupHandpointApiConnection(shared_secret); //Third, you need to retrieve the unique transaction id of the original sale transaction you want to adjust. The below GUID is only an example and will result in a decline from the host if used for tip adjustment NSString* transaction = @\"d50af540-a1b0-11e6-85e6-07b2a5f091ec\"; //Fourth, let's tip adjust a transaction for $10.00! -(IBAction)tipAdjustment:(UIButton*) sender { BOOL result = tipAdjustment(transaction, 1000, ^(TipAdjustmentStatus status) { if(status == TipAdjustmentAuthorised) { //Successfully adjusted! } else if(status == TipAdjustmentDeclined) { //Declined! } else if(status == TipAdjustmentFailed) { //Timeout! } }); } Copy Returns Result of the tip adjustment transaction, possible values : Parameter\tNotesstatus\t- TipAdjustmentAuthorised (tip adjustment approved by the processor) - TipAdjustmentFailed (system error or timeout) - TipAdjustmentDeclined (tip adjustment declined by the processor) If two tip adjustments are sent for the same sale transaction, the second tip adjustment will override the first one. In case the transaction fails (not declined) we recommend that you prompt the user of the POS to retry the adjustment. "},{"title":"Tokenize Card​","type":1,"pageTitle":"Transactions","url":"ios/iostransactions#10","content":"tokenizeCard Initiates a card-tokenization operation to the card reader (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice). Parameters Parameter\tNotesreference Required NSString\tstring for customer reference Code example //Initiates a card tokenization operation. [heftClient tokenizeCard]; Copy  Events invoked responseStatus Invoked while during transaction with different statuses from card reader  responseError Invoked to inform when an error response happens.  requestSignature Invoked if card verification requires signature.  responseRecoveredTransactionStatus Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\tYES if operation starts successfully. "},{"title":"Integration Tips","type":0,"sectionRef":"#","url":"javascript/javascriptintegrationtips","content":"Integration Tips Maintain the connection with the terminal at all times: To be able to recover a transaction result through the callback passed in the init method, the point of sale and the terminal MUST be connected and online. For that reason, we recommend to connect to the target terminal and maintain the connection alive at all times instead of connecting and disconnecting for every transaction.Using the same connection, the user may perform as many transactions as desired. The SDK is in charge of maintaining the secure channel between the point of sale and the terminal. No connection and disconnection between transactions is required. The silent connected periods will provide the possibility for the device to deliver any pending transaction result in case of a network issue. How Transaction Recovery Works: The terminal has a transaction recovery loop to automatically send back the pending Transaction Result to the Point of sale in case it becomes unreachable (network issue or other). For the first 100 seconds after a transaction is completed, a background thread will attempt to deliver the result every 5 seconds. If the point of sale is still unreachable after the first 100 seconds, the retry loop turns into an exponential increment to the power of 2 (8s-16s-32s etc…). The recovery loop is reinitialized every time the Handpoint application is restarted or anytime the startRecovery method is used.","keywords":""},{"title":"Objects","type":0,"sectionRef":"#","url":"ios/iosobjects","content":"","keywords":""},{"title":"HeftManager​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#19","content":"HeftManager The HeftManager is used for discovering devices and to connect and create a HeftClient object for the appropriate device. The manager reports messages to HeftDiscoveryDelegate protocol during the discovery process. Starting the manager is usually the first thing that should be done after loading up an UIView that enables the user to search for and connect to BT devices. When starting the manager an object (usually the UIViewController itself) is passed as the HeftDiscoveryDelegate delegate to report to. Properties Property\tDescriptiondevicesCopy NSArray\tDEPRECATED_ATTRIBUTE: Stored array which contains all found devices. connectedCardReaders NSArray\tStored array which contains all found devices. delegate NSObject<HeftDiscoveryDelegate>\tKey for value in mpedInfo version NSString\tCurrent HeftManager version. Code example // Create a manager on view load - (void)viewDidLoad{ [super viewDidLoad]; HeftManager* manager = [HeftManager sharedManager]; manager.delegate = self; [manager resetDevices]; // Clean out device list } Copy Methods Start Discovery (void)startDiscovery;  Shared Manager (HeftManager *)sharedManager;  Client for device (NSString) (void)clientForDevice:(HeftRemoteDevice *)device sharedSecret:(NSString *)sharedSecret delegate:(NSObject HeftStatusReportDelegate *)delegate; "},{"title":"HeftClient​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#22","content":"HeftClient High level interface for Headstart API. HeftClient handles the communication between the mPos app and the card reader. The HeftClient object also stores information about it's card reader device in the mpedInfo dictionary. Device Log operations are also implemented in HeftClient. To create a new HeftClient object the clientForDevice method is called from an instance of the HeftManager. Transaction and log requests (and the acceptSignature response) are done by calling HeftClient methods with the relevant input. The library reports the status of the requests by calling delegates of the HeftStatusReportDelegate protocol. Properties Property\tDescriptionsharedSecret NSString\tThe shared secret is a key provided by Handpoint when you get your account that enables you to perform live operations with the card reader. However, if you're developing with a starter kit, the test shared secret is specified in the example. mpedInfo NSDictionary\tDictionary with card reader info details, obtained by querying it from device on interface creation. isTransactionResultPending BOOL\tIndicates whether a transaction result is pending on the card reader. Note: A pending transaction result is retained by the card reader if a disconnect occurs between card reader and app before the transaction result can be delivered during a SALE, REFUND or VOID processing. kSerialNumberInfoKey NSString Constant\tKey for value in mpedInfo kPublicKeyVersionInfoKey NSString Constant\tKey for value in mpedInfo kEMVParamVersionInfoKey NSString Constant\tKey for value in mpedInfo kGeneralParamInfoKey NSString Constant\tKey for value in mpedInfo kManufacturerCodeInfoKey NSString Constant\tKey for value in mpedInfo kModelCodeInfoKey NSString Constant\tKey for value in mpedInfo kAppNameInfoKey NSString Constant\tKey for value in mpedInfo kAppVersionInfoKey NSString Constant\tKey for value in mpedInfo kXMLDetailsInfoKey NSString Constant\tKey for value in mpedInfo Code example //clientForDevice:sharedSecret:delegate: //Creates a HeftClient object(connection to device) -(void)connectToFirstCardReaderWith:(NSData*)sharedSecret; { //Try to connect to first device in devices array [heftManager clientForDevice:[[heftManager devicesCopy] objectAtIndex:0] sharedSecret:sharedSecret delegate:self]; //Client calls the didConnect delegate function if successful } //.... //didConnect: //Called when a connection to specified device was created. -(void)didConnect:(id<HeftClient>)client { // connected successfully to a device // assigne the client to our heftClient property heftClient = client; } // ..... // Do one sale later in code [heftClient saleWithAmount:1000 currency:@\"GBP\" cardholder:YES]; Copy Methods cancel (void)cancel;  saleWithAmount (BOOL)saleWithAmount:(NSInteger)amount currency:(NSString*)currency cardholder:(BOOL)present;  saleWithAmount (BOOL)saleWithAmount:(NSInteger)amount currency:(NSString)currency cardholder:(BOOL)present reference:(NSString)reference;  saleWithAmount (BOOL)saleWithAmount:(NSInteger)amount currency:(NSString)currency cardholder:(BOOL)present reference:(NSString)reference;  refundWithAmount (BOOL)refundWithAmount:(NSInteger)amount currency:(NSString*)currency cardholder:(BOOL)present;  refundWithAmount (BOOL)refundWithAmount:(NSInteger)amount currency:(NSString)currency cardholder:(BOOL)present reference:(NSString)reference;  saleVoidWithAmount (BOOL)saleVoidWithAmount:(NSInteger)amount currency:(NSString)currency cardholder:(BOOL)present transaction:(NSString)transaction;  refundVoidWithAmount (BOOL)refundVoidWithAmount:(NSInteger)amount currency:(NSString)currency cardholder:(BOOL)present transaction:(NSString)transaction;  retrievePendingTransaction (BOOL)retrievePendingTransaction;  enableScanner (BOOL)enableScanner;  enableScannerWithMultiScan (BOOL)enableScannerWithMultiScan:(BOOL)multiScan;  enableScannerWithMultiScan (BOOL)enableScannerWithMultiScan:(BOOL)multiScan buttonMode:(BOOL)buttonMode;  enableScannerWithMultiScan (BOOL)enableScannerWithMultiScan:(BOOL)multiScan buttonMode:(BOOL)buttonMode timeoutSeconds:(NSInteger)timeoutSeconds;  Disable scanner (BOOL)disableScanner;  financeStartOfDay (BOOL)financeStartOfDay;  financeEndOfDay (BOOL)financeEndOfDay;  financeInit (BOOL)financeInit;  logSetLevel (BOOL)logSetLevel:(eLogLevel)level;  logReset (BOOL)logReset;  logGetInfo (BOOL)logGetInfo;  acceptSignature (void)acceptSignature:(BOOL)flag;  getEMVConfiguration (BOOL)getEMVConfiguration;  "},{"title":"HeftRemoteDevice​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#23","content":"HeftRemoteDevice An object containing a reference to the accessory device which is passed to the HeftClient on creation. Properties Property\tDescriptionname NSString\tName of device accessory EAAccessory\tThe EAAccessory object address NSString\tAddress of device "},{"title":"HeftDiscoveryDelegate​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#heftdiscoverydelegate","content":"HeftDiscoveryDelegate Notifications sent by the SDK on various events - new available device found, connection lost, connection found, etc Methods didDiscoverFinished (void)didDiscoverFinished;  didFindAccessoryDevice (void)didFindAccessoryDevice:(HeftRemoteDevice*)newDevice;  didLostAccessoryDevice (void)didLostAccessoryDevice:(HeftRemoteDevice*)oldDevice;  "},{"title":"HeftStatusReportDelegate​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#heftstatusreportdelegate","content":"HeftStatusReportDelegate Notifications sent by the SDK on various events - connected to device, request signature, response on error etc. Methods didConnect (void)didConnect:(id-HeftClient)client;  responseStatus (void)responseStatus:(id-ResponseInfo)info;  responseError (void)responseError:(id-ResponseInfo)info;  responseFinanceStatus (void)responseFinanceStatus:(id-FinanceResponseInfo)info;  responseLogInfo (void)responseLogInfo:(id-LogInfo)info;  requestSignature (void)requestSignature:(NSString*)receipt;  cancelSignature (void)cancelSignature;  responseRecoveredTransactionStatus (void)responseRecoveredTransactionStatus:(id-FinanceResponseInfo)info;  responseScannerEvent (void)responseScannerEvent:(id-ScannerEventResponseInfo)info;  responseScannerDisabled  (void)responseScannerDisabled:(id-ScannerDisabledResponseInfo)info;  responseEMVReport (void)responseEMVReport:(NSString *)report;  "},{"title":"ResponseInfo​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#24","content":"ResponseInfo A ResponseInfo object is passed to the ResponseStatus delegate. It contains information from the card reader about the status of the current transaction. There are two properties: status and xml. status is a string and xml is a dictionary. Usually status contains a message descriptive enough to know whats going on and is useful for displaying to user. The xml dictionary contains all elements of the XML formatted data passed from the card reader and has detailed information on the current state of the card reader. Properties Property\tDescriptionstatusCode int\tA numerical representation of the status. status Status as NSString\tFinancial transaction status message. xml XML as NSDictionary\tFeedback with xml details about transaction from the card reader. "},{"title":"FinanceResponseInfo​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#25","content":"FinanceResponseInfo A FinanceResponseInfo is passed to the responseFinanceStatus delegate at the end of transaction. It contains all necessary information needed about the relevant transaction. FinanceResponseInfo inherits from ResponseInfo so it includes the status string and xml dictionary in addition to authorisedAmount, transactionId and the html formatted receipts. Properties Property\tDescriptionfinancialResult NSInteger\tA numerical representation of a financial status result. Status Value EFT_FINANC_STATUS_UNDEFINED 0x00 EFT_FINANC_STATUS_TRANS_APPROVED 0x01 EFT_FINANC_STATUS_TRANS_DECLINED 0x02 EFT_FINANC_STATUS_TRANS_PROCESSED 0x03 EFT_FINANC_STATUS_TRANS_NOT_PROCESSED 0x04 EFT_FINANC_STATUS_TRANS_CANCELLED 0x05 isRestarting BOOL\tIndicates whether the card reader is about to restart or not (usually indicated after a software update was received on the card reader).If a restart is indicated then you have 2 seconds to start fetching the logs (before the card reader restarts).After fetching the logs you should disconnect from the card reader and wait for it to be visible again. authorisedAmount NSInteger\tIn the smallest unit for the given CurrencyCode - for the transaction. ISO 4217 defines number of digits in fractional part of currency for every currency code. Example 1000 in the case where CurrencyCode is \"0826\" (GBP) the amount would be 10.00 pounds or 1000 pense. transactionId NSString\tThe id of current transaction. customerReceipt NSString\tCustomer receipt in html format. merchantReceipt NSString\tMerchant receipt in html format. statusMessage NSString\tA human readable message describing the result of the transaction. type NSString\tThe transaction type represents which type of transaction was done. \"SALE\" for example. finStatus NSString\tThe financial status describes the conclusion of the transaction as received from the card reader. \"AUTHORISED\" for example. requestedAmount NSString\tThe requested amount is the payment amount sent in the original request to the card reader, i.e. the amount which was to charge the card with. gratuityAmount NSString\tThe gratuity amount is an additional amount added to the requested payment amount which represents additional fee added to the requested amount. This is used when the card reader is supporting the tipping functionality. An example: A sale is started with the amount 1000 and the card reader is set to support tipping. The card reader asks if a tip should be applied by the customer. The customer inputs an additional amount as a tip, lets say 100. The card is then charged for the requested amount, 1000, as well as the additional gratuity amount, 100. The result will be that the card will be charged for 1100. A calculated gratuity percentage will also be returned. gratuityPercentage NSString\tThe gratuity percentage is used to calculate an additional amount to the requested amount. The card reader calculates that amount, rounded up to the closest whole number. This is used when the card reader is supporting the tipping functionality. An example: A sale is started with the amount 1000 and the card reader is set to support tipping. The card reader asks if a tip should be applied by the customer. Instead of the customer adding a value he selects the percentage of the requested amount to be applied as a tip, lets say 10%. The card is then charged for the requested amount, 1000, as well as the additional gratuity percentage, 10%. The result will be that the card will be charged for 1100. A calculated gratuity amount will also be returned. totalAmount NSString\tThe total amount is the amount the card was charged for. It is possible that the total amount is not the same as the requested amount since an additional fee can be added, with the customer's approval, via the tipping functionality. currency NSString\tThe currency used in this transaction. eFTTransactionID NSString\tThe EFT (electronic funds transfer) transaction id is a unique GUID from the servers which is linked to this transaction in order to search for a particual transaction. This id is used if a transaction is to be reversed. originalEFTTransactionID NSString\tThe original EFT (electronic funds transfer) transaction id is a unique GUID previously received from the servers in order to reverse a transaction. This id is sent with the new eFTTransactionID in order to reference the original transaction. An example: A transaction is made. An eFTTransactionID is received. That transaction has to be reversed. A new transaction is started, now a reverse transaction, with the previously received eFTTransactionID as a parameter in the transaction. In the end result there will be a new eFTTransactionID, for the reverse transaction, and an originalEFTTransactionID referencing the original transaction. eFTTimestamp NSString\tThe eFTTimestamp represents the time when the transaction was done. This time is set by the device communicating to the card reader when the connection is established to the card reader. authorisationCode NSString\tIf the transaction was authorised the value represented can be used to search for a transaction in our system. verificationMethod NSString\tThe verification method represents the card holder verification method used to allow the payment. \"PIN\" for an example. cardEntryType NSString\tThe card entry type is the method the card information was input to card reader. \"ICC\" for an example represents \"Integrated Circuit Card\" i.e. the information was read from the chip of the card. cardSchemeName NSString\tThe scheme which was used when the transaction was made. (VISA, Mastercard, etc...) errorMessage NSString\tIf there was an error during the transaction it is represented here in a human readable text. customerReference NSString\tIf a customer reference was added, as an optional parameter, when the transaction was started. It is received here, unaltered. The customer reference can be used to reference in internal systems. budgetNumber NSString\tIf a budget number was added, as an optional parameter, when the transaction was started. It is received here, unaltered. The budget number can be used to split payments over a period of months. recoveredTransaction NSString\tThis flag is true if the transaction result is from a previous transaction which failed to get sent from the card reader, false otherwise. In the case that the communication between the device and the card reader breaks down, the card reader will attempt to send the result of the previous transaction as an immediate reply when the next transaction is started. If this happens the transaction is flagged as a \"RecoveredTransaction\". This should be displayed very well in the UI since this is NOT the result from the transaction just started. cardTypeId NSString\tThe card type id is an identifier inside the Handpoint gateway which represents what kind of card was used. \"U015\" for an example represents SAS Airline-Systems in our systems. chipTransactionReport NSString\tIf present, a full EMV report by the card reader on the Card and Terminal involved in the transaction. deviceStatus NSString\tGets the device status. dueAmount NSString\tIf there's still a part of the amount to be paid. balance NSString\tThe balance of the Cardholder's cards if the bank/acquirer supports it. CardToken String\tGets the card token if it's available, null otherwise. "},{"title":"ScannerEventResponseInfo​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#26","content":"ScannerEventResponseInfo A ScannerEventResponseInfo is passed to the responseScannerEvent delegate during scanner mode when a scan is detected. It contains all necessary information needed about the relevant operation. ScannerEventResponseInfo inherits from ResponseInfo so it includes the status string and xml dictionary in addition to scanCode string. Properties Property\tDescriptionstatusCode int\tA numerical representation of the status. status Status as NSString\tFinancial transaction status message. xml XML as NSDictionary\tFeedback with xml details about transaction from the card reader. scanCode NSString\tThe code that was scanned. "},{"title":"ScannerDisabledResponseInfo​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#27","content":"ScannerDisabledResponseInfo The info object contains information about the scanner operation. Properties Property\tDescriptionstatusCode int\tA numerical representation of the status. status Status as NSString\tFinancial transaction status message. xml XML as NSDictionary\tFeedback with xml details about transaction from the card reader. "},{"title":"LogInfo​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#28","content":"LogInfo A LogInfo object is passed to the ResponseLogInfo delegate when logs have been downloaded from the card reader. Properties Property\tDescriptionstatusCode int\tA numerical representation of the status. status Status as NSString\tFinancial transaction status message. xml XML as NSDictionary\tFeedback with xml details about transaction from the card reader. log NSString\tString containing the logging information. "},{"title":"eLogLevel​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#13","content":"eLogLevel An enum describing the different levels of logging used in the SDK and in the device. Possible values eLogNone eLogError eLogInfo eLogFull eLogDebug "},{"title":"Transaction Details​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#46","content":"XML as NSDictionary The contents of the xml property depend on which type of operation the card reader is responding to. Listed below are all possible keys in the dictionary. Note that not all fields are included all the time. "},{"title":"Dictionary keys​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#dictionary-keys","content":"StatusMessage A human readable description for the returned Status.  TransactionType The type of transaction performed: UNDEFINED, SALE, VOID_SALE, REFUND, VOID_REFUND, CANCEL_SALE, CANCEL_REFUND  FinancialStatus The result of the transaction: UNDEFINED, APPROVED, DECLINED, PROCESSED, FAILED, CANCELLED  RequestedAmount The amount requested by the POS, as requested by the POS (i.e. no decimal point).  GratuityAmount The gratuity amount entered by the cardholder, if any.  GratuityPercentage The gratuity amount, as a percentage of the requested amount.  TotalAmount The total of the gratuity and requested amount.  TransactionID The transaction number used for this transaction, as maintained by the Eft Client.  EFTTransactionID The EFT reference, given by the system, to make the transaction unique.  OriginalEFTTransactionID The original EFT reference, given by the POS, as part of a VOID_SALE or a VOID_REFUND transaction.  EFTTimestamp The date and time of the transaction, in ISO format (YYYYMMDDHHmmSS).  AuthorisationCode The transaction authorization code, as given by the system.  CVM The Cardholder Verfication Method: UNDEFINED, SIGNATURE, PIN, PIN_SIGNATURE, FAILED, NOT_REQUIRED  CardEntryType The card data acquisition type: UNDEFINED, MSR, ICC, CNP  CardSchemeName The card, reported, scheme name.  CardTypeId The ID of the Card Type.  SerialNumber The serial number of the PED.  BatteryStatus A number, followed by the % sign, which indicates current charge level of the battery.  BatterymV An integer, which represent the batter charge, in mV.  BatteryCharging Indicates whether the battery is charging, or not. Values are true or false.  ExternalPower Indicates whether the PED is connected to an external power source (e.g. a AC adapter). Values are true or false.  ApplicationName The name of the application running on the PED.  ApplicationVersion A version string of the form major.minor.build”(e.g. 1.2.118).  ErrorMessage Description of the error, if any.  RecoveredTransaction Indicates that the transaction result is a recovered transaction. The key is only included if value is true.  "},{"title":"CmdIds​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#cmdids","content":"card reader Status messages Status messages received from card reader: "},{"title":"Possible values​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#possible-values","content":"EFT_PP_STATUS_SUCCESSEFT_PP_STATUS_INVALID_DATAEFT_PP_STATUS_PROCESSING_ERROREFT_PP_STATUS_COMMAND_NOT_ALLOWEDEFT_PP_STATUS_NOT_INITIALISEDEFT_PP_STATUS_CONNECT_TIMEOUTEFT_PP_STATUS_CONNECT_ERROREFT_PP_STATUS_SENDING_ERROREFT_PP_STATUS_RECEIVING_ERROREFT_PP_STATUS_NO_DATA_AVAILABLEEFT_PP_STATUS_TRANS_NOT_ALLOWEDEFT_PP_STATUS_UNSUPPORTED_CURRENCYEFT_PP_STATUS_NO_HOST_AVAILABLEEFT_PP_STATUS_CARD_READER_ERROREFT_PP_STATUS_CARD_READING_FAILEDEFT_PP_STATUS_INVALID_CARDEFT_PP_STATUS_INPUT_TIMEOUTEFT_PP_STATUS_USER_CANCELLEDEFT_PP_STATUS_INVALID_SIGNATUREEFT_PP_STATUS_WAITING_CARDEFT_PP_STATUS_CARD_INSERTEDEFT_PP_STATUS_APPLICATION_SELECTIONEFT_PP_STATUS_APPLICATION_CONFIRMATIONEFT_PP_STATUS_AMOUNT_VALIDATIONEFT_PP_STATUS_PIN_INPUTEFT_PP_STATUS_MANUAL_CARD_INPUTEFT_PP_STATUS_WAITING_CARD_REMOVALEFT_PP_STATUS_TIP_INPUTEFT_PP_STATUS_SHARED_SECRET_INVALIDEFT_PP_STATUS_SHARED_SECRET_AUTHEFT_PP_STATUS_WAITING_SIGNATUREEFT_PP_STATUS_CONNECTINGEFT_PP_STATUS_SENDINGEFT_PP_STATUS_RECEIVEINGEFT_PP_STATUS_DISCONNECTINGEFT_PP_STATUS_PIN_INPUT_COMPLETEDEFT_PP_STATUS_POS_CANCELLEDEFT_PP_STATUS_REQUEST_INVALIDEFT_PP_STATUS_CARD_CANCELLEDEFT_PP_STATUS_CARD_BLOCKEDEFT_PP_STATUS_REQUEST_AUTH_TIMEOUTEFT_PP_STATUS_REQUEST_PAYMENT_TIMEOUTEFT_PP_STATUS_RESPONSE_AUTH_TIMEOUTEFT_PP_STATUS_RESPONSE_PAYMENT_TIMEOUTEFT_PP_STATUS_ICC_CARD_SWIPEDEFT_PP_STATUS_REMOVE_CARDEFT_PP_STATUS_SCANNER_IS_NOT_SUPPORTEDEFT_PP_STATUS_SCANNER_EVENTEFT_PP_STATUS_BATTERY_TOO_LOWEFT_PP_STATUS_ACCOUNT_TYPE_SELECTIONEFT_PP_STATUS_BT_IS_NOT_SUPPORTEDEFT_PP_STATUS_PAYMENT_CODE_SELECTIONEFT_PP_STATUS_PARTIAL_APPROVALEFT_PP_STATUS_AMOUNT_DUE_VALIDATIONEFT_PP_STATUS_INVALID_URLEFT_PP_STATUS_WAITING_CUSTOMER_RECEIPTEFT_PP_STATUS_PRINTING_MERCHANT_RECEIPTEFT_PP_STATUS_PRINTING_CUSTOMER_RECEIPTEFT_PP_STATUS_WAITING_HOST_MSG_TO_HOSTEFT_PP_STATUS_WAITING_HOST_MSG_RESPEFT_PP_STATUS_INITIALISATION_COMPLETE "},{"title":"Status strings​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#45","content":"Status as NSString An NSString containing the status message - can be one of the following: "},{"title":"Possible values​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#possible-values-1","content":"SuccessInvalid dataProcessing errorNot allowedNot initializedConnect timeoutConnect errorSending errorReceiveing errorNo data availableTransaction not allowedUnsupported currencyNo host availableCard reader errorCard reading failedInvalid cardInput timeoutUser cancelledInvalid signatureWaiting cardCard insertedApplication selectionApplication confirmationAmount validationPIN inputManual card inputWaiting card removalTip inputShared secret invalidConnectingSendingReceivingDisconnectingPIN entry completedMerchant cancelled the transactionRequest invalidCard cancelled the transactionBlocked cardRequest for authorisation timed outRequest for payment timed outResponse to authorisation request timed outResponse to payment request timed outPlease insert card in chip readerRemove the card from the readerThis device does not have a scannerScanner is not supportedScanner event "},{"title":"Process details​","type":1,"pageTitle":"Objects","url":"ios/iosobjects#process-details","content":"The following table contains result codes that can occur in the COMMAND response STATUS field (see section 1.3 above). In addition the following table contains the text information presented in the StatusMessage field that is part of the FinancialTransactionResponse Xml response object. All values are in hex in the following table. Status ID\tValue\tStatusMessage\tDetailsEFT_SUCCESS\t0001\tOne of the following: \"\" (an empty string) \"AUTH CODE #\" \"REFUND ACCEPTED\" \"REVERSAL ACCEPTED\"\tOperation completed successfully. No further actions required. EFT_INVALID_DATA\t0002\t\"Invalid data\"\tInvalid COMMAND request object, from the POS App, at the start of an operation. Please retry the operation. If the issue persists please contact technical support and provide card reader logs. EFT_PROCESSING_ERROR\t0003\t\"Processing error\"\tAn unexpected error occurred during processing. Please retry the operation. If the issue persists please contact technical support and provide card reader logs. EFT_COMMAND_NOT_ALLOWED\t0004\t\"Command not allowed\"\tThe card reader is currently busy processing another command. Please retry the operation once the current operation has completed. EFT_NOT_INITIALISED\t0005\t\"Device is not initialized\"\tThe current operation can’t be completed because there is a pending software update that must be applied before processing can continue. Please retry the operation after the card reader has restarted itself. EFT_CONNECT_TIMEOUT\t0006\t\"Connection time out detected\"\tThe back end connection timed out during an update. Please retry the operation. If the issue persists please contact technical support and provide card reader logs. EFT_CONNECT_ERROR\t0007\t\"Connection error\"\tIt was not possible to establish a connection to the back end system during an update operation. Please retry the operation. If the issue persists please contact technical support and provide card reader logs. EFT_SENDING_ERROR\t0008\t\"Send error\"\tA failure was detected during communication with the back end system. If a SALE or a REFUND transaction was in progress when this occurred then you MUST contact technical support and verify whether the transaction went through or not. If you fail to do so then you may be liable for any costs incurred due to any double charges. Note: You may be asked to provide the card reader logs. Once verified please retry the operation. EFT_RECEIVING_ERROR\t0009\t\"Receiving error\"\tA failure was detected during communication with the back end system. If a SALE or a REFUND transaction was in progress when this occurred then you MUST contact technical support and verify whether the transaction went through or not. If you fail to do so then you may be liable for any costs incurred due to any double charges. Note: You may be asked to provide the card reader logs. Once verified please retry the operation. EFT_NO_DATA_AVAILABLE\t000A\t\"No data available\"\tThe POS App is trying to fetch the card reader log file but there is no data stored in the log file. If logs are required then please set the log level to an appropriate value and retry the operation. EFT_TRANS_NOT_ALLOWED\t000B\t\"Transaction not allowed\"\tCurrently not used EFT_UNSUPPORTED_CURRENCY\t000C\t\"Currency not supported\"\tA currency has been selected that the card reader has not been configured for. Please select the correct currency and retry the operation. Alternatively, please contact technical support and ask for the specific currency to be supported. EFT_NO_HOST_AVAILABLE\t000D\t\"No host configuration found\"\tAn update was initiated but the card reader could not find any host information for the back end system, even though it otherwise contains valid configuration. This is indicative of an invalid hostBlock block with in the HostList block in this device configuration, which was placed on the card reader during a previous update. Please contact technical support and provide card reader logs and ask for a replacement device. The card reader will be unable to update itself and must be replaced. EFT_CARD_READER_ERROR\t000E\t\"Card reader error\"\tError detected in the chip reader or the magnetic stripe reader. Please retry the operation. If the issue persists please contact technical support and provide them with the card reader logs as well as asking for a replacement reader. EFT_CARD_READING_FAILED\t000F\t\"Failed to read card data\"\tThe card reader could not read any data from the card. Please retry the operation. If the issue persists the card may be faulty, please try another card. If the issue still persists the card reader may require replacement, please contact technical support. EFT_INVALID_CARD\t0010\t\"INVALID CARD\"\tThe card reader detected invalid card data. Please retry the operation. If the issue persists the card may be faulty, please try another card. If the issue still persists the card reader may require replacement, please contact technical support. EFT_INPUT_TIMEOUT\t0011\t\"Timeout waiting for user input\"\tThe card reader timed out while waiting for a user action. No further actions required. EFT_USER_CANCELLED\t0012\t\"TRANSACTION VOID\" \"User cancelled the transaction\"\tThe current operation was cancelled by card holder. No further actions required. EFT_SHARED_SECRET_INVALID\t001D\t\"Shared Secret invalid\"\tThe card reader believes that the POS App has an incorrect shared secret. No financial operations will be possible (e.g. SALE, REFUND). Please type the correct shared secret into the POS App or contact technical support for further assistance. EFT_SHARED_SECRET_AUTH\t001E\t\"Authenticating POS\"\tThe card reader is about to challenge the POS App for a correct shared secret. No further actions are required. REPORT STATUS SPECIFIC EFT_INVALID_SIGNATURE\t0013\t\"TRANSACTION VOID\"\tThe merchant indicated that the signature provided by the card holder was invalid. No further actions are required. EFT_WAITING_CARD\t0014\t\"Waiting for card\"\tThe card reader is waiting for a card to be inserted into the chip reader or for a card to be swiped (only applies to card readers with external MSR). Insert or swipe a card to continue with the transaction. EFT_CARD_INSERTED\t0015\t\"Card detected\"\tCurrently not used EFT_APPLICATION_SELECTION\t0016\t\"Waiting for application selection\"\tThe card reader is waiting for the card holder to select a card application to be used for the transaction. The card holder must select an application for use (e.g. VISA, MASTERCARD, etc.) and should then press either the OK button to continue. Press the C/Cancel button to abort the transaction. EFT_APPLICATION_CONFIRMATION\t0017\t\"Waiting for application confirmation\"\tThe card reader is waiting for the card holder to confirm that the displayed card application should be used for the transaction. The card holder should press either the OK or the C/Cancel button. EFT_AMOUNT_VALIDATION\t0018\t\"Waiting for amount validation\"\tThe card reader is waiting for the card holder to confirm that the amount presented is correct. The card holder should press either the OK or the C/Cancel button. EFT_PIN_INPUT\t0019\t\"Waiting for PIN entry\"\tThe card reader is waiting for the card holder to enter his/her PIN. The card holder should enter his PIN and then press the OK button to continue. For PIN bypass press the OK button without entering any PIN digits (this will trigger signature fallback). Press the C/Cancel button to abort the transaction. Note: It is not possible to cancel this operation from the POS App. EFT_MANUAL_CARD_INPUT\t001A\t\"Waiting for manual card data\"\tCurrently not used EFT_WAITING_CARD_REMOVAL\t001B\t\"Waiting for card removal\"\tA card was detected in the card reader at the start of a transaction, presumably left there from a previous transaction. Please remove the card and restart the operation. EFT_TIP_INPUT\t001C\t\"Waiting for gratuity\"\tThe card reader is waiting for the card holder to enter/confirm tip/gratuity information. EFT_WAITING_SIGNATURE\t001F\t\"Waiting for signature\"\tThe card reader is waiting for confirmation from the merchant that the card holder signature is valid. The merchant should press either the Accepted or Declined/Cancel in the POS App. Pressing Cancel or OK on the card reader will not have any effect. EFT_WAITING_HOST_CONNECT\t0020\t\"Connecting to host\"\tThe card reader is establishing a connection to the back end system. No further actions are required. EFT_WAITING_HOST_SEND\t0021\t\"Sending data to host\"\tThe card reader is sending data to the back end system. No further actions are required. EFT_WAITING_HOST_RECEIVE\t0022\t\"Waiting for data from host\"\tThe card reader is waiting for data from to the back end system. No further actions are required. EFT_WAITING_HOST_DISCONNECT\t0023\t\"Disconnecting from host\"\tThe card reader is disconnecting from the back end system. No further actions are required. EFT_PIN_INPUT_COMPLETED\t0024\t\"PIN entry completed\"\tPIN entry has been completed. No further actions required. EFT_POS_CANCELLED\t0025\t\"TRANSACTION VOID\"\tThe current operation was cancelled by merchant. No further actions required. EFT_REQUEST_INVALID\t0026\t\"Request invalid\"\tCard not allowed with this transaction type. EFT_CARD_CANCELLED\t0027\t\"TRANSACTION VOID\"\tThe chip on the card cancelled the transaction. No further actions required. EFT_CARD_BLOCKED\t0028 \"CARD BLOCKED\" EFT_REQUEST_AUTH_TIMEOUT\t0029\t\"Request for authorisation timed out\"\tIndicates that the card reader detected a communication failure between itself and the back end system during the authorization phase. Please make sure the phone/pc has an internet connection and then retry the operation. If the problem persists then please contact technical support. Note: You may be asked to provide the card reader logs. EFT_REQUEST_PAYMENT_TIMEOUT\t002A\t\"Request for payment timed out\"\tIndicates that the card reader detected a communication failure between itself and the back end system during the payments phase. Please make sure the phone/pc has an internet connection and then retry the operation. If the problem persists then please contact technical support. Note: You may be asked to provide the card reader logs. EFT_RESPONSE_AUTH_TIMEOUT\t002B\t\"Response to authorisation request timed out\"\tIndicates that the card reader detected a communication failure between itself and the back end system during the authorization phase. Please make sure the phone/pc has an internet connection and then retry the operation. If the problem persists then please contact technical support. Note: You may be asked to provide the card reader logs. EFT_RESPONSE_PAYMENT_TIMEOUT\t002C\t\"Response to payment request timed out\"\tIndicates that the card reader detected a communication failure between itself and the back end system during the payments phase. You MUST contact technical support and verify whether the transaction went through or not. If you fail to do so then you may be liable for any costs incurred due to any double charges. Note: You may be asked to provide the card reader logs. Once you have verified that the transaction did not go through then please make sure the phone/pc has an internet connection and then retry the operation. EFT_ICC_CARD_SWIPED\t002D\t\"Please insert card in chip reader\"\tCurrently not used EFT_REMOVE_CARD\t002E\t\"Remove the card from the reader\"\tCurrently not used EFT_SCANNER_IS_NOT_SUPPORTED\t002F\t\"This device does not have a scanner\"\tBar-code scanner hardware is not present on this card reader. No further actions are required. EFT_SCANNER_EVENT\t0030\t\"\"\tBar-code data was just read with the bar-code scanner and returned to the POS App. No further actions are required. EFT_BATTERY_TOO_LOW\t0031\t\"Operation cancelled, the battery is too low. Please charge.\"\tAn operation was started, but the battery charge level is too low to complete the operation. Please recharge the card reader. EFT_ACCOUNT_TYPE_SELECTION\t0032\t\"Waiting for account type selection\"\tThe card reader is waiting for the card holder to choose an account type for the transaction (i.e. default, credit, cheque/debit or savings). "},{"title":"Introduction","type":0,"sectionRef":"#","url":"javascript/javascriptintroduction","content":"Introduction Introducing the Revolutionary Handpoint JavaScript SDK: Seamlessly integrate card present payments into any cloud software JavaScript SDK version 6.0.1 Get the JavaScript SDK! Use the Handpoint JavaScript SDK to integrate leading smartpos terminals with your cloud software. The Handpoint JavaScript SDK is a simple javascript interface running in your web application that acts as a bridge between the web browser and the payment terminal, while shielding your software from card data. It is seamless to integrate, keeps all card data out of your system, works with every platform, and lets you use the best Android terminals on the market. Complete your integration in just three steps: Initiate the interface, choose the terminal, and start the sale. It is as simple as it sounds. The only thing you need is a valid API key to initialize the SDK. You even get a list of terminals to which you can connect. Simply execute the operation, and within seconds you’ll get back the transaction result and receipt in your software all while you monitor the transaction status. The Handpoint JavaScript SDK seamlessly starts and manages the entire P2PE transaction with the payment terminal, minimizing hassle for you and maximizing reliability, security, and control. For your merchants, the terminal setup is easier than a standalone. A merchant connects the terminal to their network, just like a smartphone, authenticates his/her account, and it simply works. Your software then control the terminal from anywhere in the world, and your merchants have secure, reliable, intuitive payments.","keywords":""},{"title":"REST API","type":0,"sectionRef":"#","url":"docs/intro","content":"","keywords":""},{"title":"Introduction​","type":1,"pageTitle":"REST API","url":"docs/intro#introduction","content":"Introducing the Revolutionary Handpoint REST API: Seamlessly integrate card present payments into any software Use the Handpoint REST API to integrate leading smartpos terminals with your software. The Handpoint REST API is a simple REST interface that acts as a bridge between your software and the payment terminal , while shielding your software from card data. It is seamless to integrate, keeps all card data out of your system, works with every platform, and lets you use the best Android terminals on the market. Complete your integration in just three steps: Initiate the interface, choose the terminal, and start the sale. It is as simple as it sounds. The only thing you need is a valid API key to authenticate against the API. You even get a list of terminals to which you can connect. Simply execute the financial operation, and within seconds you’ll get back the transaction result and receipts in your software. The Handpoint REST API seamlessly starts and manages the entire P2PE transaction with the payment terminal, minimizing hassle for you and maximizing reliability, security, and control. "},{"title":"Release Notes​","type":1,"pageTitle":"REST API","url":"docs/intro#release-notes","content":""},{"title":"2.4.0​","type":1,"pageTitle":"REST API","url":"docs/intro#240","content":"Features: Transaction result retrieval through API endpoint GET .../transaction-result/{transactionResultId} "},{"title":"API Overview​","type":1,"pageTitle":"REST API","url":"docs/intro#api-overview","content":"tip First of all, ensure you are using the correct environment by reviewing the type of card reader you have. To check if you should be using a production or development environment, see \"How do I know what type of card reader do I have?\" and select the corresponding URL, as you see below: For production terminals the endpoint to target is: https://cloud.handpoint.com/ For debug terminals the endpoint to target is: https://cloud.handpoint.io/ The following flow shows the interactions between your application and the Handpoint REST API: 1) Send a POST transaction request to the REST API. 2) The API will validate the request body and, if it is correct, will respond back to your software with the response code 202 (\"Accepted”) to confirm that the data has been correctly forwarded to the payment terminal. 3) The validated transaction request object is forwarded to the terminal and the transaction starts. 4.1) In case the original transaction request contains a callbackUrl and token, the transaction result will be sent back from the terminal to your software by using the callbackUrl. The terminal will be authenticated against your endpoint by setting the authentication token of the transaction request in the custom header ( \"AUTH-TOKEN\"). All 2XXs http response codes from the callbackUrl are considered as valid by the terminal to acknowledge of a successful delivery of the transaction result. caution 4.2) IMPORTANT Feature only compatible with Handpoint App v3.3.0 and above. In case the original transaction request does not ontain a callbackUrl and token, the transaction result is sent back from the terminal to Handpoint's REST-API. The result can then be retrieved from the endpoint GET https://cloud.handpoint.[com//io]/transaction-result/{transactionResultId} where the transactionResultId (also called cloud transaction identifier) is found in the answer from the initial POST[1] to the REST-API (see step 2)).  "},{"title":"Configuration​","type":1,"pageTitle":"REST API","url":"docs/intro#configuration","content":"Just request a valid API key from Handpoint to start using API. Initialize your interface with the API key and receive the list of devices available to perform a financial operation. Fast and easy. "},{"title":"Sandbox​","type":1,"pageTitle":"REST API","url":"docs/intro#sandbox","content":"Get started today with our sandbox. You can generate sample transactions and test the experience right in your browser. Check it at: http://www.handpoint.com/lab/cloudpos. A payment terminal is required to start testing. This is the initial setup screen:  To get started, select the target environment where you are going to operate (Sandbox/Production). If the user has any doubts selecting the correct environment, click on \"*How do I know what type of card reader do I have?\" and you will be redirected to an explanation page.  Next, enter your Handpoint API key in the box labeled \"INSERT API KEY” and click the check button. This will automatically populate the “SELECT A DEVICE” drop down with the list of devices that are assigned to you. If the API key is not valid, an error message will appear in the “RESPONSES” section of the sandbox.  Before you can begin any further testing, you first must select the device that you will be using. In the “SELECT A DEVICE” list, you will see both the real terminals assigned to you, as well as simulated devices (listed by serial number). You can choose any device to test with. Serial numbers for the simulated devices always have this format: XXXX | 999999xxxxx. Choose a simulated terminal if you do not have access to a real device or if you just want to see simulated behavior. You can refresh the “SELECT A DEVICE” list by clicking the refresh button on the right side of the “SELECT A DEVICE” box. If you are already connected to a device, you can disconnect from it using the “Disconnect” button or trigger a software and configuration update operation by using the \"Update\" button.  Once you have selected a device, the “SELECT A DEVICE” box will be disabled, and the rest of the sandbox will be enabled. With your selected device, you can simulate a number of operations, including: salesale and tokenizerefundtokenize cardreverse sale transactionsreverse refund transactions In order to reverse a transaction, a transaction id is needed, this id is available in the transaction result data coming from a previous sale or refund operation. Each transaction result will appear in the RESPONSES panel, on the right side of the screen. With each transaction result you will be able to perform several operations: View and print the merchant receiptView and print the customer receiptReverse the transactionCopy the transaction result data; it is the raw transaction result, as received by the application from the device  "},{"title":"Processing Payments Simulation​","type":1,"pageTitle":"REST API","url":"docs/intro#processing-payments-simulation","content":"Test transactions are conducted against a test server which is designed to simulate the behavior of an acquiring bank without moving any funds. As with every Handpoint terminal, sensitive card data is fully encrypted. Use trigger amounts to generate some specific responses from our server: Sale amounts Amount\tBehaviour37.79\tIssuer response code = 01 (Refer to issuer) 37.84\tIssuer response code = 05 (Not authorized) 37.93\tIssuer response code = 04 (Pick up card) 37.57\tRequest is partially approved 37.68\tRequest timeout Any other values will behave as normal authorized operations. "},{"title":"Endpoints​","type":1,"pageTitle":"REST API","url":"docs/intro#endpoints","content":""},{"title":"/initialize​","type":1,"pageTitle":"REST API","url":"docs/intro#initialize","content":"Initialize Initializes the REST API client and returns the list of payment terminals associated with the merchant account Parameters Parameter\tNotesHeader: ApiKeyCloud * string\tRequest Header used to identify the merchant Returns DevicesList of Device objects Code Example Operation executed using CLI tool CURL: REQUEST: curl -X GET \\ -H \"ApiKeyCLoud: MeRcHaNt-ApIkEy\" \\ \"https://cloud.handpoint.com/initialize\" RESPONSE: Code 200 -> Body: [ { \"merchant_id_alpha\": \"merchantID\", \"serial_number\": \"082104578\", \"customerReference\": \"op15248\", \"terminal_type\": \"PAXA920\" } ] Copy "},{"title":"/transactions​","type":1,"pageTitle":"REST API","url":"docs/intro#transactions","content":"Transactions POST endpoint used to execute a financial operation Parameters Parameter\tNotesHeader: ApiKeyCloud * string\tRequest Header used to identify the merchant Request Body: Transaction Request * TransactionRequest\tObject containing the transaction information Returns Response\tResponse CodeTransaction Accepted\tResponse code 202 is received if the transaction has been successfully sent to the terminal. BadRequest DeviceIsBusy Error\tResponse code 400 with error 1001. Wait until the end of the current transaction to be able to execute the next operation BadRequest DeviceNotResponding Error\tResponse code 400 with error 1002. The device is not responding, verify the device is online and retry in a few seconds. BadRequest CancelOperationNotAllowed Error\tResponse code 400 with error 1003. Operation type stopCurrentTransaction cannot be executed because the terminal is processing the transaction and it can not be stopped. Code Example Operation executed using CLI tool CURL: REQUEST: curl -X GET \\ -H \"ApiKeyCLoud: MeRcHaNt-ApIkEy\" \\ \"https://cloud.handpoint.com/initialize\" RESPONSE: Code 200 -> Body: [ { \"merchant_id_alpha\": \"merchantID\", \"serial_number\": \"082104578\", \"customerReference\": \"op15248\", \"terminal_type\": \"PAXA920\" } ] Copy "},{"title":"/transaction-result/{transactionResultId}​","type":1,"pageTitle":"REST API","url":"docs/intro#transaction-resulttransactionresultid","content":"TransactionResultRetrieval GET endpoint used to retrieve transaction results. IMPORTANT Feature only compatible with Handpoint App v3.3.0 and above. Parameters Parameter\tNotesHeader: ApiKeyCloud * string\tRequest Header used to identify the merchant Path parameter: transactionResultId * string\tCustom transaction result Id provided in the response when a Transaction was triggered without callbackUrl. Returns Response\tResponse CodeNo Content\tResponse code 204. transactionResultId found in the database but there is no transaction result associated yet. This status will be retrieved while the transaction is ongoing and the transaction result has not been delivered yet. OK\tResponse code 200 + Transaction Result. transactionResultId found in the database and the associated Transaction Result object Not Found\tResponse code 404. transactionResultId NOT found in the database "},{"title":"Transaction Result Recovery​","type":1,"pageTitle":"REST API","url":"docs/intro#transaction-result-recovery","content":"TransactionResultRecovery The terminal has a transaction recovery loop to automatically send back the pending TransactionResult to the callback URL in case it becomes unreachable (network issue or server down). For the first 100 seconds after a transaction is completed, a background thread will attempt to deliver the result every 5 seconds. If the server is still unreachable after the first 100 seconds, the retry loop turns into an exponential increment to the power of 2 (8s-16s-32s etc…). The recovery loop is reinitialized every time the Handpoint application is restarted or the startRecovery method is triggered. The Transaction Result received through the transaction recovery loop will have the recoveredTransaction field set to true. All 2XXs http response codes from the callbackUrl are valid to notify the device of a successful delivery of the result. Returns Transaction Result Transaction ResultThe Transaction Result is delivered to the callback Url from the Transaction Request. "},{"title":"Objects​","type":1,"pageTitle":"REST API","url":"docs/intro#objects","content":""},{"title":"Operation Type​","type":1,"pageTitle":"REST API","url":"docs/intro#operation-type","content":"OperationType An enum representing different types of transactions. Possible Values: sale refund refundReversal saleReversal saleAndTokenizeCard tokenizeCard printReceipt update cardPan pingDevice stopCurrentTransaction "},{"title":"Operation Types Description​","type":1,"pageTitle":"REST API","url":"docs/intro#operation-types-description","content":"OperationTypesDescription Parameter\tNotessale\tA sale initiates a payment operation to the card reader refund\tA refund operation moves funds from the merchant account to the cardholder´s credit card. For Interac (Canadian Debit Network), refunds can only be processed until Interac closes the batch of transactions at night refundReversal\tA refund reversal, also called refund VOID allows the merchant to reverse a previous refund operation. This operation reverts (if possible) a specific refund identified with a transaction id saleReversal\tA sale reversal, also called sale VOID allows the user to reverse a previous sale operation. This operation reverts (if possible) a specific sale identified with a transaction id saleAndTokenizeCard\tA sale operation which also returns a card token (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice) tokenizeCard\tReturns a card token (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice) printReceipt\tThis method sends the merchant or customer receipt to the terminal for printing. The format of the HTML data, passed to the method or stored in the url, must follow this format: Html Print Format update\tThe update operation checks for new software or configuration updates and initiates a download if required. cardPan\tA cardPan request will return the full PAN of the card being swiped, dipped or tapped. Only the PANs of whitelisted card ranges will be returned by the Handpoint systems. This operation is mostly used to be able to process funds or points from loyalty cards. pingDevice\tThis operation will ping the terminal to confirm if it is online. stopCurrentTransaction\tOperation used to stop the current transaction. The transaction can only be stopped at specific stages of a payment processing, for example a transaction can not be stopped when the card is being read but can be stopped when waiting for the cardholder to initially insert a card. "},{"title":"Financial Status​","type":1,"pageTitle":"REST API","url":"docs/intro#financial-status","content":"Financial Status: UNDEFINED AUTHORISED DECLINED PROCESSED FAILED CANCELLED PARTIAL_APPROVAL "},{"title":"Transaction Result Object​","type":1,"pageTitle":"REST API","url":"docs/intro#transaction-result-object","content":"TransactionResult An object holding information about the result of a transaction. Code example { \"aid\": \"A0000000041010\", \"arc\": \"0000\", \"authorisationCode\": \"123456\", \"balance\": null, \"budgetNumber\": \"\", \"cardEntryType\": \"UNDEFINED\", \"cardLanguagePreference\": \"\", \"cardSchemeName\": \"MasterCard\", \"cardToken\": \"\", \"chipTransactionReport\": \"\", \"currency\": \"USD\", \"customerReceipt\": \"https://s3.[...]/customerReceipt.html\", \"customerReference\": \"\", \"deviceStatus\": { \"applicationName\": \"ClientApp\", \"applicationVersion\": \"20.1.0\", \"batteryCharging\": \"Not Charging\", \"batteryStatus\": \"100\", \"batterymV\": \"4126\", \"bluetoothName\": \"PAXA920\", \"externalPower\": \"USB\", \"serialNumber\": \"0821032398\", \"statusMessage\": \"Approved or completed successfully\" }, \"dueAmount\": 0, \"errorMessage\": \"\", \"expiryDateMMYY\": \"0422\", \"finStatus\": \"AUTHORISED\", \"iad\": \"0210A000002A0000000000000000000000FF\", \"issuerResponseCode\": \"00\", \"maskedCardNumber\": \"************1456\", \"merchantAddress\": \"Plaza Soledad Torres Acosta 1 28013 Madrid\", \"merchantName\": \"Hago la cama\", \"merchantReceipt\": \"https://s3.[...]/merchantReceipt.html\", \"mid\": \"\", \"originalEFTTransactionID\": \"\", \"paymentScenario\": \"CHIPCONTACTLESS\", \"rrn\": \"\", \"signatureUrl\": \"\", \"statusMessage\": \"Approved or completed successfully\", \"tenderType\": \"CREDIT\", \"tid\": \"ACQUIRER_TID\", \"tipAmount\": 0, \"totalAmount\": 100, \"transactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"tsi\": \"0000\", \"tvr\": \"0400008001\", \"type\": \"SALE\", \"unMaskedPan\": \"\", \"verificationMethod\": \"UNDEFINED\", \"efttimestamp\": 1615374961000, \"efttransactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"requestedAmount\": 100, \"tipPercentage\": 0, \"recoveredTransaction\": false, \"cardHolderName\": \"Mr/Mrs card holder full name\" } Copy An object holding information about the result of a transaction. Property\tDescriptionaid\tApplication Identifier of the card (EMV tag 9F06) arc\tEMV Authorisation Response Code (EMV tag 8A) authorisationCode\tAcquirer response code balance\tBalance available on the card budgetNumber\tUsed to split payments over a period of months cardEntryType\tMethod used by the terminal to read the card cardLanguagePreference\tPreferred language of the card (EMV tag 5F2D) cardSchemeName\tThe brand of the card cardToken\tToken representing the PAN of the card chipTransactionReport\tFull report of the card EMV parameters currency\tThe currency used for the transaction customerReceipt\tA URL containing the customer receipt in HTML format customerReference\tIf a customerReference was provided as an optional parameter in the transaction request it is echoed unaltered in this field deviceStatus\tStatus of the device dueAmount\tIn case of a partial approval for the transaction, this field contains the amount which remains to be paid efttimestamp\tTime of the transaction efttransactionID\tHandpoint unique identifier for a transaction, this id is the one to be used for a transaction to be reversed. errorMessage\tDetailed reason for the transaction error expiryDateMMYY\tExpiry date of the card used for the operation finStatus\tThe financial status contains the outcome of the transaction. For example \"AUTHORISED\" or \"DECLINED\" iad\tIssuer Application Data (EMV tag 9F10) issuerResponseCode\tResponse code from the card issuer "},{"title":"Transaction Request Object​","type":1,"pageTitle":"REST API","url":"docs/intro#transaction-request-object","content":"TransactionRequest An object to store the information about the payment terminal in use Code example // Result will be served to result.com { \"operation\": \"sale\", \"amount\": \"10000\", \"currency\": \"EUR\", \"terminal_type\": \"PAXA920\", \"serial_number\": \"1547854757\", \"customerReference\": \"storeSale12548\", \"callbackUrl\": \"https://result.com\", \"token\": \"123456789\", \"tipConfiguration\": { \"baseAmount\": \"2000\", \"tipPercentages\": [5,10,15,20,25], \"enterAmountEnabled\": true, \"skipEnabled\": false, \"footer\": \"Thank you!!! ;)\" }, \"bypassOptions\": { \"signatureBypass\": true, \"pinBypass\": true }, \"merchantAuth\": [{ \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\", \"externalId\": \"4444\" }] } // Result will be served back to Handpoint's REST-API { \"operation\": \"sale\", \"amount\": \"10000\", \"currency\": \"EUR\", \"terminal_type\": \"PAXA920\", \"serial_number\": \"1547854757\", \"customerReference\": \"storeSale12548\", \"tipConfiguration\": { \"baseAmount\": \"2000\", \"tipPercentages\": [5,10,15,20,25], \"enterAmountEnabled\": true, \"skipEnabled\": false, \"footer\": \"Thank you!!! ;)\" }, \"bypassOptions\": { \"signatureBypass\": true, \"pinBypass\": true }, \"merchantAuth\": [{ \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\", \"externalId\": \"4444\" }] } Copy An object to store the information about the payment terminal in use. Properties Property\tDescriptionoperation\tThe type of transaction to be performed. REQUIRED serial_number\tDevice serial number. REQUIRED terminal_type\tDevice type. REQUIRED callbackUrl\tif used, url the terminal will use to send the Transaction Result. All 2XXs http response codes from the callbackUrl are valid to notify the terminal of a successful delivery of the result. If the callbackUrl is not present, the device will send back the transaction result to Handpoint's REST-API and results can be retrieved using the Transaction Result Retrieval endpoint token\tToken used to authenticate the terminal and transaction when serving the Transaction Result through the callbackUrl . The token will be injected in the Request Header with key value 'AUTH-TOKEN'. REQUIRED when the callbackUrl is present. customerReference\tTransaction identifier provided by the integrator. The customerReference sent in TransactionRequests objects is echoed in the TransactionResults amount\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 EUR). REQUIRED for operations: sale, refund, refundReversal, saleReversal and saleAndTokenizeCard. currency\tThe currency of the transaction. REQUIRED for operations: sale, refund, refundReversal, saleReversal and saleAndTokenizeCard. originalTransactionId\tThe transaction id of the original transaction to reverse. REQUIRED for operations: refundReversal, saleReversal and LINKED refunds. receipt\tHTML receipt, following the format defined in Html Print Format, or url to locate the receipt, it can be found in the response of a Transaction Request, in the fields merchantReceipt or customerReceipt. REQUIRED for operations: printReceipt. tipConfiguration\tConfiguration to enable tipping. At the time of sale, a tip menu will be shown to the cardholder with the predefined configuration. The tip configuration is optional and can only be used with the sale and saleAndTokenize operations. bypassOptions\tConfiguration to enable the possibility of bypassing signature or pin. The bypass configuration is optional and can only be used with the sale, saleAndTokenize and refund operations merchantAuth\tObject used to store merchant authentication. The merchantAuth is optional and can only be used with the sale, saleAndTokenize and refund operations. For reversals, the credentials passed for the original sale will be automatically looked up by Handpoint and used to process the reversal. This object allows a transaction to be funded to a specific merchant account other than the default one. It is useful if a terminal is shared between multiple merchants, for example at an Hair Salon or a Doctor's office. "},{"title":"Bypass Options​","type":1,"pageTitle":"REST API","url":"docs/intro#bypass-options","content":"BypassOptions Configuration to enable/disable signature or pin bypass. { \"bypassOptions\": { \"signatureBypass\": true, \"pinBypass\": true } } Copy Property\tDescriptionpinBypass\tEnables/disables pin bypass. Bypasses PIN entry when the shopper says they don't know the PIN for the card and the merchant either knows they are the legitimate cardholder or want to give them the benefit of the doubt. signatureBypass\tEnables/disables signature bypass. Whether the terminal prompts for a signature, depends on how you configure this parameter. The major card schemes (American Express, Diners, Discover, JCB, Mastercard, Visa, UnionPay) no longer require a signature; they regard it as optional for card-present transactions. This means you can speed up your checkout by skipping the signature prompt. But if your business requires it, you can still let the terminal prompt for a signature. The shopper then provides their signature on the touch screen of the terminal or on the printed transaction receipt. This depends on how you configure this setting. It is your responsibility to verify the signature of the shopper with the signature on the card or another form of identification. "},{"title":"Merchant Auth​","type":1,"pageTitle":"REST API","url":"docs/intro#merchant-auth","content":"MerchantAuth Object used to store merchant authentication. This object is optional, it allows a transaction to be funded to a specific merchant account other than the default one. It is useful if a terminal is shared between multiple merchants, for example at an Hair Salon or a Doctor's office. { \"merchantAuth\": [{ \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\", \"externalId\": \"4444\" }] } Copy Property\tDescriptionCredential\tArray of credentials "},{"title":"Acquirer​","type":1,"pageTitle":"REST API","url":"docs/intro#acquirer","content":"Acquirer An enum representing the supported acquirers for merchant authentication. Possible values AMEX BORGUN EVO OMNIPAY POSTBRIDGE INTERAC TSYS VANTIV SANDBOX "},{"title":"Device​","type":1,"pageTitle":"REST API","url":"docs/intro#device","content":"Device An object to store the information about the payment terminal you are working with. ALL values are REQUIRED { \"merchant_id_alpha\": \"Test_Merchant\", \"serial_number\": \"614004878\", \"ssk\": \"74817EA5C63437ADE7AA3A5401\", \"terminal_type\": \"PAXA920\" } Copy Properties Property\tDescriptionmerchant_id_alpha\tMerchant unique identifier to which the device is associated serial_number\tDevice serial number ssk\tMerchant shared secret key, unique id for the merchant terminal_type\tDevice type "},{"title":"Currency​","type":1,"pageTitle":"REST API","url":"docs/intro#currency","content":"Currency An enum of most currencies in the world. Contains the ISO name, ISO number and the name of the currency. Additionally contains information about how many decimals the currency uses. Possible values AED AFN ALL AMD ANG AOA ARS AUD AWG AZN BAM BBD BDT BGN BHD BIF BMD BND BOB BOV BRL BSD BTN BWP BYR BZD CAD CDF CHF CLP CNY COP COU CRC CUC CUP CVE CZK DJF DKK DOP DZD EEK EGP ERN ETB EUR FJD FKP GBP GEL GHS GIP GMD GNF GTQ GYD HKD HNL HRK HTG HUF IDR ILS INR IQD IRR ISK JMD JOD JPY KES KGS KHR KMF KPW KRW KWD KYD KZT LAK LBP LKR LRD LSL LTL LVL LYD MAD MDL MKD MMK MNT MOP MUR MVR MWK MXN MXV MYR MZN NAD NGN NIO NOK NPR NZD OMR PAB PEN PGK PHP PKR PLN PYG QAR RON RSD RUB RWF SAR SBD SCR SDG SEK SGD SHP SLL SOS SRD STD SYP SZL THB TJS TMT TND TOP TRY TTD TWD TZS UAH UGX VND VUV WST XAF XCD XOF XPF YER ZAR ZMK ZWL USD UZS VEF "},{"title":"Card Entry Type​","type":1,"pageTitle":"REST API","url":"docs/intro#card-entry-type","content":"CardEntryType An enum representing different card entry types. { \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\" } { \"externalId\": \"4444\" } Copy Possible values UNDEFINED MSR ICC CNP "},{"title":"Verification Method​","type":1,"pageTitle":"REST API","url":"docs/intro#verification-method","content":"VerificationMethod An enum representing the possible verification methods used during the transaction. Possible values: UNDEFINEDSIGNATURE PIN PIN_SIGNATURE FAILED NOT_REQUIRED MOBILE_PASS_CODE "},{"title":"Merchant Auth Credential​","type":1,"pageTitle":"REST API","url":"docs/intro#merchant-auth-credential","content":"CredentialAn object to store credentials (Acquirer, Mid, Tid, MCC and ExternalId) for merchant authentication. Properties Property\tDescriptionacquirer\tIf present, it links this credential to the specified acquirer. Required if more than one credential is provided. mid\tFor this transaction, overrides the default MID (merchant ID) saved in the terminal configuration. tid\tFor this transaction, overrides the default TID (terminal ID) saved in the terminal configuration. mcc\tMerchant Category Code, overrides the default MCC saved in the terminal configuration. ExternalId\tFor this transaction, the External Id will be used to lookup the credential of the merchant in the Handpoint backend and process the transaction accordingly. The External id replaces the need to pass MID/TID/MCC as credentials "},{"title":"Device Status​","type":1,"pageTitle":"REST API","url":"docs/intro#device-status","content":"DeviceStatus A class that holds the device status. { \"applicationName\": \"TestApp\", \"applicationVersion\": \"20.1.0.1\", \"batteryCharging\": \"Charging\", \"batteryStatus\": \"100\", \"batterymV\": \"4134\", \"bluetoothName\": \"A920\", \"externalPower\": \"USB\", \"serialNumber\": \"0821032397\", \"statusMessage\": \"Card reader time out\" } Copy Properties Property\tDescriptionSerialNumber\tThe serial number of the device. BatteryStatus\tThe battery status in percentages of a device. BatterymV\tThe battery milli volts of a device. BatteryCharging\tThe battery charging status of a device. ExternalPower\tThe status of an external power of a device ApplicationName\tThe application name used on a device ApplicationVersion\tThe application version number used on a device bluetoothName\tThe bluetooth interface name used on a device statusMessage\tDevice human readable status message "},{"title":"Card Scheme Name​","type":1,"pageTitle":"REST API","url":"docs/intro#card-scheme-name","content":"CardSchemeName A string representing different card brands. Possible values MasterCard Visa Maestro American Express Discover JCB Diners UnionPay "},{"title":"Transaction Type​","type":1,"pageTitle":"REST API","url":"docs/intro#transaction-type","content":"TransactionType An enum representing different types of transactions. Possible values UNDEFINED SALE VOID_SALE REFUND VOID_REFUND CANCEL_SALE CANCEL_REFUND TOKENIZE_CARD CARD_PAN "},{"title":"Payment Scenario​","type":1,"pageTitle":"REST API","url":"docs/intro#payment-scenario","content":"PaymentScenario An enum representing different types of scenario. Possible values UNKNOWN MAGSTRIPE MAGSTRIPECONTACTLESS CHIP CHIPCONTACTLESS CHIPFAILMAGSTRIPE "},{"title":"Status Info​","type":1,"pageTitle":"REST API","url":"docs/intro#status-info","content":"StatusInfo A class containing information about the status of the transaction. Properties Property\tDescriptioncancelAllowed\tA boolean letting the integrator know if the terminal will accept a stop transaction request.) status\tA Status enum representing the status of the transaction. message\tA String containing the status message of the transaction. deviceStatus\tA DeviceStatus object containing information about the payment terminal. "},{"title":"Status​","type":1,"pageTitle":"REST API","url":"docs/intro#status","content":"status An enum containing information about the status of a transaction. Possible values Undefined Success InvalidData ProcessingError CommandNotAllowed NotInitialised ConnectTimeout ConnectError SendingError ReceivingError NoDataAvailable TransactionNotAllowed UnsupportedCurrency NoHostAvailable CardReaderError CardReadingFailed InvalidCard InputTimeout UserCancelled InvalidSignature WaitingForCard CardInserted ApplicationSelection ApplicationConfirmation AmountValidation PinInput ManualCardInput WaitingForCardRemoval TipInput SharedSecretInvalid SharedSecretAuth WaitingSignature WaitingHostConnect WaitingHostSend WaitingHostReceive WaitingHostDisconnect PinInputCompleted PosCancelled RequestInvalid CardCancelled CardBlocked RequestAuthTimeout RequestPaymentTimeout ´ResponseAuthTimeout´ ´ResponsePaymentTimeout´ IccCardSwiped RemoveCard ScannerIsNotSupported ScannerEvent BatteryTooLow AccountTypeSelection BtIsNotSupported PaymentCodeSelection PartialApproval AmountDueValidation InvalidUrl WaitingCustomerReceipt PrintingMerchantReceipt PrintingCustomerReceipt UpdateStarted UpdateFinished UpdateFailed UpdateProgress WaitingHostPostSend WaitingHostPostReceive Rebooting PrinterOutOfPaper ErrorConnectingToPrinter CardTapped ReceiptPrintSuccess InvalidPinLength OfflinePinAttempt OfflinePinLastAttempt ProcessingSignature CardRemoved TipEntered CardLanguagePreference AutomaticPrintingStarted CancelOperationNotAllowed UpdateSoftwareStarted UpdateSoftwareFinished UpdateSoftwareFailed UpdateSoftwareProgress InstallSoftwareStarted InstallSoftwareFinished InstallSoftwareFailed InstallSoftwareProgress UpdateConfigStarted UpdateConfigFinished UpdateConfigFailed UpdateConfigProgress InitialisationComplete "},{"title":"Tip Configuration​","type":1,"pageTitle":"REST API","url":"docs/intro#tip-configuration","content":"TipConfiguration Code example { \"baseAmount\": \"2000\", \"headerName\": \"\", \"tipPercentages\": [5,10,15,20,25], \"enterAmountEnabled\": true, \"skipEnabled\": false, \"footer\": \"Thank you!!! ;)\" } Copy TipConfiguration Properties Property\tDescriptionbaseAmount\tBase amount used to calculate the tip - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). If no base amount is defined, the transaction amount is used as base amount. headerName\tName of the tipping menu appearing on the terminal. Default: Tip tipPercentages\tList of percentages used to calculate the tip amount. REQUIRED enterAmountEnabled\tFlag used to enable the cardholder to manually enter the tip amount. Default: true skipEnabled\tFlag used to enable the cardholder to skip the tipping step. Default: true footer\tFooter note which will appear on the tipping menu. Default: Empty string "},{"title":"Tender Type​","type":1,"pageTitle":"REST API","url":"docs/intro#tender-type","content":"TenderType An enum representing different tender types. Possible values NOT_SET CREDIT DEBIT "},{"title":"SDK integration example","type":0,"sectionRef":"#","url":"ios/iossdkprocessing","content":"","keywords":""},{"title":"HandpointModule header​","type":1,"pageTitle":"SDK integration example","url":"ios/iossdkprocessing#handpointmodule-header","content":"HandpointModule.h #import \"HandpointAll.h\" @interface HandpointModule : NSObject <HeftDiscoveryDelegate, HeftStatusReportDelegate> - (instancetype)initWithSharedSecret:(NSString *)sharedSecret; - (void)saleWithAmount:(NSInteger)amount currency:(NSString *)currency; - (void)refundWithAmount:(NSInteger)amount currency:(NSString *)currency; - (void)saleReversalWithAmount:(NSInteger)amount currency:(NSString *)currency originalTransactionID:(NSString *)originalTransactionID; - (void)refundReversalWithAmount:(NSInteger)amount currency:(NSString *)currency originalTransactionID:(NSString *)originalTransactionID; - (void)connectToAddress:(NSString *)address; - (void)setLogLevel:(eLogLevel)logLevel; - (void)getDeviceLogs; - (void)getPendingTransaction; - (void)update; - (void)listDevices; @end Copy "},{"title":"HandpointModule​","type":1,"pageTitle":"SDK integration example","url":"ios/iossdkprocessing#handpointmodule","content":"HandpointModule.m #import \"<Foundation/Foundation.h>\" #import \"HandpointModule.h\" #import \"HeftRemoteDevice+SendableDevice.h\" #import \"SDKEvent.h\" #import \"ConnectionStatus.h\" #import \"Currency.h\" #import \"CDVInvokedUrlCommand+Arguments.h\" #import \"StatusInfo.h\" #import \"TransactionResult.h\" typedef NS_ENUM(NSInteger, ConnectionStatus) { ConnectionStatusNotConfigured, ConnectionStatusConnected, ConnectionStatusConnecting, ConnectionStatusDisconnected, ConnectionStatusDisconnecting, ConnectionStatusInitializing }; @interface HandpointModule () @property (nonatomic) HeftManager* manager; @property (nonatomic, strong) id<HeftClient> api; @property (nonatomic) NSString *ssk; @property (nonatomic) HeftRemoteDevice* preferredDevice; @property (nonatomic) NSString *eventHandlerCallbackId; @property (nonatomic) NSMutableDictionary *devices; @end @implementation HandpointModule - (instancetype)initWithSharedSecret:(NSString *)sharedSecret { NSLog(@\"\\n\\tpluginInitialize\"); self.manager = [HeftManager sharedManager]; self.manager.delegate = self; self.devices = [@{} mutableCopy]; [self fillDevicesFromConnectedCardReaders]; self.ssk = sharedSecret; } - (void)saleWithAmount:(NSInteger)amount currency:(NSString *)currency { BOOL result = [self.api saleWithAmount:amount currency:currency cardholder:YES]; if (result == false) { //Do something } } - (void)refundWithAmount:(NSInteger)amount currency:(NSString *)currency { BOOL result = [self.api refundWithAmount:amount currency:currency cardholder:YES] if (result == false) { //Do something } } - (void)saleReversalWithAmount:(NSInteger)amount currency:(NSString *)currency originalTransactionID:(NSString *)originalTransactionID { BOOL result = [self.api saleVoidWithAmount:amount currency:currency cardholder:YES transaction:originalTransactionID]; if (result == false) { //Do something } } - (void)refundReversalWithAmount:(NSInteger)amount currency:(NSString *)currency originalTransactionID:(NSString *)originalTransactionID { BOOL result = [self.api refundVoidWithAmount:amount currency:currency cardholder:YES transaction:originalTransactionID]; if (result == false) { //Do something } } #pragma mark - Device Management - (void)connectToAddress:(NSString *)address { HeftRemoteDevice *remoteDevice = self.devices[address]; if (remoteDevice) { BOOL isRemoteDeviceSameAsPreferred = self.preferredDevice && [self.preferredDevice.address isEqualToString:remoteDevice.address]; // If we are already connected to this device, update shared secret if (self.api && isRemoteDeviceSameAsPreferred) { // Already connected to device } else { self.preferredDevice = remoteDevice; [self.manager clientForDevice:remoteDevice sharedSecret:self.ssk delegate:self]; } [self connectionStatusChanged:ConnectionStatusConnecting]; } else { NSLog(@\"Can't connect. No device available. Have you searched?\"); } } - (void)setLogLevel:(eLogLevel)logLevel { [self.api logSetLevel:logLevel]; } - (void)getDeviceLogs { [self.api logGetInfo]; } - (void)getPendingTransaction { BOOL success = NO; if ([self.api isTransactionResultPending]) { success = [self.api retrievePendingTransaction]; } if (success) { //... } else { //... } } - (void)update { [self.api financeInit]; } - (void)listDevices { NSArray* devices = [self.manager connectedCardReaders]; /** * A device can have four levels of connection: unpaired, paired, * connected and connected in the SDK. * * Due to the nature of the iOS ExternalAccessory framework, * devices that are already connected at an iOS level will not appear in a normal search, * as they already appear through the \"connectedCardReaders\" array in the manager * (Yeah, I know) * * So the \"if\" takes care of differentiating those two cases * * If we have device(s) connected we just go for those, otherwise, search. */ if(devices.count) { //We have device(s) already connected, we skip the search. for (HeftRemoteDevice *device in devices) { [self addDevice:device]; } [self didDiscoverFinished]; } else { //We search and wait... [self.manager startDiscovery]; } } # pragma mark - Callbacks - (void)didFindAccessoryDevice:(HeftRemoteDevice*)newDevice { [self addDevice:newDevice]; } - (void)didLostAccessoryDevice:(HeftRemoteDevice *)oldDevice { [self removeDevice:oldDevice]; if(self.preferredDevice && self.preferredDevice.address == oldDevice.address) { [self connectionStatusChanged:ConnectionStatusDisconnected]; self.preferredDevice = nil; } } - (void)didDiscoverFinished { [self fillDevicesFromConnectedCardReaders]; for (NSString *key in [self.devices allKeys]) { HeftRemoteDevice *device = self.devices[key]; if ([device.address isEqualToString:<my_saved_mac_address>]) { //Do something with the device if it's the same one you expect. break; } } } - (void)didConnect:(id <HeftClient>)client { if(client) { self.api = client; [self connectionStatusChanged:ConnectionStatusConnected]; } } - (void)connectionStatusChanged:(ConnectionStatus)status { //Here you get notified of connection status changes } - (NSString *)stringFromConnectionStatus:(ConnectionStatus)status { switch(status) { case ConnectionStatusNotConfigured: return @\"NotConfigured\"; case ConnectionStatusConnected: return @\"Connected\"; case ConnectionStatusConnecting: return @\"Connecting\"; case ConnectionStatusDisconnected: return @\"Disconnected\"; case ConnectionStatusDisconnecting: return @\"Diconnecting\"; case ConnectionStatusInitializing: return @\"Initializing\"; } } - (void)responseStatus:(id <ResponseInfo>)info { //Here you'll get status updates during the transaction } - (void)responseError:(id <ResponseInfo>)info { //Here if something went wrong } - (void)responseFinanceStatus:(id <FinanceResponseInfo>)info { //Here's the result of your transaction } - (void)responseLogInfo:(id <LogInfo>)info { NSLog(@\"\\n\\tresponseLogInfo: %@\", info.status); } - (void)requestSignature:(NSString *)receipt { [self.api acceptSignature:YES]; } - (void)addDevice:(HeftRemoteDevice *)device { self.devices[device.address] = device; } - (void)removeDevice:(HeftRemoteDevice *)device { if (self.devices[device.address]) { [self.devices removeObjectForKey:device.address]; } } - (void)fillDevicesFromConnectedCardReaders { for (HeftRemoteDevice *device in [self.manager connectedCardReaders]) { [self addDevice:device]; } } @end Copy "},{"title":"Processing Payments Simulation","type":0,"sectionRef":"#","url":"javascript/javascriptprocessingpayments","content":"Processing Payments Simulation Test transactions are conducted against a test server which is designed to simulate the behavior of an acquiring bank without moving any funds. As with every Handpoint terminal, sensitive card data is fully encrypted. Use trigger amounts to generate some specific responses from our server: Sale amounts Amount\tBehaviour37.79\tIssuer response code = 01 (Refer to issuer) 37.84\tIssuer response code = 05 (Not authorized) 37.93\tIssuer response code = 04 (Pick up card) 37.57\tRequest is partially approved 37.68\tRequest timeout","keywords":""},{"title":"Quick Integration Test","type":0,"sectionRef":"#","url":"javascript/javascriptquickintegration","content":"Quick Integration Test This js script sample shows how you can integrate your solution with Handpoint JavaScript SDK to perform a product sale in three quick and simple SDK calls: 1) Request your test configuration (apiKey and deviceName constants) from Handpoint and set them in your web application 2) Download handpoint.js from this link 3) In the same directory, copy both handpoint.js and the code below in an html file 4) Open the html file in the browser and see test transactions immediately SIMPLE, FAST, and EASY <!doctype html> <html> <head> <title>Handpoint SDK Trial Integration</title> <script src=\"handpoint.js\"></script> </head> <body> <script> var hp = new Handpoint() //************* Test configuration *************// var apiKey = 'YourApiKey'; var deviceName = '082245-Device'; var environmentIsDevelopment = true; //*********************************************// hp.init(apiKey, environmentIsDevelopment, (pendingEoT) => { console.log('Recovered Transaction -> ' + JSON.stringify(pendingEoT)); }).then( response1 => { console.log('Successful initialization') //document.writeln('Successful initialization<br />') hp.connect(deviceName).then( response2 => { console.log('Successful Connection to device [' + deviceName + ']'); //document.writeln('Successful Connection to device [' + deviceName + ']<br />') console.log('Executing sale'); //document.writeln('Executing sale<br />') hp.sale('10', 'EUR').then( response3 => { console.log('Successful sale'); //document.writeln('Successful sale<br />'); hp.disconnect(deviceName).then( response3 => { console.log('Successful disconnection from device [' + deviceName + ']') //document.writeln('Successful disconnection from device [' + deviceName + ']<br />') } ).catch( error => console.log('Disconnection to device [' + deviceName + '] Failed -> ' + JSON.stringify(error)) ); } ).catch( error => console.log('Sale Failed -> ' + JSON.stringify(error)) ); } ).catch( error => console.log('Connection to device [' + deviceName + '] Failed -> ' + JSON.stringify(error)) ); } ).catch( error => console.log('Initialization Failed -> ' + JSON.stringify(error)) ); </script> </body> </html> Copy","keywords":""},{"title":"Release Notes","type":0,"sectionRef":"#","url":"javascript/javascriptreleasenotes","content":"","keywords":""},{"title":"6.0.1​","type":1,"pageTitle":"Release Notes","url":"javascript/javascriptreleasenotes#601","content":"Features: Internal variable handling "},{"title":"6.0.0​","type":1,"pageTitle":"Release Notes","url":"javascript/javascriptreleasenotes#600","content":"BREAKING CHANGE: The recovery function in the init method was added to make sure that ALL transaction results are received by the POS, even in case of an unstable network connection. The recovery function passed as third parameter in the init method MUST return a promise. The resolution of the promise will send a message to the payment terminal acknowledging the reception of the transaction result. "},{"title":"Sandbox","type":0,"sectionRef":"#","url":"javascript/javascriptsandbox","content":"Sandbox Get started today with our sandbox. You can generate sample transactions and test the experience right in your browser. Check it at: http://www.handpoint.com/lab/cloudpos. A payment terminal is required to start testing. This is the initial setup screen: To get started, select the target environment where you are going to operate (Sandbox/Production). If the user has any doubts selecting the correct environment, click on \"How do I know what type of card reader do I have?\" and you will be redirected to an explanation page. Next, enter your Handpoint API key in the box labeled \"INSERT API KEY” and click the check button. This will automatically populate the “SELECT A DEVICE” drop down with the list of devices that are assigned to you. If the API key is not valid, an error message will appear in the “RESPONSES” section of the sandbox. Before you can begin any further testing, you first must select the device that you will be using. In the “SELECT A DEVICE” list, you will see both the real terminals assigned to you, as well as simulated devices (listed by serial number). You can choose any device to test with. Serial numbers for the simulated devices always have this format: XXXX | 999999xxxxx. Choose a simulated terminal if you do not have access to a real device or if you just want to see simulated behavior. You can refresh the “SELECT A DEVICE” list by clicking the refresh button on the right side of the “SELECT A DEVICE” box. If you are already connected to a device, you can disconnect from it using the “Disconnect” button or trigger a software and configuration update operation by using the \"Update\" button. Once you have selected a device, the “SELECT A DEVICE” box will be disabled, and the rest of the sandbox will be enabled. With your selected device, you can simulate a number of operations, including: salesale and tokenizerefundtokenize cardreverse sale transactionsreverse refund transactions In order to reverse a transaction, a transaction id is needed, this id is available in the transaction result data coming from a previous sale or refund operation. Each transaction result will appear in the RESPONSES panel, on the right side of the screen. With each transaction result you will be able to perform several operations: View and print the merchant receiptView and print the customer receiptReverse the transactionCopy the transaction result data; it is the raw transaction result, as received by the application from the device","keywords":""},{"title":"Methods","type":0,"sectionRef":"#","url":"javascript/javascriptmethods","content":"","keywords":""},{"title":"Initialize​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#1","content":"Initialize Initializes the JavaScript SDK and returns the list of payment terminals associated with the account. Parameters Parameter\tNotesAPI_key Required string\tThe Actor API key. dev_or_prod_environment Required boolean\tValue that defines if the actor is targeting a development (true -> cloud.handpoint.io) or production (false -> cloud.handpoint.com) environment. recovery_EoT_callback Required promise\tPromise that collects the pending transaction results that couldn't be delivered to the POS during the execution of the transaction, for example if the network connection became unstable. The callback input parameter is a TransactionResult object. When the promise is resolved the JS SDK will send the ACK to the payment terminal to mark the result as recovered and the device will delete it from its storage. If the promise is rejected, the device will resend the TransactionResult until the promise is correctly resolved and the ACK sent to the reader. The sdk has a 5 second window for the promise to be resolved Code example Handpoint.init('API KEY', true, (pendingEoT) => { console.log('Recovered Transaction -> ' + JSON.stringify(pendingEoT); return handleTransactionResultPromise(pendingEoT); }) // For simple or sync operations you may just return a resolved Promise. Handpoint.init('API KEY', true, (pendingEoT) => { console.log('Recovered Transaction -> ' + JSON.stringify(pendingEoT); return Promise.resolve(); }) Copy Returns Parameter\tNotesDevices\tList of Device objects "},{"title":"Connect​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#2","content":"Connect Connect the JavaScript SDK to a payment terminal. Parameters Parameter\tNotesdevice_name Required string\tThe target payment terminal to connect to. The device_name is returned in the Device object of the init call. Code example Handpoint.connect('1234263-TYPE1'); Copy Returns Parameter\tNotesConnection Result\t- 200 code for OK - 403 code for NOK "},{"title":"Disconnect​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#3","content":"Disconnect Connect the JavaScript SDK to a payment terminal. Parameters Parameter\tNotesdevice_name Required string\tThe target payment terminal to disconnect from. The device_name is returned in the Device object of the init call. Code example Handpoint.connect('1234263-TYPE1'); Copy Returns Parameter\tNotesConnection Result\t- Disconnected message for OK - ERROR disconnecting message for NOK "},{"title":"Sale​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#4","content":"Sale A sale initiates a payment operation to the card reader. In its simplest form, you only have to pass the amount and currency as parameters. Parameters Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). currency Required string\tCurrency of the charge saleOptions Required SaleOptions\tAn object to store all the customisation options for a sale. This object can be empty if no options are required. callback_function Required string\tCallback function to subscribe to the transaction status updates. Code example var [*SaleOptions*](#23) = { customerReference: \"MyCustomReference\", tipConfiguration: { baseAmount: \"100\", skipEnabled: true, enterAmountEnabled: true, tipPercentages: [ 1, 2, 3, 5 ] }, bypassOptions: { signatureBypass: true, pinBypass: true }, merchantAuth: [ { acquirer: \"ACQUIRER\", mid: \"11111\", tid: \"22222\", mcc: \"33333\" } ], } Handpoint.sale('1000', 'USD', [*SaleOptions*](#23) , function (stat) { console.log('Transaction Status received -> '+ stat.message) }); Copy Returns Parameter\tNotesSale Response\tA Financial Response object "},{"title":"Sale And Tokenization​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#5","content":"SaleAndTokenization A sale which both authorizes the transaction and returns a token representing the card. This feature is not available for all acquirers. Please check with Handpoint to know if tokenization is supported for your acquirer of choice. Parameters Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). currency Required string\tCurrency of the charge saleOptions Required SaleOptions\tAn object to store all the customisation options for a sale. This object can be empty if no options are required. callback_function Required string\tCallback function to subscribe to the transaction status updates. Code example var [*SaleOptions*](#23) = { customerReference: \"MyCustomReference\", tipConfiguration: { baseAmount: \"100\", skipEnabled: true, enterAmountEnabled: true, tipPercentages: [ 1, 2, 3, 5 ] }, bypassOptions: { signatureBypass: true, pinBypass: true }, merchantAuth: [ { acquirer: \"ACQUIRER\", mid: \"11111\", tid: \"22222\", mcc: \"33333\" } ], } Handpoint.saleAndTokenization('1000', 'USD', [*SaleOptions*](#23) , CallbackFunction(stat){...}); Copy Returns Parameter\tNotesSale and Tokenization Response\tA Financial Response object "},{"title":"Transaction Recovery​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#6","content":"StartRecovery The terminal has a transaction recovery loop to automatically send back the pending Transaction Result to the Point of sale in case it becomes unreachable (network issue or other). For the first 100 seconds after a transaction is completed, a background thread will attempt to deliver the result every 5 seconds. If the point of sale is still unreachable after the first 100 seconds, the retry loop turns into an exponential increment to the power of 2 (8s-16s-32s etc…). The recovery loop is reinitialized every time the Handpoint application is restarted or the startRecovery method is triggered.The Transaction Result received through the transaction recovery loop will have the recoveredTransaction field set to true Important information: The point of sale must be successfully connected to a terminal in order to receive the pending transactions. Code example //Start recovery of pending transactions Handpoint.startRecovery(); Copy Returns Parameter\tNotesPromise Successful Response\tThe event has been sent to the device Promise Error Response\tThe event was not sent to the terminal because it is unreachable "},{"title":"Stop Listening Device​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#7","content":"StopListeningDevice This operation interrupts the connection, stops listening to transaction events and resets the connection with the device Code example //Stop Listening to Events Handpoint.stopListeningDevice(); Copy "},{"title":"Sale Reversal​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#8","content":"SaleReversal A sale Reversal, also called sale VOID allows the user to reverse a previous sale operation. This operation reverts (if possible) a specific sale identified with a transaction id. In its simplest form, you only have to pass the amount, currency and originalTransactionID as parameters Parameters Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). currency Required string\tCurrency of the charge originalTransactionID Required string\tThe transaction id of the original sale authorization merchantAuthOptions Required MerchantAuthOptions\tAn object to store all the customisation options for a saleReversal. This object can be empty if no options are required. callback_function Required string\tCallback function to subscribe to the transaction status updates. Code example var saleReversalOptions = { customerReference: \"MyCustomReference\", merchantAuth: [ { acquirer: \"ACQUIRER\", mid: \"11111\", tid: \"22222\", mcc: \"33333\" } ], } Handpoint.saleReversal('1000', 'USD', 'OriginalSaleGUID', saleReversalOptions, CallbackFunction(stat){...}); Copy Returns Parameter\tNotesSale Reversal Response\tA Financial Response object "},{"title":"Refund​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#9","content":"Refund A refund initiates a refund operation to the payment terminal. This operation moves funds from the merchant account to the cardholder´s credit card. In its simplest form, you only have to pass the amount and currency as parameters. For Interac (Canadian Debit Network), refunds can only be processed until Interac closes the batch of transactions at night. Parameters Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). currency Required string\tCurrency of the charge originalTransactionID Required string\tThe transaction id of the original sale authorization refundOptions Required RefundOptions\tAn object to store all the customisation options for a saleReversal. This object can be empty if no options are required. callback_function Required string\tCallback function to subscribe to the transaction status updates. Code example var refundOptions = { customerReference: \"MyCustomReference\", bypassOptions: { signatureBypass: true, pinBypass: true }, merchantAuth: [ { acquirer: \"ACQUIRER\", mid: \"11111\", tid: \"22222\", mcc: \"33333\" } ], } Handpoint.refund('1000', 'USD', undefined ,refundOptions, CallbackFunction(stat){...}); // Linked Refund Handpoint.refund('1000', 'USD', 'OriginalSaleGUID' ,refundOptions, CallbackFunction(stat){...}); Copy Returns Parameter\tNotesRefund Response\tA Financial Response object "},{"title":"Refund Reversal​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#10","content":"RefundReversal A Refund Reversal, also called Refund VOID, allows the merchant to reverse a previous refund operation. This operation reverts (if possible) a specific refund identified with a transaction id. In its simplest form, you only have to pass the amount, currency and originalTransactionID as parameters. Parameters Parameter\tNotesamount Required integer\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). currency Required string\tCurrency of the charge originalTransactionID Required string\tThe transaction id of the original sale authorization merchantAuthOptions Required MerchantAuthOptions\tAn object to store all the customisation options for a refundReversal. This object can be empty if no options are required. callback_function Required string\tCallback function to subscribe to the transaction status updates. Code example var refundOptions = { customerReference: \"MyCustomReference\", bypassOptions: { signatureBypass: true, pinBypass: true }, merchantAuth: [ { acquirer: \"ACQUIRER\", mid: \"11111\", tid: \"22222\", mcc: \"33333\" } ], } Handpoint.refund('1000', 'USD', undefined ,refundOptions, CallbackFunction(stat){...}); // Linked Refund Handpoint.refund('1000', 'USD', 'OriginalSaleGUID' ,refundOptions, CallbackFunction(stat){...}); Copy Returns Parameter\tNotesRefund Reversal Response\tA Financial Response object "},{"title":"Tokenize Card​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#11","content":"TokenizeCard Returns a token for the card. This feature is not available for all acquirers. Please check with Handpoint to know if tokenization is supported for your acquirer of choice Parameters Parameter\tNotesoptions Required Options\tAn object to store all the customisation options for a tokenizeCard. This object can be empty if no options are required. callback_function Required string\tCallback function to subscribe to the transaction status updates. Code example var options = { customerReference: \"MyCustomReference\", } Handpoint.tokenizeCard(options, CallbackFunction(stat){...}); Copy Returns Parameter\tNotesTokenize Card Response\tA Financial Response object "},{"title":"Card Pan​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#12","content":"CardPan A cardPan request will return the full PAN of the card being swiped, dipped or tapped. Only the PANs of whitelisted card ranges will be returned by the Handpoint systems. This operation is mostly used to be able to process funds or points from loyalty cards. Parameters Parameter\tNotesoptions Required Options\tAn object to store all the customisation options for a tokenizeCard. This object can be empty if no options are required. callback_function Required string\tCallback function to subscribe to the transaction status updates. Code example var options = { customerReference: \"MyCustomReference\", } Handpoint.tokenizeCard(options, CallbackFunction(stat){...}); Copy Returns Parameter\tNotesCard Pan Response\tA Financial Response object "},{"title":"Stop Current Transaction​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#13","content":"StopCurrentTransaction Operation used to stop the current transaction. The transaction can only be stopped at specific stages of a payment processing, for example a transaction can not be stopped when the card is being read but can be stopped when waiting for the cardholder to initially insert a card. Code example Handpoint.stopCurrentTransaction(); Copy Returns Parameter\tNotesPromise Successful Response\t{finStatus: CANCELLED, statusMessage: 'Operation stopped'} Promise Error Response\t{finStatus: FAILED, errorMessage: 'Unable to stop current transaction'} Promise Error Response\t{ finStatus: FAILED, errorMessage: 'No response received from the card reader' } "},{"title":"Print Receipt​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#14","content":"PrintReceipt This method sends the merchant or customer receipt to the terminal for printing. The format of the HTML data, passed to the method or stored in the url, must follow this format: Html Print Format. Code example Handpoint.printReceipt('https://location_of_receipt_container.com/receipt_location', CallbackFunction(stat){...}); var htmlReceipt = '[...] HTML receipt [...]' Handpoint.printReceipt(htmlReceipt, CallbackFunction(stat){...}); Copy Parameters Parameter\tNotesreceipt Required string\tHTML receipt or url to locate the receipt, it can be found in the response of a financial operation, in the fields merchantReceipt or customerReceipt callback_function Required string\tCallback function to subscribe to the transaction status updates. Returns Parameter\tNotesPrint Receipt Response\tA specific Status object that describes the printing action (PrinterOutOfPaper, ErrorConnectingToPrinter or ReceiptPrintSuccess) "},{"title":"Ping Device​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#15","content":"PingDevice This operation will ping the terminal to confirm if it is online. The promise is correctly resolved if the device is online and successfully answers to the ping Code example Handpoint.pingDevice(CallbackFunction(stat){...}); Copy Returns Parameter\tNotesDevice Status\tA Device Status object "},{"title":"Update​","type":1,"pageTitle":"Methods","url":"javascript/javascriptmethods#16","content":"Update Triggers a terminal software and config update Code example Handpoint.update(CallbackFunction(stat){...}); Copy Parameters Parameter\tNotescallback_function Required string\tCallback function to subscribe to the transaction status updates. Returns Parameter\tNotesUpdate Response\tA Financial Response object "},{"title":"Objects","type":0,"sectionRef":"#","url":"javascript/javascriptobjects","content":"","keywords":""},{"title":"Merchant Auth​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#17","content":"MerchantAuth Object used to store merchant authentication. This object can be empty, it allows a transaction to be funded to a specific merchant account other than the default one. It is useful if a terminal is shared between multiple merchants, for example at an Hair Salon or a Doctor's office. Code example { \"merchantAuth\": [{ \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\", \"externalId\": \"4444\" }] } Copy Properties Property\tDescriptionCredential Credential[]\tArray of credentials "},{"title":"Transaction Result Object​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#18","content":"TransactionResult An object holding information about the result of a transaction. Code example { \"aid\": \"A0000000041010\", \"arc\": \"0000\", \"authorisationCode\": \"123456\", \"balance\": null, \"budgetNumber\": \"\", \"cardEntryType\": \"UNDEFINED\", \"cardLanguagePreference\": \"\", \"cardSchemeName\": \"MasterCard\", \"cardToken\": \"\", \"chipTransactionReport\": \"\", \"currency\": \"USD\", \"customerReceipt\": \"https://s3.[...]/customerReceipt.html\", \"customerReference\": \"\", \"deviceStatus\": { \"applicationName\": \"ClientApp\", \"applicationVersion\": \"20.1.0\", \"batteryCharging\": \"Not Charging\", \"batteryStatus\": \"100\", \"batterymV\": \"4126\", \"bluetoothName\": \"PAXA920\", \"externalPower\": \"USB\", \"serialNumber\": \"0821032398\", \"statusMessage\": \"Approved or completed successfully\" }, \"dueAmount\": 0, \"errorMessage\": \"\", \"expiryDateMMYY\": \"0422\", \"finStatus\": \"AUTHORISED\", \"iad\": \"0210A000002A0000000000000000000000FF\", \"issuerResponseCode\": \"00\", \"maskedCardNumber\": \"************1456\", \"merchantAddress\": \"Plaza Soledad Torres Acosta 1 28013 Madrid\", \"merchantName\": \"Hago la cama\", \"merchantReceipt\": \"https://s3.[...]/merchantReceipt.html\", \"mid\": \"\", \"originalEFTTransactionID\": \"\", \"paymentScenario\": \"CHIPCONTACTLESS\", \"rrn\": \"\", \"signatureUrl\": \"\", \"statusMessage\": \"Approved or completed successfully\", \"tenderType\": \"CREDIT\", \"tid\": \"ACQUIRER_TID\", \"tipAmount\": 0, \"totalAmount\": 100, \"transactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"tsi\": \"0000\", \"tvr\": \"0400008001\", \"type\": \"SALE\", \"unMaskedPan\": \"\", \"verificationMethod\": \"UNDEFINED\", \"efttimestamp\": 1615374961000, \"efttransactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"requestedAmount\": 100, \"tipPercentage\": 0, \"recoveredTransaction\": false, \"cardHolderName\": \"cardholder name\" } Copy Properties Property\tDescriptionaid String Application Identifier of the card (EMV tag 9F06) arc String EMV Authorisation Response Code (EMV tag 8A) authorisationCode String Application Identifier of the card (EMV tag 9F06) balance Balance\tBalance available on the card budgetNumber String Used to split payments over a period of months cardEntryType CardEntryType\tMethod used by the terminal to read the card cardLanguagePreference String Preferred language of the card (EMV tag 5F2D) cardSchemeName CardSchemeName\tThe brand of the card cardToken String Token representing the PAN of the card chipTransactionReport String Full report of the card EMV parameters currency Currency\tThe currency used for the transaction customerReceipt String A URL containing the customer receipt in HTML format customerReference String If a customerReference was provided as an optional parameter in the transaction request it is echoed unaltered in this field deviceStatus DeviceStatus\tStatus of the device dueAmount String In case of a partial approval for the transaction, this field contains the amount which remains to be paid efttimestamp String Time of the transaction efttransactionID String Handpoint unique identifier for a transaction, this id is the one to be used for a transaction to be reversed. errorMessage String Detailed reason for the transaction error expiryDateMMYY String Expiry date of the card used for the operation finStatus FinancialStatus\tThe financial status contains the outcome of the transaction. For example \"AUTHORISED\" or \"DECLINED\" iad String Issuer Application Data (EMV tag 9F10) issuerResponseCode String Response code from the card issuer maskedCardNumber String Masked card number of the card used for the operation merchantAddress String Merchant Address merchantName String Merchant Name merchantReceipt String A URL containing the customer receipt in HTML format mid String Merchant Identifier originalEFTTransactionID String In case the transaction type is a reversal, this field will contain the identifier of the original transaction being reversed paymentScenario PaymentScenario\tIndicates the card entry mode recoveredTransaction String This flag is set to true if the transaction result is sent through the transaction recovery logic explained in the Recovey Section, false otherwise requestedAmount String The requested amount is the transaction amount sent to the terminal rrn String Retrieval Reference Number, unique number assigned by the acquirer signatureUrl String If a digital signature is required, this is the URL containing the image of the captured signature statusMessage String The status of the transaction, for example \"Waiting for pin\" tenderType TenderType\tTransaction tender type (credit / debit) tid String Terminal Identifier tipAmount String Tip amount, if any, in the minor unit of currency (f.ex. 1000 is 10.00 GBP) tipPercentage String If tipping is enabled, this field will return the tip percentage added on top of the base amount totalAmount String The total amount is the amount the card was charged for. It is possible that the total amount is not the same as the requested amount since an additional fee can be added, with the customer's approval, via the tipping functionality transactionID String The transaction id is a terminal internal counter incremented for each transaction tsi String Transaction Status Information (EMV tag 9B) tvr String Transaction Verification Results (EMV tag 95) type TransactionType\tThe type of transaction initiated, for example \"SALE\" unMaskedPan String Unmasked PAN, only received if the card is a non-payment card (loyalty) verificationMethod VerificationMethod\tcardholder verification method, for example \"PIN\" multiLanguageStatusMessages Map map containing the status message in a human readable format for all the supported locales. multiLanguageErrorMessages Map map containing the error message in a human readable format for all the supported locales. cardHolderName String Name of the cardholder "},{"title":"Bypass Options​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#19","content":"BypassOptions Configuration to enable/disable signature or pin bypass. Code example { \"bypassOptions\": { \"signatureBypass\": true, \"pinBypass\": true } } Copy Properties Property\tDescriptionpinBypass Boolean\tBypasses PIN entry when the shopper says they don't know the PIN for the card and the merchant either knows they are the legitimate cardholder or want to give them the benefit of the doubt. PIN Bypass should be set to True if you want to enable pin bypass for a transaction signatureBypass Boolean\tWhether the terminal prompts for a signature, depends on how you configure this. The major card schemes (American Express, Diners, Discover, JCB, Mastercard, Visa, UnionPay) no longer require a signature; they regard it as optional for card-present transactions. This means you can speed up your checkout by skipping the signature prompt. But if your business requires it, you can still let the terminal prompt for a signature. The shopper then provides their signature on the touch screen of the terminal or on the printed transaction receipt. This depends on how you configure this setting. It is your responsibility to verify the signature of the shopper with the signature on the card or another form of identification. Signature Bypass should be set to True if you want to enable signature for this transaction "},{"title":"Device​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#20","content":"Device An object to store the information about the payment terminal you are working with. ALL values are REQUIRED Code example { \"merchant_id_alpha\": \"Test_Merchant\", \"serial_number\": \"614004878\", \"ssk\": \"74817EA5C63437ADE7AA3A5401\", \"terminal_type\": \"PAXA920\", \"device_name\": \"0821032395-PAXA920\" } Copy Properties Property\tDescriptionmerchant_id_alpha Required String\tMerchant unique identifier to which the device is associated serial_number Required String\tDevice serial number ssk Required String\tDevice shared secret key to authorize the operations. terminal_type Required String\tDevice type device_name Required String\tDevice name composed with serial_number - terminal_type "},{"title":"Acquirer​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#21","content":"Acquirer An enum representingbthe supported acquirers for merchant authentication AMEX BORGUN EVO OMNIPAY POSTBRIDGE INTERAC TSYS VANTIV SANDBOX "},{"title":"Transaction Status​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#22","content":"TransactionStatus A class that holds the device status. This is the object that will be recieved in the financial operation callback functions Properties Property\tDescriptiondeviceStatus Device Status\tOPTIONAL - The status of the payment terminal. isCancelAllowed boolean\tDefines is a transaction can be cancelled or not. message String\tHuman readable status message. status status\tAn enum containing information about the status of the transaction. "},{"title":"Sale Options​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#23","content":"SaleOptions An object to store all the customisation options for an operation. This object can be empty if no options are required. Code example { \"customerReference\": \"MyCustomReference\", \"tipConfiguration\": { \"baseAmount\": \"100\", \"skipEnabled\": true, \"enterAmountEnabled\": true, \"tipPercentages\": [ 1, 2, 3, 5 ] }, \"bypassOptions\": { \"signatureBypass\": true, \"pinBypass\": true }, \"merchantAuth\": [ { \"acquirer\": \"ACQUIRER\", \"mid\": \"11111\", \"tid\": \"22222\", \"mcc\": \"33333\" } ], } Copy Properties Property\tDescriptioncustomerReference String\tAn arbitrary string to use as your own identifier for a transaction TipConfiguration TipConfiguration bypassOptions BypassOptions merchantAuth MerchantAuth\t "},{"title":"Refund Options​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#24","content":"RefundOptions An object to store all the customisation options for a refund. This object can be empty if no options are required. Code example { \"customerReference\": \"MyCustomReference\", \"tipConfiguration\": { \"baseAmount\": \"100\", \"skipEnabled\": true, \"enterAmountEnabled\": true, \"tipPercentages\": [ 1, 2, 3, 5 ] }, \"bypassOptions\": { \"signatureBypass\": true, \"pinBypass\": true }, \"merchantAuth\": [ { \"acquirer\": \"ACQUIRER\", \"mid\": \"11111\", \"tid\": \"22222\", \"mcc\": \"33333\" } ], } Copy Properties Property\tDescriptioncustomerReference String\tAn arbitrary string to use as your own identifier for a transaction bypassOptions BypassOptions merchantAuth MerchantAuth\t "},{"title":"Merchant Auth Options​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#25","content":"MerchantAuthOptions An object to store merchant authentication options for regular operations. Code example { \"customerReference\": \"MyCustomReference\", \"merchantAuth\": [ { \"acquirer\": \"ACQUIRER\", \"mid\": \"11111\", \"tid\": \"22222\", \"mcc\": \"33333\" } ], } Copy Properties Property\tDescriptioncustomerReference String merchantAuth MerchantAuth\t "},{"title":"Balance​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#balance","content":"Balance Balance available on the card Properties Property\tDescriptionamount Integer\tThe amount balance currency Currency\tThe balance currency positive Boolean\tMarks if the balance is positive negative Boolean\tMarks if the balance is negative Code example \"balance\": { \"amount\": 1000, \"currency\": \"EUR\", \"negative\": false, \"positive\": true } Copy "},{"title":"Options​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#26","content":"Options An object to store all the customisation options for an operation. This object can be empty if no options are required. Properties Property\tDescriptioncustomerReference String\tAn arbitrary string to use as your own identifier for a transaction Code example { \"customerReference\": \"MyCustomReference\" } Copy Properties Property\tDescriptionamount Integer\tThe amount balance currency Currency\tThe balance currency positive Boolean\tMarks if the balance is positive negative Boolean\tMarks if the balance is negative "},{"title":"Merchant Auth Credential​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#28","content":"Credential An object to store credentials (Acquirer, Mid, Tid, MCC and ExternalId) for merchant authentication. Properties Property\tDescriptionacquirer Acquirer\tIf present, it links this credential to the specified acquirer. Required if more than one credential is provided. mid String\tFor this transaction, overrides the default MID (merchant ID) saved in the terminal configuration. tid String\tFor this transaction, overrides the default TID (terminal ID) saved in the terminal configuration. mcc String\tMerchant Category Code, overrides the default MCC saved in the terminal configuration. ExternalId String\tFor this transaction, the External Id will be used to lookup the credential of the merchant in the Handpoint backend and process the transaction accordingly. The External id replaces the need to pass MID/TID/MCC as credentials Code example { \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\" } { \"externalId\": \"4444\" } Copy "},{"title":"Financial Status​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#33","content":"FinancialStatus An enum representing different statuses of a finalized transaction Possible values UNDEFINED AUTHORISED DECLINED PROCESSED FAILED CANCELLED PARTIAL_APPROVAL "},{"title":"Device Status​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#27","content":"DeviceStatus A class that holds the device status. Properties Property\tDescriptionSerialNumber String The serial number of the device BatteryStatus String The battery status in percentages of a device BatterymV String The battery milli volts of a device BatteryCharging String The battery charging status of a device ExternalPower String The status of an external power of a device ApplicationName String The application name used on a device ApplicationVersion String The application version number used on a device bluetoothName String The bluetooth interface name used on a device statusMessage String Device human readable status message Code example { \"applicationName\": \"TestApp\", \"applicationVersion\": \"20.1.0.1\", \"batteryCharging\": \"Charging\", \"batteryStatus\": \"100\", \"batterymV\": \"4134\", \"bluetoothName\": \"A920\", \"externalPower\": \"USB\", \"serialNumber\": \"0821032397\", \"statusMessage\": \"Card reader time out\" } Copy "},{"title":"Currency​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#31","content":"Currency An enum of most currencies in the world. Contains the ISO name, ISO number and the name of the currency. Additionally contains information about how many decimals the currency uses. Possible values AED AFN ALL AMD ANG AOA ARS AUD AWG AZN BAM BBD BDT BGN BHD BIF BMD BND BOB BOV BRL BSD BTN BWP BYR BZD CAD CDF CHF CLP CNY COP COU CRC CUC CUP CVE CZK DJF DKK DOP DZD EEK EGP ERN ETB EUR FJD FKP GBP GEL GHS GIP GMD GNF GTQ GYD HKD HNL HRK HTG HUF IDR ILS INR IQD IRR ISK JMD JOD JPY KES KGS KHR KMF KPW KRW KWD KYD KZT LAK LBP LKR LRD LSL LTL LVL LYD MAD MDL MKD MMK MNT MOP MUR MVR MWK MXN MXV MYR MZN NAD NGN NIO NOK NPR NZD OMR PAB PEN PGK PHP PKR PLN PYG QAR RON RSD RUB RWF SAR SBD SCR SDG SEK SGD SHP SLL SOS SRD STD SYP SZL THB TJS TMT TND TOP TRY TTD TWD TZS UAH UGX USD UZS VEF VND VUV WST XAF XCD XOF XPF YER ZAR ZMK ZWL "},{"title":"Card Entry Type​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#29","content":"CardEntryType An enum representing different card entry types. Possible values UNDEFINED MSR ICC CNP "},{"title":"Card Scheme Name​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#30","content":"CardSchemeName A string representing different card brands. Possible values MasterCard Visa Maestro American Express Discover JCB Diners UnionPay "},{"title":"Verification Method​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#37","content":"VerificationMethod An enum representing different verification methods used in the transaction. Possible values UNDEFINED SIGNATURE PIN PIN_SIGNATURE FAILED NOT_REQUIRED MOBILE_PASS_CODE "},{"title":"Payment Scenario​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#34","content":"PaymentScenario An enum representing different types of scenario. Possible values UNKNOWN MAGSTRIPE MAGSTRIPECONTACTLESS CHIP CHIPCONTACTLESS CHIPFAILMAGSTRIPE "},{"title":"Status Info​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#status-info","content":"statusInfo A class containing information about the status of the transaction. Properties Property\tDescriptioncancelAllowed bool\tA boolean letting the integrator know if the terminal will accept a stop transaction request. status status\tA Status enum representing the status of the transaction. message String\tA String containing the status message of the transaction. deviceStatus Device Status\tA DeviceStatus object containing information about the payment terminal. "},{"title":"Status​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#38","content":"status An enum containing information about the status of a transaction. Possible values Undefined Success InvalidData ProcessingError CommandNotAllowed NotInitialised ConnectTimeout ConnectError SendingError ReceivingError NoDataAvailable TransactionNotAllowed UnsupportedCurrency NoHostAvailable CardReaderError CardReadingFailed InvalidCard InputTimeout UserCancelled InvalidSignature WaitingForCard CardInserted ApplicationSelection ApplicationConfirmation AmountValidation PinInput ManualCardInput WaitingForCardRemoval TipInput SharedSecretInvalid SharedSecretAuth WaitingSignature WaitingHostConnect WaitingHostSend WaitingHostReceive WaitingHostDisconnect PinInputCompleted PosCancelled RequestInvalid CardCancelled CardBlocked RequestAuthTimeout RequestPaymentTimeout ResponseAuthTimeout ResponsePaymentTimeout IccCardSwiped RemoveCard ScannerIsNotSupported ScannerEvent BatteryTooLow AccountTypeSelection BtIsNotSupported PaymentCodeSelection PartialApproval AmountDueValidation InvalidUrl WaitingCustomerReceipt PrintingMerchantReceipt PrintingCustomerReceipt UpdateStarted UpdateFinished UpdateFailed UpdateProgress WaitingHostPostSend WaitingHostPostReceive Rebooting PrinterOutOfPaper ErrorConnectingToPrinter CardTapped ReceiptPrintSuccess InvalidPinLength OfflinePinAttempt OfflinePinLastAttempt ProcessingSignature CardRemoved TipEntered CardLanguagePreference AutomaticPrintingStarted CancelOperationNotAllowed UpdateSoftwareStarted UpdateSoftwareFinished UpdateSoftwareFailed UpdateSoftwareProgress InstallSoftwareStarted InstallSoftwareFinished InstallSoftwareFailed InstallSoftwareProgress UpdateConfigStarted UpdateConfigFinished UpdateConfigFailed UpdateConfigProgress InitialisationComplete "},{"title":"Tender Type​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#35","content":"TenderType An enum representing different tender types. Possible values NOT_SET CREDIT DEBIT "},{"title":"Tip Configuration​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#39","content":"TipConfiguration Properties Property\tDescriptionbaseAmount BigInteger\tBase amount used to calculate the tip - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). If no base amount is defined, the transaction amount is used as base amount. headerName String\tName of the tipping menu appearing on the terminal. Default: Tip tipPercentages Required List<Integer>\tList of percentages used to calculate the tip amount. REQUIRED enterAmountEnabled Boolean\tFlag used to enable the cardholder to manually enter the tip amount. Default: true skipEnabled Boolean\tFlag used to enable the cardholder to skip the tipping step. Default: true footer String\tFooter note which will appear on the tipping menu. Default: Empty string Code example { baseAmount: '2000', tipPercentages: [5,10,15,20,25], enterAmountEnabled: true, skipEnabled: false, footer: 'Thank you!!! ;)' } Copy "},{"title":"Transaction Type​","type":1,"pageTitle":"Objects","url":"javascript/javascriptobjects#36","content":"TransactionType An enum representing different types of transactions. Possible values UNDEFINED SALE VOID_SALE REFUND VOID_REFUND CANCEL_SALE CANCEL_REFUND TOKENIZE_CARD CARD_PAN "},{"title":"API Overview","type":0,"sectionRef":"#","url":"restapi/restapioverview","content":"API Overview tip First of all, ensure you are using the correct environment by reviewing the type of card reader you have. To check if you should be using a production or development environment, see \"How do I know what type of card reader do I have?\" and select the corresponding URL, as you see below: For production terminals the endpoint to target is: https://cloud.handpoint.com/ For debug terminals the endpoint to target is: https://cloud.handpoint.io/ The following flow shows the interactions between your application and the Handpoint REST API: 1) Send a POST transaction request to the REST API. 2) The API will validate the request body and, if it is correct, will respond back to your software with the response code 202 (\"Accepted”) to confirm that the data has been correctly forwarded to the payment terminal. 3) The validated transaction request object is forwarded to the terminal and the transaction starts. 4.1) In case the original transaction request contains a callbackUrl and token, the transaction result will be sent back from the terminal to your software by using the callbackUrl. The terminal will be authenticated against your endpoint by setting the authentication token of the transaction request in the custom header ( \"AUTH-TOKEN\"). All 2XXs http response codes from the callbackUrl are considered as valid by the terminal to acknowledge of a successful delivery of the transaction result. caution 4.2) IMPORTANT Feature only compatible with Handpoint App v3.3.0 and above. In case the original transaction request does not ontain a callbackUrl and token, the transaction result is sent back from the terminal to Handpoint's REST-API. The result can then be retrieved from the endpoint GET https://cloud.handpoint.[com//io]/transaction-result/{transactionResultId} where the transactionResultId (also called cloud transaction identifier) is found in the answer from the initial POST[1] to the REST-API (see step 2)).","keywords":""},{"title":"Configuration","type":0,"sectionRef":"#","url":"restapi/restconfiguration","content":"Configuration Just request a valid API key from Handpoint to start using API. Initialize your interface with the API key and receive the list of devices available to perform a financial operation. Fast and easy.","keywords":""},{"title":"Endpoints","type":0,"sectionRef":"#","url":"restapi/restendpoints","content":"","keywords":""},{"title":"/initialize​","type":1,"pageTitle":"Endpoints","url":"restapi/restendpoints#initialize","content":"Initialize Initializes the REST API client and returns the list of payment terminals associated with the merchant account Parameters Parameter\tNotesHeader: ApiKeyCloud Required String\tRequest Header used to identify the merchant Returns Parameter\tNotesDevices\tList of Device objects Code Example Operation executed using CLI tool CURL: REQUEST: curl -X GET \\ -H \"ApiKeyCLoud: MeRcHaNt-ApIkEy\" \\ \"https://cloud.handpoint.com/initialize\" RESPONSE: Code 200 -> Body: [ { \"merchant_id_alpha\": \"merchantID\", \"serial_number\": \"082104578\", \"customerReference\": \"op15248\", \"terminal_type\": \"PAXA920\" } ] Copy "},{"title":"/transactions​","type":1,"pageTitle":"Endpoints","url":"restapi/restendpoints#transactions","content":"Transactions POST endpoint used to execute a financial operation Parameters Parameter\tNotesHeader: ApiKeyCloud Required String\tRequest Header used to identify the merchant Request Body: Transaction Request Required TransactionRequest\tObject containing the transaction information Returns Response\tResponse CodeTransaction Accepted\tResponse code 202 is received if the transaction has been successfully sent to the terminal. BadRequest DeviceIsBusy Error\tResponse code 400 with error 1001. Wait until the end of the current transaction to be able to execute the next operation BadRequest DeviceNotResponding Error\tResponse code 400 with error 1002. The device is not responding, verify the device is online and retry in a few seconds. BadRequest CancelOperationNotAllowed Error\tResponse code 400 with error 1003. Operation type stopCurrentTransaction cannot be executed because the terminal is processing the transaction and it can not be stopped. Code Example Operation executed using CLI tool CURL: REQUEST: curl -X GET \\ -H \"ApiKeyCLoud: MeRcHaNt-ApIkEy\" \\ \"https://cloud.handpoint.com/initialize\" RESPONSE: Code 200 -> Body: [ { \"merchant_id_alpha\": \"merchantID\", \"serial_number\": \"082104578\", \"customerReference\": \"op15248\", \"terminal_type\": \"PAXA920\" } ] Copy "},{"title":"/transaction-result/{transactionResultId}​","type":1,"pageTitle":"Endpoints","url":"restapi/restendpoints#transaction-resulttransactionresultid","content":"TransactionResultRetrieval GET endpoint used to retrieve transaction results. IMPORTANT Feature only compatible with Handpoint App v3.3.0 and above. Parameters Parameter\tNotesHeader: ApiKeyCloud Required String\tRequest Header used to identify the merchant Path parameter: transactionResultId Required String\tCustom transaction result Id provided in the response when a Transaction was triggered without callbackUrl. Returns Response\tResponse CodeNo Content\tResponse code 204. transactionResultId found in the database but there is no transaction result associated yet. This status will be retrieved while the transaction is ongoing and the transaction result has not been delivered yet. OK\tResponse code 200 + Transaction Result. transactionResultId found in the database and the associated Transaction Result object Not Found\tResponse code 404. transactionResultId NOT found in the database "},{"title":"Transaction Result Recovery​","type":1,"pageTitle":"Endpoints","url":"restapi/restendpoints#transaction-result-recovery","content":"TransactionResultRecovery The terminal has a transaction recovery loop to automatically send back the pending TransactionResult to the callback URL in case it becomes unreachable (network issue or server down). For the first 100 seconds after a transaction is completed, a background thread will attempt to deliver the result every 5 seconds. If the server is still unreachable after the first 100 seconds, the retry loop turns into an exponential increment to the power of 2 (8s-16s-32s etc…). The recovery loop is reinitialized every time the Handpoint application is restarted or the startRecovery method is triggered. The Transaction Result received through the transaction recovery loop will have the recoveredTransaction field set to true. All 2XXs http response codes from the callbackUrl are valid to notify the device of a successful delivery of the result. Returns Parameter\tNotesTransaction Result\tThe Transaction Result is delivered to the callback Url from the Transaction Request. "},{"title":"Introduction","type":0,"sectionRef":"#","url":"restapi/restintroduction","content":"Introduction Introducing the Revolutionary Handpoint REST API: Seamlessly integrate card present payments into any software Use the Handpoint REST API to integrate leading smartpos terminals with your software. The Handpoint REST API is a simple REST interface that acts as a bridge between your software and the payment terminal , while shielding your software from card data. It is seamless to integrate, keeps all card data out of your system, works with every platform, and lets you use the best Android terminals on the market. Complete your integration in just three steps: Initiate the interface, choose the terminal, and start the sale. It is as simple as it sounds. The only thing you need is a valid API key to authenticate against the API. You even get a list of terminals to which you can connect. Simply execute the financial operation, and within seconds you’ll get back the transaction result and receipts in your software. The Handpoint REST API seamlessly starts and manages the entire P2PE transaction with the payment terminal, minimizing hassle for you and maximizing reliability, security, and control.","keywords":""},{"title":"Downloads","type":0,"sectionRef":"#","url":"restapi/restapidownloads","content":"Downloads Here is a Postman collection to get started with the REST API integration. In the collection there are different operations that can be performed such as Initialize, Ping device, Sale, Sale and tokenize, Sale reversal, Sale with partial approval, Refund, Refund reversal, Print receipt, Tokenize card and Update. Get the Postman Collection! Postman Collection","keywords":""},{"title":"Processing Payments Simulation","type":0,"sectionRef":"#","url":"restapi/restprocessingpayments","content":"Processing Payments Simulation Test transactions are conducted against a test server which is designed to simulate the behavior of an acquiring bank without moving any funds. As with every Handpoint terminal, sensitive card data is fully encrypted. Use trigger amounts to generate some specific responses from our server: Sale amounts Amount\tBehaviour37.79\tIssuer response code = 01 (Refer to issuer) 37.84\tIssuer response code = 05 (Not authorized) 37.93\tIssuer response code = 04 (Pick up card) 37.57\tRequest is partially approved 37.68\tRequest timeout Any other values will behave as normal authorized operations.","keywords":""},{"title":"Sandbox","type":0,"sectionRef":"#","url":"restapi/restsandbox","content":"Sandbox Get started today with our sandbox. You can generate sample transactions and test the experience right in your browser. Check it at: http://www.handpoint.com/lab/cloudpos. A payment terminal is required to start testing. This is the initial setup screen: To get started, select the target environment where you are going to operate (Sandbox/Production). If the user has any doubts selecting the correct environment, click on \"*How do I know what type of card reader do I have?\" and you will be redirected to an explanation page. Next, enter your Handpoint API key in the box labeled \"INSERT API KEY” and click the check button. This will automatically populate the “SELECT A DEVICE” drop down with the list of devices that are assigned to you. If the API key is not valid, an error message will appear in the “RESPONSES” section of the sandbox. Before you can begin any further testing, you first must select the device that you will be using. In the “SELECT A DEVICE” list, you will see both the real terminals assigned to you, as well as simulated devices (listed by serial number). You can choose any device to test with. Serial numbers for the simulated devices always have this format: XXXX | 999999xxxxx. Choose a simulated terminal if you do not have access to a real device or if you just want to see simulated behavior. You can refresh the “SELECT A DEVICE” list by clicking the refresh button on the right side of the “SELECT A DEVICE” box. If you are already connected to a device, you can disconnect from it using the “Disconnect” button or trigger a software and configuration update operation by using the \"Update\" button. Once you have selected a device, the “SELECT A DEVICE” box will be disabled, and the rest of the sandbox will be enabled. With your selected device, you can simulate a number of operations, including: salesale and tokenizerefundtokenize cardreverse sale transactionsreverse refund transactions In order to reverse a transaction, a transaction id is needed, this id is available in the transaction result data coming from a previous sale or refund operation. Each transaction result will appear in the RESPONSES panel, on the right side of the screen. With each transaction result you will be able to perform several operations: View and print the merchant receiptView and print the customer receiptReverse the transactionCopy the transaction result data; it is the raw transaction result, as received by the application from the device","keywords":""},{"title":"API overview","type":0,"sectionRef":"#","url":"windows/windowsapioverview","content":"","keywords":""},{"title":"How to implement a Sale Transaction​","type":1,"pageTitle":"API overview","url":"windows/windowsapioverview#how-to-implement-a-sale-transaction","content":"The below flow chart shows the interaction between the SDK, the payment terminal and your application. The orange arrows represent methods (requests) that need to be invoked to communicate with the Handpoint SDK's. The dark arrows represent events that need to be integrated in your code in order to retrieve information from the SDK´s and the card reader.  "},{"title":"How to implement a Sale Transaction with Recovery feature​","type":1,"pageTitle":"API overview","url":"windows/windowsapioverview#how-to-implement-a-sale-transaction-with-recovery-feature","content":"At some point, the connection between the SDK and the card reader can become unstable. For example, the Bluetooth connection can be cut in the middle of a sale transaction if the smartphone runs out of battery. If this happens, you need to have implemented the “transaction recovery feature” in order to get the receipts from the previous transaction and knowing if it was successful despite the connection problem.  Supported functionality Discovery of remote BT and CLOUD devices.Connect to remote BT and CLOUD device.Physical connection to HiPro external accessory.Automatic or manual reconnection to the card reader.Executing financial transaction.Reporting status of transactions.Control and access to device logs.Barcode scanner with HiPro card readers.Limited card reader simulation. Processing Payments Simulation Your test payments are sent against a test server on the Handpoint side which simulates the behavior of an acquiring bank. Funds are not moved and sensitive data from the card is fully encrypted. You can use trigger amounts to generate some specific responses from our server: Sale amounts Amount\tBehaviour37.79\tIssuer response code = 01 (Refer to issuer) 37.84\tIssuer response code = 05 (Not authorized) 37.93\tIssuer response code = 04 (Pick up card) 37.57\tRequest is partially approved 37.68\tRequest timeout "},{"title":"Release Notes","type":0,"sectionRef":"#","url":"restapi/restreleasenotes","content":"","keywords":""},{"title":"2.4.0​","type":1,"pageTitle":"Release Notes","url":"restapi/restreleasenotes#240","content":"Features: Transaction result retrieval through API endpoint GET .../transaction-result/{transactionResultId} "},{"title":"Introduction","type":0,"sectionRef":"#","url":"windows/windowsintroduction","content":"Introduction Windows SDK version 3.1.7 Get the SDK! The new generation of Handpoint APIs and SDKs are engineered to make your life simpler, happier. Awesomely simple Created for humans, coders, geeks, no need of dark and complex knowledge of the payment industry. Superly secure We take care of the PCI side so you don't have to spend months becoming compliant. The Handpoint card reader encrypts all sensitive cardholder data so your app does not have to deal with it. Working with the SDK The Handpoint Windows SDK is compatible with .NET Framework Version 4.6.1. Download the SDK.Create a new windows form project in Visual Studio 2010 (or above) using .Net Framework Version 4.6.1.Add the HandpointSDK NuGet Package to your project. If you have a DEBUG device (How to identify DEBUG devices) please use the package version -beta (prerelease): Example 3.0.0-betaFollow the getting started guide, to get you up and running or dive into the documentation. If you have any questions, do not hesitate to contact us.","keywords":""},{"title":"Events","type":0,"sectionRef":"#","url":"windows/windowsevents","content":"","keywords":""},{"title":"Transaction Result Recovery over CLOUD connection​","type":1,"pageTitle":"Events","url":"windows/windowsevents#transaction-result-recovery-over-cloud-connection","content":"CloudTransactionResultRecovery The terminal has a transaction recovery loop to automatically send back the pending Transaction Result to the Point of sale in case it becomes unreachable (network issue or other). For the first 100 seconds after a transaction is completed, a background thread will attempt to deliver the result every 5 seconds. If the point of sale is still unreachable after the first 100 seconds, the retry loop turns into an exponential increment to the power of 2 (8s-16s-32s etc…). The recovery loop is reinitialized every time the Handpoint application is restarted.The Transaction Result received through the transaction recovery loop will have the recoveredTransaction field set to true. Important information: The point of sale must be successfully connected to a terminal in order to receive the pending transactions. Transaction Result Ready Event Event containing the pending Transaction Result "},{"title":"Device discovery finished​","type":1,"pageTitle":"Events","url":"windows/windowsevents#13","content":"deviceDiscoveryFinished deviceDiscoveryFinished event gets called when a device discovery has finished and returns a list of devices. Parameters​ Parameter\tNotesdevice Required Device\tThe device that is invoking the event Code example //Receiving a list of connectable devices List<Device> myListOfDevices = new List<Device>(); public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { foreach(Device device in devices) { myListOfDevices.Add(device); } } Copy Subscribers Needed AddRequiredEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve the devices information. "},{"title":"Signature required​","type":1,"pageTitle":"Events","url":"windows/windowsevents#5","content":"SignatureRequired SignatureRequired event gets called when a card requires a signature instead of PIN entry and has two parameters, request and device. Integrations with PAX or Telpo devices DO NOT need the implementation of this event. Parameters​ Parameter\tNotesrequest Required SignatureRequest\tHolds the signature request device Required Device\tThe device that is invoking the event Code example //Receiving a SignatureRequest from the SDK. public void SignatureRequired(SignatureRequest signatureRequest, Device device) { //You might want to print out the receipt or ask the customer to sign the receipt on your device DisplayReceiptInUI(signatureRequest.MerchantReceipt) //If you accept the signature api.SignatureResult(true); } Copy Subscribers Needed AddRequiredEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve signature information. "},{"title":"End of transaction​","type":1,"pageTitle":"Events","url":"windows/windowsevents#6","content":"EndOfTransaction EndOfTransaction event gets called at the end of each transaction and has two parameters, result and device. Parameters​ Parameter\tNotesresult Required TransactionResult\tHolds the results for the transaction device Required Device\tThe device that is invoking the event Code example //Receiving a TransactionResult from the SDK. public void EndOfTransaction(TransactionResult transactionResult, Device device) { //You might want to display this information in the UI postTransactionResultToUI(transactionResult); } Copy Subscribers Needed AddRequiredEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve signature information. "},{"title":"Connection status changed​","type":1,"pageTitle":"Events","url":"windows/windowsevents#7","content":"ConnectionStatusChanged ConnectionStatusChanged event gets called when the state of a card reader connection changes. Parameters​ Parameter\tNotesstatus Required ConnectionStatus\tAn enum containing the status code for the connection device Required Device\tThe device that is invoking the event Code example //Receiving a new ConnectionStatus from the SDK public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus connectionStatus, Device device) { //You might want to display this information in the UI postNewStatusToUI(connectionStatus); } Copy Subscribers Needed AddStatusNotificationEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve the different connection statuses (e.g : CONNECTED, DISCONNECTED...). "},{"title":"Current transaction status​","type":1,"pageTitle":"Events","url":"windows/windowsevents#4","content":"CurrentTransactionStatus currentTransactionStatus event gets called when the state of an ongoing transaction changes. Parameters​ Parameter\tNotesstatusInfo Required ConnectionStatus\tAn object containing information about the current transaction device Required Device\tThe device that is invoking the event Code example //Receiving a transaction status from the SDK. public void currentTransactionStatus(StatusInfo statusInfo, Device device) { //You might want to display some of this information in the UI DisplayTransactionStatusInUI(statusInfo) } Copy Subscribers Needed AddStatusNotificationEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve the different states from the card reader (e.g : Waiting for card, Waiting for PIN entry...). "},{"title":"Message logged​","type":1,"pageTitle":"Events","url":"windows/windowsevents#message-logged","content":"OnMessageLogged OnMessageLogged event gets called for all log messages that are being logged. This is only intended for debugging. Parameters​ Parameter\tNoteslogLevel Required LogLevel\tAn enum containing the log level message Required String\tA String containing the current log message Code example //Receiving a log from the SDK public void OnMessageLogged(LogLevel logLevel, String message) { //You do not want to display this information in the UI Debug.WriteLine(message); } Copy Subscribers Needed AddLogEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve the different log messages. "},{"title":"Logs ready​","type":1,"pageTitle":"Events","url":"windows/windowsevents#10","content":"DeviceLogsReady DeviceLogsReady event gets called when the card reader logs requested by a call to getDeviceLogs() are ready. This Event is really useful if there has been a communication error between the card reader and the API (e.g : Bluetooth communication lost). After reconnecting, you can then fetch the card reader logs to the API. Parameters​ Parameter\tNoteslogs Required String\tString containing the current log device Required Device\tThe device that is invoking the event Code example //Receiving a log from the device public void **[*DeviceLogsReady*](#10)**(string logs, Device device) { //You might want to save this information WriteLogsToDisk(logs); } Copy Subscribers Needed AddLogEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve the card reader logs. "},{"title":"Pending transaction result​","type":1,"pageTitle":"Events","url":"windows/windowsevents#pending-transaction-result","content":"PendingTransactionResult In the case of a communication failure between the device and the API a TransactionResult might have not been delivered to the API. This event is invoked when the device has a pending TransactionResult. This event might be invoked when reconnecting to a device after a communication failure during a transaction. This event will not be called if HapiManager.Settings.AutoRecoverTransactionResult is set to true. Parameters​ Parameter\tNotesdevice Required Device\tThe device that is invoking the event Code example @Override public void PendingTransactionResult(Device device){ //Here you might want to call api.GetPendingTransaction(); to receive the TransactionResult } Copy Subscribers Needed AddPendingResultsEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve information about pending results. "},{"title":"Transaction result ready​","type":1,"pageTitle":"Events","url":"windows/windowsevents#11","content":"TransactionResultReady In the case of a communication failure between the device and the API a TransactionResult might have not been delivered to the API. This event will be invoked after using hapi.GetPendingTransaction();. When there is no pending transaction the TransactionResult will contain default/error fields and no receipts. This event is called if HapiManager.Settings.AutoRecoverTransactionResult is set to true. Parameters​ Parameter\tNotesresult Required TransactionResult\tHolds the results for the transaction device Required Device\tThe device that is invoking the event Code example @Override public void TransactionResultReady(TransactionResult transactionResult, Device device){ //Here you might want to do stuff to the transactionResult } Copy Subscribers Needed AddPendingResultsEventHandler This listener has to be implemented (preferably during initialisation) in order to retrieve information about pending results. "},{"title":"Events subscribers","type":0,"sectionRef":"#","url":"windows/windowseventssubscribers","content":"","keywords":""},{"title":"Register events delegate​","type":1,"pageTitle":"Events subscribers","url":"windows/windowseventssubscribers#register-events-delegate","content":"RegisterEventsDelegate Registers a delegate for the SDK events. Method getAsyncInterface in HapiFactory executes internally this subscription. Parameters​ Parameter\tNoteslistener Required Object\tAny Object implementing one or more of the available delegate interfaces Code example public class ObjectHelper : Events.Required, Events.Status, Events.Log { ... private void RegisterEventHandler() { // Register this class as listener for events this.api.RegisterEventsDelegate(this); ... } } Copy Returns Parameter\tNotesBoolean\tTrue if the new delegate was added successfully. "},{"title":"Unregister events delegate​","type":1,"pageTitle":"Events subscribers","url":"windows/windowseventssubscribers#unregister-events-delegate","content":"UnregisterEventsDelegate Unregisters an object from SDK events. Parameters​ Parameter\tNoteslistener Required Object\tAny Object implementing one or more of the available delegate interfaces Code example public class ObjectHelper : Events.Required, Events.Status, Events.Log { ... private void Unsubscribe() { // Stop receiving events this.api.UnregisterEventsDelegate(this); ... } Copy Returns Parameter\tNotesBoolean\tTrue if the new delegate was removedded successfully. "},{"title":"Release Notes","type":0,"sectionRef":"#","url":"windows/windowsreleasenotes","content":"","keywords":""},{"title":"3.1.7​","type":1,"pageTitle":"Release Notes","url":"windows/windowsreleasenotes#317","content":"Fixes: CLOUD: Improved initial retry mechanism for triggering transactions.CLOUD: Increased initial timeout for triggering transactions. "},{"title":"Device management","type":0,"sectionRef":"#","url":"windows/windowsdevicemanagement","content":"","keywords":""},{"title":"Connect​","type":1,"pageTitle":"Device management","url":"windows/windowsdevicemanagement#connect","content":"Connect Configures the device as the preferred device and tries to connect to it. Everytime a new connection is started the SDK will make 3 attempts to reestablish the connection. If those attempts fail, the connection is considered dead. Parameters​ Parameter\tNotesdevice Required Device\tThis parameter specifies to the system which device you want to use for the operations. Code example //Connect to a CLOUD device Device device = new Device(\"CloudDevice\", \"9822032398-PAXA920\", \"\", ConnectionMethod.Cloud); // The address is the composition of the serial number and model ot the target device. //Example for a PAX A920 device: serial_number - model -> 9822032398-PAXA920 api.UseDevice(device); //Connect to a device Device device = new Device(\"CardReader7\", \"08:00:69:02:01:FC\", \"1\", ConnectionMethod.BLUETOOTH); api.UseDevice(device); Copy Events invoked​ ConnectionStatusChanged Each time the card reader state changes (ex : going from Connected to Disconnected) the ConnectionStatusChanged event is called. It causes the connection manager to invoke this event with the appropriate information. Returns Parameter\tNotesBoolean\tTrue if the operation was successful. "},{"title":"Disconnect​","type":1,"pageTitle":"Device management","url":"windows/windowsdevicemanagement#disconnect","content":"Disconnect Disconnect will stop the active connection (and reconnection process). Please note that the method does NOT ignore the current state of the card reader. This means that if a disconnect is attempted during a transaction it will not be successful and the method will return false. If a transaction is not in progress the disconnect will take 1-3 seconds to successfully finish and will then return true. Parameters​ Parameter\tNotesdevice Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Disconnect from current device api.Disconnect(); Copy Events invoked​ ConnectionStatusChanged Each time the card reader state changes (ex : going from Connected to Disconnected) the ConnectionStatusChanged event is called. It causes the connection manager to invoke this event with the appropriate information. Returns Parameter\tNotesBoolean\tTrue if the operation was succesful "},{"title":"Set shared secret​","type":1,"pageTitle":"Device management","url":"windows/windowsdevicemanagement#set-shared-secret","content":"SetSharedSecret Validates the app for this session, thus enabling financial transactions Parameters​ Parameter\tNotessharedSecret Required String\tThe shared secret is a key provided by Handpoint when you get your account that enables you to perform live operations with the card reader. However, if you're developing with a starter kit, the test shared secret is specified in the example device Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Sets the shared secret using the test key api.SetSharedSecret(\"0102030405060708091011121314151617181920212223242526272829303132\"); Copy Events invoked​ None No events invoked. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Set parameter​","type":1,"pageTitle":"Device management","url":"windows/windowsdevicemanagement#set-parameter","content":"SetParameter Changes values of certain parameters on the card reader. Parameters​ Parameter\tNotesparam Required DeviceParameter\tThe name of the parameter to change value Required String\tNew value of the parameter device Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Changes the bluetooth name of card reader api.SetParameter(DeviceParameter.BluetoothName, \"OrangeCardReader\"); Copy Events invoked​ None No events are invoked. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Set logging level​","type":1,"pageTitle":"Device management","url":"windows/windowsdevicemanagement#set-logging-level","content":"SetLogLevel Sets the log level (info, debug...) for both the card reader and the API. Note : At the end of a transaction, the card reader logs are always automatically fetched to the API. Parameters​ Parameter\tNoteslevel Required LogLevel\tThe desired log level. Can be LogLevel.None, LogLevel.Info, LogLevel.Full, LogLevel.Debug device Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Sets the log level to info api.SetLogLevel(LogLevel.info); Copy Events invoked​ None No events are invoked. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Request device logs​","type":1,"pageTitle":"Device management","url":"windows/windowsdevicemanagement#request-device-logs","content":"GetDeviceLogs Fetches the logs from the device and reports them to the DeviceLogsReady event. Parameters​ Parameter\tNotesdevice Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Downloads logs from device api.GetDeviceLogs(); Copy Events invoked​ DeviceLogsReady Invoked when hapi has finished downloading logs from the card reader. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Request pending transaction results​","type":1,"pageTitle":"Device management","url":"windows/windowsdevicemanagement#request-pending-transaction-results","content":"GetPendingTransaction Please note this method is only supported on Card Readers with EFT Software versions 1.7.x and 2.2.x and up In the case of a communication failure between the device and the API a TransactionResult might have not been delivered to the API. This function fetches a pending TransactionResult (which contains receipts) from the device, if any. If no TransactionResult was pending a result will be delivered containing default fields. In order to receive only valid TransactionResults this function should only be called when PendingTransactionResult event is invoked or when HapiManager.IsTransactionResultPending() is true. To receive events when a TransactionResult is pending on the device please add a Events.PendingResults listener. Parameters​ Parameter\tNotesdevice Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Fetches a pending TransactionResult from a device api.GetPendingTransaction(); Copy Events invoked​ TransactionResultReady Invoked when hapi has finished fetching a TransactionResult from the device. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"Update device​","type":1,"pageTitle":"Device management","url":"windows/windowsdevicemanagement#update-device","content":"Update The update operation checks for update to the card reader and initiates an update if needed. The update can either be a software update or a configuration update. Parameters​ Parameter\tNotesdevice Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Check for card reader update api.Update(); List Devices (search) Copy Events invoked​ None Information about this process should be available at the device's screen. Returns Parameter\tNotesBoolean\tTrue if the operation was successfully sent to device. "},{"title":"List Devices (search)​","type":1,"pageTitle":"Device management","url":"windows/windowsdevicemanagement#list-devices-search","content":"ListDevices Starts the search for devices to connect with the specified ConnectionMethod Parameters​ Parameter\tNotesmethod Required ConnectionMethod\tThe means of connection you intend to use to talk to the device. (Bluetooth, Cloud, Serial, USB, etc...) Code example //Search for Bluetooth devices api.ListDevices(ConnectionMethod.BLUETOOTH); //Search for Cloud devices api.ListDevices(ConnectionMethod.CLOUD); Copy Events invoked​ deviceDiscoveryFinished Invoked after the search is finished returning a list of the devices finished. "},{"title":"Start monitoring connections​","type":1,"pageTitle":"Device management","url":"windows/windowsdevicemanagement#start-monitoring-connections","content":"StartMonitoringConnections Starts a connection monitoring service. The service listens to events sent by the operating system about the connected hardware. If the service notices that a previously connected device suddenly disconnects on the hardware layer it attempts to reconnect to that particular device. Since this is a service it is necessary that the service is turned off before the application ends its life-time. This means that, if the service was running, stopMonitoringConnections() has to be called before the application is exited completely. Note that the service currently only works with USB. In the case of USB the service will only disconnect from the device and when it notices that it has been plugged in again it will connect to it. Code example //Starts the connection monitoring service //app starts it's life-time api.StartMonitoringConnections(); ... //app ends its life-time api.StopMonitoringConnections Copy Events invoked​ ConnectionStatusChanged Causes the connection manager to invoke this event with the appropriate information. Returns Parameter\tNotesNone\tNo information is returned. "},{"title":"Stop monitoring connections​","type":1,"pageTitle":"Device management","url":"windows/windowsdevicemanagement#stop-monitoring-connections","content":"StopMonitoringConnections Stops a connection monitoring service. The service listens to events sent by the operating system about the connected hardware. If the service notices that a previously connected device suddenly disconnects on the hardware layer it attempts to reconnect to that particular device. Since this is a service it is necessary that the service is turned off before the application ends its life-time. This means that, if the service was running, stopMonitoringConnections() has to be called before the application is exited completely. Note that the service currently only works with USB. In the case of USB the service will only disconnect from the device and when it notices that it has been plugged in again it will connect to it. Code example //Starts the connection monitoring service //app starts it's life-time api.StartMonitoringConnections(); ... //app ends its life-time api.StopMonitoringConnections Copy Events invoked​ ConnectionStatusChanged Causes the connection manager to invoke this event with the appropriate information. Returns Parameter\tNotesNone\tNo information is returned. "},{"title":"Objects","type":0,"sectionRef":"#","url":"restapi/restobjects","content":"","keywords":""},{"title":"Operation Type​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#operation-type","content":"OperationType An enum representing different types of transactions. Possible Values: sale refund refundReversal saleReversal saleAndTokenizeCard tokenizeCard printReceipt update cardPan pingDevice stopCurrentTransaction "},{"title":"Operation Types Description​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#operation-types-description","content":"OperationTypesDescription Parameter\tNotessale String\tA sale initiates a payment operation to the card reader refund String\tA refund operation moves funds from the merchant account to the cardholder´s credit card. For Interac (Canadian Debit Network), refunds can only be processed until Interac closes the batch of transactions at night refundReversal String\tA refund reversal, also called refund VOID allows the merchant to reverse a previous refund operation. This operation reverts (if possible) a specific refund identified with a transaction id saleReversal String\tA sale reversal, also called sale VOID allows the user to reverse a previous sale operation. This operation reverts (if possible) a specific sale identified with a transaction id saleAndTokenizeCard String\tA sale operation which also returns a card token (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice) tokenizeCard String\tReturns a card token (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice) printReceipt String\tThis method sends the merchant or customer receipt to the terminal for printing. The format of the HTML data, passed to the method or stored in the url, must follow this format: Html Print Format update String\tThe update operation checks for new software or configuration updates and initiates a download if required. cardPan String\tA cardPan request will return the full PAN of the card being swiped, dipped or tapped. Only the PANs of whitelisted card ranges will be returned by the Handpoint systems. This operation is mostly used to be able to process funds or points from loyalty cards. pingDevice String\tThis operation will ping the terminal to confirm if it is online. stopCurrentTransaction String\tOperation used to stop the current transaction. The transaction can only be stopped at specific stages of a payment processing, for example a transaction can not be stopped when the card is being read but can be stopped when waiting for the cardholder to initially insert a card. "},{"title":"Financial Status​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#financial-status","content":"Financial Status: UNDEFINED AUTHORISED DECLINED PROCESSED FAILED CANCELLED PARTIAL_APPROVAL "},{"title":"Transaction Result Object​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#transaction-result-object","content":"TransactionResult An object holding information about the result of a transaction. An object holding information about the result of a transaction. Property\tDescriptionaid String\tApplication Identifier of the card (EMV tag 9F06) arc String\tEMV Authorisation Response Code (EMV tag 8A) authorisationCode String\tAcquirer response code balance Balance\tBalance available on the card budgetNumber String\tUsed to split payments over a period of months cardEntryType CardEntryType\tMethod used by the terminal to read the card cardLanguagePreference String\tPreferred language of the card (EMV tag 5F2D) cardSchemeName CardSchemeName\tThe brand of the card cardToken String\tToken representing the PAN of the card chipTransactionReport String\tFull report of the card EMV parameters currency Currency\tThe currency used for the transaction customerReceipt String\tA URL containing the customer receipt in HTML format customerReference String\tIf a customerReference was provided as an optional parameter in the transaction request it is echoed unaltered in this field deviceStatus DeviceStatus\tStatus of the device dueAmount String\tIn case of a partial approval for the transaction, this field contains the amount which remains to be paid efttimestamp Date\tTime of the transaction efttransactionID String\tHandpoint unique identifier for a transaction, this id is the one to be used for a transaction to be reversed. errorMessage String\tDetailed reason for the transaction error expiryDateMMYY String\tExpiry date of the card used for the operation finStatus FinancialStatus\tThe financial status contains the outcome of the transaction. For example \"AUTHORISED\" or \"DECLINED\" iad String\tIssuer Application Data (EMV tag 9F10) issuerResponseCode String\tResponse code from the card issuer maskedCardNumber String\tMasked card number of the card used for the operation merchantAddress String\tMerchant Address merchantName String\tMerchant Name merchantReceipt String\tA URL containing the customer receipt in HTML format mid String\tMerchant Identifier originalEFTTransactionID String\tIn case the transaction type is a reversal, this field will contain the identifier of the original transaction being reversed paymentScenario PaymentScenario\tIndicates the card entry mode recoveredTransaction boolean\tThis flag is set to true if the transaction result is sent through the transaction recovery logic explained in the Recovey Section, false otherwise requestedAmount BigInteger\tThe requested amount is the transaction amount sent to the terminal rrn String\tRetrieval Reference Number, unique number assigned by the acquirer signatureUrl String\tIf a digital signature is required, this is the URL containing the image of the captured signature statusMessage String\tThe status of the transaction, for example \"Waiting for pin\" tenderType TenderType\tTransaction tender type (credit / debit) tid String\tMerchTerminalant Identifier tipAmount BigInteger\tTip amount, if any, in the minor unit of currency (f.ex. 1000 is 10.00 GBP) tipPercentage double\tIf tipping is enabled, this field will return the tip percentage added on top of the base amount totalAmount BigInteger\tThe total amount is the amount the card was charged for. It is possible that the total amount is not the same as the requested amount since an additional fee can be added, with the customer's approval, via the tipping functionality transactionID String\tThe transaction id is a terminal internal counter incremented for each transaction tsi String\tTransaction Status Information (EMV tag 9B) tvr String\tTransaction Verification Results (EMV tag 95) type TransactionType\tThe type of transaction initiated, for example \"SALE\" unMaskedPan String\tUnmasked PAN, only received if the card is a non-payment card (loyalty) verificationMethod VerificationMethod\tcardholder verification method, for example \"PIN\" multiLanguageStatusMessages Map\tContaining the status message in a human readable format for all the supported locales. multiLanguageErrorMessages Map\tContaining the error message in a human readable format for all the supported locales. cardHolderName String\tName of the cardholder Code example { \"aid\": \"A0000000041010\", \"arc\": \"0000\", \"authorisationCode\": \"123456\", \"balance\": null, \"budgetNumber\": \"\", \"cardEntryType\": \"UNDEFINED\", \"cardLanguagePreference\": \"\", \"cardSchemeName\": \"MasterCard\", \"cardToken\": \"\", \"chipTransactionReport\": \"\", \"currency\": \"USD\", \"customerReceipt\": \"https://s3.[...]/customerReceipt.html\", \"customerReference\": \"\", \"deviceStatus\": { \"applicationName\": \"ClientApp\", \"applicationVersion\": \"20.1.0\", \"batteryCharging\": \"Not Charging\", \"batteryStatus\": \"100\", \"batterymV\": \"4126\", \"bluetoothName\": \"PAXA920\", \"externalPower\": \"USB\", \"serialNumber\": \"0821032398\", \"statusMessage\": \"Approved or completed successfully\" }, \"dueAmount\": 0, \"errorMessage\": \"\", \"expiryDateMMYY\": \"0422\", \"finStatus\": \"AUTHORISED\", \"iad\": \"0210A000002A0000000000000000000000FF\", \"issuerResponseCode\": \"00\", \"maskedCardNumber\": \"************1456\", \"merchantAddress\": \"Plaza Soledad Torres Acosta 1 28013 Madrid\", \"merchantName\": \"Hago la cama\", \"merchantReceipt\": \"https://s3.[...]/merchantReceipt.html\", \"mid\": \"\", \"originalEFTTransactionID\": \"\", \"paymentScenario\": \"CHIPCONTACTLESS\", \"rrn\": \"\", \"signatureUrl\": \"\", \"statusMessage\": \"Approved or completed successfully\", \"tenderType\": \"CREDIT\", \"tid\": \"ACQUIRER_TID\", \"tipAmount\": 0, \"totalAmount\": 100, \"transactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"tsi\": \"0000\", \"tvr\": \"0400008001\", \"type\": \"SALE\", \"unMaskedPan\": \"\", \"verificationMethod\": \"UNDEFINED\", \"efttimestamp\": 1615374961000, \"efttransactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"requestedAmount\": 100, \"tipPercentage\": 0, \"recoveredTransaction\": false, \"cardHolderName\": \"Mr/Mrs card holder full name\" } Copy "},{"title":"Transaction Request Object​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#transaction-request-object","content":"TransactionRequest An object to store the information about the payment terminal in use Properties Property\tDescriptionoperation Required OperationTypesDescription\tThe type of transaction to be performed. serial_number Required String\tDevice serial number. terminal_type Required String\tDevice type. callbackUrl String\tif used, url the terminal will use to send the Transaction Result. All 2XXs http response codes from the callbackUrl are valid to notify the terminal of a successful delivery of the result. If the callbackUrl is not present, the device will send back the transaction result to Handpoint's REST-API and results can be retrieved using the Transaction Result Retrieval endpoint token Required String\tToken used to authenticate the terminal and transaction when serving the Transaction Result through the callbackUrl . The token will be injected in the Request Header with key value 'AUTH-TOKEN'. REQUIRED when the callbackUrl is present. customerReference String\tTransaction identifier provided by the integrator. The customerReference sent in TransactionRequests objects is echoed in the TransactionResults amount Required String\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 EUR). REQUIRED for operations: sale, refund, refundReversal, saleReversal and saleAndTokenizeCard. currency Required Currency\tThe currency of the transaction. REQUIRED for operations: sale, refund, refundReversal, saleReversal and saleAndTokenizeCard. originalTransactionId Required String\tThe transaction id of the original transaction to reverse. REQUIRED for operations: refundReversal, saleReversal and LINKED refunds. receipt Required String\tHTML receipt, following the format defined in Html Print Format, or url to locate the receipt, it can be found in the response of a Transaction Request, in the fields merchantReceipt or customerReceipt. REQUIRED for operations: printReceipt. tipConfiguration TipConfiguration\tConfiguration to enable tipping. At the time of sale, a tip menu will be shown to the cardholder with the predefined configuration. The tip configuration is optional and can only be used with the sale and saleAndTokenize operations. bypassOptions ByPassOptions\tConfiguration to enable the possibility of bypassing signature or pin. The bypass configuration is optional and can only be used with the sale, saleAndTokenize and refund operations merchantAuth MerchantAuth\tObject used to store merchant authentication. The merchantAuth is optional and can only be used with the sale, saleAndTokenize and refund operations. For reversals, the credentials passed for the original sale will be automatically looked up by Handpoint and used to process the reversal. This object allows a transaction to be funded to a specific merchant account other than the default one. It is useful if a terminal is shared between multiple merchants, for example at an Hair Salon or a Doctor's office. Code example // Result will be served to result.com { \"operation\": \"sale\", \"amount\": \"10000\", \"currency\": \"EUR\", \"terminal_type\": \"PAXA920\", \"serial_number\": \"1547854757\", \"customerReference\": \"storeSale12548\", \"callbackUrl\": \"https://result.com\", \"token\": \"123456789\", \"tipConfiguration\": { \"baseAmount\": \"2000\", \"tipPercentages\": [5,10,15,20,25], \"enterAmountEnabled\": true, \"skipEnabled\": false, \"footer\": \"Thank you!!! ;)\" }, \"bypassOptions\": { \"signatureBypass\": true, \"pinBypass\": true }, \"merchantAuth\": [{ \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\", \"externalId\": \"4444\" }] } // Result will be served back to Handpoint's REST-API { \"operation\": \"sale\", \"amount\": \"10000\", \"currency\": \"EUR\", \"terminal_type\": \"PAXA920\", \"serial_number\": \"1547854757\", \"customerReference\": \"storeSale12548\", \"tipConfiguration\": { \"baseAmount\": \"2000\", \"tipPercentages\": [5,10,15,20,25], \"enterAmountEnabled\": true, \"skipEnabled\": false, \"footer\": \"Thank you!!! ;)\" }, \"bypassOptions\": { \"signatureBypass\": true, \"pinBypass\": true }, \"merchantAuth\": [{ \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\", \"externalId\": \"4444\" }] } Copy "},{"title":"Bypass Options​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#bypass-options","content":"BypassOptions Configuration to enable/disable signature or pin bypass. Property\tDescriptionpinBypass Boolean\tEnables/disables pin bypass. Bypasses PIN entry when the shopper says they don't know the PIN for the card and the merchant either knows they are the legitimate cardholder or want to give them the benefit of the doubt. signatureBypass Boolean\tEnables/disables signature bypass. Whether the terminal prompts for a signature, depends on how you configure this parameter. The major card schemes (American Express, Diners, Discover, JCB, Mastercard, Visa, UnionPay) no longer require a signature; they regard it as optional for card-present transactions. This means you can speed up your checkout by skipping the signature prompt. But if your business requires it, you can still let the terminal prompt for a signature. The shopper then provides their signature on the touch screen of the terminal or on the printed transaction receipt. This depends on how you configure this setting. It is your responsibility to verify the signature of the shopper with the signature on the card or another form of identification. Code example { \"bypassOptions\": { \"signatureBypass\": true, \"pinBypass\": true } } Copy "},{"title":"Merchant Auth​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#merchant-auth","content":"MerchantAuth Object used to store merchant authentication. This object is optional, it allows a transaction to be funded to a specific merchant account other than the default one. It is useful if a terminal is shared between multiple merchants, for example at an Hair Salon or a Doctor's office. Property\tDescriptionCredential Credential[]\tArray of credentials Code example { \"merchantAuth\": [{ \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\", \"externalId\": \"4444\" }] } Copy "},{"title":"Acquirer​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#acquirer","content":"Acquirer An enum representing the supported acquirers for merchant authentication. Possible values AMEX BORGUN EVO OMNIPAY POSTBRIDGE INTERAC TSYS VANTIV SANDBOX "},{"title":"Device​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#device","content":"Device An object to store the information about the payment terminal you are working with. ALL values are REQUIRED Properties Property\tDescriptionmerchant_id_alpha Required String\tMerchant unique identifier to which the device is associated serial_number Required String\tDevice serial number ssk Required String\tMerchant shared secret key, unique id for the merchant terminal_type Required String\tDevice type Code example { \"merchant_id_alpha\": \"Test_Merchant\", \"serial_number\": \"614004878\", \"ssk\": \"74817EA5C63437ADE7AA3A5401\", \"terminal_type\": \"PAXA920\" } Copy "},{"title":"Currency​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#currency","content":"Currency An enum of most currencies in the world. Contains the ISO name, ISO number and the name of the currency. Additionally contains information about how many decimals the currency uses. Possible values AED AFN ALL AMD ANG AOA ARS AUD AWG AZN BAM BBD BDT BGN BHD BIF BMD BND BOB BOV BRL BSD BTN BWP BYR BZD CAD CDF CHF CLP CNY COP COU CRC CUC CUP CVE CZK DJF DKK DOP DZD EEK EGP ERN ETB EUR FJD FKP GBP GEL GHS GIP GMD GNF GTQ GYD HKD HNL HRK HTG HUF IDR ILS INR IQD IRR ISK JMD JOD JPY KES KGS KHR KMF KPW KRW KWD KYD KZT LAK LBP LKR LRD LSL LTL LVL LYD MAD MDL MKD MMK MNT MOP MUR MVR MWK MXN MXV MYR MZN NAD NGN NIO NOK NPR NZD OMR PAB PEN PGK PHP PKR PLN PYG QAR RON RSD RUB RWF SAR SBD SCR SDG SEK SGD SHP SLL SOS SRD STD SYP SZL THB TJS TMT TND TOP TRY TTD TWD TZS UAH UGX VND VUV WST XAF XCD XOF XPF YER ZAR ZMK ZWL USD UZS VEF "},{"title":"Card Entry Type​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#card-entry-type","content":"CardEntryType An enum representing different card entry types. Possible values UNDEFINED MSR ICC CNP Code example { \"acquirer\": \"ACQ_DUMMY\", \"mid\": \"1111\", \"tid\": \"2222\", \"mcc\": \"3333\" } { \"externalId\": \"4444\" } Copy "},{"title":"Verification Method​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#verification-method","content":"VerificationMethod An enum representing the possible verification methods used during the transaction. Possible values: UNDEFINEDSIGNATURE PIN PIN_SIGNATURE FAILED NOT_REQUIRED MOBILE_PASS_CODE "},{"title":"Merchant Auth Credential​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#merchant-auth-credential","content":"CredentialAn object to store credentials (Acquirer, Mid, Tid, MCC and ExternalId) for merchant authentication. Properties Property\tDescriptionacquirer Acquirer\tIf present, it links this credential to the specified acquirer. Required if more than one credential is provided. mid String\tFor this transaction, overrides the default MID (merchant ID) saved in the terminal configuration. tid String\tFor this transaction, overrides the default TID (terminal ID) saved in the terminal configuration. mcc String\tMerchant Category Code, overrides the default MCC saved in the terminal configuration. ExternalId String\tFor this transaction, the External Id will be used to lookup the credential of the merchant in the Handpoint backend and process the transaction accordingly. The External id replaces the need to pass MID/TID/MCC as credentials "},{"title":"Balance​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#balance","content":"Balance Balance available on the card Properties Property\tDescriptionamount Integer\tThe balance currency Currency\tThe balance currency positive Boolean\tDefines if the balance is positive negative Boolean\tDefines if the balance is negative Code example \"balance\": { \"amount\": 1000, \"currency\": \"EUR\", \"negative\": false, \"positive\": true } Copy "},{"title":"Device Status​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#device-status","content":"DeviceStatus A class that holds the device status. Properties Property\tDescriptionSerialNumber String\tThe serial number of the device. BatteryStatus String\tThe battery status in percentages of a device. BatterymV String\tThe battery milli volts of a device. BatteryCharging String\tThe battery charging status of a device. ExternalPower String\tThe status of an external power of a device ApplicationName String\tThe application name used on a device ApplicationVersion String\tThe application version number used on a device bluetoothName String\tThe bluetooth interface name used on a device statusMessage String\tDevice human readable status message Code example { \"applicationName\": \"TestApp\", \"applicationVersion\": \"20.1.0.1\", \"batteryCharging\": \"Charging\", \"batteryStatus\": \"100\", \"batterymV\": \"4134\", \"bluetoothName\": \"A920\", \"externalPower\": \"USB\", \"serialNumber\": \"0821032397\", \"statusMessage\": \"Card reader time out\" } Copy "},{"title":"Card Scheme Name​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#card-scheme-name","content":"CardSchemeName A string representing different card brands. Possible values MasterCard Visa Maestro American Express Discover JCB Diners UnionPay "},{"title":"Transaction Type​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#transaction-type","content":"TransactionType An enum representing different types of transactions. Possible values UNDEFINED SALE VOID_SALE REFUND VOID_REFUND CANCEL_SALE CANCEL_REFUND TOKENIZE_CARD CARD_PAN "},{"title":"Payment Scenario​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#payment-scenario","content":"PaymentScenario An enum representing different types of scenario. Possible values UNKNOWN MAGSTRIPE MAGSTRIPECONTACTLESS CHIP CHIPCONTACTLESS CHIPFAILMAGSTRIPE "},{"title":"Status Info​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#status-info","content":"StatusInfo A class containing information about the status of the transaction. Properties Property\tDescriptioncancelAllowed boolean\tA boolean letting the integrator know if the terminal will accept a stop transaction request.) status Status\tA Status enum representing the status of the transaction. message String\tA String containing the status message of the transaction. deviceStatus DeviceStatus\tA DeviceStatus object containing information about the payment terminal. "},{"title":"Status​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#status","content":"status An enum containing information about the status of a transaction. Possible values Undefined Success InvalidData ProcessingError CommandNotAllowed NotInitialised ConnectTimeout ConnectError SendingError ReceivingError NoDataAvailable TransactionNotAllowed UnsupportedCurrency NoHostAvailable CardReaderError CardReadingFailed InvalidCard InputTimeout UserCancelled InvalidSignature WaitingForCard CardInserted ApplicationSelection ApplicationConfirmation AmountValidation PinInput ManualCardInput WaitingForCardRemoval TipInput SharedSecretInvalid SharedSecretAuth WaitingSignature WaitingHostConnect WaitingHostSend WaitingHostReceive WaitingHostDisconnect PinInputCompleted PosCancelled RequestInvalid CardCancelled CardBlocked RequestAuthTimeout RequestPaymentTimeout ´ResponseAuthTimeout´ ´ResponsePaymentTimeout´ IccCardSwiped RemoveCard ScannerIsNotSupported ScannerEvent BatteryTooLow AccountTypeSelection BtIsNotSupported PaymentCodeSelection PartialApproval AmountDueValidation InvalidUrl WaitingCustomerReceipt PrintingMerchantReceipt PrintingCustomerReceipt UpdateStarted UpdateFinished UpdateFailed UpdateProgress WaitingHostPostSend WaitingHostPostReceive Rebooting PrinterOutOfPaper ErrorConnectingToPrinter CardTapped ReceiptPrintSuccess InvalidPinLength OfflinePinAttempt OfflinePinLastAttempt ProcessingSignature CardRemoved TipEntered CardLanguagePreference AutomaticPrintingStarted CancelOperationNotAllowed UpdateSoftwareStarted UpdateSoftwareFinished UpdateSoftwareFailed UpdateSoftwareProgress InstallSoftwareStarted InstallSoftwareFinished InstallSoftwareFailed InstallSoftwareProgress UpdateConfigStarted UpdateConfigFinished UpdateConfigFailed UpdateConfigProgress InitialisationComplete "},{"title":"Tip Configuration​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#tip-configuration","content":"TipConfiguration Properties Property\tDescriptionbaseAmount Biginteger\tBase amount used to calculate the tip - in the minor unit of currency (f.ex. 1000 is 10.00 GBP). If no base amount is defined, the transaction amount is used as base amount. headerName String\tName of the tipping menu appearing on the terminal. Default: Tip tipPercentages Required List\tList of percentages used to calculate the tip amount. enterAmountEnabled boolean\tFlag used to enable the cardholder to manually enter the tip amount. Default: true skipEnabled Boolean\tFlag used to enable the cardholder to skip the tipping step. Default: true footer String\tFooter note which will appear on the tipping menu. Default: Empty string Code example { \"baseAmount\": \"2000\", \"headerName\": \"\", \"tipPercentages\": [5,10,15,20,25], \"enterAmountEnabled\": true, \"skipEnabled\": false, \"footer\": \"Thank you!!! ;)\" } Copy "},{"title":"Tender Type​","type":1,"pageTitle":"Objects","url":"restapi/restobjects#tender-type","content":"TenderType An enum representing different tender types. Possible values NOT_SET CREDIT DEBIT "},{"title":"Transactions","type":0,"sectionRef":"#","url":"windows/windowstransactions","content":"","keywords":""},{"title":"Sale​","type":1,"pageTitle":"Transactions","url":"windows/windowstransactions#sale","content":"Sale A sale initiates a payment operation to the card reader. In it's simplest form you only have to pass the amount and currency but it also accepts a map with extra parameters. Parameters​ Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge map Required Map\tA map including extra optional transaction parameters. device Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Initiate a sale for 10.00 Pounds api.Sale(new BigInteger(1000),Currency.GBP); Copy Events invoked​ currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the card reader (ex : 'waiting for card' or 'waiting for PIN entry')  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\ttrue if the operation was successfully sent to device "},{"title":"Sale And Tokenize Card​","type":1,"pageTitle":"Transactions","url":"windows/windowstransactions#sale-and-tokenize-card","content":"SaleAndTokenizeCard A sale that returns the tokenized version of the card used if successful. (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice) Parameters​ Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge map Required Map\tA map including extra optional transaction parameters. Code example //Initiate a sale for 10.00 in Great British Pounds api.SaleAndTokenizeCard(new BigInteger(\"1000\"),Currency.GBP); Copy Events invoked​ currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the card reader (ex : 'waiting for card' or 'waiting for PIN entry').  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the card reader finishes processing the transaction.  Returns Parameter\tNotesBoolean\ttrue if the operation was successfully sent to device "},{"title":"Sale Reversal​","type":1,"pageTitle":"Transactions","url":"windows/windowstransactions#sale-reversal","content":"SaleReversal A sale Reversal, also called sale VOID allows the user to reverse a previous sale operation. This operation reverts (if possible) a specific sale identified with a transaction id. In it's simplest form you only have to pass the amount, currency and originalTransactionID but it also accepts a map with extra parameters. Note that transactions can only be reversed within the same day as the transaction was made. Parameters​ Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge originalTransactionID Required String\tAs received from the card reader (EFTTransactionID) map Required Map\tA map including extra optional transaction parameters. device Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Initiate a reversal for 10.00 Pounds api.SaleReversal(new BigInteger(1000),Currency.GBP,\"00000000-0000-0000-0000-000000000000\"); Copy Events invoked​ currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the card reader (ex : 'waiting for card' or 'waiting for PIN entry')  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\ttrue if the operation was successfully sent to device "},{"title":"Refund​","type":1,"pageTitle":"Transactions","url":"windows/windowstransactions#refund","content":"Refund A refund initiates a refund operation to the card reader. This operation moves funds from the merchant account to the cardholder´s credit card. In it's simplest form you only have to pass the amount and currency but it also accepts a map with extra parameters. Parameters​ Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge originalTransactionID Required String\tAs received from the card reader (EFTTransactionID) map Required Map\tA map including extra optional transaction parameters. Code example //Initiate a refund for 10.00 in Great British Pounds api.Refund(new BigInteger(1000),Currency.GBP,\"00000000-0000-0000-0000-000000000000\"); Copy Events invoked​ currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the card reader (ex : 'waiting for card' or 'waiting for PIN entry')  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\ttrue if the operation was successfully sent to device "},{"title":"Refund reversal​","type":1,"pageTitle":"Transactions","url":"windows/windowstransactions#refund-reversal","content":"RefundReversal A Refund Reversal, also called Refund VOID allows the merchant to reverse a previous refund operation. This operation reverts (if possible) a specific refund identified with a transaction id. In it's simplest form you only have to pass the amount, currency and originalTransactionID but it also accepts a map with extra parameters. Note that transactions can only be reversed within the same day as the transaction was made. Parameters​ Parameter\tNotesamount Required BigInteger\tAmount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) currency Required Currency\tCurrency of the charge originalTransactionID Required String\tAs received from the card reader (EFTTransactionID) map Required Map\tA map including extra optional transaction parameters. device Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Initiate a refund reversal for 10.00 in Great British Pounds api.RefundReversal(new BigInteger(1000),Currency.GBP,\"00000000-0000-0000-0000-000000000000\"); Copy Events invoked​ currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the card reader (ex : 'waiting for card' or 'waiting for PIN entry')  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\ttrue if the operation was successfully sent to device "},{"title":"Print Receipt​","type":1,"pageTitle":"Transactions","url":"windows/windowstransactions#print-receipt","content":"PrintReceipt Print on demand functionality allowing the merchant to print any HTML formatted receipt. Available for CLOUD connections Parameters​ Parameter\tNotesreceipt Required String\tHTML receipt or url to locate the receipt, it can be found in the response of a financial operation, in the fields merchantReceipt or customerReceipt. The receipt must match the following HTML Print Format Code example // string validReceipt = '...'; bool success = api.PrintReceipt(validReceipt); Copy Returns Parameter\tNotesBoolean\ttrue if the receipt was sent to the printer, false otherwise "},{"title":"Signature result​","type":1,"pageTitle":"Transactions","url":"windows/windowstransactions#signature-result","content":"SignatureResult A signatureRequired event is invoked during transaction when signature verification is needed (f.ex when payment is done with a magstripe card). The merchant is required to ask the cardholder for signature and approve (or disapprove) the signature. signatureResult tells the card reader if the signature was approved by passing true in the method. To disapprove then false is passed. Integrations with PAX or Telpo devices DO NOT need the implementation of this event. Parameters​ Parameter\tNotesaccepted Required Boolean\tpass true if merchant accepts customer signature device Required Device\tThis parameter specifies to the system which device you want to use for the operations. If none is supplied the system will attempt to use a default device, if any. Code example //Receiving a SignatureRequest from the SDK. public void SignatureRequired(SignatureRequest signatureRequest, Device device) { //If you accept the signature api.SignatureResult(true); } Copy Events invoked​ currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the card reader (ex : 'waiting for card' or 'waiting for PIN entry')  endOfTransaction Invoked when the card reader finishes processing the transaction  Returns Parameter\tNotesBoolean\ttrue if the operation was successfully sent to device "},{"title":"Tip Adjustment​","type":1,"pageTitle":"Transactions","url":"windows/windowstransactions#tip-adjustment","content":"TipAdjustment A tip adjustment operation allows merchants to adjust the tip amount of a sale transaction before the batch of transactions is settled by the processor at the end of the day. Note: This functionality is only available for the restaurant industry in the United States and the processors currently supporting this functionality are TSYS and VANTIV. Parameters​ Parameter\tNotestipAmount Required BigInteger\tTip amount added to the original (base) transaction amount - in the minor unit of currency (f.ex. 1000 is 10.00 GBP) originalTransactionID Required String\tUnique id of the original sale transaction as received from the card reader (EFTTransactionID) Code example //Initiate a tip adjustment for $10.00 Task<FinancialStatus> result = hapi.TipAdjustment(BigInteger.Parse(\"1000\"), \"2bc23910-c3b3-11e6-9e62-07b2a5f091ec\"); FinancialStatus status = result.Result; if (status != FinancialStatus.FAILED) { if (status == FinancialStatus.AUTHORISED) { //Success! } else { //Declined } } Copy Returns Result of the tip adjustment transaction, this is an asynchronous method that returns a task called <FinancialStatus>, the possible values are : Parameter\tNotesFinancialStatus\t- FinancialStatus.AUTHORISED (tip adjustment approved by the processor) - FinancialStatus.FAILED (system error or timeout) - FinancialStatus.DECLINED (tip adjustment declined by the processor) If two tip adjustments are sent for the same sale transaction, the second tip adjustment will override the first one. In case the transaction fails (not declined) we recommend that you prompt the user of the POS to retry the adjustment. "},{"title":"Tokenize Card​","type":1,"pageTitle":"Transactions","url":"windows/windowstransactions#tokenize-card","content":"TokenizeCard Returns the tokenized version of the card used if successful (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice). Parameters​ Parameter\tNotesmap Required Map\tA map including extra optional transaction parameters Code example //Initiates a card tokenization operation. api.TokenizeCard(); Copy Events invoked​ currentTransactionStatus Invoked during a transaction, it fetches statuses coming from the card reader (ex : 'waiting for card' or 'waiting for PIN entry').  signatureRequired Invoked if card verification requires signature.  endOfTransaction Invoked when the card reader finishes processing the transaction.  Returns Parameter\tNotesBoolean\ttrue if the operation was successfully sent to device "},{"title":"Objects","type":0,"sectionRef":"#","url":"windows/windowobjects","content":"","keywords":""},{"title":"Transaction Result Object​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#14","content":"TransactionResult An object holding information about the result of a transaction. Properties Parameter\tNotesaid String\tApplication Identifier of the card (EMV tag 9F06) arc String\tEMV Authorisation Response Code (EMV tag 8A) authorisationCode String\tAcquirer response code balance BigInteger\tBalance available on the card budgetNumber String\tUsed to split payments over a period of months cardEntryType CardEntryType\tMethod used by the terminal to read the card cardLanguagePreference String\tPreferred language of the card (EMV tag 5F2D) cardSchemeName CardSchemeName\tThe brand of the card cardToken String\tToken representing the PAN of the card chipTransactionReport String\tFull report of the card EMV parameters currency Currency\tThe currency used for the transaction customerReceipt String\tA URL containing the customer receipt in HTML format customerReference String\tIf a customerReference was provided as an optional parameter in the transaction request it is echoed unaltered in this field deviceStatus DeviceStatus\tStatus of the device dueAmount String\tIn case of a partial approval for the transaction, this field contains the amount which remains to be paid efttimestamp Date\tTime of the transaction efttransactionID String\tHandpoint unique identifier for a transaction, this id is the one to be used for a transaction to be reversed. errorMessage String\tDetailed reason for the transaction error expiryDateMMYY String\tExpiry date of the card used for the operation finStatus FinancialStatus\tThe financial status contains the outcome of the transaction. For example \"AUTHORISED\" or \"DECLINED\" iad String\tIssuer Application Data (EMV tag 9F10) issuerResponseCode String\tResponse code from the card issuer maskedCardNumber String\tMasked card number of the card used for the operation merchantAddress String\tMerchant Address merchantName String\tMerchant Name merchantName String\tA URL containing the customer receipt in HTML format mid String\tMerchant Identifier originalEFTTransactionID String\tIn case the transaction type is a reversal, this field will contain the identifier of the original transaction being reversed paymentScenario PaymentScenario\tIndicates the card entry mode recoveredTransaction boolean\tThis flag is set to true if the transaction result is sent through the transaction recovery logic explained in the Recovey Section, false otherwise requestedAmount BigInteger\tThe requested amount is the transaction amount sent to the terminal rrn String\tRetrieval Reference Number, unique number assigned by the acquirer signatureUrl String\tIf a digital signature is required, this is the URL containing the image of the captured signature statusMessage String\tThe status of the transaction, for example \"Waiting for pin\" tenderType TenderType\tTransaction tender type (credit / debit) tid String\tTerminal Identifier tipAmount BigInteger\tTip amount, if any, in the minor unit of currency (f.ex. 1000 is 10.00 GBP) tipPercentage double\tIf tipping is enabled, this field will return the tip percentage added on top of the base amount totalAmount BigInteger\tThe total amount is the amount the card was charged for. It is possible that the total amount is not the same as the requested amount since an additional fee can be added, with the customer's approval, via the tipping functionality transactionID String\tThe transaction id is a terminal internal counter incremented for each transaction tsi String\tTransaction Status Information (EMV tag 9B) tvr String\tTransaction Verification Results (EMV tag 95) type TransactionType\tThe type of transaction initiated, for example \"SALE\" unMaskedPan String\tUnmasked PAN, only received if the card is a non-payment card (loyalty) verificationMethod VerificationMethod\tcardholder verification method, for example \"PIN\" Code example { \"aid\": \"A0000000041010\", \"arc\": \"0000\", \"authorisationCode\": \"123456\", \"balance\": null, \"budgetNumber\": \"\", \"cardEntryType\": \"UNDEFINED\", \"cardLanguagePreference\": \"\", \"cardSchemeName\": \"MasterCard\", \"cardToken\": \"\", \"chipTransactionReport\": \"\", \"currency\": \"USD\", \"customerReceipt\": \"https://s3.[...]/customerReceipt.html\", \"customerReference\": \"\", \"deviceStatus\": { \"applicationName\": \"ClientApp\", \"applicationVersion\": \"20.1.0\", \"batteryCharging\": \"Not Charging\", \"batteryStatus\": \"100\", \"batterymV\": \"4126\", \"bluetoothName\": \"PAXA920\", \"externalPower\": \"USB\", \"serialNumber\": \"0821032398\", \"statusMessage\": \"Approved or completed successfully\" }, \"dueAmount\": 0, \"errorMessage\": \"\", \"expiryDateMMYY\": \"0422\", \"finStatus\": \"AUTHORISED\", \"iad\": \"0210A000002A0000000000000000000000FF\", \"issuerResponseCode\": \"00\", \"maskedCardNumber\": \"************1456\", \"merchantAddress\": \"Plaza Soledad Torres Acosta 1 28013 Madrid\", \"merchantName\": \"Hago la cama\", \"merchantReceipt\": \"https://s3.[...]/merchantReceipt.html\", \"mid\": \"\", \"originalEFTTransactionID\": \"\", \"paymentScenario\": \"CHIPCONTACTLESS\", \"rrn\": \"\", \"signatureUrl\": \"\", \"statusMessage\": \"Approved or completed successfully\", \"tenderType\": \"CREDIT\", \"tid\": \"ACQUIRER_TID\", \"tipAmount\": 0, \"totalAmount\": 100, \"transactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"tsi\": \"0000\", \"tvr\": \"0400008001\", \"type\": \"SALE\", \"unMaskedPan\": \"\", \"verificationMethod\": \"UNDEFINED\", \"efttimestamp\": 1615374961000, \"efttransactionID\": \"01236fc0-8192-11eb-9aca-ad4b0e95f241\", \"requestedAmount\": 100, \"tipPercentage\": 0, \"recoveredTransaction\": false } Copy "},{"title":"Handpoint Credentials​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#30","content":"HandpointCredentials A class containing information related to the Actor credentials: Shared secret (always required) and Cloud API Key (ony required when using CLOUD connection method). Properties Parameter\tNotesSharedSecret String\tString the value of the Shared secret CloudApiKey String\tString the value of the merchant Cloud Api Key, just required when using CLOUD connection method Code example { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; new HandpointCredentials(sharedSecret); //We've even set a default shared secret! } { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; string apikey = \"This-Is-The-Merchant-Api-Key\"; new HandpointCredentials(sharedSecret, apikey); //We've even set a default shared secret and the merchant Api Key! } Copy "},{"title":"Handpoint API (Hapi) factory​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#handpoint-api-hapi-factory","content":"HapiFactory A factory to provide a unified entrypoint and to simplify the way to instantiate the Hapi object. Methods Static factorygetAsyncInterface( Events.Required requiredListener , HandpointCredentials handpointCredentials ); Parameter\tNotesrequiredListener Required Events.Required\tA listener object to report the required events. handpointCredentials Required HandpointCredentials\tObject containing the actor's Ssk or Ssk and Api Key for CLOUD connections. Code example //InitApi for Datecs devices public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); //The api is now initialized. Yay! we've even set a default shared secret } //InitApi for Cloud devices public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; string apikey = \"This-Is-The-Merchant-Api-Key\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret, apikey)); //The api is now initialized. Yay! we've even set a default shared secret and the merchant Api Key! } Copy "},{"title":"Transaction Type​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#28","content":"TransactionType An enum representing different types of transactions. Possible valuesUNDEFINED SALE VOID_SALE REFUND VOID_REFUND CANCEL_SALE CANCEL_REFUND TOKENIZE_CARD SALE_AND_TOKENIZE_CARD REVERSAL UPDATE HOST_INIT PRINT_RECEIPT CARD_PAN "},{"title":"Connection Method​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#12","content":"ConnectionMethod An enum representing different types of connection methods. BLUETOOTH, CLOUD and SIMULATOR are supported for Windows. Possible valuesUSB SERIAL BLUETOOTH CLOUD HTTPS WIFI ETHERNET SIMULATOR Code example //Currently CLOUD, BLUETOOTH, and SIMULATOR are the only ConnectionMethod available. public enum ConnectionMethod { USB, SERIAL, HTTPS, WIFI, ETHERNET, BLUETOOTH, CLOUD, SIMULATOR } Copy "},{"title":"Device​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#2","content":"Device An object to store the information about the device we're working with. Methods ConstructorDevice( String name , String address , String port , ConnectionMethod connectionMethod , String sharedSecret , int timeout ); Parameter\tNotesname Required String\tA name to identify the device address Required String\tThe address of the device you wish to connect to. E.g.: \"08:00:69:02:01:FC\" for bluetooth or \"9822032398-PAXA920\" for CLOUD (composition of serial number and model of the target device) . port Required String\tThe port to connect to. connectionMethod Required ConnectionMethod\tEnumerated type to specify the type of connection with the device. E.g: Bluetooth, Cloud, Serial, etc... sharedSecret String\tThis is used if you want this specific device to use the specified sharedSecret instead of the default one proviced in the initialization. timeout int\tThe amount of miliseconds to consider the connection has timed out. If not set, the default timeout is 15 seconds. Code example //Create and init a new Datecs Device Device dev = new Device(\"CardReader7\", \"08:00:69:02:01:FC\", \"1\", ConnectionMethod.BLUETOOTH); //Create and init a new PAX/Telpo Device Device dev = new Device(\"CloudDevice\", \"9822032398-PAXA920\", \"\", ConnectionMethod.CLOUD); // The address is the composition of the serial number and model ot the target device. //Example for a PAX A920 device: serial_number - model -> 9822032398-PAXA920 Copy Properties Property\tDescriptionId String\tAn unique identifier of the device. "},{"title":"Connection Status​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#18","content":"ConnectionStatus A list of statuses given to a connection Possible values Connected Connecting Disconnected Disconnecting Initializing NotConfigured "},{"title":"Currency​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#1","content":"Currency An enum of most currencies in the world. Contains the ISO name, ISO number and the name of the currency. Additionally contains information about how many decimals the currency uses. Possible values AED AFN ALL AMD ANG AOA ARS AUD AWG AZN BAM BBD BDT BGN BHD BIF BMD BND BOB BOV BRL BSD BTN BWP BYR BZD CAD CDF CHF CLP CNY COP COU CRC CUC CUP CVE CZK DJF DKK DOP DZD EEK EGP ERN ETB EUR FJD FKP GBP GEL GHS GIP GMD GNF GTQ GYD HKD HNL HRK HTG HUF IDR ILS INR IQD IRR ISK JMD JOD JPY KES KGS KHR KMF KPW KRW KWD KYD KZT LAK LBP LKR LRD LSL LTL LVL LYD MAD MDL MKD MMK MNT MOP MUR MVR MWK MXN MXV MYR MZN NAD NGN NIO NOK NPR NZD OMR PAB PEN PGK PHP PKR PLN PYG QAR RON RSD RUB RWF SAR SBD SCR SDG SEK SGD SHP SLL SOS SRD STD SYP SZL THB TJS TMT TND TOP TRY TTD TWD TZS UAH UGX USD UZS VEF VND VUV WST XAF XCD XOF XPF YER ZAR ZMK ZWL "},{"title":"Signature Request​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#17","content":"SignatureRequest A class containing information about a signature request/signature verification. Properties Property\tDescriptionTimeout String\tint the value of the timeout in seconds. MerchantReceipt String\tString the merchant receipt as html. "},{"title":"Card Scheme Name​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#23","content":"CardSchemeName A string representing different card brands. Possible values MasterCard Visa Maestro American Express Discover JCB Diners UnionPay "},{"title":"Device Parameter​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#8","content":"DeviceParameter An enum describing all the available commands to send to a device. When used a legal value is expected with the command Possible values BluetoothName BluetoothPass SystemTimeout ScreenTimeout SignatureTimeoutLanguage "},{"title":"Device Status​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#24","content":"DeviceStatus A class that holds the device status. Properties Property\tDescriptionSerialNumber String\tGets the serial number of the device BatteryStatus String\tString Gets the battery status in percentages of a device. BatterymV String\tString Gets the battery milli volts of a device. BatteryChargingt String\tString Gets the battery charging status of a device. ExternalPower String\tString Gets the status of an external power of a device. ApplicationName String\tString Gets the application name used on a device. ApplicationVersion String\tString Gets the applicadevicetion version number used on a device. "},{"title":"Terminal Type​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#terminal-type","content":"TerminalType An enum describing all the supported terminal types. Possible values BluetoothName BluetoothPass SystemTimeout ScreenTimeout SignatureTimeoutLanguage "},{"title":"Financial Status​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#25","content":"FinancialStatus An enum representing different statuses of a finalized transaction Possible values UNDEFINED AUTHORISED DECLINED PROCESSED FAILED CANCELLED "},{"title":"Optional Transaction Parameters​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#3","content":"OptionalParameters A class containing optional transaction parameters now supported by the device. Properties Property\tDescriptionBudget String\tBudget is only available for sale transactions. A String representing the key for a budget number.A budget number can be used to split up an amout over a period of months. The value has to be a String of 2 digits representing the number of months to split the transaction to. Example: \"03\" or \"24\". CustomerReference String\tString CustomerReference is available for all transactions. A String representing the key for a customer reference.A customer reference can be used for an internal marking system. The value is sent as a String of a maximum 25 characters and received back when the transaction has been processed. Example: \"C.nr. 212311\". "},{"title":"Log Level​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#9","content":"LogLevel An enum describing the different levels of logging used in the hapi and used in the device. Possible values None Info Full Debug "},{"title":"Status Info​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#status-info","content":"statusInfo A class containing information about the status of the transaction. Properties Property\tDescriptionCancelAllowed bool\tA bool representing if the card reader will accept a cancel request status Status\tA Status enum representing the status of the transaction. message String\tA String containing the status message of the transaction. DeviceStatus DeviceStatus\tA DeviceStatus object containing information about the device. "},{"title":"Verification Method​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#29","content":"VerificationMethod An enum representing different verification methods used in the transaction.  Possible values  UNDEFINED SIGNATURE PIN PIN_SIGNATURE FAILED NOT_REQUIREDMOBILE_PASS_CODE "},{"title":"Payment Scenario​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#26","content":"PaymentScenario An enum representing different types of scenario.  Possible values  UNKNOWN MAGSTRIPE MAGSTRIPECONTACTLESS CHIP CHIPCONTACTLESS CHIPFAILMAGSTRIPE "},{"title":"Status​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#status","content":"status An enum containing information about the status of the transaction.  Possible values  Undefined Success InvalidData ProcessingError CommandNotAllowed NotInitialised ConnectTimeout ConnectError SendingError ReceivingError NoDataAvailable TransactionNotAllowed UnsupportedCurrency NoHostAvailable CardReaderError CardReadingFailed InvalidCard InputTimeout UserCancelled InvalidSignature WaitingForCard CardInserted ApplicationSelection ApplicationConfirmation AmountValidation PinInput ManualCardInput WaitingForCardRemoval TipInput SharedSecretInvalid SharedSecretAuth WaitingSignature WaitingHostConnect WaitingHostSend WaitingHostReceive WaitingHostDisconnect PinInputCompleted PosCancelled RequestInvalid CardCancelled CardBlocked RequestAuthTimeout RequestPaymentTimeout ResponseAuthTimeout ResponsePaymentTimeout IccCardSwiped RemoveCard ScannerIsNotSupported ScannerEvent BatteryTooLow AccountTypeSelection BtIsNotSupported PaymentCodeSelection PartialApproval AmountDueValidation InvalidUrl WaitingCustomerReceipt PrintingMerchantReceipt PrintingCustomerReceipt UpdateStarted UpdateFinished UpdateFailed UpdateProgress WaitingHostPostSend WaitingHostPostReceive Rebooting PrinterOutOfPaper ErrorConnectingToPrinter CardTapped ReceiptPrintSuccess InvalidPinLength OfflinePinAttempt OfflinePinLastAttempt ProcessingSignature CardRemoved TipEntered CardLanguagePreference AutomaticPrintingStarted CancelOperationNotAllowed UpdateSoftwareStarted UpdateSoftwareFinished UpdateSoftwareFailed UpdateSoftwareProgress InstallSoftwareStarted InstallSoftwareFinished InstallSoftwareFailed InstallSoftwareProgress UpdateConfigStarted UpdateConfigFinished UpdateConfigFailed UpdateConfigProgress `InitialisationComplete "},{"title":"Tender Type​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#27","content":"TenderType An enum representing different tender types.  Possible values NOT_SET CREDIT DEBIT "},{"title":"Card Entry Type​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#card-entry-type","content":"CardEntryType An enum representing different card entry types.  Possible values  UNDEFINED MSR ICC CNP "},{"title":"Card Entry Type​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#22","content":"CardEntryType An enum representing different card entry types.  Possible values  UNDEFINED MSR ICC CNP "},{"title":"Hapi Manager​","type":1,"pageTitle":"Objects","url":"windows/windowobjects#hapi-manager","content":"HapiManager A static class containing information about the current status of the SDK  Properties  Property\tDescriptionDefaultSharedSecret String\tGets the default shared secret is use in the SDK. LogLevel LogLevel\tGets the current log level of the SDK and card reader. inTransaction bool\tChecks whether the SDK is in transaction or not. True if the SDK is in transaction, false otherwise. This might return a true if there is a communication error between the SDK and card reader but the transaction has been completed on the card reader. SdkVersion String\tGets the current Sdk version. IsTransactionResultPending boolean\tIn the case of a communication failure between the device and the API a Transaction Result might have not been delivered to the API. This function checks if there is a pending Transaction Result. This field is only updated when connecting to a device. If this function returns true the Transaction Result (which includes the receipt) can be fetched with hapi.GetPendingTransactionResult();. This function serves the same functionality as the event PendingTransactionResult(Device device), so every time that event is invoked, HapiManager.IsTransactionResultPending() is true until the result is fetched. Settings.AutoRecoverTransactionResult boolean\tIn the case of a communication failure between the device and the API a Transaction Result might have not been delivered to the API. This property can be set to true or false. If set to true, the SDK will automatically fetch the pending Transaction Result when detected and return it via TransactionResultReady. The function PendingTransactionResult is never invoked if this property is set to true. If set to false PendingTransactionResult will be called when a TransactionResult is pending. Code example //Check if the SDK is in transaction bool inTransaction = HapiManager.InTransaction(SomeConnectedDevice); //Check the current logLevel LogLevel level = HapiManager.GetLogLevel(); Copy "},{"title":"Integration Guide","type":0,"sectionRef":"#","url":"windows/windowsintegrationguide","content":"","keywords":""},{"title":"Hilite & Hi5 - Bluetooth Integration​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#hilite--hi5---bluetooth-integration","content":""},{"title":"Introduction​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#introduction","content":"This tutorial is guiding you through all the steps to create a basic payment application for Windows devices integrated with a Datecs terminal. The new generation of Handpoint SDK's is designed to make your life easier. Simple and created for humans, it does not require any specific knowledge of the payment industry to be able to start accepting credit/debit card transactions. At Handpoint we take care of securing every transaction so you don´t have to worry about it while creating your application. We encrypt data from the payment terminal to the bank with our point-to-point encryption solution. Our platform is always up to the latest PCI-DSS security requirements. "},{"title":"Let's start programming!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-start-programming","content":"1. Create a C# classCreate a new C# class called MyClass and include com.handpoint.api as a dependency : using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass { } } Copy 2. Initialize the API using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass { Hapi api; public MyClass() { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); // The api is now initialized. Yay! we've even set a default shared secret! // The shared secret is a unique string shared between the card reader and your mobile application. // It prevents other people to connect to your card reader. // You should replace this default shared secret by the one sent by our support team. } } } Copy 3. Implement the mandatory Events(Events.Required) and per recommendation Status events (Events.Status) using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; public MyClass() { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { // Here you get a list of Bluetooth payment terminals paired with your computer } public void EndOfTransaction(TransactionResult transactionResult, Device device) { // The TransactionResult object holds details about the transaction as well as the receipts. // Useful information can be accessed through this object like the transaction ID, the amount, etc. } public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { // The ConnectionStatus object holds details about the status regarding the connection to the target device. } public void CurrentTransactionStatus(StatusInfo info, Device device) { // The StatusInfo object holds details about the status and step taken during the transaction. } public void SignatureRequired(SignatureRequest signatureRequest, Device device) { // You'll be notified here if a sale process needs a signature verification // A signature verification is needed if the cardholder uses an MSR or a chip & signature card // This method will not be invoked if a transaction is made with a Chip & PIN card api.SignatureResult(true); // This line means that the cardholder ALWAYS accepts to sign the receipt. // A specific line will be displayed on the merchant receipt for the cardholder to be able to sign it } public void HardwareStatusChanged(HardwareStatus status, ConnectionMethod hardware) { // Ignore, legacy event, will be deleted in future version. } } } Copy 4. Add a method to discover surrounding devices and connect to the card readerEnsure that the card reader and PC are correctly paired via bluetooth. public void DiscoverDevices() { api.ListDevices(ConnectionMethod.BLUETOOTH); // This triggers the search for all the bluetooth devices around. // You can also search for USB and Serial as a connection method } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { foreach (Device device in devices) { if (device.Name != null) { if (device.Name.Equals(\"PP0513901435\")) // Put the name of your device, find it by doing C then up arrow on your card reader keypad { this.device = device; //We'll remember the device for this session, it is nice if you would do that too api.Connect(this.device); //Connection to the device is handled automatically in the API } } } } Copy 5. Add a method to connect directly to the card readerInstead of discovering the surrounding devices you can also directly connect to the card reader by implementing the following method: public void DirectConnect() { Device device = new Device(\"PP0513901435\", \"68:AA:D2:00:D5:27\", \"\", ConnectionMethod.BLUETOOTH); //new Device(\"name\", \"address\", \"port\", ConnectionMethod); //The address always has to be written in UPPER CASE api.Connect(device); } Copy 6. Add a method to take payments public bool Pay() { return api.Sale(new BigInteger(1000), Currency.GBP); // Let´s start our first payment of 10 pounds } Copy 7. Add a method to disconnect from the card reader public void Disconnect() { api.Disconnect(); } Copy 8. Eventually, MyClass.cs must look like this after implementing all the necessary methods : using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; public MyClass(Form1 form1) { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); } public void DiscoverDevices() { api.SearchDevices(ConnectionMethod.BLUETOOTH); } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { foreach (Device device in devices) { if (device.Name != null) { if (device.Name.Equals(\"PP0513901435\")) { this.device = device; api.Connect(this.device); } } } } public void DirectConnect() { Device device = new Device(\"PP0513901435\", \"68:AA:D2:00:D5:27\", \"\", ConnectionMethod.BLUETOOTH); api.Connect(device); } public bool Pay() { return api.Sale(new BigInteger(1000), Currency.GPB); } public void Disconnect() { api.Disconnect(); } public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { Console.WriteLine(\"*** ConnectionStatus *** \" + status); } public void CurrentTransactionStatus(StatusInfo info, Device device) { Console.WriteLine(\"*** CurrentTransactionStatus *** \" + info.Status.ToString()); } public void SignatureRequired(SignatureRequest signatureRequest, Device device) { api.SignatureResult(true); } public void EndOfTransaction(TransactionResult result, Device device) { Console.WriteLine(\"*** EndOfTransaction *** \" + result.ToJSON()); } public void HardwareStatusChanged(HardwareStatus status, ConnectionMethod hardware) { //Ignore } } } Copy "},{"title":"Let's create a User Interface!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-create-a-user-interface","content":"1. Create buttons Go to your user interface (usually Form1.cs[Design])Select View > ToolboxIn the toolbox, under “Common Controls” drag and drop 3 button items to the user interfaceSelect \"button1\" > Right-Click > PropertiesChange the attribute \"Name\" from \"button1\" to \"PayButton\"Change the attribute \"text\" from \"button1\" to \"Pay Now\"Change the attribute \"Name\" from \"button2\" to \"ConnectButton\"Change the attribute \"text\" from \"button2\" to \"Connect To Card reader\"Change the attribute \"Name\" from \"button3\" to \"DisconnectButton\"Change the attribute \"text\" from \"button3\" to \"Disconnect From Card Reader\"Select View > Toolbox > Common Controls > LabelChange the attribute \"Name\" from \"label1\" to \"ConnectionLabel\"Change the attribute \"text\" from \"label1\" to \"Disconnected\"Change the attribute \"backColor\" from \"label1\" to \"Red\" 2. Create WebBrowsers Now that we have our 3 buttons, let´s create two webBrowsers items to display the merchant receipt as well as the cardholder´s receipt at the end of the transaction. Select View > Toolbox > Common Controls > WebBrowserDrag and drop two web browsers to the user interfaceSelect View > Toolbox > Common Controls > LabelDrag and drop two labels to the user interface in order to identify the webBrowser itemsChange the attribute \"Name\" from the left webBrowser to \"MerchantReceiptBrowser\"Change the attribute \"Name\" from the right webBrowser to \"CardholderReceiptBrowser\"Change the attribute \"Name\" from \"label2\" to \"MerchantReceiptLabel\"Change the attribute \"text\" from \"label2\" to \"Merchant Receipt :\"Change the attribute \"Name\" from \"label3\" to \"CardholderReceiptLabel\"Change the attribute \"text\" from \"label3\" to \"Cardholder Receipt :\" "},{"title":"Let's link our user interface with methods!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-link-our-user-interface-with-methods","content":"1. Referencing the user interface(Form1.cs) in MyClass In MyClass.cs, create an instance of Form1 called UIClass and initialize it. Instantiate MyClass and add form1 as a parameter for the Class. class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; private Form1 uIClass; public MyClass(Form1 form1) { uIClass = form1; InitApi(); } [...] } Copy 2. Referencing Myclass in Form1.cs and link methods to the user interface Go to Form1.cs[Design] and double click on the button \"Pay Now\". By Double Clicking on it you created a method called PayButton_Click. Create a new instance of MyClass called \"my\" in Form1.cs then, inside the new method PayButton_Click call the Pay() method from MyClass. using System; using System.Drawing; using System.Windows.Forms; namespace GettingStartedApp { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void PayButton_Click(object sender, EventArgs e) { my.Pay(); } } } Copy Go back to Form1.cs[Design] and double click on each of the other buttons to automatically generate an OnClick method in Form1.cs. Link each of the buttons to the correct methods in MyClass.cs. using System; using System.Drawing; using System.Windows.Forms; namespace GettingStartedApp { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void PayButton_Click(object sender, EventArgs e) { my.Pay(); } private void ConnectButton_Click(object sender, EventArgs e) { //my.DiscoverDevices(); my.DirectConnect(); } private void DisconnectButton_Click(object sender, EventArgs e) { my.Disconnect(); } } } Copy "},{"title":"Let´s notify the user when the app is connected and ready to send the transaction​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-notify-the-user-when-the-app-is-connected-and-ready-to-send-the-transaction","content":"Update the ConnectionLabel to notify the user of the connection statusGet the connection status from the method ConnectionStatusChanged in MyClass.cs. public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { Console.WriteLine(\"*** ConnectionStatus *** \" + status); if (status == ConnectionStatus.Connected) { uIClass.UpdateLabel(true); } else { uIClass.UpdateLabel(false); } } public void CurrentTransactionStatus(StatusInfo info, Device device) { //Let also console log the status during the transaction Console.WriteLine(\"*** CurrentTransactionStatus *** \" + info.Status.ToString()); } Create the UpdateLabel method in Form1.cs public delegate void UpdateConnectionLabel(bool Connected); public void UpdateLabel(bool Connected) { //Only need to check for one of the webbrowsers if (ConnectionLabel.InvokeRequired) { UpdateConnectionLabel d = new UpdateConnectionLabel(UpdateLabel); this.Invoke(d, new object[] { Connected }); } else { if (Connected) { ConnectionLabel.Text = \"Connected\"; ConnectionLabel.BackColor = Color.Green; } else { ConnectionLabel.Text = \"Disconnected\"; ConnectionLabel.BackColor = Color.Red; } } } Copy "},{"title":"Let´s display the receipts at the end of a transaction!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-display-the-receipts-at-the-end-of-a-transaction","content":"1. Fetch the cardholder's and merchant receipts from the method EndOfTransaction in MyClassAt this point all the buttons are connected but we are still missing to display the receipts in the webBrowsers. First, let´s get the receipts from the method EndOfTransaction in myClass.cs. public void EndOfTransaction(TransactionResult transactionResult, Device device) { Console.WriteLine(\"*** EndOfTransaction *** \" + result.ToJSON()); uIClass.DisplayReceipts(result.MerchantReceipt, result.CustomerReceipt); } Copy 2. Create the DisplayReceipts method in form1.cs public delegate void UpdateReceiptsCallback(string MerchantReceipt, string CustomerReceipt); public void DisplayReceipts(string MerchantReceipt, string CustomerReceipt) { //Only need to check for one of the webbrowsers if (MerchantReceiptBrowser.InvokeRequired) { UpdateReceiptsCallback d = new UpdateReceiptsCallback(DisplayReceipts); this.Invoke(d, new object[] { MerchantReceipt, CustomerReceipt }); } else { MerchantReceiptBrowser.DocumentText = MerchantReceipt; CardholderReceiptBrowser.DocumentText = CustomerReceipt; } } Copy "},{"title":"Final Result!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#final-result","content":"Here is how MyClass.cs and Form1.cs must eventually look like : 1. MyClass.cs : using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; private Form1 uIClass; public MyClass(Form1 form1) { uIClass = form1; InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); } public void DiscoverDevices() { api.SearchDevices(ConnectionMethod.BLUETOOTH); } public void DirectConnect() { Device device = new Device(\"PP0513901435\", \"68:AA:D2:00:D5:27\", \"\", ConnectionMethod.BLUETOOTH); api.Connect(device); } public bool Pay() { return api.Sale(new BigInteger(1000), Currency.GBP); } public void Disconnect() { api.Disconnect(); } public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { Console.WriteLine(\"*** ConnectionStatus *** \" + status); if (status == ConnectionStatus.Connected) { uIClass.UpdateLabel(true); } else { uIClass.UpdateLabel(false); } } public void CurrentTransactionStatus(StatusInfo info, Device device) { //Let's log also the status during the transaction Console.WriteLine(\"*** CurrentTransactionStatus *** \" + info.Status.ToString()); } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { foreach (Device device in devices) { if (device.Name != null) { if (device.Name.Equals(\"PP0513901435\")) { this.device = device; api.Connect(this.device); } } } } public void EndOfTransaction(TransactionResult result, Device device) { Console.WriteLine(\"*** EndOfTransaction *** \" + result.ToJSON()); uIClass.DisplayReceipts(result.MerchantReceipt, result.CustomerReceipt); } public void SignatureRequired(SignatureRequest signatureRequest, Device device) { api.SignatureResult(true); // This line means that the cardholder ALWAYS accepts to sign the receipt. } public void HardwareStatusChanged(HardwareStatus status, ConnectionMethod hardware) { //Ignore } } } Copy 2. Form1.cs : using System; using System.Drawing; using System.Windows.Forms; namespace GettingStartedApp { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void PayButton_Click(object sender, EventArgs e) { my.Pay(); } private void ConnectButton_Click(object sender, EventArgs e) { my.DirectConnect(); } private void DisconnectButton_Click(object sender, EventArgs e) { my.Disconnect(); } public delegate void UpdateReceiptsCallback(string MerchantReceipt, string CustomerReceipt); public void DisplayReceipts(string MerchantReceipt, string CustomerReceipt) { //Only need to check for one of the webbrowsers if (MerchantReceiptBrowser.InvokeRequired) { UpdateReceiptsCallback d = new UpdateReceiptsCallback(DisplayReceipts); this.Invoke(d, new object[] { MerchantReceipt, CustomerReceipt }); } else { MerchantReceiptBrowser.DocumentText = MerchantReceipt; CardholderReceiptBrowser.DocumentText = CustomerReceipt; } } public delegate void UpdateConnectionLabel(bool connected); public void UpdateLabel(bool Connected) { //Only need to check for one of the webbrowsers if (ConnectionLabel.InvokeRequired) { UpdateConnectionLabel d = new UpdateConnectionLabel(UpdateLabel); this.Invoke(d, new object[] { Connected }); } else { if (Connected) { ConnectionLabel.Text = \"Connected\"; ConnectionLabel.BackColor = Color.Green; } else { ConnectionLabel.Text = \"Disconnected\"; ConnectionLabel.BackColor = Color.Red; } } } } } Copy "},{"title":"Let's run our program!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-run-our-program","content":"Run the program by clicking the \"play\" button : Click on \"Connect To Card Reader\", this can take a little bit of time (10 sec max) due to the fact that we are looking for all the devices around before connecting to a specific oneClick \"Pay Now\"Follow the instructions on the card readerWhen the transaction is finished, the receipts should be displayed in the webBrowsersClick on \"Disconnect From Card Reader\" to stop the connection with the card reader "},{"title":"PAX & Telpo - Cloud Integration​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#pax--telpo---cloud-integration","content":""},{"title":"Introduction​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#introduction-1","content":""},{"title":"Let's start programming!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-start-programming-1","content":"1. Create a C# class Create a new C# class called MyClass and include com.handpoint.api as a dependency : using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass { } } Copy 2. Initialize the API using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass { Hapi api; public MyClass() { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; string apikey = \"This-is-my-api-key-provided-by-Handpoint\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret, apikey)); // The api is now initialized. Yay! we've even set default credentials. // The shared secret is a unique string shared between the payment terminal and your application, it is a free field. // The Api key is a unique key per merchant used to authenticate the terminal against the Cloud. // You should replace the API key with the one sent by the Handpoint support team. } } } Copy 3. Implement the mandatory Events(Events.Required) and per recommendation Status events (Events.Status) using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; public MyClass() { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; string apikey = \"This-is-my-api-key-provided-by-Handpoint\" api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret, apikey)); } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { // here you get a list of payment terminals associated with the api key. } public void EndOfTransaction(TransactionResult transactionResult, Device device) { // The TransactionResult object holds details about the transaction as well as the receipts. // Useful information can be accessed through this object like the transaction ID, the amount, etc. } public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { // The ConnectionStatus object holds details about the status regarding the connection to the target device. } public void CurrentTransactionStatus(StatusInfo info, Device device) { // The StatusInfo object holds details about the status and step taken during the transaction. } public void SignatureRequired(SignatureRequest request, Device device) { // Ignore for a PAX/Telpo integration. The complete signature capture process // is already handled in the sdk, a dialog will prompt the user for a signature if required. // If a signature was entered, it should be printed on the receipts. } public void HardwareStatusChanged(HardwareStatus status, ConnectionMethod hardware) { // Ignore, legacy event, will be deleted in future version. } } } Copy 4. Add a method to list the terminals of your merchant and connect to one of themEnsure that the card reader and PC are correctly paired via Cloud connection. public void DiscoverDevices() { // This triggers the search for all the cloud devices related to your Api Key. api.SearchDevices(ConnectionMethod.CLOUD); } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { foreach (Device device in devices) { if (device.Name != null) { if (device.Name.Equals(\"9822032398-PAXA920\")) // Put the name of your device, it is the composition of: serial number - device model. // Example for a PAX A920 device: serial_number - model -> 9822032398-PAXA920 { this.myDevice = device; //We'll remember the device for this session, it is nice if you would do that too api.Connect(this.myDevice); //Connection to the device is handled automatically by the api } } } } Copy 5. Add a method to connect directly to the payment terminalInstead of discovering terminals you can also connect directly to one of them: public void DirectConnect() { Device device = new Device(\"CloudDevice\", \"9822032398-PAXA920\", \"\", ConnectionMethod.CLOUD); // new Device(\"name\", \"address\", \"port (optional)\", ConnectionMethod); // The address always has to be written in UPPER CASE // It is the composition of the serial number and model ot the payment terminal. // Example for a PAX A920 device: serial_number - model -> 9822032398-PAXA920 api.Connect(device); } Copy 6. Add a method to take payments public bool Pay() { return api.Sale(new BigInteger(1000), Currency.EUR); // Let´s start our first transaction for 10 euros // The amount should always be in the minor unit of the currency } Copy 7. Add a method to disconnect from the card reader public void Disconnect() { api.Disconnect(); } Copy 8. Eventually, MyClass.cs must look like this after implementing all the necessary methods : using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; public MyClass(Form1 form1) { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; string apikey = \"This-is-my-api-key-provided-by-Handpoint\" api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret, apikey)); } public void DiscoverDevices() { api.SearchDevices(ConnectionMethod.CLOUD); } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { foreach (Device device in devices) { if (device.Name != null) { if (device.Name.Equals(\"9822032398-PAXA920\")) { this.myDevice = device; api.Connect(this.myDevice); } } } } public void DirectConnect() { Device device = new Device(\"CloudDevice\", \"9822032398-PAXA920\", \"\", ConnectionMethod.CLOUD); api.Connect(device); } public bool Pay() { return api.Sale(new BigInteger(1000), Currency.EUR); } public void Disconnect() { api.Disconnect(); } public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { Console.WriteLine(\"*** ConnectionStatus *** \" + status); } public void CurrentTransactionStatus(StatusInfo info, Device device) { Console.WriteLine(\"*** CurrentTransactionStatus *** \" + info.Status.ToString()); } public void EndOfTransaction(TransactionResult result, Device device) { Console.WriteLine(\"*** EndOfTransaction *** \" + result.ToJSON()); } public void HardwareStatusChanged(HardwareStatus status, ConnectionMethod hardware) { //Ignore } public void SignatureRequired(SignatureRequest request, Device device) { //Ignore } } } Copy "},{"title":"Let's create a User Interface!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-create-a-user-interface-1","content":"1. Create buttons and labels Go to your user interface (usually Form1.cs[Design])Select View > ToolboxIn the toolbox, under “Common Controls” drag and drop 3 button items to the user interfaceSelect \"button1\" > Right-Click > PropertiesChange the attribute \"Name\" from \"button1\" to \"PayButton\"Change the attribute \"text\" from \"button1\" to \"Pay Now\"Change the attribute \"Name\" from \"button2\" to \"ConnectButton\"Change the attribute \"text\" from \"button2\" to \"Connect To Card reader\"Change the attribute \"Name\" from \"button3\" to \"DisconnectButton\"Change the attribute \"text\" from \"button3\" to \"Disconnect From Card Reader\"Select View > Toolbox > Common Controls > LabelChange the attribute \"Name\" from \"label1\" to \"ConnectionLabel\"Change the attribute \"text\" from \"label1\" to \"Disconnected\"Change the attribute \"backColor\" from \"label1\" to \"Red\" 2. Create WebBrowsersNow that we have our 3 buttons, let´s create two webBrowsers items to display the merchant receipt as well as the cardholder´s receipt at the end of the transaction. Select View > Toolbox > Common Controls > WebBrowserDrag and drop two web browsers to the user interfaceSelect View > Toolbox > Common Controls > LabelDrag and drop two labels to the user interface in order to identify the webBrowser itemsChange the attribute \"Name\" from the left webBrowser to \"MerchantReceiptBrowser\"Change the attribute \"Name\" from the right webBrowser to \"CardholderReceiptBrowser\"Change the attribute \"Name\" from \"label2\" to \"MerchantReceiptLabel\"Change the attribute \"text\" from \"label2\" to \"Merchant Receipt :\"Change the attribute \"Name\" from \"label3\" to \"CardholderReceiptLabel\"Change the attribute \"text\" from \"label3\" to \"Cardholder Receipt :\" "},{"title":"Let's link our user interface with methods!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-link-our-user-interface-with-methods-1","content":"1. Referencing the user interface(Form1.cs) in MyClass In MyClass.cs, create an instance of Form1 called UIClass and initialize it. Instantiate MyClass and add form1 as a parameter for the Class. class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; private Form1 uIClass; public MyClass(Form1 form1) { uIClass = form1; InitApi(); } [...] } Copy 2. Referencing Myclass in Form1.cs and link methods to the user interfaceGo to Form1.cs[Design] and double click on the button \"Pay Now\". By Double Clicking on it you created a method called PayButton_Click. Create a new instance of MyClass called \"my\" in Form1.cs then, inside the new method PayButton_Click call the Pay() method from MyClass. using System; using System.Drawing; using System.Windows.Forms; namespace GettingStartedApp { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void PayButton_Click(object sender, EventArgs e) { my.Pay(); } } } Copy Go back to Form1.cs[Design] and double click on each of the other buttons to automatically generate an OnClick method in Form1.cs. Link each of the buttons to the correct methods in MyClass.cs. using System; using System.Drawing; using System.Windows.Forms; namespace GettingStartedApp { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void PayButton_Click(object sender, EventArgs e) { my.Pay(); } private void ConnectButton_Click(object sender, EventArgs e) { //my.DiscoverDevices(); my.DirectConnect(); } private void DisconnectButton_Click(object sender, EventArgs e) { my.Disconnect(); } } } Copy "},{"title":"Let´s notify the user when the app is connected and ready to send the transaction​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-notify-the-user-when-the-app-is-connected-and-ready-to-send-the-transaction-1","content":"1. Update the ConnectionLabel to notify the user of the connection statusGet the connection status from the method ConnectionStatusChanged in MyClass.cs. public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { Console.WriteLine(\"*** ConnectionStatus *** \" + status); if (status == ConnectionStatus.Connected) { uIClass.UpdateLabel(true); } else { uIClass.UpdateLabel(false); } } public void CurrentTransactionStatus(StatusInfo info, Device device) { //Let also console log the status during the transaction Console.WriteLine(\"*** CurrentTransactionStatus *** \" + info.Status.ToString()); } Copy 2. Create the UpdateLabel method in Form1.cs public delegate void UpdateConnectionLabel(bool Connected); public void UpdateLabel(bool Connected) { //Only need to check for one of the webbrowsers if (ConnectionLabel.InvokeRequired) { UpdateConnectionLabel d = new UpdateConnectionLabel(UpdateLabel); this.Invoke(d, new object[] { Connected }); } else { if (Connected) { ConnectionLabel.Text = \"Connected\"; ConnectionLabel.BackColor = Color.Green; } else { ConnectionLabel.Text = \"Disconnected\"; ConnectionLabel.BackColor = Color.Red; } } } Copy "},{"title":"Let´s display the receipts at the end of a transaction!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-display-the-receipts-at-the-end-of-a-transaction-1","content":"1. Fetch the cardholder's and merchant receipts from the method EndOfTransaction in MyClassAt this point all the buttons are connected but we are still missing to display the receipts in the webBrowsers. First, let´s get the receipts from the method EndOfTransaction in myClass.cs. public void EndOfTransaction(TransactionResult transactionResult, Device device) { Console.WriteLine(\"*** EndOfTransaction *** \" + result.ToJSON()); uIClass.DisplayReceipts(result.MerchantReceipt, result.CustomerReceipt); } Copy 2. Create the DisplayReceipts method in Form1.cs public delegate void UpdateReceiptsCallback(string MerchantReceipt, string CustomerReceipt); public void DisplayReceipts(string MerchantReceipt, string CustomerReceipt) { //Only need to check for one of the webbrowsers if (MerchantReceiptBrowser.InvokeRequired) { UpdateReceiptsCallback d = new UpdateReceiptsCallback(DisplayReceipts); this.Invoke(d, new object[] { MerchantReceipt, CustomerReceipt }); } else { MerchantReceiptBrowser.DocumentText = MerchantReceipt; CardholderReceiptBrowser.DocumentText = CustomerReceipt; } } Copy "},{"title":"Final Result!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#final-result-1","content":"Here is how MyClass.cs and Form1.cs must eventually look like: 1. MyClass.cs : using System; using System.Collections.Generic; using System.Numerics; using com.handpoint.api; namespace GettingStartedApp { class MyClass : Events.Required, Events.Status { Hapi api; Device myDevice; private Form1 uIClass; public MyClass(Form1 form1) { uIClass = form1; InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; string apikey = \"This-is-my-api-key-provided-by-Handpoint\" api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret, apikey)); } public void DiscoverDevices() { api.SearchDevices(ConnectionMethod.CLOUD); } public void DirectConnect() { Device device = new Device(\"CloudDevice\", \"0821032398-PAXA920\", \"\", ConnectionMethod.CLOUD); api.Connect(device); } public bool Pay() { return api.Sale(new BigInteger(1000), Currency.EUR); } public void Disconnect() { api.Disconnect(); } public void **[*ConnectionStatusChanged*](#7)**(ConnectionStatus status, Device device) { Console.WriteLine(\"***ConnectionStatus*** \" + status); if (status == ConnectionStatus.Connected) { uIClass.UpdateLabel(true); } else { uIClass.UpdateLabel(false); } } public void CurrentTransactionStatus(StatusInfo info, Device device) { //Let's log also the status during the transaction Console.WriteLine(\"*** CurrentTransactionStatus *** \" + info.Status.ToString()); } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { foreach (Device device in devices) { if (device.Name != null) { if (device.Name.Equals(\"0821032398-PAXA920\")) { this.myDevice = device; api.Connect(this.myDevice); } } } } public void EndOfTransaction(TransactionResult result, Device device) { Console.WriteLine(\"*** EndOfTransaction *** \" + result.ToJSON()); uIClass.DisplayReceipts(result.MerchantReceipt, result.CustomerReceipt); } public void HardwareStatusChanged(HardwareStatus status, ConnectionMethod hardware) { //Ignore } public void SignatureRequired(SignatureRequest request, Device device) { //Ignore } } } Copy 2. Form1.cs :  using System; using System.Drawing; using System.Windows.Forms; namespace GettingStartedApp { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void PayButton_Click(object sender, EventArgs e) { my.Pay(); } private void ConnectButton_Click(object sender, EventArgs e) { my.DirectConnect(); } private void DisconnectButton_Click(object sender, EventArgs e) { my.Disconnect(); } public delegate void UpdateReceiptsCallback(string MerchantReceipt, string CustomerReceipt); public void DisplayReceipts(string MerchantReceipt, string CustomerReceipt) { //Only need to check for one of the webbrowsers if (MerchantReceiptBrowser.InvokeRequired) { UpdateReceiptsCallback d = new UpdateReceiptsCallback(DisplayReceipts); this.Invoke(d, new object[] { MerchantReceipt, CustomerReceipt }); } else { MerchantReceiptBrowser.DocumentText = MerchantReceipt; CardholderReceiptBrowser.DocumentText = CustomerReceipt; } } public delegate void UpdateConnectionLabel(bool connected); public void UpdateLabel(bool Connected) { //Only need to check for one of the webbrowsers if (ConnectionLabel.InvokeRequired) { UpdateConnectionLabel d = new UpdateConnectionLabel(UpdateLabel); this.Invoke(d, new object[] { Connected }); } else { if (Connected) { ConnectionLabel.Text = \"Connected\"; ConnectionLabel.BackColor = Color.Green; } else { ConnectionLabel.Text = \"Disconnected\"; ConnectionLabel.BackColor = Color.Red; } } } } } Copy "},{"title":"Let's run our program!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-run-our-program-1","content":"Run the program by clicking the \"play\" button : Click on \"Connect To Card Reader\", this can take a little bit of time (10 sec max) due to the fact that we are looking for all the devices around before connecting to a specific oneClick \"Pay Now\"Follow the instructions on the card readerWhen the transaction is finished, the receipts should be displayed in the webBrowsersClick on \"Disconnect From Card Reader\" to stop the connection with the card reader "},{"title":"Terminal Simulator Integration​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#terminal-simulator-integration","content":""},{"title":"Introduction​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#introduction-2","content":"This tutorial is guiding you through all the steps to create a basic payment application for Windows using a card reader simulator. The simulator only has limited capabilities and we highly recommend that you order a development kit if you want to carry a full integration. The development kit contains a card reader as well as a test card and will allow you to test your integration from end to end. The new generation of Handpoint SDK's is designed to make your life easier. Simple and created for humans, it does not require any specific knowledge of the payment industry to be able to start accepting credit/debit card transactions. At Handpoint we take care of securing every transaction so you don´t have to worry about it while creating your application. We encrypt data from the payment terminal to the bank with our point-to-point encryption solution. Our platform is always up to the latest PCI-DSS security requirements. "},{"title":"Connecting to the simulator​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#connecting-to-the-simulator","content":"The SDK offers a method in which you will need to specify the card reader to be used: hapi.useDevice(new Device(\"Name\", \"Port\", \"Address\", ConnectionMethod.****)) Copy Simply set the ConnectionMethod to Simulator, i.e. ConnectionMethod.Simulator. The SDK does the rest. You don't need to search via bluetooth for surrounding card readers when using the simulator. hapi.useDevice(new Device(\"Name\", \"Port\", \"Address\", ConnectionMethod.Simulator)) Copy "},{"title":"Controlling responses​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#controlling-responses","content":"The simulator mimics the card reader as much as possible regarding information flow from the SDK interface to your application. It will return all the transaction statuses, transaction results and receipts. Results of a transaction are controlled by the amount sent into the sale function: The 3rd position from the right sets the desired financial status, 0 = Authorized and 1 = Declined. The 4th position from the right sets the desired verification method, 0 = Signature and 1 = PIN. hapi.Sale(X10XX, Currency.GBP); // amount = X 10 XX - where X represents an integer [0;9] Copy X 00 XX = Signature authorizedX 01 XX = Signature declinedX 10 XX = Pin authorizedX 11 XX = Pin declined "},{"title":"Let's start programming!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-start-programming-2","content":"1. Create a C# classCreate a new C# class called MyClass and include com.handpoint.api as a dependency :  using System; using System.Collections.Generic; using System.Linq; using System.Text; using com.handpoint.api; namespace GettingStartedWithSimulator { class MyClass { } } Copy 2. Initialize the API  using System; using System.Collections.Generic; using System.Linq; using System.Text; using com.handpoint.api; namespace GettingStartedWithSimulator { class MyClass { Hapi api; public MyClass() { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); // The api is now initialized. Yay! we've even set a default shared secret! // The shared secret is a unique string shared between the card reader and your mobile application. // It prevents other people to connect to your card reader. } } } Copy 3. Implement the mandatory Events(Events.Required)  using System; using System.Collections.Generic; using System.Linq; using System.Text; using com.handpoint.api; namespace GettingStartedWithSimulator { class MyClass : Events.Required { Hapi api; public MyClass() { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); // The api is now initialized. Yay! we've even set a default shared secret! // The shared secret is a unique string shared between the card reader and your mobile application // It prevents other people to connect to your card reader } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { // Only needed when using a payment terminal //here you get a list of Bluetooth payment terminals paired with your PC // You can also get a list of serial / USB payment terminals attached to your computer } public void SignatureRequired(SignatureRequest signatureRequest, Device device) { // You'll be notified here if a sale process needs a signature verification // A signature verification is needed if the cardholder uses an MSR or a chip & signature card // This method will not be invoked if a transaction is made with a Chip & PIN card api.SignatureResult(true); // This line means that the cardholder ALWAYS accepts to sign the receipt // A specific line will be displayed on the merchant receipt for the cardholder to be able to sign it } public void EndOfTransaction(TransactionResult transactionResult, Device device) { // The object TransactionResult holds the different receipts // Other information can be accessed through this object like the transaction ID, the amount... } } } Copy 4. Add a method to connect to the simulator  public void Connect() { Device device = new Device(\"Name\", \"Address\", \"Port\", ConnectionMethod.SIMULATOR); api.UseDevice(device); } Copy 5. Add a method to take payments with the simulator The simulator mimics the card reader as much as possible regarding the information flow from the SDK interface to your application. The results of the transaction (declined, authorized) and the type of verification method (PIN, signature) will depend on the amount used. You can get different responses from the simulator by setting different values for the amount parameter, e.g. for a Sale function :  api.Sale(X10XX, Currency.GBP); // amount = X 10 XX - where X represents an integer [0;9] Copy Amount Values X00XX = Signature authorizedX01XX = Signature declinedX10XX = PIN authorizedX11XX = PIN declined The 3rd number from right sets desired financial status, Authorized or Declined. Default status is Authorized. The 4th number from right sets desired verification method, Signature or PIN. Default method is Signature. Let´s add 4 methods to MyClass in order to represent the 4 cases above :  using System; using System.Collections.Generic; using System.Linq; using System.Text; using com.handpoint.api; namespace GettingStartedWithSimulator { class MyClass : Events.Required { Hapi api; public MyClass() { InitApi(); } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); // The api is now initialized. Yay! we've even set a default shared secret! // The shared secret is a unique string shared between the card reader and your mobile application. // It prevents other people to connect to your card reader. } public void **[*deviceDiscoveryFinished*](#13)**(List <Device> devices) { // Only needed when using a payment terminal //Here you get a list of Bluetooth payment terminals paired with your PC // You can also get a list of serial / USB payment terminals attached to your computer } public void Connect() { Device device = new Device(\"Name\", \"Address\", \"Port\", ConnectionMethod.SIMULATOR); api.UseDevice(device); } public bool PayWithSignatureAuthorized() { return api.Sale(new BigInteger(\"10000\"), Currency.GBP); // amount X00XX where X represents an integer [0;9] --> Signature authorized } public bool PayWithSignatureDeclined() { return api.Sale(new BigInteger(\"10100\"), Currency.GBP); // amount X01XX where X represents an integer [0;9] --> Signature declined } public bool PayWithPinAuthorized() { return api.Sale(new BigInteger(\"11000\"), Currency.GBP); // amount X10XX where X represents an integer [0;9] --> PIN authorized } public bool PayWithPinDeclined() { return api.Sale(new BigInteger(\"11100\"), Currency.GBP); // amount X11XX where X represents an integer [0;9] --> PIN declined } public void SignatureRequired(SignatureRequest signatureRequest, Device device) { // You'll be notified here if a sale process needs a signature verification // A signature verification is needed if the cardholder uses an MSR or a chip & signature card // This method will not be invoked if a transaction is made with a Chip & PIN card api.SignatureResult(true); // This line means that the cardholder ALWAYS accepts to sign the receipt. // A specific line will be displayed on the merchant receipt for the cardholder to be able to sign it } public void EndOfTransaction(TransactionResult transactionResult, Device device) { // The object TransactionResult stores the different receipts // Other information can be accessed through this object like the transaction ID, the amount... } } } Copy "},{"title":"Let's create a User Interface!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-create-a-user-interface-2","content":"1. Create buttons Go to your user interface (usually Form1.cs[Design])Select View > ToolboxIn the toolbox, under “Common Controls” drag and drop 5 button items to the user interfaceSelect \"button1\" > Right-Click > PropertiesChange the attribute \"Name\" from \"button1\" to \"ConnectToSimulator\"Change the attribute \"text\" from \"button1\" to \"Connect To Simulator\"Change the attribute \"Name\" from \"button2\" to \"PayWithSignatureAuthorized\"Change the attribute \"text\" from \"button2\" to \"Pay With Signature Authorized\"Change the attribute \"Name\" from \"button3\" to \"PayWithSignatureDeclined\"Change the attribute \"text\" from \"button3\" to \"Pay With Signature Declined\"Change the attribute \"Name\" from \"button4\" to \"PayWithPinAuthorized\"Change the attribute \"text\" from \"button4\" to \"Pay With Pin Authorized\"Change the attribute \"Name\" from \"button5\" to \"PayWithPinDeclined\"Change the attribute \"text\" from \"button5\" to \"Pay With Pin Declined\" 2. Create WebBrowsers Now that we have our 5 buttons let´s create two webBrowsers items to display the merchant receipt as well as the cardholder´s receipt at the end of the transaction. Select View > Toolbox > Common Controls > WebBrowserDrag and drop two web browsers to the user interfaceSelect View > Toolbox > Common Controls > LabelDrag and drop two labels to the user interface in order to identify the webBrowser itemsChange the attribute \"Name\" from the left webBrowser to \"MerchantReceiptBrowser\"Change the attribute \"Name\" from the right webBrowser to \"CardholderReceiptBrowser\"Change the attribute \"Name\" from \"label1\" to \"MerchantReceiptLabel\"Change the attribute \"text\" from \"label1\" to \"Merchant Receipt :\"Change the attribute \"Name\" from \"label2\" to \"CardholderReceiptLabel\"Change the attribute \"text\" from \"label2\" to \"Cardholder Receipt :\" "},{"title":"Let's link our user interface with methods!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-link-our-user-interface-with-methods-2","content":"1. Referencing the user interface(Form1.cs) in MyClass In MyClass.cs, create an instance of Form1 called UIClass and initialize it. Instantiate MyClass and add form1 as a parameter for the Class.  class MyClass : Events.Required { Hapi api; private Form1 UIClass; public MyClass(Form1 form1) { InitApi(); UIClass = form1; } Copy 2. Referencing Myclass in Form1.cs and link methods to the user interface Go to Form1.cs[Design] and double click on the button \"Connect To Simulator\". By Double Clicking on the \"Connect To Simulator\" button you created a method called ConnectToSimulator_Click. Create a new instance of MyClass called \"my\" in Form1.cs then, inside the new method ConnectToSimulator_Click call the Connect() method from MyClass.  using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Windows.Forms; namespace GettingStartedWithSimulator { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void ConnectToSimulator_Click(object sender, EventArgs e) { my.Connect(); } } } Copy Go back to Form1.cs[Design] and double click on each of the other buttons to automatically generate an OnClick method in Form1.cs. Link each of the buttons to the correct methods in MyClass.cs.  using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Windows.Forms; namespace GettingStartedWithSimulator { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void ConnectToSimulator_Click(object sender, EventArgs e) { my.Connect(); } private void PayWithSignatureAuthorized_Click(object sender, EventArgs e) { my.PayWithSignatureAuthorized(); } private void PayWithSignatureDeclined_Click(object sender, EventArgs e) { my.PayWithSignatureDeclined(); } private void PayWithPinAuthorized_Click(object sender, EventArgs e) { my.PayWithPinAuthorized(); } private void PayWithPinDeclined_Click(object sender, EventArgs e) { my.PayWithPinDeclined(); } } } Copy "},{"title":"Let´s display the receipts at the end of a transaction!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-display-the-receipts-at-the-end-of-a-transaction-2","content":"1. Fetch the cardholder's and merchant receipts from the method EndOfTransaction in MyClass At this point all the buttons are connected but we are still missing to display the receipts in the webBrowsers. First, let´s get the receipts from the method EndOfTransaction in myClass.cs.  public void EndOfTransaction(TransactionResult transactionResult, Device device) { UIClass.DisplayReceipts(transactionResult.MerchantReceipt, transactionResult.CustomerReceipt); } Copy 2. Create the DisplayReceipts method in form1.cs  public delegate void UpdateReceiptsCallback(string MerchantReceipt, string CustomerReceipt); public void DisplayReceipts(string MerchantReceipt, string CustomerReceipt) { //Only need to check for one of the webBrowsers if (MerchantReceiptBrowser.InvokeRequired) { UpdateReceiptsCallback d = new UpdateReceiptsCallback(DisplayReceipts); this.Invoke(d, new object[] { MerchantReceipt, CustomerReceipt }); } else { MerchantReceiptBrowser.DocumentText = MerchantReceipt; CardholderReceiptBrowser.DocumentText = CustomerReceipt; } } Copy "},{"title":"Final Result!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#final-result-2","content":"Here is how MyClass.cs and Form1.cs must eventually look like : 1. MyClass.cs :  using System; using System.Collections.Generic; using System.Linq; using System.Text; using com.handpoint.api; namespace GettingStartedWithSimulator { class MyClass : Events.Required { Hapi api; private Form1 UIClass; public MyClass(Form1 form1) { InitApi(); UIClass = form1; } public void InitApi() { string sharedSecret = \"0102030405060708091011121314151617181920212223242526272829303132\"; api = HapiFactory.GetAsyncInterface(this, new HandpointCredentials(sharedSecret)); // The api is now initialized. Yay! we've even set a default shared secret! // The shared secret is a unique string shared between the card reader and your mobile application. // It prevents other people to connect to your card reader. } public void **[*deviceDiscoveryFinished*](#13)**(List<Device> devices) { // Only needed when using a payment terminal //Here you get a list of Bluetooth payment terminals paired with your PC // You can also get a list of serial / USB payment terminals attached to your computer } public void Connect() { Device device = new Device(\"Name\", \"Address\", \"Port\", ConnectionMethod.SIMULATOR); api.UseDevice(device); } public bool PayWithSignatureAuthorized() { return api.Sale(new BigInteger(\"10000\"), Currency.GBP); // amount X00XX where X represents an integer [0;9] --> Signature authorized } public bool PayWithSignatureDeclined() { return api.Sale(new BigInteger(\"10100\"), Currency.GBP); // amount X01XX where X represents an integer [0;9] --> Signature declined } public bool PayWithPinAuthorized() { return api.Sale(new BigInteger(\"11000\"), Currency.GBP); // amount X10XX where X represents an integer [0;9] --> PIN authorized } public bool PayWithPinDeclined() { return api.Sale(new BigInteger(\"11100\"), Currency.GBP); // amount X11XX where X represents an integer [0;9] --> PIN declined } public void SignatureRequired(SignatureRequest signatureRequest, Device device) { // You'll be notified here if a sale process needs a signature verification // A signature verification is needed if the cardholder uses an MSR or a chip & signature card // This method will not be invoked if a transaction is made with a Chip & PIN card api.SignatureResult(true); // This line means that the cardholder ALWAYS accepts to sign the receipt. // A specific line will be displayed on the merchant receipt for the cardholder to be able to sign it } public void EndOfTransaction(TransactionResult transactionResult, Device device) { UIClass.DisplayReceipts(transactionResult.MerchantReceipt, transactionResult.CustomerReceipt); } } } Copy 2. Form1.cs :  using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Windows.Forms; namespace GettingStartedWithSimulator { public partial class Form1 : Form { MyClass my; public Form1() { InitializeComponent(); my = new MyClass(this); } private void ConnectToSimulator_Click(object sender, EventArgs e) { my.Connect(); } private void PayWithSignatureAuthorized_Click(object sender, EventArgs e) { my.PayWithSignatureAuthorized(); } private void PayWithSignatureDeclined_Click(object sender, EventArgs e) { my.PayWithSignatureDeclined(); } private void PayWithPinAuthorized_Click(object sender, EventArgs e) { my.PayWithPinAuthorized(); } private void PayWithPinDeclined_Click(object sender, EventArgs e) { my.PayWithPinDeclined(); } public delegate void UpdateReceiptsCallback(string MerchantReceipt, string CustomerReceipt); public void DisplayReceipts(string MerchantReceipt, string CustomerReceipt) { //Only need to check for one of the webbrowsers if (MerchantReceiptBrowser.InvokeRequired) { UpdateReceiptsCallback d = new UpdateReceiptsCallback(DisplayReceipts); this.Invoke(d, new object[] { MerchantReceipt, CustomerReceipt }); } else { MerchantReceiptBrowser.DocumentText = MerchantReceipt; CardholderReceiptBrowser.DocumentText = CustomerReceipt; } } } } Copy "},{"title":"Let's run our program!​","type":1,"pageTitle":"Integration Guide","url":"windows/windowsintegrationguide#lets-run-our-program-2","content":"Run the program by clicking the \"play\" button, click on \"Connect to simulator\" and then Click on one of the payment types available and have a look at the receipts! Voila! "}]