<!doctype html>
<html class="docs-version-iOS SDK 4.0.0" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<link rel="alternate" type="application/rss+xml" href="/doc/blog/rss.xml" title="Handpoint RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/doc/blog/atom.xml" title="Handpoint Atom Feed"><title data-react-helmet="true">Transactions | Handpoint</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://www.handpoint.com/doc/ios/iOS SDK 4.0.0/iostransactions"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="iOS SDK 4.0.0"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-ios-iOS SDK 4.0.0"><meta data-react-helmet="true" property="og:title" content="Transactions | Handpoint"><meta data-react-helmet="true" name="description" content="Sale"><meta data-react-helmet="true" property="og:description" content="Sale"><link data-react-helmet="true" rel="icon" href="/doc/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://www.handpoint.com/doc/ios/iOS SDK 4.0.0/iostransactions"><link data-react-helmet="true" rel="alternate" href="https://www.handpoint.com/doc/ios/iOS SDK 4.0.0/iostransactions" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://www.handpoint.com/doc/ios/iOS SDK 4.0.0/iostransactions" hreflang="x-default"><link rel="stylesheet" href="/doc/assets/css/styles.fc1f46f8.css">
<link rel="preload" href="/doc/assets/js/runtime~main.7507c79a.js" as="script">
<link rel="preload" href="/doc/assets/js/main.4245f262.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/doc/"><div class="navbar__logo"><img src="/doc/img/handpoint-logo-hvitt.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ" width="90"><img src="/doc/img/handpoint-logo-hvitt.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m" width="90"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/doc/android/androidintroduction">Android SDK 6.5.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/doc/android/androidintroduction">Android SDK 6.5.0</a></li><li><a class="dropdown__link" href="/doc/android/Android SDK 6.4.1/androidintroduction">Android SDK 6.4.1</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/doc/ios/iOS SDK 4.0.0/iosintroduction">iOS SDK 4.0.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/doc/ios/iostransactions">iOS SDK 4.0.1</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/doc/ios/iOS SDK 4.0.0/iostransactions">iOS SDK 4.0.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/doc/windows/windowsintroduction">Windows SDK 3.1.7</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/doc/windows/windowsintroduction">Windows SDK 3.1.7</a></li><li><a class="dropdown__link" href="/doc/windows/Windows SDK 3.1.4/windowsintroduction">Windows SDK 3.1.4</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/doc/javascript/javascriptintroduction">JavaScript SDK 6.0.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/doc/javascript/javascriptintroduction">JavaScript SDK 6.0.1</a></li><li><a class="dropdown__link" href="/doc/javascript/JavaScript SDK 6.0.0/javascriptintroduction">JavaScript SDK 6.0.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/doc/restapi/restintroduction">REST API 2.4.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/doc/restapi/restintroduction">REST API 2.4.0</a></li><li><a class="dropdown__link" href="/doc/restapi/REST API 2.3.0/restintroduction">REST API 2.3.0</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/doc/express/expressintroduction">Express SDK 1.3</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/doc/express/expressintroduction">Express SDK 1.3</a></li><li><a class="dropdown__link" href="/doc/express/Express SDK 1.2/expressintroduction">Express SDK 1.2</a></li></ul></div><a href="https://www.npmjs.com/package/cordova-plugin-handpoint" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Cordova Plugin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/thescruba/xamarin-handpoint-bindings" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Xamarin SDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.handpoint.com/docs/txnfeedapi/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>TXN Feed API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://handpoint.atlassian.net/wiki/spaces/PD/overview?homepageId=5898250" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>FAQ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://status.handpoint.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-statuspage-icon" aria-label="Status Page"></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/ios/iOS SDK 4.0.0/iosintroduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/ios/iOS SDK 4.0.0/iosinstallation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/ios/iOS SDK 4.0.0/iosmigration">Migration from 3.X</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/ios/iOS SDK 4.0.0/iosintegration">Integration Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/ios/iOS SDK 4.0.0/iosprocessing">Processing Payments Simulation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/ios/iOS SDK 4.0.0/iossdkprocessing">SDK integration example</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/doc/ios/iOS SDK 4.0.0/iostransactions">Transactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/ios/iOS SDK 4.0.0/iosdevicemanagement">Device management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/ios/iOS SDK 4.0.0/iosevents">Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/ios/iOS SDK 4.0.0/iosobjects">Objects</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Handpoint<!-- --> <b>iOS SDK 4.0.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/doc/ios/iostransactions">latest version</a></b> (<!-- -->iOS SDK 4.0.1<!-- -->).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->iOS SDK 4.0.0</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Transactions</h1></header><h2 class="anchor anchorWithStickyNavbar_31ik" id="2">Sale<a aria-hidden="true" class="hash-link" href="#2" title="Direct link to heading">â€‹</a></h2><p><code>saleWithAmount</code></p><p>A sale initiates a payment operation to the card reader. In it&#x27;s simplest form you only have to pass the <strong>amount</strong> and <strong>currency</strong> but it also accepts tip configuration and a map with extra parameters.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>NSInteger</em></td><td>Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency </code> <span class="badge badge--primary">Required</span> <br><em>NSString</em></td><td>3 letter currency code in accordance to ISO4217</td></tr><tr><td><code>options</code> <br><em>SaleOptions</em></td><td>An object to store all the customization options for a sale.</td></tr></tbody></table><p><strong>Code example</strong></p><div class="codeBlockContainer_K1bP language-objectivec"><div class="codeBlockContent_hGly objectivec"><pre tabindex="0" class="prism-code language-objectivec codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//If you just need a plain vanilla sale:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">api saleWithAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">EUR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">alpha</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//But you can customize your sale:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SaleOptions </span><span class="token operator">*</span><span class="token plain">options </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">SaleOptions new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Optionally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">customerReference </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;Your customer reference&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//If you need Multi MID / Custom merchant Authentication:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MerchantAuth </span><span class="token operator">*</span><span class="token plain">auth </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">MerchantAuth new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Credential </span><span class="token operator">*</span><span class="token plain">cred </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Credential new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Optionally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cred</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">acquirer </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Credential getAcquirerFromString</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;acquirer&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Optionally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cred</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">mid </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;mid&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Optionally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cred</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tid </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;tid&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Add as many credentials as Acquirers your merchant have agreements with</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">auth add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">cred</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">merchantAuth </span><span class="token operator">=</span><span class="token plain"> auth</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//If you want to specify the budget period</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Only available for SureSwipe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Here it&#x27;s 3 months</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">divideByMonths </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">api saleWithAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">EUR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">alpha</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>Events invoked</strong></p><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#14"><strong>responseStatus</strong></a></p><p>Invoked while during transaction with different statuses from card reader.</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#15"><strong>responseError</strong></a></p><p>Invoked to inform when an error response happens.</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#17"><strong>requestSignature</strong></a></p><p>Invoked if card verification requires signature.</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#16"><strong>responseFinanceStatus </strong></a></p><p>Invoked when the card reader finishes processing the transaction</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>Boolean</code></td><td><code>YES</code> if operation starts successfully.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_31ik" id="3">Sale Reversal<a aria-hidden="true" class="hash-link" href="#3" title="Direct link to heading">â€‹</a></h2><p><code>saleVoidWithAmount</code></p><p>Request a void operation on previous sale transaction, referred to by the parameter transaction. Parameters amount, currency and present must be the same as the in the sale to be voided. This operation reverts (if possible) a specific sale identified with a transaction id. Note that transactions can only be reversed within the same day as the transaction was made.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>NSInteger</em></td><td>Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><em>NSString</em></td><td>3 letter currency code in accordance to ISO4217</td></tr><tr><td><code>transaction</code> <span class="badge badge--primary">Required</span> <br> <em>NSString</em></td><td>TransactionID of the sale transaction to be voided</td></tr><tr><td><code>options</code> <br><em>Options</em></td><td>An object to store all the customization options for this operation.</td></tr></tbody></table><p><strong>Code example</strong></p><div class="codeBlockContainer_K1bP language-objectivec"><div class="codeBlockContent_hGly objectivec"><pre tabindex="0" class="prism-code language-objectivec codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//If you just need a plain vanilla sale reversal:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">api saleReversalWithAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                   currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">EUR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">alpha</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              transactionId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">originalTransactionID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//But you can customize your sale:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Options </span><span class="token operator">*</span><span class="token plain">options </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Options new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Optionally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">customerReference </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;Your customer reference&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">api saleReversalWithAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                   currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">EUR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">alpha</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              transactionId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>Events invoked</strong></p><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#14"><strong>responseStatus</strong></a></p><p>Invoked while during transaction with different statuses from card reader</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#15"><strong>responseError </strong></a></p><p>Invoked to inform when an error response happens.</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#16"><strong>responseFinanceStatus</strong></a></p><p>Invoked when the card reader finishes processing the transaction</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>Boolean</code></td><td><code>YES</code> if operation starts successfully.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_31ik" id="4">Sale And Tokenize Card<a aria-hidden="true" class="hash-link" href="#4" title="Direct link to heading">â€‹</a></h2><p><code>saleAndTokenizeCardWithAmount</code></p><p>A sale initiates a payment operation to the card reader.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>NSInteger</em></td><td>Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><em>NSString</em></td><td>3 letter currency code in accordance to ISO4217</td></tr><tr><td><code>options</code> <br><em>SaleOptions</em></td><td>An object to store all the customization options for a sale.</td></tr></tbody></table><p><strong>Code example</strong></p><div class="codeBlockContainer_K1bP language-objectivec"><div class="codeBlockContent_hGly objectivec"><pre tabindex="0" class="prism-code language-objectivec codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//If you just need a plain vanilla sale tokenization:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">api saleAndTokenizeWithAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">EUR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">alpha</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//But you can customize your sale:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SaleOptions </span><span class="token operator">*</span><span class="token plain">options </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">SaleOptions new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Optionally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">customerReference </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;Your customer reference&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//If you need Multi MID / Custom merchant Authentication:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MerchantAuth </span><span class="token operator">*</span><span class="token plain">auth </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">MerchantAuth new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Credential </span><span class="token operator">*</span><span class="token plain">cred </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Credential new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Optionally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cred</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">acquirer </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Credential getAcquirerFromString</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;acquirer&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Optionally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cred</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">mid </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;mid&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Optionally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cred</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tid </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;tid&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Add as many credentials as Acquirers your merchant have agreements with</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">auth add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">cred</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">merchantAuth </span><span class="token operator">=</span><span class="token plain"> auth</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//If you want to specify the budget period</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Only available for SureSwipe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Here it&#x27;s 3 months</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">divideByMonths </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">api saleAndTokenizeWithAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">EUR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">alpha</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                       options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>Events invoked</strong></p><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#14"><strong>responseStatus</strong></a></p><p>Invoked while during transaction with different statuses from card reader</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#15"><strong>responseError</strong></a></p><p>Invoked to inform when an error response happens.</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#17"><strong>requestSignature</strong></a></p><p>Invoked if card verification requires signature.</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#16"><strong>responseFinanceStatus</strong></a></p><p>Invoked when the card reader finishes processing the transaction</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>Boolean</code></td><td><code>YES</code> if operation starts successfully.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_31ik" id="5">Refund<a aria-hidden="true" class="hash-link" href="#5" title="Direct link to heading">â€‹</a></h2><p><code>refundWithAmount</code></p><p>A refund initiates a refund operation to the card reader. This operation moves funds from your account to the cardholders credit card.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>NSInteger</em></td><td>Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><em>NSString</em></td><td>Currency of the charge</td></tr><tr><td><code>transaction</code> <span class="badge badge--primary">Required</span> <br><em>NSString</em></td><td>If present it links the refund with a previous sale. It effectively limits the maximum amount refunded to that of the original transaction.</td></tr><tr><td><code>options</code> <br><em>MerchantAuthOptions</em></td><td>An object to store all the customization options for a refund.</td></tr></tbody></table><p><strong>Code example</strong></p><div class="codeBlockContainer_K1bP language-objectivec"><div class="codeBlockContent_hGly objectivec"><pre tabindex="0" class="prism-code language-objectivec codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//If you just need a plain vanilla refund:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">api refundWithAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">EUR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">alpha</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          transaction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//But you can customize your sale:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MerchantAuthOptions </span><span class="token operator">*</span><span class="token plain">options </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">MerchantAuthOptions new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Optionally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">customerReference </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;Your customer reference&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//If you need Multi MID / Custom merchant Authentication:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MerchantAuth </span><span class="token operator">*</span><span class="token plain">auth </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">MerchantAuth new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Credential </span><span class="token operator">*</span><span class="token plain">cred </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Credential new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Optionally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cred</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">acquirer </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Credential getAcquirerFromString</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;acquirer&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Optionally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cred</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">mid </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;mid&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Optionally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cred</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tid </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;tid&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Add as many credentials as Acquirers your merchant have agreements with</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">auth add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">cred</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">merchantAuth </span><span class="token operator">=</span><span class="token plain"> auth</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">api refundWithAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">EUR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">alpha</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          transaction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong> Events invoked</strong></p><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#14"><strong>responseStatus</strong></a></p><p>Invoked while during transaction with different statuses from card reader</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#15"><strong>responseError</strong></a></p><p>Invoked when the card reader finishes processing the transaction</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#16"><strong>responseFinanceStatus</strong></a></p><p>Invoked to inform when an error response happens.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>Boolean</code></td><td><code>YES</code> if operation starts successfully.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_31ik" id="6">Refund reversal<a aria-hidden="true" class="hash-link" href="#6" title="Direct link to heading">â€‹</a></h2><p><code>refundVoidWithAmount</code></p><p>Request a void operation on previous refund transaction, referred to by the parameter transaction. Parameters amount, currency and present must be the same as the in the refund to be voided. This operation reverts (if possible) a specific refund identified with a transaction id. Note that transactions can only be reversed within the same day as the transaction was made.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>amount</code> <span class="badge badge--primary">Required</span>  <br><em>NSInteger</em></td><td>Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>currency</code> <span class="badge badge--primary">Required</span> <br><em>NSString</em></td><td>3 letter currency code in accordance to ISO4217</td></tr><tr><td><code>transaction</code> <span class="badge badge--primary">Required</span> <br><em>NSString</em></td><td>TransactionID of the refund transaction to be voided</td></tr><tr><td><code>options</code> <br><em>Options</em></td><td>An object to store all the customization options for this operation.</td></tr></tbody></table><p><strong>Code example</strong></p><div class="codeBlockContainer_K1bP language-objectivec"><div class="codeBlockContent_hGly objectivec"><pre tabindex="0" class="prism-code language-objectivec codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//If you just need a plain vanilla refund reversal:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">api refundReversalWithAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">EUR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">alpha</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">               transactionId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">originalTransactionID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//But you can customize your sale:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Options </span><span class="token operator">*</span><span class="token plain">options </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Options new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Optionally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">customerReference </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;Your customer reference&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">api refundReversalWithAmount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">Currency</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">EUR</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">alpha</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                transactionId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong> Events invoked</strong></p><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#14"><strong>responseStatus</strong></a></p><p>Invoked while during transaction with different statuses from card reader</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#15"><strong>responseError</strong></a></p><p>Invoked to inform when an error response happens.</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#16"><strong>responseFinanceStatus</strong></a></p><p>Invoked when the card reader finishes processing the transaction</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>Boolean</code></td><td><code>YES</code> if the operation was successfully sent to device.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_31ik" id="7">Accept signature<a aria-hidden="true" class="hash-link" href="#7" title="Direct link to heading">â€‹</a></h2><p><code>acceptSignature</code></p><p>A <a href="/doc/ios/iOS SDK 4.0.0/iosevents#17"><em>requestSignature</em></a> event is invoked during transaction when signature verification is needed (f.ex when payment is done with a magstripe card). The merchant is required to ask the cardholder for signature and approve (or disapprove) the signature. signatureRequired tells the card reader if the signature was approved by passing YES. To disapprove then NO is passed.</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>flag</code> <span class="badge badge--primary">Required</span>  <br><em>Boolean</em></td><td>YES if signature is valid, NO otherwise</td></tr></tbody></table><p><strong>Code example</strong></p><div class="codeBlockContainer_K1bP language-objectivec"><div class="codeBlockContent_hGly objectivec"><pre tabindex="0" class="prism-code language-objectivec codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//acceptSignature:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Inform the card reader if signature is valid or not</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">IBAction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">accept</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">heftClient acceptSignature</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">YES</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">IBAction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">decline</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">heftClient acceptSignature</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">NO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong> Events invoked</strong></p><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#14"><strong>responseStatus</strong></a></p><p>Invoked while during transaction with different statuses from card reader</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#15"><strong>responseError</strong></a></p><p>Invoked to inform when an error response happens.</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#16"><strong>responseFinanceStatus</strong></a></p><p>Invoked when the card reader finishes processing the transaction</p><hr><h2 class="anchor anchorWithStickyNavbar_31ik" id="8">Retrieve Pending Transaction<a aria-hidden="true" class="hash-link" href="#8" title="Direct link to heading">â€‹</a></h2><p><code>retrievePendingTransaction</code></p><p>Retrieving a pending transaction fetches a transaction result that was lost due to unexpected disconnect between card reader and application.</p><p><strong>Code example</strong></p><div class="codeBlockContainer_K1bP language-objectivec"><div class="codeBlockContent_hGly objectivec"><pre tabindex="0" class="prism-code language-objectivec codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//retrievePendingTransaction:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Called when a pending transaction is discovered upon connecting to a specific card reader</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">didConnect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">id</span><span class="token operator">&lt;</span><span class="token plain">HeftClient</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    heftClient </span><span class="token operator">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">heftClient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">heftClient isTransactionResultPending</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">==</span><span class="token plain"> YES</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">// a pending transaction has been detected ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">// ... so, lets get it</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">heftClient retrievePendingTransaction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong> Events invoked</strong></p><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#14"><strong>responseStatus</strong></a></p><p>Invoked during the operation with different statuses from the card reader.</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#15"><strong>responseError</strong></a></p><p>Invoked to inform when an error response happens.</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#44"><strong>responseRecoveredTransactionStatus</strong></a></p><p>Invoked when the card reader has returned a recovered transaction.</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>Boolean</code></td><td><code>YES</code> if operation starts successfully.</td></tr></tbody></table><br><p><strong>Card Reader Requirements</strong></p><table><thead><tr><th>Version Requirements</th></tr></thead><tbody><tr><td>Card reader software v1.7.0+ and v2.1.7+ is required in order for this method to work</td></tr></tbody></table><br><p><strong>Notes</strong></p><p><strong><em>On starting a new transaction</em></strong></p><p>If a new transaction is started with out first fetching a pending transaction result, then the pending transaction result will be discarded.</p><hr><p><strong><em>User notifications while a transaction result is pending</em></strong></p><p>The card reader will not give any visible indication that a transaction result is pending.</p><hr><p><strong><em>User notifications when fetching a pending transaction result</em></strong></p><p>The card reader will briefly display a message when a pending transaction result is recovered.</p><hr><h2 class="anchor anchorWithStickyNavbar_31ik" id="9">Tip Adjustment<a aria-hidden="true" class="hash-link" href="#9" title="Direct link to heading">â€‹</a></h2><p><code>tipAdjustment</code></p><p>A tip adjustment operation allows merchants to adjust the tip amount of a sale transaction before the batch of transactions is settled automatically by the processor at the end of the day.
Note: This functionality is only available for the restaurant industry in the United States and the processors currently supporting this functionality are TSYS and VANTIV.
The tip adjustment method does not rely on a card reader and is therefore a separate method that must be initialized with a shared secret. The function is defined in the file HapiRemoteService.h</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>tipAmount</code> <span class="badge badge--primary">Required</span>  <br><em>NSInteger</em></td><td>Tip amount added to the original (base) transaction amount - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)</td></tr><tr><td><code>transaction</code> <span class="badge badge--primary">Required</span> <br><em>NSString</em></td><td>TransactionID (GUID) of the original sale transaction to be adjusted</td></tr></tbody></table><p><strong>Code example</strong></p><div class="codeBlockContainer_K1bP language-objectivec"><div class="codeBlockContent_hGly objectivec"><pre tabindex="0" class="prism-code language-objectivec codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//First, you need to include the following dependency</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">&quot;HapiRemoteService.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Second, the shared secret needs to be initialized</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NSString</span><span class="token operator">*</span><span class="token plain"> shared_secret </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;0102030405060708091011121314151617181920212223242526272829303132&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">BOOL result </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">setupHandpointApiConnection</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">shared_secret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Third, you need to retrieve the unique transaction id of the original sale transaction you want to adjust. The below GUID is only an example and will result in a decline from the host if used for tip adjustment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NSString</span><span class="token operator">*</span><span class="token plain"> transaction </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">@&quot;d50af540-a1b0-11e6-85e6-07b2a5f091ec&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">//Fourth, let&#x27;s tip adjust a transaction for $10.00!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">IBAction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">tipAdjustment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">UIButton</span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> sender</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    BOOL result </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">tipAdjustment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">transaction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">^</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">TipAdjustmentStatus status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">status </span><span class="token operator">==</span><span class="token plain"> TipAdjustmentAuthorised</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">//Successfully adjusted!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">status </span><span class="token operator">==</span><span class="token plain"> TipAdjustmentDeclined</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">//Declined!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">status </span><span class="token operator">==</span><span class="token plain"> TipAdjustmentFailed</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token comment" style="color:rgb(98, 114, 164)">//Timeout!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>Returns</strong></p><p>Result of the tip adjustment transaction, possible values :</p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><strong>status</strong></td><td>- <strong>TipAdjustmentAuthorised</strong> (tip adjustment approved by the processor) <br>- <strong>TipAdjustmentFailed</strong> (system error or timeout) <br> - <strong>TipAdjustmentDeclined</strong> (tip adjustment declined by the processor)</td></tr></tbody></table><p>If two tip adjustments are sent for the same sale transaction, the second tip adjustment will override the first one. In case the transaction fails (not declined) we recommend that you prompt the user of the POS to retry the adjustment.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="10">Tokenize Card<a aria-hidden="true" class="hash-link" href="#10" title="Direct link to heading">â€‹</a></h2><p><code>tokenizeCard</code></p><p>Initiates a card-tokenization operation to the card reader (not available for all acquirers, please check with Handpoint to know if tokenization is supported for your acquirer of choice).</p><p><strong>Parameters</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>reference</code> <span class="badge badge--primary">Required</span>  <br><em>NSString</em></td><td>string for customer reference</td></tr></tbody></table><p><strong>Code example</strong></p><div class="codeBlockContainer_K1bP language-objectivec"><div class="codeBlockContent_hGly objectivec"><pre tabindex="0" class="prism-code language-objectivec codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//Initiates a card tokenization operation.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">heftClient tokenizeCard</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong> Events invoked</strong></p><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#14"><strong>responseStatus</strong></a></p><p>Invoked while during transaction with different statuses from card reader</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#15"><strong>responseError</strong></a></p><p>Invoked to inform when an error response happens.</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#17"><strong>requestSignature</strong></a></p><p>Invoked if card verification requires signature.</p><hr><p><a href="/doc/ios/iOS SDK 4.0.0/iosevents#44"><strong>responseRecoveredTransactionStatus</strong></a></p><p>Invoked when the card reader finishes processing the transaction</p><hr><p><strong>Returns</strong></p><table><thead><tr><th>Parameter</th><th>Notes</th></tr></thead><tbody><tr><td><code>Boolean</code></td><td><code>YES</code> if operation starts successfully.</td></tr></tbody></table></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/doc/ios/iOS SDK 4.0.0/iossdkprocessing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->SDK integration example</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/doc/ios/iOS SDK 4.0.0/iosdevicemanagement"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Device management<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#2" class="table-of-contents__link toc-highlight">Sale</a></li><li><a href="#3" class="table-of-contents__link toc-highlight">Sale Reversal</a></li><li><a href="#4" class="table-of-contents__link toc-highlight">Sale And Tokenize Card</a></li><li><a href="#5" class="table-of-contents__link toc-highlight">Refund</a></li><li><a href="#6" class="table-of-contents__link toc-highlight">Refund reversal</a></li><li><a href="#7" class="table-of-contents__link toc-highlight">Accept signature</a></li><li><a href="#8" class="table-of-contents__link toc-highlight">Retrieve Pending Transaction</a></li><li><a href="#9" class="table-of-contents__link toc-highlight">Tip Adjustment</a></li><li><a href="#10" class="table-of-contents__link toc-highlight">Tokenize Card</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs Legacy</div><ul class="footer__items"><li class="footer__item"><a href="https://www.handpoint.com/docs/device/Basics/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://www.handpoint.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Handpoint<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/handpoint" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/handpointltd?lang=en" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Get our Apps</div><ul class="footer__items"><li class="footer__item"><a href="https://play.google.com/store/apps/details?id=com.handpoint.hipos&amp;hl=en&amp;gl=US&amp;pcampaignid=pcampaignidMKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Get it on Google Play<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://apps.apple.com/us/app/handpoint/id1450546788?itsct=apps_box_link&amp;itscg=30200" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Download on the App Store<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://status.handpoint.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Handpoint Status Page<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://handpoint.atlassian.net/wiki/spaces/PD/overview?homepageId=5898250" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>FAQ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://handpoint.us6.list-manage.com/subscribe?u=4d9dff9e7edb7e57a67a7b252&amp;id=0a2179241e" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Subscribe to the Handpoint Newsletter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/handpoint" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.handpoint.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="https://handpoint.imgix.net/handpoint-logo-w.png?w=150" alt="Handpoint Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="https://handpoint.imgix.net/handpoint-logo-w.png?w=150" alt="Handpoint Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2021 Handpoint</div></div></div></footer></div>
<script src="/doc/assets/js/runtime~main.7507c79a.js"></script>
<script src="/doc/assets/js/main.4245f262.js"></script>
</body>
</html>