---
sidebar_position: 8
id: expressjavascriptmethods
---


# Javascript Methods


## initHapiExpress

Creates an instance of Hapi.

**Parameters**

| Parameter      | Notes |
| ----------- | ----------- |
| `client_id` <span class="badge badge--primary">Required</span>  <br />*string*     | A unique identifier of your system to group operations.     |
| `ssk` <span class="badge badge--primary">Required</span>    <br />*string*   | The shared secret key to authorize the operations.      |
| `auto_return` <span class="badge badge--primary">Required</span>  <br />*Boolean*| If true, Handpoint Express automatically switches back to your app following a short timeout after the transaction completes.     |

**Code Example**
```jsx
initHapiExpress('hapi-tests', '010203040050606', false);
   ```

**Returns**

| Parameter      | Notes |
| ----------- | ----------- |
| **object**|The Hapi interface object with functions to generate URLs for sale, refund and reversals.     |   


## openURL

Opens a URL that is passed. This is a helper method. URLs generated by the UrlFor... methods can also be opened just like a normal link.

**Parameters**

| Parameter      | Notes |
| ----------- | ----------- |
| `url` <span class="badge badge--primary">Required</span>  <br />*string*    | Url to open  |

**Code Example**
```jsx
Hapi.openURL('handpoint://express/v1/?data=')
   ```

## urlForRefund

Constructs the URL needed for opening the express app and starting a refund operation.

| Parameter      | Notes |
| ----------- | ----------- |
| `amount` <span class="badge badge--primary">Required</span>   <br />*integer*   | Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)     |
| `currency` <span class="badge badge--primary">Required</span>   <br />*string*    | Currency of the charge      |
| `extra_parameters` <span class="badge badge--primary">Required</span> <br />*object*  | An object containing additional sale parameters, fx. Key: "Budget", Value: "03"     |
| `callbacl_url` <span class="badge badge--primary">Required</span>  <br />*string*  | The URL that Handpoint Express will send its response to.    |

**Code Example**
```jsx
Hapi.urlForRefund('1000', 'USD', {'extra-value':'some info'}, 'http://callback.com');
   ```

**Returns**

| Parameter      | Notes |
| ----------- | ----------- |
| **String**|A complete constructed and encoded URL string that includes the data for opening the express app and performing the operation.|   

## urlForRefundReversal

Constructs the URL needed for opening the express app and reverting a refund transaction. This operation tries to void an earlier refund transaction, therefor the transaction GUID is needed for the transaction to be voided.

| Parameter      | Notes |
| ----------- | ----------- |
| `amount` <span class="badge badge--primary">Required</span>    <br />*integer*    | Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)     |
| `currency` <span class="badge badge--primary">Required</span>  <br />*string*       | Currency of the charge      |
| `originalTransactionID` <span class="badge badge--primary">Required</span>  <br />*string*  | The transaction id number for the transactino to void/revert     |
| `extra_parameters` <span class="badge badge--primary">Required</span>  <br />*object*  | An object containing additional sale parameters, fx. Key: "Budget", Value: "03"    |
| `callbacl_url` <span class="badge badge--primary">Required</span> <br />*string*   |  The URL that Handpoint Express will send its response to.    |

**Code Example**
```jsx
Hapi.urlForRefundReversal('1000', 'USD', '1234' {'extra-value':'some info'}, 'http://callback.com');
   ```

**Returns**

| Parameter      | Notes |
| ----------- | ----------- |
| **String**|A complete constructed and encoded URL string that includes the data for opening the express app and performing the operation.| 

## urlForSale

Constructs the URL needed for opening the express app and starting a sale.

| Parameter      | Notes |
| ----------- | ----------- |
| `amount` <span class="badge badge--primary">Required</span>   <br />*integer*     | Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)     |
| `currency` <span class="badge badge--primary">Required</span>    <br />*string*     | Currency of the charge      |
| `extra_parameters` <span class="badge badge--primary">Required</span> <br />*object*   | An object containing additional sale parameters, fx. Key: "Budget", Value: "03"     |
| `callbacl_url` <span class="badge badge--primary">Required</span> <br />*string*   |  The URL that Handpoint Express will send its response to.    |

**Code Example**
```jsx
Hapi.urlForSale('1000', 'USD', {'extra-value':'some info'}, 'http://callback.com');
   ```

**Returns**

| Parameter      | Notes |
| ----------- | ----------- |
| **String**|A complete constructed and encoded URL string that includes the data for opening the express app and performing the operation.| 

## urlForSaleAndTokenizeCard

Constructs the URL needed for opening the express app and starting a saleAndTokenizeCard

| Parameter      | Notes |
| ----------- | ----------- |
| `amount` <span class="badge badge--primary">Required</span>    <br />*integer*    | Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)     |
| `currency` <span class="badge badge--primary">Required</span>   <br />*string*      | Currency of the charge      |
| `extra_parameters` <span class="badge badge--primary">Required</span>  <br />*object*  | An object containing additional sale parameters, fx. Key: "Budget", Value: "03"     |
| `callbacl_url` <span class="badge badge--primary">Required</span> <br />*string*   |  The URL that Handpoint Express will send its response to.    |

**Code Example**
```jsx
Hapi.urlForSaleAndTokenizeCard('1000', 'USD', {'extra-value':'some info'}, 'http://callback.com');
   ```

**Returns**

| Parameter      | Notes |
| ----------- | ----------- |
| **String**|A complete constructed and encoded URL string that includes the data for opening the express app and performing the operation| 

## urlForSaleReversal

Constructs the URL needed for opening the express app and reverting a sale transaction. This operation tries to void an earlier sale transaction, therefor the transaction GUID is needed for the transaction to be voided.

| Parameter      | Notes |
| ----------- | ----------- |
| `amount` <span class="badge badge--primary">Required</span>    <br />*integer*    | Amount of funds to charge - in the minor unit of currency (f.ex. 1000 is 10.00 GBP)     |
| `currency` <span class="badge badge--primary">Required</span>    <br />*string*     | Currency of the charge      |
| `extra_parameters` <span class="badge badge--primary">Required</span> <br />*object*   | An object containing additional sale parameters, fx. Key: "Budget", Value: "03"     |
| `originalTransactionID` <span class="badge badge--primary">Required</span>  <br />*string*  | The transaction id number for the transactino to void/revert     |
| `callbacl_url` <span class="badge badge--primary">Required</span> <br />*string*   |  The URL that Handpoint Express will send its response to.    |

**Code Example**
```jsx
Hapi.urlForSaleReversal('1000', 'USD', '1234' {'extra-value':'some info'}, 'http://callback.com');
   ```

**Returns**

| Parameter      | Notes |
| ----------- | ----------- |
| **String**|A complete constructed and encoded URL string that includes the data for opening the express app and performing the operation.| 


## urlForScanner

Constructs the URL needed for opening the express app and starting scanning.

| Parameter      | Notes |
| ----------- | ----------- |
| `multiScan` <span class="badge badge--primary">Required</span>   <br />*boolean*     | True if you want the scanner to stay on to capture multiple codes. False to shut off after the first succesful scan, timeout or cancel. Default is False     |
| `autoScan` <span class="badge badge--primary">Required</span>    <br />*boolean*     | True if you want the scanner to function automatically without the press of a button. Default is False.      |
| `resultsGrouped` <span class="badge badge--primary">Required</span> <br />*boolean*   | True if you want the results of the scan to come all grouped when the scanner is turned off. Otherwise the device will send an event per each code scanned. Default is True.    |
| `timeout` <span class="badge badge--primary">Required</span>  <br />*integer*  | The amount of seconds after which the scanner, if left idle, turns itself off. Default is 0.    |
| `extra_parameters` <span class="badge badge--primary">Required</span>  <br />*object*  | An object containing additional sale parameters, fx. Key: "Budget", Value: "03"    |
| `callback_url` <span class="badge badge--primary">Required</span>  <br />*string*  |  The URL that Handpoint Express will send its response to.    |

**Code Example**
```jsx
Hapi.urlForScanner(false, false, true, 0, {'extra-value':'some info'}, 'http://callback.com');
   ```

**Returns**

| Parameter      | Notes |
| ----------- | ----------- |
| **String**|A complete constructed and encoded URL string that includes the data for opening the express app and performing the operation.| 


## urlForTokenizeCard

Constructs the URL needed for opening the express app and starting a tokenizeCard.

| Parameter      | Notes |
| ----------- | ----------- |
| `extra_parameters` <span class="badge badge--primary">Required</span>   <br />*object*   | An object containing additional sale parameters, fx. Key: "Budget", Value: "03"     |
| `callback_url` <span class="badge badge--primary">Required</span>   <br />*string*    |  The URL that Handpoint Express will send its response to.      |

**Code Example**
```jsx
Hapi.urlForTokenizeCard({'extra-value':'some info'}, 'http://callback.com');
   ```

**Returns**

| Parameter      | Notes |
| ----------- | ----------- |
| **String**|A complete constructed and encoded URL string that includes the data for opening the express app and performing the operation.| 
